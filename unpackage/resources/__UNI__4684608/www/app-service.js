(this["webpackJsonp"]=this["webpackJsonp"]||[]).push([["app-service"],{"003a":function(e,t,n){"use strict";n.r(t);var o=n("5d0e"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"004c":function(e,t,n){"use strict";n.r(t);var o=n("83d5"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"013b":function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",{staticClass:e._$s(0,"sc","flex-column-center"),attrs:{_i:0}},[n("view",{staticClass:e._$s(1,"sc","gui-margin-top-large gui-flex gui-rows gui-justify-content-center"),attrs:{_i:1}},[n("canvas",{attrs:{id:"canvas",_i:2}})]),n("view",{staticClass:e._$s(3,"sc","savebtn"),attrs:{_i:3},on:{click:e.saveQrcode}})])},i=[]},"0148":function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",{staticClass:e._$s(0,"sc","uqrcode"),style:e._$s(0,"s",{width:e.size+"px",height:e.size+"px"}),attrs:{_i:0}},[e._$s(1,"i",!e.isReload)?[e._$s(2,"i","canvas"===e.mode)?[n("canvas",{staticClass:e._$s(3,"sc","uqrcode-canvas"),style:e._$s(3,"s",{width:e.size+"px",height:e.size+"px"}),attrs:{id:e._$s(3,"a-id",e.id),"canvas-id":e._$s(3,"a-canvas-id",e.id),_i:3}})]:e._$s(4,"e","view"===e.mode)?n("view",{staticClass:e._$s(4,"sc","uqrcode-view"),style:e._$s(4,"s",{width:e.size+"px",height:e.size+"px",padding:e.margin+"px","background-color":e.backgroundColor}),attrs:{_i:4}},e._l(e._$s(5,"f",{forItems:e.modules.length}),(function(t,o,a,i){return n("view",{key:e._$s(5,"f",{forIndex:a,key:o}),staticClass:e._$s("5-"+i,"sc","uqrcode-view-row"),attrs:{_i:"5-"+i}},e._l(e._$s("6-"+i,"f",{forItems:e.modules.length}),(function(t,a,s,r){return n("view",{key:e._$s("6-"+i,"f",{forIndex:s,key:a}),staticClass:e._$s("6-"+i+"-"+r,"sc","uqrcode-view-col"),style:e._$s("6-"+i+"-"+r,"s",{width:e.tileSize+"px",height:e.tileSize+"px","background-color":e.modules[o][a]?e.foregroundColor:e.backgroundColor}),attrs:{_i:"6-"+i+"-"+r}})})),0)})),0):e._e()]:e._e()],2)},i=[]},"030f":function(e,t,n){"use strict";n.r(t);var o=n("cb8b"),a=n("2e44");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},"033e":function(e,t,n){"use strict";n.r(t);var o=n("2b78"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"0398":function(e,t,n){"use strict";n.r(t);var o=n("1bfc"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"043f":function(e,t,n){(function(t){e.exports={apiBaseUrl:"http://132.232.31.196/nft-api/",debug:!0,localTokenKeyName:"token",expiredTime:3600,postHeaderDefault:"application/json",getToken:function(e,n,o){uni.request({url:"http://132.232.31.196/nft-api/weChat/wxInfo",data:o,method:"POST",header:{"content-type":"application/json"},dataType:"json",success:function(o){var a=o.data;t("log",o," at Grace/js/request/config.js:40"),"C0"==a.code?e(a.token):n()},fail:function(e){t("log",e," at Grace/js/request/config.js:49"),n()}})}}}).call(this,n("0de9")["default"])},"0582":function(e,t,n){"use strict";(function(t,n,o){!function(t,n){e.exports=n()}(0,(function(){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function g(e,t,n){return(g=p()?Reflect.construct:function(e,t,n){var o=[null];o.push.apply(o,t);var a=new(Function.bind.apply(e,o));return n&&f(a,n.prototype),a}).apply(null,arguments)}function h(e){var t="function"==typeof Map?new Map:void 0;return(h=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return g(e,arguments,d(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),f(o,e)})(e)}function m(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_(e):t}function y(e){return function(){var t,n=d(e);if(p()){var o=d(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return v(this,t)}}function M(e,t){return w(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],o=!0,a=!1,i=void 0;try{for(var s,r=e[Symbol.iterator]();!(o=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);o=!0);}catch(d){a=!0,i=d}finally{try{o||null==r.return||r.return()}finally{if(a)throw i}}return n}}(e,t)||b(e,t)||k()}function C(e){return function(e){if(Array.isArray(e))return T(e)}(e)||I(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e){if(Array.isArray(e))return e}function I(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function b(e,t){if(e){if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function k(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function S(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=b(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a,i=!0,s=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==o.return||o.return()}finally{if(s)throw a}}}}var D={SDK_READY:"sdkStateReady",SDK_NOT_READY:"sdkStateNotReady",SDK_DESTROY:"sdkDestroy",MESSAGE_RECEIVED:"onMessageReceived",MESSAGE_MODIFIED:"onMessageModified",MESSAGE_REVOKED:"onMessageRevoked",MESSAGE_READ_BY_PEER:"onMessageReadByPeer",CONVERSATION_LIST_UPDATED:"onConversationListUpdated",GROUP_LIST_UPDATED:"onGroupListUpdated",GROUP_SYSTEM_NOTICE_RECEIVED:"receiveGroupSystemNotice",GROUP_ATTRIBUTES_UPDATED:"groupAttributesUpdated",PROFILE_UPDATED:"onProfileUpdated",BLACKLIST_UPDATED:"blacklistUpdated",FRIEND_LIST_UPDATED:"onFriendListUpdated",FRIEND_GROUP_LIST_UPDATED:"onFriendGroupListUpdated",FRIEND_APPLICATION_LIST_UPDATED:"onFriendApplicationListUpdated",KICKED_OUT:"kickedOut",ERROR:"error",NET_STATE_CHANGE:"netStateChange",SDK_RELOAD:"sdkReload"},E={MSG_TEXT:"TIMTextElem",MSG_IMAGE:"TIMImageElem",MSG_SOUND:"TIMSoundElem",MSG_AUDIO:"TIMSoundElem",MSG_FILE:"TIMFileElem",MSG_FACE:"TIMFaceElem",MSG_VIDEO:"TIMVideoFileElem",MSG_GEO:"TIMLocationElem",MSG_LOCATION:"TIMLocationElem",MSG_GRP_TIP:"TIMGroupTipElem",MSG_GRP_SYS_NOTICE:"TIMGroupSystemNoticeElem",MSG_CUSTOM:"TIMCustomElem",MSG_MERGER:"TIMRelayElem",MSG_PRIORITY_HIGH:"High",MSG_PRIORITY_NORMAL:"Normal",MSG_PRIORITY_LOW:"Low",MSG_PRIORITY_LOWEST:"Lowest",CONV_C2C:"C2C",CONV_GROUP:"GROUP",CONV_SYSTEM:"@TIM#SYSTEM",CONV_AT_ME:1,CONV_AT_ALL:2,CONV_AT_ALL_AT_ME:3,GRP_PRIVATE:"Private",GRP_WORK:"Private",GRP_PUBLIC:"Public",GRP_CHATROOM:"ChatRoom",GRP_MEETING:"ChatRoom",GRP_AVCHATROOM:"AVChatRoom",GRP_COMMUNITY:"Community",GRP_MBR_ROLE_OWNER:"Owner",GRP_MBR_ROLE_ADMIN:"Admin",GRP_MBR_ROLE_MEMBER:"Member",GRP_MBR_ROLE_CUSTOM:"Custom",GRP_TIP_MBR_JOIN:1,GRP_TIP_MBR_QUIT:2,GRP_TIP_MBR_KICKED_OUT:3,GRP_TIP_MBR_SET_ADMIN:4,GRP_TIP_MBR_CANCELED_ADMIN:5,GRP_TIP_GRP_PROFILE_UPDATED:6,GRP_TIP_MBR_PROFILE_UPDATED:7,MSG_REMIND_ACPT_AND_NOTE:"AcceptAndNotify",MSG_REMIND_ACPT_NOT_NOTE:"AcceptNotNotify",MSG_REMIND_DISCARD:"Discard",GENDER_UNKNOWN:"Gender_Type_Unknown",GENDER_FEMALE:"Gender_Type_Female",GENDER_MALE:"Gender_Type_Male",KICKED_OUT_MULT_ACCOUNT:"multipleAccount",KICKED_OUT_MULT_DEVICE:"multipleDevice",KICKED_OUT_USERSIG_EXPIRED:"userSigExpired",ALLOW_TYPE_ALLOW_ANY:"AllowType_Type_AllowAny",ALLOW_TYPE_NEED_CONFIRM:"AllowType_Type_NeedConfirm",ALLOW_TYPE_DENY_ANY:"AllowType_Type_DenyAny",FORBID_TYPE_NONE:"AdminForbid_Type_None",FORBID_TYPE_SEND_OUT:"AdminForbid_Type_SendOut",JOIN_OPTIONS_FREE_ACCESS:"FreeAccess",JOIN_OPTIONS_NEED_PERMISSION:"NeedPermission",JOIN_OPTIONS_DISABLE_APPLY:"DisableApply",JOIN_STATUS_SUCCESS:"JoinedSuccess",JOIN_STATUS_ALREADY_IN_GROUP:"AlreadyInGroup",JOIN_STATUS_WAIT_APPROVAL:"WaitAdminApproval",GRP_PROFILE_OWNER_ID:"ownerID",GRP_PROFILE_CREATE_TIME:"createTime",GRP_PROFILE_LAST_INFO_TIME:"lastInfoTime",GRP_PROFILE_MEMBER_NUM:"memberNum",GRP_PROFILE_MAX_MEMBER_NUM:"maxMemberNum",GRP_PROFILE_JOIN_OPTION:"joinOption",GRP_PROFILE_INTRODUCTION:"introduction",GRP_PROFILE_NOTIFICATION:"notification",GRP_PROFILE_MUTE_ALL_MBRS:"muteAllMembers",SNS_ADD_TYPE_SINGLE:"Add_Type_Single",SNS_ADD_TYPE_BOTH:"Add_Type_Both",SNS_DELETE_TYPE_SINGLE:"Delete_Type_Single",SNS_DELETE_TYPE_BOTH:"Delete_Type_Both",SNS_APPLICATION_TYPE_BOTH:"Pendency_Type_Both",SNS_APPLICATION_SENT_TO_ME:"Pendency_Type_ComeIn",SNS_APPLICATION_SENT_BY_ME:"Pendency_Type_SendOut",SNS_APPLICATION_AGREE:"Response_Action_Agree",SNS_APPLICATION_AGREE_AND_ADD:"Response_Action_AgreeAndAdd",SNS_CHECK_TYPE_BOTH:"CheckResult_Type_Both",SNS_CHECK_TYPE_SINGLE:"CheckResult_Type_Single",SNS_TYPE_NO_RELATION:"CheckResult_Type_NoRelation",SNS_TYPE_A_WITH_B:"CheckResult_Type_AWithB",SNS_TYPE_B_WITH_A:"CheckResult_Type_BWithA",SNS_TYPE_BOTH_WAY:"CheckResult_Type_BothWay",NET_STATE_CONNECTED:"connected",NET_STATE_CONNECTING:"connecting",NET_STATE_DISCONNECTED:"disconnected",MSG_AT_ALL:"__kImSDK_MesssageAtALL__",READ_ALL_C2C_MSG:"readAllC2CMessage",READ_ALL_GROUP_MSG:"readAllGroupMessage",READ_ALL_MSG:"readAllMessage"},A=function(){function e(){a(this,e),this.cache=[],this.options=null}return s(e,[{key:"use",value:function(e){if("function"!=typeof e)throw"middleware must be a function";return this.cache.push(e),this}},{key:"next",value:function(e){if(this.middlewares&&this.middlewares.length>0)return this.middlewares.shift().call(this,this.options,this.next.bind(this))}},{key:"run",value:function(e){return this.middlewares=this.cache.map((function(e){return e})),this.options=e,this.next()}}]),e}(),N="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{};function O(e,t){return e(t={exports:{}},t.exports),t.exports}var P=O((function(e,t){var n,o,a,i,s,r,c,u,l,d,f,p,g,h,m,_,v,y;e.exports=(n="function"==typeof Promise,o="object"==typeof self?self:N,a="undefined"!=typeof Symbol,i="undefined"!=typeof Map,s="undefined"!=typeof Set,r="undefined"!=typeof WeakMap,c="undefined"!=typeof WeakSet,u="undefined"!=typeof DataView,l=a&&void 0!==Symbol.iterator,d=a&&void 0!==Symbol.toStringTag,f=s&&"function"==typeof Set.prototype.entries,p=i&&"function"==typeof Map.prototype.entries,g=f&&Object.getPrototypeOf((new Set).entries()),h=p&&Object.getPrototypeOf((new Map).entries()),m=l&&"function"==typeof Array.prototype[Symbol.iterator],_=m&&Object.getPrototypeOf([][Symbol.iterator]()),v=l&&"function"==typeof String.prototype[Symbol.iterator],y=v&&Object.getPrototypeOf(""[Symbol.iterator]()),function(e){var t=typeof e;if("object"!==t)return t;if(null===e)return"null";if(e===o)return"global";if(Array.isArray(e)&&(!1===d||!(Symbol.toStringTag in e)))return"Array";if("object"==typeof window&&null!==window){if("object"==typeof window.location&&e===window.location)return"Location";if("object"==typeof window.document&&e===window.document)return"Document";if("object"==typeof window.navigator){if("object"==typeof window.navigator.mimeTypes&&e===window.navigator.mimeTypes)return"MimeTypeArray";if("object"==typeof window.navigator.plugins&&e===window.navigator.plugins)return"PluginArray"}if(("function"==typeof window.HTMLElement||"object"==typeof window.HTMLElement)&&e instanceof window.HTMLElement){if("BLOCKQUOTE"===e.tagName)return"HTMLQuoteElement";if("TD"===e.tagName)return"HTMLTableDataCellElement";if("TH"===e.tagName)return"HTMLTableHeaderCellElement"}}var a=d&&e[Symbol.toStringTag];if("string"==typeof a)return a;var l=Object.getPrototypeOf(e);return l===RegExp.prototype?"RegExp":l===Date.prototype?"Date":n&&l===Promise.prototype?"Promise":s&&l===Set.prototype?"Set":i&&l===Map.prototype?"Map":c&&l===WeakSet.prototype?"WeakSet":r&&l===WeakMap.prototype?"WeakMap":u&&l===DataView.prototype?"DataView":i&&l===h?"Map Iterator":s&&l===g?"Set Iterator":m&&l===_?"Array Iterator":v&&l===y?"String Iterator":null===l?"Object":Object.prototype.toString.call(e).slice(8,-1)})})),L=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;a(this,e),this.high=t,this.low=n}return s(e,[{key:"equal",value:function(e){return null!==e&&this.low===e.low&&this.high===e.high}},{key:"toString",value:function(){var e=Number(this.high).toString(16),t=Number(this.low).toString(16);if(t.length<8)for(var n=8-t.length;n;)t="0"+t,n--;return e+t}}]),e}(),R={TEST:{CHINA:{DEFAULT:"wss://wss-dev.tim.qq.com"},OVERSEA:{DEFAULT:"wss://wss-dev.tim.qq.com"},SINGAPORE:{DEFAULT:"wss://wsssgp-dev.im.qcloud.com"},KOREA:{DEFAULT:"wss://wsskr-dev.im.qcloud.com"},GERMANY:{DEFAULT:"wss://wssger-dev.im.qcloud.com"},IND:{DEFAULT:"wss://wssind-dev.im.qcloud.com"}},PRODUCTION:{CHINA:{DEFAULT:"wss://wss.im.qcloud.com",BACKUP:"wss://wss.tim.qq.com",STAT:"https://api.im.qcloud.com"},OVERSEA:{DEFAULT:"wss://wss.im.qcloud.com",STAT:"https://api.im.qcloud.com"},SINGAPORE:{DEFAULT:"wss://wsssgp.im.qcloud.com",STAT:"https://apisgp.im.qcloud.com"},KOREA:{DEFAULT:"wss://wsskr.im.qcloud.com",STAT:"https://apiskr.im.qcloud.com"},GERMANY:{DEFAULT:"wss://wssger.im.qcloud.com",STAT:"https://apiger.im.qcloud.com"},IND:{DEFAULT:"wss://wssind.im.qcloud.com",STAT:"https://apiind.im.qcloud.com"}}},x={WEB:7,WX_MP:8,QQ_MP:9,TT_MP:10,BAIDU_MP:11,ALI_MP:12,UNI_NATIVE_APP:15},G="1.7.3",$=537048168,U="CHINA",F="OVERSEA",B="SINGAPORE",j="KOREA",q="GERMANY",H="IND",V={HOST:{CURRENT:{DEFAULT:"wss://wss.im.qcloud.com",STAT:"https://api.im.qcloud.com"},setCurrent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U;this.CURRENT=R.PRODUCTION[e]}},NAME:{OPEN_IM:"openim",GROUP:"group_open_http_svc",GROUP_COMMUNITY:"million_group_open_http_svc",GROUP_ATTR:"group_open_attr_http_svc",FRIEND:"sns",PROFILE:"profile",RECENT_CONTACT:"recentcontact",PIC:"openpic",BIG_GROUP_NO_AUTH:"group_open_http_noauth_svc",BIG_GROUP_LONG_POLLING:"group_open_long_polling_http_svc",BIG_GROUP_LONG_POLLING_NO_AUTH:"group_open_long_polling_http_noauth_svc",IM_OPEN_STAT:"imopenstat",WEB_IM:"webim",IM_COS_SIGN:"im_cos_sign_svr",CUSTOM_UPLOAD:"im_cos_msg",HEARTBEAT:"heartbeat",IM_OPEN_PUSH:"im_open_push",IM_OPEN_STATUS:"im_open_status",IM_LONG_MESSAGE:"im_long_msg",IM_CONFIG_MANAGER:"im_sdk_config_mgr",STAT_SERVICE:"StatSvc",OVERLOAD_PUSH:"OverLoadPush"},CMD:{ACCESS_LAYER:"accesslayer",LOGIN:"wslogin",LOGOUT_LONG_POLL:"longpollinglogout",LOGOUT:"wslogout",HELLO:"wshello",PORTRAIT_GET:"portrait_get_all",PORTRAIT_SET:"portrait_set",GET_LONG_POLL_ID:"getlongpollingid",LONG_POLL:"longpolling",AVCHATROOM_LONG_POLL:"get_msg",ADD_FRIEND:"friend_add",UPDATE_FRIEND:"friend_update",GET_FRIEND_LIST:"friend_get",GET_FRIEND_PROFILE:"friend_get_list",DELETE_FRIEND:"friend_delete",CHECK_FRIEND:"friend_check",GET_FRIEND_GROUP_LIST:"group_get",RESPOND_FRIEND_APPLICATION:"friend_response",GET_FRIEND_APPLICATION_LIST:"pendency_get",DELETE_FRIEND_APPLICATION:"pendency_delete",REPORT_FRIEND_APPLICATION:"pendency_report",GET_GROUP_APPLICATION:"get_pendency",CREATE_FRIEND_GROUP:"group_add",DELETE_FRIEND_GROUP:"group_delete",UPDATE_FRIEND_GROUP:"group_update",GET_BLACKLIST:"black_list_get",ADD_BLACKLIST:"black_list_add",DELETE_BLACKLIST:"black_list_delete",CREATE_GROUP:"create_group",GET_JOINED_GROUPS:"get_joined_group_list",SET_GROUP_ATTRIBUTES:"set_group_attr",MODIFY_GROUP_ATTRIBUTES:"modify_group_attr",DELETE_GROUP_ATTRIBUTES:"delete_group_attr",CLEAR_GROUP_ATTRIBUTES:"clear_group_attr",GET_GROUP_ATTRIBUTES:"get_group_attr",SEND_MESSAGE:"sendmsg",REVOKE_C2C_MESSAGE:"msgwithdraw",DELETE_C2C_MESSAGE:"delete_c2c_msg_ramble",SEND_GROUP_MESSAGE:"send_group_msg",REVOKE_GROUP_MESSAGE:"group_msg_recall",DELETE_GROUP_MESSAGE:"delete_group_ramble_msg_by_seq",GET_GROUP_INFO:"get_group_self_member_info",GET_GROUP_MEMBER_INFO:"get_specified_group_member_info",GET_GROUP_MEMBER_LIST:"get_group_member_info",QUIT_GROUP:"quit_group",CHANGE_GROUP_OWNER:"change_group_owner",DESTROY_GROUP:"destroy_group",ADD_GROUP_MEMBER:"add_group_member",DELETE_GROUP_MEMBER:"delete_group_member",SEARCH_GROUP_BY_ID:"get_group_public_info",APPLY_JOIN_GROUP:"apply_join_group",HANDLE_APPLY_JOIN_GROUP:"handle_apply_join_group",HANDLE_GROUP_INVITATION:"handle_invite_join_group",MODIFY_GROUP_INFO:"modify_group_base_info",MODIFY_GROUP_MEMBER_INFO:"modify_group_member_info",DELETE_GROUP_SYSTEM_MESSAGE:"deletemsg",DELETE_GROUP_AT_TIPS:"deletemsg",GET_CONVERSATION_LIST:"get",PAGING_GET_CONVERSATION_LIST:"page_get",DELETE_CONVERSATION:"delete",PIN_CONVERSATION:"top",GET_MESSAGES:"getmsg",GET_C2C_ROAM_MESSAGES:"getroammsg",SET_C2C_PEER_MUTE_NOTIFICATIONS:"set_c2c_peer_mute_notifications",GET_C2C_PEER_MUTE_NOTIFICATIONS:"get_c2c_peer_mute_notifications",GET_GROUP_ROAM_MESSAGES:"group_msg_get",SET_C2C_MESSAGE_READ:"msgreaded",GET_PEER_READ_TIME:"get_peer_read_time",SET_GROUP_MESSAGE_READ:"msg_read_report",FILE_READ_AND_WRITE_AUTHKEY:"authkey",FILE_UPLOAD:"pic_up",COS_SIGN:"cos",COS_PRE_SIG:"pre_sig",VIDEO_COVER:"video_cover",TIM_WEB_REPORT_V2:"tim_web_report_v2",BIG_DATA_HALLWAY_AUTH_KEY:"authkey",GET_ONLINE_MEMBER_NUM:"get_online_member_num",ALIVE:"alive",MESSAGE_PUSH:"msg_push",MULTI_MESSAGE_PUSH:"multi_msg_push_ws",MESSAGE_PUSH_ACK:"ws_msg_push_ack",STATUS_FORCEOFFLINE:"stat_forceoffline",DOWNLOAD_MERGER_MESSAGE:"get_relay_json_msg",UPLOAD_MERGER_MESSAGE:"save_relay_json_msg",FETCH_CLOUD_CONTROL_CONFIG:"fetch_config",PUSHED_CLOUD_CONTROL_CONFIG:"push_configv2",FETCH_COMMERCIAL_CONFIG:"fetch_imsdk_purchase_bitsv2",PUSHED_COMMERCIAL_CONFIG:"push_imsdk_purchase_bitsv2",KICK_OTHER:"KickOther",OVERLOAD_NOTIFY:"notify2",SET_ALL_MESSAGE_READ:"read_all_unread_msg"},CHANNEL:{SOCKET:1,XHR:2,AUTO:0},NAME_VERSION:{openim:"v4",group_open_http_svc:"v4",sns:"v4",profile:"v4",recentcontact:"v4",openpic:"v4",group_open_http_noauth_svc:"v4",group_open_long_polling_http_svc:"v4",group_open_long_polling_http_noauth_svc:"v4",imopenstat:"v4",im_cos_sign_svr:"v4",im_cos_msg:"v4",webim:"v4",im_open_push:"v4",im_open_status:"v4"}},K={SEARCH_MSG:new L(0,Math.pow(2,0)).toString(),SEARCH_GRP_SNS:new L(0,Math.pow(2,1)).toString(),AVCHATROOM_HISTORY_MSG:new L(0,Math.pow(2,2)).toString(),GRP_COMMUNITY:new L(0,Math.pow(2,3)).toString(),MSG_TO_SPECIFIED_GRP_MBR:new L(0,Math.pow(2,4)).toString()};V.HOST.setCurrent(U);var z,W,Y,J,X="undefined"!=typeof n&&"function"==typeof n.getSystemInfoSync&&Boolean(n.getSystemInfoSync().fontSizeSetting),Q="undefined"!=typeof qq&&"function"==typeof qq.getSystemInfoSync&&Boolean(qq.getSystemInfoSync().fontSizeSetting),Z="undefined"!=typeof tt&&"function"==typeof tt.getSystemInfoSync&&Boolean(tt.getSystemInfoSync().fontSizeSetting),ee="undefined"!=typeof swan&&"function"==typeof swan.getSystemInfoSync&&Boolean(swan.getSystemInfoSync().fontSizeSetting),te="undefined"!=typeof my&&"function"==typeof my.getSystemInfoSync&&Boolean(my.getSystemInfoSync().fontSizeSetting),ne="undefined"!=typeof uni&&"undefined"==typeof window,oe=X||Q||Z||ee||te||ne,ae=("undefined"!=typeof uni||"undefined"!=typeof window)&&!oe,ie=Q?qq:Z?tt:ee?swan:te?my:X?n:ne?uni:{},se=(z="WEB",ve?z="WEB":Q?z="QQ_MP":Z?z="TT_MP":ee?z="BAIDU_MP":te?z="ALI_MP":X?z="WX_MP":ne&&(z="UNI_NATIVE_APP"),x[z]),re=ae&&window&&window.navigator&&window.navigator.userAgent||"",ce=/AppleWebKit\/([\d.]+)/i.exec(re),ue=(ce&&parseFloat(ce.pop()),/iPad/i.test(re)),le=/iPhone/i.test(re)&&!ue,de=/iPod/i.test(re),fe=le||ue||de,pe=((W=re.match(/OS (\d+)_/i))&&W[1]&&W[1],/Android/i.test(re)),ge=(function(){var e=re.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);t&&n&&parseFloat(e[1]+"."+e[2])}(),pe&&/webkit/i.test(re),/Firefox/i.test(re),/Edge/i.test(re)),he=(!ge&&/Chrome/i.test(re),function(){var e=re.match(/Chrome\/(\d+)/);e&&e[1]&&parseFloat(e[1])}(),/MSIE/.test(re)),me=(/MSIE\s8\.0/.test(re),function(){var e=/MSIE\s(\d+)\.\d/.exec(re),t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(re)&&/rv:11.0/.test(re)&&(t=11),t}()),_e=(/Safari/i.test(re),/TBS\/\d+/i.test(re)),ve=(function(){var e=re.match(/TBS\/(\d+)/i);e&&e[1]&&e[1]}(),!_e&&/MQQBrowser\/\d+/i.test(re),!_e&&/ QQBrowser\/\d+/i.test(re),/(micromessenger|webbrowser)/i.test(re)),ye=/Windows/i.test(re),Me=/MAC OS X/i.test(re),Ce=(/MicroMessenger/i.test(re),ae&&"undefined"!=typeof Worker),we="undefined"!=typeof t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};Y="undefined"!=typeof console?console:void 0!==we&&we.console?we.console:"undefined"!=typeof window&&window.console?window.console:{};for(var Ie=function(){},be=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],Te=be.length;Te--;)J=be[Te],console[J]||(Y[J]=Ie);Y.methods=be;var ke=Y,Se=0,De=function(){return(new Date).getTime()+Se},Ee=function(){Se=0},Ae=function(){return Math.floor(De()/1e3)},Ne=0,Oe=new Map;function Pe(){var e,t=((e=new Date).setTime(De()),e);return"TIM "+t.toLocaleTimeString("en-US",{hour12:!1})+"."+function(e){var t;switch(e.toString().length){case 1:t="00"+e;break;case 2:t="0"+e;break;default:t=e}return t}(t.getMilliseconds())+":"}var Le={arguments2String:function(e){var t;if(1===e.length)t=Pe()+e[0];else{t=Pe();for(var n=0,o=e.length;n<o;n++)Je(e[n])?Qe(e[n])?t+=it(e[n]):t+=JSON.stringify(e[n]):t+=e[n],t+=" "}return t},debug:function(){if(Ne<=-1){var e=this.arguments2String(arguments);ke.debug(e)}},log:function(){if(Ne<=0){var e=this.arguments2String(arguments);ke.log(e)}},info:function(){if(Ne<=1){var e=this.arguments2String(arguments);ke.info(e)}},warn:function(){if(Ne<=2){var e=this.arguments2String(arguments);ke.warn(e)}},error:function(){if(Ne<=3){var e=this.arguments2String(arguments);ke.error(e)}},time:function(e){Oe.set(e,ot.now())},timeEnd:function(e){if(Oe.has(e)){var t=ot.now()-Oe.get(e);return Oe.delete(e),t}return ke.warn("\u672a\u627e\u5230\u5bf9\u5e94label: ".concat(e,", \u8bf7\u5728\u8c03\u7528 logger.timeEnd \u524d\uff0c\u8c03\u7528 logger.time")),0},setLevel:function(e){e<4&&ke.log(Pe()+"set level from "+Ne+" to "+e),Ne=e},getLevel:function(){return Ne}},Re={JPG:1,JPEG:1,GIF:2,PNG:3,BMP:4,UNKNOWN:255},xe={NICK:"Tag_Profile_IM_Nick",GENDER:"Tag_Profile_IM_Gender",BIRTHDAY:"Tag_Profile_IM_BirthDay",LOCATION:"Tag_Profile_IM_Location",SELFSIGNATURE:"Tag_Profile_IM_SelfSignature",ALLOWTYPE:"Tag_Profile_IM_AllowType",LANGUAGE:"Tag_Profile_IM_Language",AVATAR:"Tag_Profile_IM_Image",MESSAGESETTINGS:"Tag_Profile_IM_MsgSettings",ADMINFORBIDTYPE:"Tag_Profile_IM_AdminForbidType",LEVEL:"Tag_Profile_IM_Level",ROLE:"Tag_Profile_IM_Role"},Ge={UNKNOWN:"Gender_Type_Unknown",FEMALE:"Gender_Type_Female",MALE:"Gender_Type_Male"},$e={NONE:"AdminForbid_Type_None",SEND_OUT:"AdminForbid_Type_SendOut"},Ue={NEED_CONFIRM:"AllowType_Type_NeedConfirm",ALLOW_ANY:"AllowType_Type_AllowAny",DENY_ANY:"AllowType_Type_DenyAny"},Fe="JoinedSuccess",Be="WaitAdminApproval",je="@TGS#_",qe=function(e){return"file"===Ze(e)},He=function(t){return null!==t&&("number"==typeof t&&!isNaN(t-0)||"object"===e(t)&&t.constructor===Number)},Ve=function(e){return"string"==typeof e},Ke=function(t){return null!==t&&"object"===e(t)},ze=function(t){if("object"!==e(t)||null===t)return!1;var n=Object.getPrototypeOf(t);if(null===n)return!0;for(var o=n;null!==Object.getPrototypeOf(o);)o=Object.getPrototypeOf(o);return n===o},We=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"array"===Ze(e)},Ye=function(e){return void 0===e},Je=function(e){return We(e)||Ke(e)},Xe=function(e){return"function"==typeof e},Qe=function(e){return e instanceof Error},Ze=function(e){return Object.prototype.toString.call(e).match(/^\[object (.*)\]$/)[1].toLowerCase()},et=function(e){if("string"!=typeof e)return!1;var t=e[0];return!/[^a-zA-Z0-9]/.test(t)},nt=0;Date.now||(Date.now=function(){return(new Date).getTime()});var ot={now:function(){0===nt&&(nt=Date.now()-1);var e=Date.now()-nt;return e>4294967295?(nt+=4294967295,Date.now()-nt):e},utc:function(){return Math.round(Date.now()/1e3)}},at=function e(t,n,o,a){if(!Je(t)||!Je(n))return 0;for(var i,s=0,r=Object.keys(n),c=0,u=r.length;c<u;c++)if(i=r[c],!(Ye(n[i])||o&&o.includes(i)))if(Je(t[i])&&Je(n[i]))s+=e(t[i],n[i],o,a);else{if(a&&a.includes(n[i]))continue;t[i]!==n[i]&&(t[i]=n[i],s+=1)}return s},it=function(e){return JSON.stringify(e,["message","code"])},st=function(e){if(0===e.length)return 0;for(var t=0,n=0,o="undefined"!=typeof document&&void 0!==document.characterSet?document.characterSet:"UTF-8";void 0!==e[t];)n+=e[t++].charCodeAt[t]<=255?1:!1===o?3:2;return n},rt=function(e){var t=e||99999999;return Math.round(Math.random()*t)},ct="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",ut=ct.length,lt=function(e,t){for(var n in e)if(e[n]===t)return!0;return!1},dt={},ft=function(){if(oe)return"https:";if(ae&&"undefined"==typeof window)return"https:";var e=window.location.protocol;return["http:","https:"].indexOf(e)<0&&(e="http:"),e},pt=function(e){return-1===e.indexOf("http://")||-1===e.indexOf("https://")?"https://"+e:e.replace(/https|http/,"https")},gt=function t(n){if(0===Object.getOwnPropertyNames(n).length)return Object.create(null);var o=Array.isArray(n)?[]:Object.create(null),a="";for(var i in n)null!==n[i]?void 0!==n[i]?(a=e(n[i]),["string","number","function","boolean"].indexOf(a)>=0?o[i]=n[i]:o[i]=t(n[i])):o[i]=void 0:o[i]=null;return o};function ht(e,t){We(e)&&We(t)?t.forEach((function(t){var n=t.key,o=t.value,a=e.find((function(e){return e.key===n}));a?a.value=o:e.push({key:n,value:o})})):Le.warn("updateCustomField target \u6216 source \u4e0d\u662f\u6570\u7ec4\uff0c\u5ffd\u7565\u6b64\u6b21\u66f4\u65b0\u3002")}var mt=function(e){return e===E.GRP_PUBLIC},_t=function(e){return e===E.GRP_AVCHATROOM},vt=function(e){var t=e.type,n=e.groupID;return t===E.GRP_COMMUNITY||"".concat(n).startsWith(je)},yt=function(e){return Ve(e)&&e.slice(0,3)===E.CONV_C2C},Mt=function(e){return Ve(e)&&e.slice(0,5)===E.CONV_GROUP},Ct=function(e){return Ve(e)&&e===E.CONV_SYSTEM};function wt(e,t){var n={};return Object.keys(e).forEach((function(o){n[o]=t(e[o],o)})),n}function It(e){return oe?new Promise((function(t,n){ie.getImageInfo({src:e,success:function(e){t({width:e.width,height:e.height})},fail:function(){t({width:0,height:0})}})})):he&&9===me?Promise.resolve({width:0,height:0}):new Promise((function(t,n){var o=new Image;o.onload=function(){t({width:this.width,height:this.height}),o=null},o.onerror=function(){t({width:0,height:0}),o=null},o.src=e}))}function bt(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return"".concat(e()+e()).concat(e()).concat(e()).concat(e()).concat(e()).concat(e()).concat(e())}function Tt(){var e="unknown";if(Me&&(e="mac"),ye&&(e="windows"),fe&&(e="ios"),pe&&(e="android"),oe)try{var t=ie.getSystemInfoSync().platform;void 0!==t&&(e=t)}catch(i){}return e}function kt(e){var t=e.originUrl,n=void 0===t?void 0:t,o=e.originWidth,a=e.originHeight,i=e.min,s=void 0===i?198:i,r=parseInt(o),c=parseInt(a),u={url:void 0,width:0,height:0};if((r<=c?r:c)<=s)u.url=n,u.width=r,u.height=c;else{c<=r?(u.width=Math.ceil(r*s/c),u.height=s):(u.width=s,u.height=Math.ceil(c*s/r));var l=n&&n.indexOf("?")>-1?"".concat(n,"&"):"".concat(n,"?");u.url="".concat(l,198===s?"imageView2/3/w/198/h/198":"imageView2/3/w/720/h/720")}return Ye(n)?m(u,["url"]):u}function St(e){var t=e[2];e[2]=e[1],e[1]=t;for(var n=0;n<e.length;n++)e[n].setType(n)}function Dt(e){var t=e.servcmd;return t.slice(t.indexOf(".")+1)}function Et(e,t){return Math.round(Number(e)*Math.pow(10,t))/Math.pow(10,t)}function At(e,t){return e.includes(t)}function Nt(e,t){return e.includes(t)}var Ot=Object.prototype.hasOwnProperty;function Pt(e){if(null==e)return!0;if("boolean"==typeof e)return!1;if("number"==typeof e)return 0===e;if("string"==typeof e)return 0===e.length;if("function"==typeof e)return 0===e.length;if(Array.isArray(e))return 0===e.length;if(e instanceof Error)return""===e.message;if(ze(e)){for(var t in e)if(Ot.call(e,t))return!1;return!0}return!("map"!==Ze(e)&&!function(e){return"set"===Ze(e)}(e)&&!qe(e))&&0===e.size}function Lt(e,t,n){if(void 0===t)return!0;var o=!0;if("object"===P(t).toLowerCase())Object.keys(t).forEach((function(a){var i=1===e.length?e[0][a]:void 0;o=!!Rt(i,t[a],n,a)&&o}));else if("array"===P(t).toLowerCase())for(var a=0;a<t.length;a++)o=!!Rt(e[a],t[a],n,t[a].name)&&o;if(o)return o;throw new Error("Params validate failed.")}function Rt(e,t,n,o){if(void 0===t)return!0;var a=!0;return t.required&&Pt(e)&&(ke.error("TIM [".concat(n,'] Missing required params: "').concat(o,'".')),a=!1),Pt(e)||P(e).toLowerCase()===t.type.toLowerCase()||(ke.error("TIM [".concat(n,'] Invalid params: type check failed for "').concat(o,'".Expected ').concat(t.type,".")),a=!1),t.validator&&!t.validator(e)&&(ke.error("TIM [".concat(n,"] Invalid params: custom validator check failed for params.")),a=!1),a}var xt,Gt={UNSEND:"unSend",SUCCESS:"success",FAIL:"fail"},$t={NOT_START:"notStart",PENDING:"pengding",RESOLVED:"resolved",REJECTED:"rejected"},Ut=function(e){return!!e&&(!!(yt(e)||Mt(e)||Ct(e))||(o("warn","\u975e\u6cd5\u7684\u4f1a\u8bdd ID:".concat(e,"\u3002\u4f1a\u8bdd ID \u7ec4\u6210\u65b9\u5f0f\uff1aC2C + userID\uff08\u5355\u804a\uff09GROUP + groupID\uff08\u7fa4\u804a\uff09@TIM#SYSTEM\uff08\u7cfb\u7edf\u901a\u77e5\u4f1a\u8bdd\uff09")," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1))},Ft="\u8bf7\u53c2\u8003 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#",Bt=function(e){return e.param?"".concat(e.api," ").concat(e.param," ").concat(e.desc,"\u3002").concat(Ft).concat(e.api):"".concat(e.api," ").concat(e.desc,"\u3002").concat(Ft).concat(e.api)},jt={type:"String",required:!0},qt={type:"Array",required:!0},Ht={type:"Object",required:!0},Vt={login:{userID:jt,userSig:jt},addToBlacklist:{userIDList:qt},on:[{name:"eventName",type:"String",validator:function(e){return"string"==typeof e&&0!==e.length||(o("warn",Bt({api:"on",param:"eventName",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a String\uff0c\u4e14\u4e0d\u80fd\u4e3a\u7a7a"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1)}},{name:"handler",type:"Function",validator:function(e){return"function"!=typeof e?(o("warn",Bt({api:"on",param:"handler",desc:"\u53c2\u6570\u5fc5\u987b\u4e3a Function"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1):(""===e.name&&o("warn","on \u63a5\u53e3\u7684 handler \u53c2\u6570\u63a8\u8350\u4f7f\u7528\u5177\u540d\u51fd\u6570\u3002\u5177\u540d\u51fd\u6570\u53ef\u4ee5\u4f7f\u7528 off \u63a5\u53e3\u53d6\u6d88\u8ba2\u9605\uff0c\u533f\u540d\u51fd\u6570\u65e0\u6cd5\u53d6\u6d88\u8ba2\u9605\u3002"," at node_modules/tim-wx-sdk/tim-wx.js:1"),!0)}}],once:[{name:"eventName",type:"String",validator:function(e){return"string"==typeof e&&0!==e.length||(o("warn",Bt({api:"once",param:"eventName",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a String\uff0c\u4e14\u4e0d\u80fd\u4e3a\u7a7a"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1)}},{name:"handler",type:"Function",validator:function(e){return"function"!=typeof e?(o("warn",Bt({api:"once",param:"handler",desc:"\u53c2\u6570\u5fc5\u987b\u4e3a Function"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1):(""===e.name&&o("warn","once \u63a5\u53e3\u7684 handler \u53c2\u6570\u63a8\u8350\u4f7f\u7528\u5177\u540d\u51fd\u6570\u3002"," at node_modules/tim-wx-sdk/tim-wx.js:1"),!0)}}],off:[{name:"eventName",type:"String",validator:function(e){return"string"==typeof e&&0!==e.length||(o("warn",Bt({api:"off",param:"eventName",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a String\uff0c\u4e14\u4e0d\u80fd\u4e3a\u7a7a"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1)}},{name:"handler",type:"Function",validator:function(e){return"function"!=typeof e?(o("warn",Bt({api:"off",param:"handler",desc:"\u53c2\u6570\u5fc5\u987b\u4e3a Function"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1):(""===e.name&&o("warn","off \u63a5\u53e3\u65e0\u6cd5\u4e3a\u533f\u540d\u51fd\u6570\u53d6\u6d88\u76d1\u542c\u4e8b\u4ef6\u3002"," at node_modules/tim-wx-sdk/tim-wx.js:1"),!0)}}],sendMessage:[u({name:"message"},Ht)],getMessageList:{conversationID:u({},jt,{validator:function(e){return Ut(e)}}),nextReqMessageID:{type:"String"},count:{type:"Number",validator:function(e){return!(!Ye(e)&&!/^[1-9][0-9]*$/.test(e))||(o("warn",Bt({api:"getMessageList",param:"count",desc:"\u5fc5\u987b\u4e3a\u6b63\u6574\u6570"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1)}}},setMessageRead:{conversationID:u({},jt,{validator:function(e){return Ut(e)}})},setAllMessageRead:{scope:{type:"String",required:!1,validator:function(e){return!e||-1!==[E.READ_ALL_C2C_MSG,E.READ_ALL_GROUP_MSG,E.READ_ALL_MSG].indexOf(e)||(o("warn",Bt({api:"setAllMessageRead",param:"scope",desc:"\u53d6\u503c\u5fc5\u987b\u4e3a TIM.TYPES.READ_ALL_C2C_MSG, TIM.TYPES.READ_ALL_GROUP_MSG \u6216 TIM.TYPES.READ_ALL_MSG"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1)}}},getConversationProfile:[u({name:"conversationID"},jt,{validator:function(e){return Ut(e)}})],deleteConversation:[u({name:"conversationID"},jt,{validator:function(e){return Ut(e)}})],pinConversation:{conversationID:u({},jt,{validator:function(e){return Ut(e)}}),isPinned:u({},{type:"Boolean",required:!0})},getConversationList:[{name:"options",type:"Array",validator:function(e){return!!Ye(e)||0!==e.length||(o("warn",Bt({api:"getConversationList",desc:"\u83b7\u53d6\u6307\u5b9a\u4f1a\u8bdd\u65f6\u4e0d\u80fd\u4f20\u5165\u7a7a\u6570\u7ec4"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1)}}],getGroupList:{groupProfileFilter:{type:"Array"}},getGroupProfile:{groupID:jt,groupCustomFieldFilter:{type:"Array"},memberCustomFieldFilter:{type:"Array"}},getGroupProfileAdvance:{groupIDList:qt},createGroup:{name:jt},joinGroup:{groupID:jt,type:{type:"String"},applyMessage:{type:"String"}},quitGroup:[u({name:"groupID"},jt)],handleApplication:{message:Ht,handleAction:jt,handleMessage:{type:"String"}},changeGroupOwner:{groupID:jt,newOwnerID:jt},updateGroupProfile:{groupID:jt,muteAllMembers:{type:"Boolean"}},dismissGroup:[u({name:"groupID"},jt)],searchGroupByID:[u({name:"groupID"},jt)],initGroupAttributes:{groupID:jt,groupAttributes:u({},Ht,{validator:function(e){var t=!0;return Object.keys(e).forEach((function(n){if(!Ve(e[n]))return o("warn",Bt({api:"initGroupAttributes",desc:"\u7fa4\u5c5e\u6027 value \u5fc5\u987b\u662f\u5b57\u7b26\u4e32"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),t=!1})),t}})},setGroupAttributes:{groupID:jt,groupAttributes:u({},Ht,{validator:function(e){var t=!0;return Object.keys(e).forEach((function(n){if(!Ve(e[n]))return o("warn",Bt({api:"setGroupAttributes",desc:"\u7fa4\u5c5e\u6027 value \u5fc5\u987b\u662f\u5b57\u7b26\u4e32"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),t=!1})),t}})},deleteGroupAttributes:{groupID:jt,keyList:{type:"Array",validator:function(e){if(Ye(e))return o("warn",Bt({api:"deleteGroupAttributes",desc:"\u7f3a\u5c11\u5fc5\u586b\u53c2\u6570\uff1akeyList"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1;if(!We(e))return!1;if(!Pt(e)){var t=!0;return e.forEach((function(e){if(!Ve(e))return o("warn",Bt({api:"deleteGroupAttributes",desc:"\u7fa4\u5c5e\u6027 key \u5fc5\u987b\u662f\u5b57\u7b26\u4e32"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),t=!1})),t}return!0}}},getGroupAttributes:{groupID:jt,keyList:{type:"Array",validator:function(e){if(Ye(e))return o("warn",Bt({api:"getGroupAttributes",desc:"\u7f3a\u5c11\u5fc5\u586b\u53c2\u6570\uff1akeyList"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1;if(!We(e))return!1;if(!Pt(e)){var t=!0;return e.forEach((function(e){if(!Ve(e))return o("warn",Bt({api:"getGroupAttributes",desc:"\u7fa4\u5c5e\u6027 key \u5fc5\u987b\u662f\u5b57\u7b26\u4e32"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),t=!1})),t}return!0}}},getGroupMemberList:{groupID:jt,count:{type:"Number"}},getGroupMemberProfile:{groupID:jt,userIDList:qt,memberCustomFieldFilter:{type:"Array"}},addGroupMember:{groupID:jt,userIDList:qt},setGroupMemberRole:{groupID:jt,userID:jt,role:jt},setGroupMemberMuteTime:{groupID:jt,userID:jt,muteTime:{type:"Number",validator:function(e){return e>=0}}},setGroupMemberNameCard:{groupID:jt,userID:{type:"String"},nameCard:{type:"String",validator:function(e){return Ve(e)?(e.length,!0):(o("warn",Bt({api:"setGroupMemberNameCard",param:"nameCard",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a String"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1)}}},setGroupMemberCustomField:{groupID:jt,userID:{type:"String"},memberCustomField:qt},deleteGroupMember:{groupID:jt},createTextMessage:{to:jt,conversationType:jt,payload:u({},Ht,{validator:function(e){return ze(e)?Ve(e.text)?0!==e.text.length||(o("warn",Bt({api:"createTextMessage",desc:"\u6d88\u606f\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1):(o("warn",Bt({api:"createTextMessage",param:"payload.text",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a String"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1):(o("warn",Bt({api:"createTextMessage",param:"payload",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a plain object"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1)}})},createTextAtMessage:{to:jt,conversationType:jt,payload:u({},Ht,{validator:function(e){return ze(e)?Ve(e.text)?0===e.text.length?(o("warn",Bt({api:"createTextAtMessage",desc:"\u6d88\u606f\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1):!(e.atUserList&&!We(e.atUserList))||(o("warn",Bt({api:"createTextAtMessage",desc:"payload.atUserList \u7c7b\u578b\u5fc5\u987b\u4e3a\u6570\u7ec4"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1):(o("warn",Bt({api:"createTextAtMessage",param:"payload.text",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a String"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1):(o("warn",Bt({api:"createTextAtMessage",param:"payload",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a plain object"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1)}})},createCustomMessage:{to:jt,conversationType:jt,payload:u({},Ht,{validator:function(e){return ze(e)?e.data&&!Ve(e.data)?(o("warn",Bt({api:"createCustomMessage",param:"payload.data",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a String"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1):e.description&&!Ve(e.description)?(o("warn",Bt({api:"createCustomMessage",param:"payload.description",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a String"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1):!(e.extension&&!Ve(e.extension))||(o("warn",Bt({api:"createCustomMessage",param:"payload.extension",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a String"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1):(o("warn",Bt({api:"createCustomMessage",param:"payload",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a plain object"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1)}})},createImageMessage:{to:jt,conversationType:jt,payload:u({},Ht,{validator:function(e){if(!ze(e))return o("warn",Bt({api:"createImageMessage",param:"payload",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a plain object"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1;if(Ye(e.file))return o("warn",Bt({api:"createImageMessage",param:"payload.file",desc:"\u4e0d\u80fd\u4e3a undefined"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1;if(ae){if(!(e.file instanceof HTMLInputElement||qe(e.file)))return ze(e.file)&&"undefined"!=typeof uni?0!==e.file.tempFilePaths.length&&0!==e.file.tempFiles.length||(o("warn",Bt({api:"createImageMessage",param:"payload.file",desc:"\u60a8\u6ca1\u6709\u9009\u62e9\u6587\u4ef6\uff0c\u65e0\u6cd5\u53d1\u9001"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1):(o("warn",Bt({api:"createImageMessage",param:"payload.file",desc:"\u7c7b\u578b\u5fc5\u987b\u662f HTMLInputElement \u6216 File"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1);if(e.file instanceof HTMLInputElement&&0===e.file.files.length)return o("warn",Bt({api:"createImageMessage",param:"payload.file",desc:"\u60a8\u6ca1\u6709\u9009\u62e9\u6587\u4ef6\uff0c\u65e0\u6cd5\u53d1\u9001"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1}return!0},onProgress:{type:"Function",required:!1,validator:function(e){return Ye(e)&&o("warn",Bt({api:"createImageMessage",desc:"\u6ca1\u6709 onProgress \u56de\u8c03\uff0c\u60a8\u5c06\u65e0\u6cd5\u83b7\u53d6\u4e0a\u4f20\u8fdb\u5ea6"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!0}}})},createAudioMessage:{to:jt,conversationType:jt,payload:u({},Ht,{validator:function(e){return!!ze(e)||(o("warn",Bt({api:"createAudioMessage",param:"payload",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a plain object"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1)}}),onProgress:{type:"Function",required:!1,validator:function(e){return Ye(e)&&o("warn",Bt({api:"createAudioMessage",desc:"\u6ca1\u6709 onProgress \u56de\u8c03\uff0c\u60a8\u5c06\u65e0\u6cd5\u83b7\u53d6\u4e0a\u4f20\u8fdb\u5ea6"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!0}}},createVideoMessage:{to:jt,conversationType:jt,payload:u({},Ht,{validator:function(e){if(!ze(e))return o("warn",Bt({api:"createVideoMessage",param:"payload",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a plain object"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1;if(Ye(e.file))return o("warn",Bt({api:"createVideoMessage",param:"payload.file",desc:"\u4e0d\u80fd\u4e3a undefined"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1;if(ae){if(!(e.file instanceof HTMLInputElement||qe(e.file)))return ze(e.file)&&"undefined"!=typeof uni?!!qe(e.file.tempFile)||(o("warn",Bt({api:"createVideoMessage",param:"payload.file",desc:"\u60a8\u6ca1\u6709\u9009\u62e9\u6587\u4ef6\uff0c\u65e0\u6cd5\u53d1\u9001"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1):(o("warn",Bt({api:"createVideoMessage",param:"payload.file",desc:"\u7c7b\u578b\u5fc5\u987b\u662f HTMLInputElement \u6216 File"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1);if(e.file instanceof HTMLInputElement&&0===e.file.files.length)return o("warn",Bt({api:"createVideoMessage",param:"payload.file",desc:"\u60a8\u6ca1\u6709\u9009\u62e9\u6587\u4ef6\uff0c\u65e0\u6cd5\u53d1\u9001"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1}return!0}}),onProgress:{type:"Function",required:!1,validator:function(e){return Ye(e)&&o("warn",Bt({api:"createVideoMessage",desc:"\u6ca1\u6709 onProgress \u56de\u8c03\uff0c\u60a8\u5c06\u65e0\u6cd5\u83b7\u53d6\u4e0a\u4f20\u8fdb\u5ea6"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!0}}},createFaceMessage:{to:jt,conversationType:jt,payload:u({},Ht,{validator:function(e){return ze(e)?He(e.index)?!!Ve(e.data)||(o("warn",Bt({api:"createFaceMessage",param:"payload.data",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a String"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1):(o("warn",Bt({api:"createFaceMessage",param:"payload.index",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a Number"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1):(o("warn",Bt({api:"createFaceMessage",param:"payload",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a plain object"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1)}})},createFileMessage:{to:jt,conversationType:jt,payload:u({},Ht,{validator:function(e){if(!ze(e))return o("warn",Bt({api:"createFileMessage",param:"payload",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a plain object"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1;if(Ye(e.file))return o("warn",Bt({api:"createFileMessage",param:"payload.file",desc:"\u4e0d\u80fd\u4e3a undefined"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1;if(ae){if(!(e.file instanceof HTMLInputElement||qe(e.file)))return ze(e.file)&&"undefined"!=typeof uni?0!==e.file.tempFilePaths.length&&0!==e.file.tempFiles.length||(o("warn",Bt({api:"createFileMessage",param:"payload.file",desc:"\u60a8\u6ca1\u6709\u9009\u62e9\u6587\u4ef6\uff0c\u65e0\u6cd5\u53d1\u9001"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1):(o("warn",Bt({api:"createFileMessage",param:"payload.file",desc:"\u7c7b\u578b\u5fc5\u987b\u662f HTMLInputElement \u6216 File"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1);if(e.file instanceof HTMLInputElement&&0===e.file.files.length)return o("warn",Bt({api:"createFileMessage",desc:"\u60a8\u6ca1\u6709\u9009\u62e9\u6587\u4ef6\uff0c\u65e0\u6cd5\u53d1\u9001"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1}return!0}}),onProgress:{type:"Function",required:!1,validator:function(e){return Ye(e)&&o("warn",Bt({api:"createFileMessage",desc:"\u6ca1\u6709 onProgress \u56de\u8c03\uff0c\u60a8\u5c06\u65e0\u6cd5\u83b7\u53d6\u4e0a\u4f20\u8fdb\u5ea6"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!0}}},createLocationMessage:{to:jt,conversationType:jt,payload:u({},Ht,{validator:function(e){return ze(e)?Ve(e.description)?He(e.longitude)?!!He(e.latitude)||(o("warn",Bt({api:"createLocationMessage",param:"payload.latitude",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a Number"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1):(o("warn",Bt({api:"createLocationMessage",param:"payload.longitude",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a Number"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1):(o("warn",Bt({api:"createLocationMessage",param:"payload.description",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a String"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1):(o("warn",Bt({api:"createLocationMessage",param:"payload",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a plain object"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1)}})},createMergerMessage:{to:jt,conversationType:jt,payload:u({},Ht,{validator:function(e){if(Pt(e.messageList))return o("warn",Bt({api:"createMergerMessage",desc:"\u4e0d\u80fd\u4e3a\u7a7a\u6570\u7ec4"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1;if(Pt(e.compatibleText))return o("warn",Bt({api:"createMergerMessage",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a String\uff0c\u4e14\u4e0d\u80fd\u4e3a\u7a7a"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1;var t=!1;return e.messageList.forEach((function(e){e.status===Gt.FAIL&&(t=!0)})),!t||(o("warn",Bt({api:"createMergerMessage",desc:"\u4e0d\u652f\u6301\u5408\u5e76\u5df2\u53d1\u9001\u5931\u8d25\u7684\u6d88\u606f"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1)}})},revokeMessage:[u({name:"message"},Ht,{validator:function(e){return Pt(e)?(o("warn","revokeMessage \u8bf7\u4f20\u5165\u6d88\u606f\uff08Message\uff09\u5b9e\u4f8b"," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1):e.conversationType===E.CONV_SYSTEM?(o("warn","revokeMessage \u4e0d\u80fd\u64a4\u56de\u7cfb\u7edf\u4f1a\u8bdd\u6d88\u606f\uff0c\u53ea\u80fd\u64a4\u56de\u5355\u804a\u6d88\u606f\u6216\u7fa4\u6d88\u606f"," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1):!0!==e.isRevoked||(o("warn","revokeMessage \u6d88\u606f\u5df2\u7ecf\u88ab\u64a4\u56de\uff0c\u8bf7\u52ff\u91cd\u590d\u64cd\u4f5c"," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1)}})],deleteMessage:[u({name:"messageList"},qt,{validator:function(e){return!Pt(e)||(o("warn",Bt({api:"deleteMessage",param:"messageList",desc:"\u4e0d\u80fd\u4e3a\u7a7a\u6570\u7ec4"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1)}})],getUserProfile:{userIDList:{type:"Array",validator:function(e){return We(e)?(0===e.length&&o("warn",Bt({api:"getUserProfile",param:"userIDList",desc:"\u4e0d\u80fd\u4e3a\u7a7a\u6570\u7ec4"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!0):(o("warn",Bt({api:"getUserProfile",param:"userIDList",desc:"\u5fc5\u987b\u4e3a\u6570\u7ec4"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1)}}},updateMyProfile:{profileCustomField:{type:"Array",validator:function(e){return!!Ye(e)||!!We(e)||(o("warn",Bt({api:"updateMyProfile",param:"profileCustomField",desc:"\u5fc5\u987b\u4e3a\u6570\u7ec4"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1)}}},addFriend:{to:jt,source:{type:"String",required:!0,validator:function(e){return!!e&&(e.startsWith("AddSource_Type_")?!(e.replace("AddSource_Type_","").length>8)||(o("warn",Bt({api:"addFriend",desc:"\u52a0\u597d\u53cb\u6765\u6e90\u5b57\u6bb5\u7684\u5173\u952e\u5b57\u957f\u5ea6\u4e0d\u5f97\u8d85\u8fc78\u5b57\u8282"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1):(o("warn",Bt({api:"addFriend",desc:"\u52a0\u597d\u53cb\u6765\u6e90\u5b57\u6bb5\u7684\u524d\u7f00\u5fc5\u987b\u662f\uff1aAddSource_Type_"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1))}},remark:{type:"String",required:!1,validator:function(e){return!(Ve(e)&&e.length>96)||(o("warn",Bt({api:"updateFriend",desc:" \u5907\u6ce8\u957f\u5ea6\u6700\u957f\u4e0d\u5f97\u8d85\u8fc7 96 \u4e2a\u5b57\u8282"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1)}}},deleteFriend:{userIDList:qt},checkFriend:{userIDList:qt},getFriendProfile:{userIDList:qt},updateFriend:{userID:jt,remark:{type:"String",required:!1,validator:function(e){return!(Ve(e)&&e.length>96)||(o("warn",Bt({api:"updateFriend",desc:" \u5907\u6ce8\u957f\u5ea6\u6700\u957f\u4e0d\u5f97\u8d85\u8fc7 96 \u4e2a\u5b57\u8282"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1)}},friendCustomField:{type:"Array",required:!1,validator:function(e){if(e){if(!We(e))return o("warn",Bt({api:"updateFriend",param:"friendCustomField",desc:"\u5fc5\u987b\u4e3a\u6570\u7ec4"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),!1;var t=!0;return e.forEach((function(e){return Ve(e.key)&&-1!==e.key.indexOf("Tag_SNS_Custom")?Ve(e.value)?e.value.length>8?(o("warn",Bt({api:"updateFriend",desc:"\u597d\u53cb\u81ea\u5b9a\u4e49\u5b57\u6bb5\u7684\u5173\u952e\u5b57\u957f\u5ea6\u4e0d\u5f97\u8d85\u8fc78\u5b57\u8282"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),t=!1):void 0:(o("warn",Bt({api:"updateFriend",desc:"\u7c7b\u578b\u5fc5\u987b\u4e3a String"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),t=!1):(o("warn",Bt({api:"updateFriend",desc:"\u597d\u53cb\u81ea\u5b9a\u4e49\u5b57\u6bb5\u7684\u524d\u7f00\u5fc5\u987b\u662f Tag_SNS_Custom"})," at node_modules/tim-wx-sdk/tim-wx.js:1"),t=!1)})),t}return!0}}},acceptFriendApplication:{userID:jt},refuseFriendApplication:{userID:jt},deleteFriendApplication:{userID:jt},createFriendGroup:{name:jt},deleteFriendGroup:{name:jt},addToFriendGroup:{name:jt,userIDList:qt},removeFromFriendGroup:{name:jt,userIDList:qt},renameFriendGroup:{oldName:jt,newName:jt}},Kt={login:"login",logout:"logout",on:"on",once:"once",off:"off",setLogLevel:"setLogLevel",registerPlugin:"registerPlugin",destroy:"destroy",createTextMessage:"createTextMessage",createTextAtMessage:"createTextAtMessage",createImageMessage:"createImageMessage",createAudioMessage:"createAudioMessage",createVideoMessage:"createVideoMessage",createCustomMessage:"createCustomMessage",createFaceMessage:"createFaceMessage",createFileMessage:"createFileMessage",createLocationMessage:"createLocationMessage",createMergerMessage:"createMergerMessage",downloadMergerMessage:"downloadMergerMessage",createForwardMessage:"createForwardMessage",sendMessage:"sendMessage",resendMessage:"resendMessage",revokeMessage:"revokeMessage",deleteMessage:"deleteMessage",getMessageList:"getMessageList",setMessageRead:"setMessageRead",setAllMessageRead:"setAllMessageRead",getConversationList:"getConversationList",getConversationProfile:"getConversationProfile",deleteConversation:"deleteConversation",pinConversation:"pinConversation",getGroupList:"getGroupList",getGroupProfile:"getGroupProfile",createGroup:"createGroup",joinGroup:"joinGroup",updateGroupProfile:"updateGroupProfile",quitGroup:"quitGroup",dismissGroup:"dismissGroup",changeGroupOwner:"changeGroupOwner",searchGroupByID:"searchGroupByID",setMessageRemindType:"setMessageRemindType",handleGroupApplication:"handleGroupApplication",initGroupAttributes:"initGroupAttributes",setGroupAttributes:"setGroupAttributes",deleteGroupAttributes:"deleteGroupAttributes",getGroupAttributes:"getGroupAttributes",getGroupMemberProfile:"getGroupMemberProfile",getGroupMemberList:"getGroupMemberList",addGroupMember:"addGroupMember",deleteGroupMember:"deleteGroupMember",setGroupMemberNameCard:"setGroupMemberNameCard",setGroupMemberMuteTime:"setGroupMemberMuteTime",setGroupMemberRole:"setGroupMemberRole",setGroupMemberCustomField:"setGroupMemberCustomField",getGroupOnlineMemberCount:"getGroupOnlineMemberCount",getMyProfile:"getMyProfile",getUserProfile:"getUserProfile",updateMyProfile:"updateMyProfile",getBlacklist:"getBlacklist",addToBlacklist:"addToBlacklist",removeFromBlacklist:"removeFromBlacklist",getFriendList:"getFriendList",addFriend:"addFriend",deleteFriend:"deleteFriend",checkFriend:"checkFriend",updateFriend:"updateFriend",getFriendProfile:"getFriendProfile",getFriendApplicationList:"getFriendApplicationList",refuseFriendApplication:"refuseFriendApplication",deleteFriendApplication:"deleteFriendApplication",acceptFriendApplication:"acceptFriendApplication",setFriendApplicationRead:"setFriendApplicationRead",getFriendGroupList:"getFriendGroupList",createFriendGroup:"createFriendGroup",renameFriendGroup:"renameFriendGroup",deleteFriendGroup:"deleteFriendGroup",addToFriendGroup:"addToFriendGroup",removeFromFriendGroup:"removeFromFriendGroup",callExperimentalAPI:"callExperimentalAPI"},zt="sign",Wt="message",Yt="user",Jt="c2c",Xt="group",Qt="sns",Zt="groupMember",en="conversation",tn="context",nn="storage",on="eventStat",an="netMonitor",sn="bigDataChannel",rn="upload",cn="plugin",un="syncUnreadMessage",ln="session",dn="channel",fn="message_loss_detection",pn="cloudControl",gn="workerTimer",hn="pullGroupMessage",mn="qualityStat",_n="commercialConfig",vn=function(){function e(t){a(this,e),this._moduleManager=t,this._className=""}return s(e,[{key:"isLoggedIn",value:function(){return this._moduleManager.getModule(tn).isLoggedIn()}},{key:"isOversea",value:function(){return this._moduleManager.getModule(tn).isOversea()}},{key:"getMyUserID",value:function(){return this._moduleManager.getModule(tn).getUserID()}},{key:"getModule",value:function(e){return this._moduleManager.getModule(e)}},{key:"getPlatform",value:function(){return se}},{key:"getNetworkType",value:function(){return this._moduleManager.getModule(an).getNetworkType()}},{key:"probeNetwork",value:function(){return this._moduleManager.getModule(an).probe()}},{key:"getCloudConfig",value:function(e){return this._moduleManager.getModule(pn).getCloudConfig(e)}},{key:"emitOuterEvent",value:function(e,t){this._moduleManager.getOuterEmitterInstance().emit(e,t)}},{key:"emitInnerEvent",value:function(e,t){this._moduleManager.getInnerEmitterInstance().emit(e,t)}},{key:"getInnerEmitterInstance",value:function(){return this._moduleManager.getInnerEmitterInstance()}},{key:"generateTjgID",value:function(e){return this._moduleManager.getModule(tn).getTinyID()+"-"+e.random}},{key:"filterModifiedMessage",value:function(e){if(!Pt(e)){var t=e.filter((function(e){return!0===e.isModified}));t.length>0&&this.emitOuterEvent(D.MESSAGE_MODIFIED,t)}}},{key:"filterUnmodifiedMessage",value:function(e){return Pt(e)?[]:e.filter((function(e){return!1===e.isModified}))}},{key:"request",value:function(e){return this._moduleManager.getModule(ln).request(e)}},{key:"canIUse",value:function(e){return this._moduleManager.getModule(_n).hasPurchasedFeature(e)}}]),e}(),yn="wslogin",Mn="wslogout",Cn="wshello",wn="KickOther",In="getmsg",bn="authkey",Tn="sendmsg",kn="send_group_msg",Sn="portrait_get_all",Dn="portrait_set",En="black_list_get",An="black_list_add",Nn="black_list_delete",On="msgwithdraw",Pn="msgreaded",Ln="set_c2c_peer_mute_notifications",Rn="get_c2c_peer_mute_notifications",xn="getroammsg",Gn="get_peer_read_time",$n="delete_c2c_msg_ramble",Un="page_get",Fn="get",Bn="delete",jn="top",qn="deletemsg",Hn="get_joined_group_list",Vn="get_group_self_member_info",Kn="create_group",zn="destroy_group",Wn="modify_group_base_info",Yn="apply_join_group",Jn="apply_join_group_noauth",Xn="quit_group",Qn="get_group_public_info",Zn="change_group_owner",eo="handle_apply_join_group",to="handle_invite_join_group",no="group_msg_recall",oo="msg_read_report",ao="read_all_unread_msg",io="group_msg_get",so="get_pendency",ro="deletemsg",co="get_msg",uo="get_msg_noauth",lo="get_online_member_num",fo="delete_group_ramble_msg_by_seq",po="set_group_attr",go="modify_group_attr",ho="delete_group_attr",mo="clear_group_attr",_o="get_group_attr",vo="get_group_member_info",yo="get_specified_group_member_info",Mo="add_group_member",Co="delete_group_member",wo="modify_group_member_info",Io="cos",bo="pre_sig",To="video_cover",ko="tim_web_report_v2",So="alive",Do="msg_push",Eo="multi_msg_push_ws",Ao="ws_msg_push_ack",No="stat_forceoffline",Oo="save_relay_json_msg",Po="get_relay_json_msg",Lo="fetch_config",Ro="push_configv2",xo="fetch_imsdk_purchase_bitsv2",Go="push_imsdk_purchase_bitsv2",$o="notify2",Uo={NO_SDKAPPID:2e3,NO_ACCOUNT_TYPE:2001,NO_IDENTIFIER:2002,NO_USERSIG:2003,NO_TINYID:2022,NO_A2KEY:2023,USER_NOT_LOGGED_IN:2024,REPEAT_LOGIN:2025,COS_UNDETECTED:2040,COS_GET_SIG_FAIL:2041,MESSAGE_SEND_FAIL:2100,MESSAGE_LIST_CONSTRUCTOR_NEED_OPTIONS:2103,MESSAGE_SEND_NEED_MESSAGE_INSTANCE:2105,MESSAGE_SEND_INVALID_CONVERSATION_TYPE:2106,MESSAGE_FILE_IS_EMPTY:2108,MESSAGE_ONPROGRESS_FUNCTION_ERROR:2109,MESSAGE_REVOKE_FAIL:2110,MESSAGE_DELETE_FAIL:2111,MESSAGE_UNREAD_ALL_FAIL:2112,MESSAGE_CONTROL_INFO_FAIL:2113,MESSAGE_IMAGE_SELECT_FILE_FIRST:2251,MESSAGE_IMAGE_TYPES_LIMIT:2252,MESSAGE_IMAGE_SIZE_LIMIT:2253,MESSAGE_AUDIO_UPLOAD_FAIL:2300,MESSAGE_AUDIO_SIZE_LIMIT:2301,MESSAGE_VIDEO_UPLOAD_FAIL:2350,MESSAGE_VIDEO_SIZE_LIMIT:2351,MESSAGE_VIDEO_TYPES_LIMIT:2352,MESSAGE_FILE_UPLOAD_FAIL:2400,MESSAGE_FILE_SELECT_FILE_FIRST:2401,MESSAGE_FILE_SIZE_LIMIT:2402,MESSAGE_FILE_URL_IS_EMPTY:2403,MESSAGE_MERGER_TYPE_INVALID:2450,MESSAGE_MERGER_KEY_INVALID:2451,MESSAGE_MERGER_DOWNLOAD_FAIL:2452,MESSAGE_FORWARD_TYPE_INVALID:2453,MESSAGE_AT_TYPE_INVALID:2454,CONVERSATION_NOT_FOUND:2500,USER_OR_GROUP_NOT_FOUND:2501,CONVERSATION_UN_RECORDED_TYPE:2502,ILLEGAL_GROUP_TYPE:2600,CANNOT_JOIN_WORK:2601,ILLEGAL_GROUP_ID:2602,CANNOT_CHANGE_OWNER_IN_AVCHATROOM:2620,CANNOT_CHANGE_OWNER_TO_SELF:2621,CANNOT_DISMISS_Work:2622,MEMBER_NOT_IN_GROUP:2623,CANNOT_USE_GRP_ATTR_NOT_AVCHATROOM:2641,CANNOT_USE_GRP_ATTR_AVCHATROOM_UNJOIN:2642,JOIN_GROUP_FAIL:2660,CANNOT_ADD_MEMBER_IN_AVCHATROOM:2661,CANNOT_JOIN_NON_AVCHATROOM_WITHOUT_LOGIN:2662,CANNOT_KICK_MEMBER_IN_AVCHATROOM:2680,NOT_OWNER:2681,CANNOT_SET_MEMBER_ROLE_IN_WORK_AND_AVCHATROOM:2682,INVALID_MEMBER_ROLE:2683,CANNOT_SET_SELF_MEMBER_ROLE:2684,CANNOT_MUTE_SELF:2685,NOT_MY_FRIEND:2700,ALREADY_MY_FRIEND:2701,FRIEND_GROUP_EXISTED:2710,FRIEND_GROUP_NOT_EXIST:2711,FRIEND_APPLICATION_NOT_EXIST:2716,UPDATE_PROFILE_INVALID_PARAM:2721,UPDATE_PROFILE_NO_KEY:2722,ADD_BLACKLIST_INVALID_PARAM:2740,DEL_BLACKLIST_INVALID_PARAM:2741,CANNOT_ADD_SELF_TO_BLACKLIST:2742,ADD_FRIEND_INVALID_PARAM:2760,NETWORK_ERROR:2800,NETWORK_TIMEOUT:2801,NETWORK_BASE_OPTIONS_NO_URL:2802,NETWORK_UNDEFINED_SERVER_NAME:2803,NETWORK_PACKAGE_UNDEFINED:2804,NO_NETWORK:2805,CONVERTOR_IRREGULAR_PARAMS:2900,NOTICE_RUNLOOP_UNEXPECTED_CONDITION:2901,NOTICE_RUNLOOP_OFFSET_LOST:2902,UNCAUGHT_ERROR:2903,GET_LONGPOLL_ID_FAILED:2904,INVALID_OPERATION:2905,OVER_FREQUENCY_LIMIT:2996,CANNOT_FIND_PROTOCOL:2997,CANNOT_FIND_MODULE:2998,SDK_IS_NOT_READY:2999,LONG_POLL_KICK_OUT:91101,MESSAGE_A2KEY_EXPIRED:20002,ACCOUNT_A2KEY_EXPIRED:70001,LONG_POLL_API_PARAM_ERROR:90001,HELLO_ANSWER_KICKED_OUT:1002,OPEN_SERVICE_OVERLOAD_ERROR:60022},Fo="\u65e0 SDKAppID",Bo="\u65e0 userID",jo="\u65e0 userSig",qo="\u65e0 tinyID",Ho="\u65e0 a2key",Vo="\u7528\u6237\u672a\u767b\u5f55",Ko="\u91cd\u590d\u767b\u5f55",zo="\u672a\u68c0\u6d4b\u5230 COS \u4e0a\u4f20\u63d2\u4ef6",Wo="\u83b7\u53d6 COS \u9884\u7b7e\u540d URL \u5931\u8d25",Yo="\u6d88\u606f\u53d1\u9001\u5931\u8d25",Jo="\u9700\u8981 Message \u7684\u5b9e\u4f8b",Xo='Message.conversationType \u53ea\u80fd\u4e3a "C2C" \u6216 "GROUP"',Qo="\u65e0\u6cd5\u53d1\u9001\u7a7a\u6587\u4ef6",Zo="\u56de\u8c03\u51fd\u6570\u8fd0\u884c\u65f6\u9047\u5230\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u63a5\u5165\u4fa7\u4ee3\u7801",ea="\u6d88\u606f\u64a4\u56de\u5931\u8d25",ta="\u6d88\u606f\u5220\u9664\u5931\u8d25",na="\u8bbe\u7f6e\u6240\u6709\u672a\u8bfb\u6d88\u606f\u4e3a\u5df2\u8bfb\u5904\u7406\u5931\u8d25",oa="\u793e\u7fa4\u4e0d\u652f\u6301\u6d88\u606f\u53d1\u9001\u63a7\u5236\u9009\u9879",aa="\u8bf7\u5148\u9009\u62e9\u4e00\u4e2a\u56fe\u7247",ia="\u53ea\u5141\u8bb8\u4e0a\u4f20 jpg png jpeg gif bmp image webp \u683c\u5f0f\u7684\u56fe\u7247",sa="\u56fe\u7247\u5927\u5c0f\u8d85\u8fc720M\uff0c\u65e0\u6cd5\u53d1\u9001",ra="\u8bed\u97f3\u4e0a\u4f20\u5931\u8d25",ca="\u8bed\u97f3\u5927\u5c0f\u5927\u4e8e20M\uff0c\u65e0\u6cd5\u53d1\u9001",ua="\u89c6\u9891\u4e0a\u4f20\u5931\u8d25",la="\u89c6\u9891\u5927\u5c0f\u8d85\u8fc7100M\uff0c\u65e0\u6cd5\u53d1\u9001",da="\u53ea\u5141\u8bb8\u4e0a\u4f20 mp4 \u683c\u5f0f\u7684\u89c6\u9891",fa="\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25",pa="\u8bf7\u5148\u9009\u62e9\u4e00\u4e2a\u6587\u4ef6",ga="\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7100M\uff0c\u65e0\u6cd5\u53d1\u9001 ",ha="\u7f3a\u5c11\u5fc5\u8981\u7684\u53c2\u6570\u6587\u4ef6 URL",ma="\u975e\u5408\u5e76\u6d88\u606f",_a="\u5408\u5e76\u6d88\u606f\u7684 messageKey \u65e0\u6548",va="\u4e0b\u8f7d\u5408\u5e76\u6d88\u606f\u5931\u8d25",ya="\u9009\u62e9\u7684\u6d88\u606f\u7c7b\u578b\uff08\u5982\u7fa4\u63d0\u793a\u6d88\u606f\uff09\u4e0d\u53ef\u4ee5\u8f6c\u53d1",Ma="\u793e\u7fa4\u4e0d\u652f\u6301 @ \u6240\u6709\u4eba",Ca="\u6ca1\u6709\u627e\u5230\u76f8\u5e94\u7684\u4f1a\u8bdd\uff0c\u8bf7\u68c0\u67e5\u4f20\u5165\u53c2\u6570",wa="\u6ca1\u6709\u627e\u5230\u76f8\u5e94\u7684\u7528\u6237\u6216\u7fa4\u7ec4\uff0c\u8bf7\u68c0\u67e5\u4f20\u5165\u53c2\u6570",Ia="\u672a\u8bb0\u5f55\u7684\u4f1a\u8bdd\u7c7b\u578b",ba="\u975e\u6cd5\u7684\u7fa4\u7c7b\u578b\uff0c\u8bf7\u68c0\u67e5\u4f20\u5165\u53c2\u6570",Ta="\u4e0d\u80fd\u52a0\u5165 Work \u7c7b\u578b\u7684\u7fa4\u7ec4",ka="\u7fa4\u7ec4 ID \u975e\u6cd5\uff0cPublic/Work/Meeting/AVChatRoom \u7c7b\u578b\u7fa4\u7ec4\u4e0d\u80fd\u4ee5 @TGS#_ \u4e3a\u524d\u7f00\uff0c\u793e\u7fa4\u5fc5\u987b\u4ee5 @TGS#_ \u4e3a\u524d\u7f00",Sa="AVChatRoom \u7c7b\u578b\u7684\u7fa4\u7ec4\u4e0d\u80fd\u8f6c\u8ba9\u7fa4\u4e3b",Da="\u4e0d\u80fd\u628a\u7fa4\u4e3b\u8f6c\u8ba9\u7ed9\u81ea\u5df1",Ea="\u4e0d\u80fd\u89e3\u6563 Work \u7c7b\u578b\u7684\u7fa4\u7ec4",Aa="\u7528\u6237\u4e0d\u5728\u8be5\u7fa4\u7ec4\u5185",Na="\u52a0\u7fa4\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u4f20\u5165\u53c2\u6570\u6216\u91cd\u8bd5",Oa="AVChatRoom \u7c7b\u578b\u7684\u7fa4\u4e0d\u652f\u6301\u9080\u8bf7\u7fa4\u6210\u5458",Pa="\u975e AVChatRoom \u7c7b\u578b\u7684\u7fa4\u7ec4\u4e0d\u5141\u8bb8\u533f\u540d\u52a0\u7fa4\uff0c\u8bf7\u5148\u767b\u5f55\u540e\u518d\u52a0\u7fa4",La="\u4e0d\u80fd\u5728 AVChatRoom \u7c7b\u578b\u7684\u7fa4\u7ec4\u8e22\u4eba",Ra="\u4f60\u4e0d\u662f\u7fa4\u4e3b\uff0c\u53ea\u6709\u7fa4\u4e3b\u624d\u6709\u6743\u9650\u64cd\u4f5c",xa="\u4e0d\u80fd\u5728 Work / AVChatRoom \u7c7b\u578b\u7684\u7fa4\u4e2d\u8bbe\u7f6e\u7fa4\u6210\u5458\u8eab\u4efd",Ga="\u4e0d\u5408\u6cd5\u7684\u7fa4\u6210\u5458\u8eab\u4efd\uff0c\u8bf7\u68c0\u67e5\u4f20\u5165\u53c2\u6570",$a="\u4e0d\u80fd\u8bbe\u7f6e\u81ea\u5df1\u7684\u7fa4\u6210\u5458\u8eab\u4efd\uff0c\u8bf7\u68c0\u67e5\u4f20\u5165\u53c2\u6570",Ua="\u4e0d\u80fd\u5c06\u81ea\u5df1\u7981\u8a00\uff0c\u8bf7\u68c0\u67e5\u4f20\u5165\u53c2\u6570",Fa="\u4f20\u5165 updateMyProfile \u63a5\u53e3\u7684\u53c2\u6570\u65e0\u6548",Ba="updateMyProfile \u65e0\u6807\u914d\u8d44\u6599\u5b57\u6bb5\u6216\u81ea\u5b9a\u4e49\u8d44\u6599\u5b57\u6bb5",ja="\u4f20\u5165 addToBlacklist \u63a5\u53e3\u7684\u53c2\u6570\u65e0\u6548",qa="\u4f20\u5165 removeFromBlacklist \u63a5\u53e3\u7684\u53c2\u6570\u65e0\u6548",Ha="\u4e0d\u80fd\u62c9\u9ed1\u81ea\u5df1",Va="\u7f51\u7edc\u9519\u8bef",Ka="\u8bf7\u6c42\u8d85\u65f6",za="\u672a\u8fde\u63a5\u5230\u7f51\u7edc",Wa="\u65e0\u6548\u64cd\u4f5c\uff0c\u5982\u8c03\u7528\u4e86\u672a\u5b9a\u4e49\u6216\u8005\u672a\u5b9e\u73b0\u7684\u65b9\u6cd5\u7b49",Ya="\u65e0\u6cd5\u627e\u5230\u534f\u8bae",Ja="\u65e0\u6cd5\u627e\u5230\u6a21\u5757",Xa="\u63a5\u53e3\u9700\u8981 SDK \u5904\u4e8e ready \u72b6\u6001\u540e\u624d\u80fd\u8c03\u7528",Qa="\u8d85\u51fa SDK \u9891\u7387\u63a7\u5236",Za="\u540e\u53f0\u670d\u52a1\u6b63\u5fd9\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",ei="networkRTT",ti="messageE2EDelay",ni="sendMessageC2C",oi="sendMessageGroup",ai="sendMessageGroupAV",ii="sendMessageRichMedia",si="cosUpload",ri="messageReceivedGroup",ci="messageReceivedGroupAVPush",ui="messageReceivedGroupAVPull",li=(r(xt={},ei,2),r(xt,ti,3),r(xt,ni,4),r(xt,oi,5),r(xt,ai,6),r(xt,ii,7),r(xt,ri,8),r(xt,ci,9),r(xt,ui,10),r(xt,si,11),xt),di={info:4,warning:5,error:6},fi={wifi:1,"2g":2,"3g":3,"4g":4,"5g":5,unknown:6,none:7,online:8},pi={login:4},gi=function(){function t(e){a(this,t),this.eventType=pi[e]||0,this.timestamp=0,this.networkType=8,this.code=0,this.message="",this.moreMessage="",this.extension=e,this.costTime=0,this.duplicate=!1,this.level=4,this.framework="",this._sentFlag=!1,this._startts=De()}return s(t,[{key:"updateTimeStamp",value:function(){this.timestamp=De()}},{key:"start",value:function(e){return this._startts=e,this}},{key:"end",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this._sentFlag){var n=De();0===this.costTime&&(this.costTime=n-this._startts),this.setMoreMessage("startts:".concat(this._startts," endts:").concat(n)),t?(this._sentFlag=!0,this._eventStatModule&&this._eventStatModule.pushIn(this)):setTimeout((function(){e._sentFlag=!0,e._eventStatModule&&e._eventStatModule.pushIn(e)}),0)}}},{key:"setError",value:function(e,t,n){return e instanceof Error?(this._sentFlag||(this.setNetworkType(n),t?(e.code&&this.setCode(e.code),e.message&&this.setMoreMessage(e.message)):(this.setCode(Uo.NO_NETWORK),this.setMoreMessage(za)),this.setLevel("error")),this):(Le.warn("SSOLogData.setError value not instanceof Error, please check!"),this)}},{key:"setCode",value:function(t){return Ye(t)||this._sentFlag||("ECONNABORTED"===t&&(this.code=103),He(t)?this.code=t:Le.warn("SSOLogData.setCode value not a number, please check!",t,e(t))),this}},{key:"setMessage",value:function(e){return Ye(e)||this._sentFlag||(He(e)&&(this.message=e.toString()),Ve(e)&&(this.message=e)),this}},{key:"setCostTime",value:function(e){return this.costTime=e,this}},{key:"setLevel",value:function(e){return Ye(e)||this._sentFlag||(this.level=di[e]),this}},{key:"setMoreMessage",value:function(e){return Pt(this.moreMessage)?this.moreMessage="".concat(e):this.moreMessage+=" ".concat(e),this}},{key:"setNetworkType",value:function(e){if(Ye(e))Le.warn("SSOLogData.setNetworkType value is undefined, please check!");else{var t=fi[e.toLowerCase()];Ye(t)||(this.networkType=t)}return this}},{key:"getStartTs",value:function(){return this._startts}},{key:"setFramework",value:function(e){this.framework=e}}],[{key:"bindEventStatModule",value:function(e){t.prototype._eventStatModule=e}}]),t}(),hi="sdkConstruct",mi="sdkReady",_i="login",vi="logout",yi="kickedOut",Mi="registerPlugin",Ci="kickOther",wi="wsConnect",Ii="wsOnOpen",bi="wsOnClose",Ti="wsOnError",ki="networkChange",Si="getCosAuthKey",Di="getCosPreSigUrl",Ei="getSnapshotInfo",Ai="upload",Ni="sendMessage",Oi="getC2CRoamingMessages",Pi="getGroupRoamingMessages",Li="revokeMessage",Ri="deleteMessage",xi="setC2CMessageRead",Gi="setGroupMessageRead",$i="emptyMessageBody",Ui="getPeerReadTime",Fi="uploadMergerMessage",Bi="downloadMergerMessage",ji="jsonParseError",qi="messageE2EDelayException",Hi="getConversationList",Vi="getConversationProfile",Ki="deleteConversation",zi="pinConversation",Wi="getConversationListInStorage",Yi="syncConversationList",Ji="setAllMessageRead",Xi="createGroup",Qi="applyJoinGroup",Zi="quitGroup",es="searchGroupByID",ts="changeGroupOwner",ns="handleGroupApplication",os="handleGroupInvitation",as="setMessageRemindType",is="dismissGroup",ss="updateGroupProfile",rs="getGroupList",cs="getGroupProfile",us="getGroupListInStorage",ls="getGroupLastSequence",ds="getGroupMissingMessage",fs="pagingGetGroupList",ps="getGroupSimplifiedInfo",gs="joinWithoutAuth",hs="initGroupAttributes",ms="setGroupAttributes",_s="deleteGroupAttributes",vs="getGroupAttributes",ys="getGroupMemberList",Ms="getGroupMemberProfile",Cs="addGroupMember",ws="deleteGroupMember",Is="setGroupMemberMuteTime",bs="setGroupMemberNameCard",Ts="setGroupMemberRole",ks="setGroupMemberCustomField",Ss="getGroupOnlineMemberCount",Ds="longPollingAVError",Es="messageLoss",As="messageStacked",Ns="getUserProfile",Os="updateMyProfile",Ps="getBlacklist",Ls="addToBlacklist",Rs="removeFromBlacklist",xs="callbackFunctionError",Gs="fetchCloudControlConfig",$s="pushedCloudControlConfig",Us="fetchCommercialConfig",Fs="pushedCommercialConfig",Bs="error",js="lastMessageNotExist",qs=function(){function e(t){a(this,e),this.type=E.MSG_TEXT,this.content={text:t.text||""}}return s(e,[{key:"setText",value:function(e){this.content.text=e}},{key:"sendable",value:function(){return 0!==this.content.text.length}}]),e}(),Hs=function(){function e(t){a(this,e),this._imageMemoryURL="",oe?this.createImageDataASURLInWXMiniApp(t.file):this.createImageDataASURLInWeb(t.file),this._initImageInfoModel(),this.type=E.MSG_IMAGE,this._percent=0,this.content={imageFormat:t.imageFormat||Re.UNKNOWN,uuid:t.uuid,imageInfoArray:[]},this.initImageInfoArray(t.imageInfoArray),this._defaultImage="http://imgcache.qq.com/open/qcloud/video/act/webim-images/default.jpg",this._autoFixUrl()}return s(e,[{key:"_initImageInfoModel",value:function(){var e=this;this._ImageInfoModel=function(t){this.instanceID=rt(9999999),this.sizeType=t.type||0,this.type=0,this.size=t.size||0,this.width=t.width||0,this.height=t.height||0,this.imageUrl=t.url||"",this.url=t.url||e._imageMemoryURL||e._defaultImage},this._ImageInfoModel.prototype={setSizeType:function(e){this.sizeType=e},setType:function(e){this.type=e},setImageUrl:function(e){e&&(this.imageUrl=e)},getImageUrl:function(){return this.imageUrl}}}},{key:"initImageInfoArray",value:function(e){for(var t=0,n=null,o=null;t<=2;)o=Ye(e)||Ye(e[t])?{type:0,size:0,width:0,height:0,url:""}:e[t],(n=new this._ImageInfoModel(o)).setSizeType(t+1),n.setType(t),this.addImageInfo(n),t++;this.updateAccessSideImageInfoArray()}},{key:"updateImageInfoArray",value:function(e){for(var t,n=this.content.imageInfoArray.length,o=0;o<n;o++)t=this.content.imageInfoArray[o],e[o].size&&(t.size=e[o].size),e[o].url&&t.setImageUrl(e[o].url),e[o].width&&(t.width=e[o].width),e[o].height&&(t.height=e[o].height)}},{key:"_autoFixUrl",value:function(){for(var e=this.content.imageInfoArray.length,t="",n="",o=["http","https"],a=null,i=0;i<e;i++)this.content.imageInfoArray[i].url&&""!==(a=this.content.imageInfoArray[i]).imageUrl&&(n=a.imageUrl.slice(0,a.imageUrl.indexOf("://")+1),t=a.imageUrl.slice(a.imageUrl.indexOf("://")+1),o.indexOf(n)<0&&(n="https:"),this.content.imageInfoArray[i].setImageUrl([n,t].join("")))}},{key:"updatePercent",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:"updateImageFormat",value:function(e){this.content.imageFormat=Re[e.toUpperCase()]||Re.UNKNOWN}},{key:"createImageDataASURLInWeb",value:function(e){void 0!==e&&e.files.length>0&&(this._imageMemoryURL=window.URL.createObjectURL(e.files[0]))}},{key:"createImageDataASURLInWXMiniApp",value:function(e){e&&e.url&&(this._imageMemoryURL=e.url)}},{key:"replaceImageInfo",value:function(e,t){this.content.imageInfoArray[t]instanceof this._ImageInfoModel||(this.content.imageInfoArray[t]=e)}},{key:"addImageInfo",value:function(e){this.content.imageInfoArray.length>=3||this.content.imageInfoArray.push(e)}},{key:"updateAccessSideImageInfoArray",value:function(){var e=this.content.imageInfoArray,t=e[0],n=t.width,o=void 0===n?0:n,a=t.height,i=void 0===a?0:a;0!==o&&0!==i&&(St(e),Object.assign(e[2],kt({originWidth:o,originHeight:i,min:720})))}},{key:"sendable",value:function(){return 0!==this.content.imageInfoArray.length&&""!==this.content.imageInfoArray[0].imageUrl&&0!==this.content.imageInfoArray[0].size}}]),e}(),Vs=function(){function e(t){a(this,e),this.type=E.MSG_FACE,this.content=t||null}return s(e,[{key:"sendable",value:function(){return null!==this.content}}]),e}(),Ks=function(){function e(t){a(this,e),this.type=E.MSG_AUDIO,this._percent=0,this.content={downloadFlag:2,second:t.second,size:t.size,url:t.url,remoteAudioUrl:t.url||"",uuid:t.uuid}}return s(e,[{key:"updatePercent",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:"updateAudioUrl",value:function(e){this.content.remoteAudioUrl=e}},{key:"sendable",value:function(){return""!==this.content.remoteAudioUrl}}]),e}(),zs={from:!0,groupID:!0,groupName:!0,to:!0},Ws=function(){function e(t){a(this,e),this.type=E.MSG_GRP_TIP,this.content={},this._initContent(t)}return s(e,[{key:"_initContent",value:function(e){var t=this;Object.keys(e).forEach((function(n){switch(n){case"remarkInfo":break;case"groupProfile":t.content.groupProfile={},t._initGroupProfile(e[n]);break;case"operatorInfo":break;case"memberInfoList":case"msgMemberInfo":t._updateMemberList(e[n]);break;case"onlineMemberInfo":break;case"memberNum":t.content[n]=e[n],t.content.memberCount=e[n];break;default:t.content[n]=e[n]}})),this.content.userIDList||(this.content.userIDList=[this.content.operatorID])}},{key:"_initGroupProfile",value:function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var o=t[n];zs[o]&&(this.content.groupProfile[o]=e[o])}}},{key:"_updateMemberList",value:function(e){Pt(this.content.memberList)?this.content.memberList=e:this.content.memberList.forEach((function(t){e.forEach((function(e){t.userID===e.userID&&Object.assign(t,e)}))}))}}]),e}(),Ys={from:!0,groupID:!0,groupName:!0,to:!0},Js=function(){function e(t){a(this,e),this.type=E.MSG_GRP_SYS_NOTICE,this.content={},this._initContent(t)}return s(e,[{key:"_initContent",value:function(e){var t=this;Object.keys(e).forEach((function(n){switch(n){case"memberInfoList":break;case"remarkInfo":t.content.handleMessage=e[n];break;case"groupProfile":t.content.groupProfile={},t._initGroupProfile(e[n]);break;default:t.content[n]=e[n]}}))}},{key:"_initGroupProfile",value:function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var o=t[n];Ys[o]&&("groupName"===o?this.content.groupProfile.name=e[o]:this.content.groupProfile[o]=e[o])}}}]),e}(),Xs=function(){function e(t){a(this,e),this.type=E.MSG_FILE,this._percent=0;var n=this._getFileInfo(t);this.content={downloadFlag:2,fileUrl:t.url||"",uuid:t.uuid,fileName:n.name||"",fileSize:n.size||0}}return s(e,[{key:"_getFileInfo",value:function(e){if(!Ye(e.fileName)&&!Ye(e.fileSize))return{size:e.fileSize,name:e.fileName};var t=e.file.files[0];if(ne){if(t.path&&-1!==t.path.indexOf(".")){var n=t.path.slice(t.path.lastIndexOf(".")+1).toLowerCase();t.type=n,t.name||(t.name="".concat(rt(999999),".").concat(n))}t.name||(t.type="",t.name=t.path.slice(t.path.lastIndexOf("/")+1).toLowerCase()),t.suffix&&(t.type=t.suffix),t.url||(t.url=t.path)}return{size:t.size,name:t.name}}},{key:"updatePercent",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:"updateFileUrl",value:function(e){this.content.fileUrl=e}},{key:"sendable",value:function(){return""!==this.content.fileUrl&&""!==this.content.fileName&&0!==this.content.fileSize}}]),e}(),Qs=function(){function e(t){a(this,e),this.type=E.MSG_CUSTOM,this.content={data:t.data||"",description:t.description||"",extension:t.extension||""}}return s(e,[{key:"setData",value:function(e){return this.content.data=e,this}},{key:"setDescription",value:function(e){return this.content.description=e,this}},{key:"setExtension",value:function(e){return this.content.extension=e,this}},{key:"sendable",value:function(){return 0!==this.content.data.length||0!==this.content.description.length||0!==this.content.extension.length}}]),e}(),Zs=function(){function e(t){a(this,e),this.type=E.MSG_VIDEO,this._percent=0,this.content={remoteVideoUrl:t.remoteVideoUrl||t.videoUrl||"",videoFormat:t.videoFormat,videoSecond:parseInt(t.videoSecond,10),videoSize:t.videoSize,videoUrl:t.videoUrl,videoDownloadFlag:2,videoUUID:t.videoUUID,thumbUUID:t.thumbUUID,thumbFormat:t.thumbFormat,thumbWidth:t.thumbWidth,snapshotWidth:t.thumbWidth,thumbHeight:t.thumbHeight,snapshotHeight:t.thumbHeight,thumbSize:t.thumbSize,snapshotSize:t.thumbSize,thumbDownloadFlag:2,thumbUrl:t.thumbUrl,snapshotUrl:t.thumbUrl}}return s(e,[{key:"updatePercent",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:"updateVideoUrl",value:function(e){e&&(this.content.remoteVideoUrl=e)}},{key:"updateSnapshotInfo",value:function(e){var t=e.snapshotUrl,n=e.snapshotWidth,o=e.snapshotHeight;Pt(t)||(this.content.thumbUrl=this.content.snapshotUrl=t),Pt(n)||(this.content.thumbWidth=this.content.snapshotWidth=Number(n)),Pt(o)||(this.content.thumbHeight=this.content.snapshotHeight=Number(o))}},{key:"sendable",value:function(){return""!==this.content.remoteVideoUrl}}]),e}(),er=function(){function e(t){a(this,e),this.type=E.MSG_LOCATION;var n=t.description,o=t.longitude,i=t.latitude;this.content={description:n,longitude:o,latitude:i}}return s(e,[{key:"sendable",value:function(){return!0}}]),e}(),tr=function(){function e(t){if(a(this,e),this.from=t.from,this.messageSender=t.from,this.time=t.time,this.messageSequence=t.sequence,this.clientSequence=t.clientSequence||t.sequence,this.messageRandom=t.random,this.cloudCustomData=t.cloudCustomData||"",t.ID)this.nick=t.nick||"",this.avatar=t.avatar||"",this.messageBody=[{type:t.type,payload:t.payload}],t.conversationType.startsWith(E.CONV_C2C)?this.receiverUserID=t.to:t.conversationType.startsWith(E.CONV_GROUP)&&(this.receiverGroupID=t.to),this.messageReceiver=t.to;else{this.nick=t.nick||"",this.avatar=t.avatar||"",this.messageBody=[];var n=t.elements[0].type,o=t.elements[0].content;this._patchRichMediaPayload(n,o),n===E.MSG_MERGER?this.messageBody.push({type:n,payload:new nr(o).content}):this.messageBody.push({type:n,payload:o}),t.groupID&&(this.receiverGroupID=t.groupID,this.messageReceiver=t.groupID),t.to&&(this.receiverUserID=t.to,this.messageReceiver=t.to)}}return s(e,[{key:"_patchRichMediaPayload",value:function(e,t){e===E.MSG_IMAGE?t.imageInfoArray.forEach((function(e){!e.imageUrl&&e.url&&(e.imageUrl=e.url,e.sizeType=e.type,1===e.type?e.type=0:3===e.type&&(e.type=1))})):e===E.MSG_VIDEO?!t.remoteVideoUrl&&t.videoUrl&&(t.remoteVideoUrl=t.videoUrl):e===E.MSG_AUDIO?!t.remoteAudioUrl&&t.url&&(t.remoteAudioUrl=t.url):e===E.MSG_FILE&&!t.fileUrl&&t.url&&(t.fileUrl=t.url,t.url=void 0)}}]),e}(),nr=function(){function e(t){if(a(this,e),this.type=E.MSG_MERGER,this.content={downloadKey:"",pbDownloadKey:"",messageList:[],title:"",abstractList:[],compatibleText:"",version:0,layersOverLimit:!1},t.downloadKey){var n=t.downloadKey,o=t.pbDownloadKey,i=t.title,s=t.abstractList,r=t.compatibleText,c=t.version;this.content.downloadKey=n,this.content.pbDownloadKey=o,this.content.title=i,this.content.abstractList=s,this.content.compatibleText=r,this.content.version=c||0}else if(Pt(t.messageList))1===t.layersOverLimit&&(this.content.layersOverLimit=!0);else{var u=t.messageList,l=t.title,d=t.abstractList,f=t.compatibleText,p=t.version,g=[];u.forEach((function(e){if(!Pt(e)){var t=new tr(e);g.push(t)}})),this.content.messageList=g,this.content.title=l,this.content.abstractList=d,this.content.compatibleText=f,this.content.version=p||0}Le.debug("MergerElement.content:",this.content)}return s(e,[{key:"sendable",value:function(){return!Pt(this.content.messageList)||!Pt(this.content.downloadKey)}}]),e}(),or={1:E.MSG_PRIORITY_HIGH,2:E.MSG_PRIORITY_NORMAL,3:E.MSG_PRIORITY_LOW,4:E.MSG_PRIORITY_LOWEST},ar=function(){function e(t){a(this,e),this.ID="",this.conversationID=t.conversationID||null,this.conversationType=t.conversationType||E.CONV_C2C,this.conversationSubType=t.conversationSubType,this.time=t.time||Math.ceil(Date.now()/1e3),this.sequence=t.sequence||0,this.clientSequence=t.clientSequence||t.sequence||0,this.random=t.random||0===t.random?t.random:rt(),this.priority=this._computePriority(t.priority),this.nick=t.nick||"",this.avatar=t.avatar||"",this.isPeerRead=!1,this.nameCard="",this._elements=[],this.isPlaceMessage=t.isPlaceMessage||0,this.isRevoked=2===t.isPlaceMessage||8===t.msgFlagBits,this.from=t.from||null,this.to=t.to||null,this.flow="",this.isSystemMessage=t.isSystemMessage||!1,this.protocol=t.protocol||"JSON",this.isResend=!1,this.isRead=!1,this.status=t.status||Gt.SUCCESS,this._onlineOnlyFlag=!1,this._groupAtInfoList=[],this._relayFlag=!1,this.atUserList=[],this.cloudCustomData=t.cloudCustomData||"",this.isDeleted=!1,this.isModified=!1,this._isExcludedFromUnreadCount=!(!t.messageControlInfo||1!==t.messageControlInfo.excludedFromUnreadCount),this._isExcludedFromLastMessage=!(!t.messageControlInfo||1!==t.messageControlInfo.excludedFromLastMessage),this.clientTime=t.clientTime||0,this.reInitialize(t.currentUser),this.extractGroupInfo(t.groupProfile||null),this.handleGroupAtInfo(t)}return s(e,[{key:"getElements",value:function(){return this._elements}},{key:"extractGroupInfo",value:function(e){if(null!==e){Ve(e.nick)&&(this.nick=e.nick),Ve(e.avatar)&&(this.avatar=e.avatar);var t=e.messageFromAccountExtraInformation;ze(t)&&Ve(t.nameCard)&&(this.nameCard=t.nameCard)}}},{key:"handleGroupAtInfo",value:function(e){var t=this;e.payload&&e.payload.atUserList&&e.payload.atUserList.forEach((function(e){e!==E.MSG_AT_ALL?(t._groupAtInfoList.push({groupAtAllFlag:0,groupAtUserID:e}),t.atUserList.push(e)):(t._groupAtInfoList.push({groupAtAllFlag:1}),t.atUserList.push(E.MSG_AT_ALL))})),We(e.groupAtInfo)&&e.groupAtInfo.forEach((function(e){0===e.groupAtAllFlag?t.atUserList.push(e.groupAtUserID):1===e.groupAtAllFlag&&t.atUserList.push(E.MSG_AT_ALL)}))}},{key:"getGroupAtInfoList",value:function(){return this._groupAtInfoList}},{key:"_initProxy",value:function(){this._elements[0]&&(this.payload=this._elements[0].content,this.type=this._elements[0].type)}},{key:"reInitialize",value:function(e){e&&(this.status=this.from?Gt.SUCCESS:Gt.UNSEND,!this.from&&(this.from=e)),this._initFlow(e),this._initSequence(e),this._concatConversationID(e),this.generateMessageID(e)}},{key:"isSendable",value:function(){return 0!==this._elements.length&&("function"!=typeof this._elements[0].sendable?(Le.warn("".concat(this._elements[0].type,' need "boolean : sendable()" method')),!1):this._elements[0].sendable())}},{key:"_initTo",value:function(e){this.conversationType===E.CONV_GROUP&&(this.to=e.groupID)}},{key:"_initSequence",value:function(e){0===this.clientSequence&&e&&(this.clientSequence=function(e){if(!e)return Le.error("autoIncrementIndex(string: key) need key parameter"),!1;if(void 0===dt[e]){var t=new Date,n="3".concat(t.getHours()).slice(-2),o="0".concat(t.getMinutes()).slice(-2),a="0".concat(t.getSeconds()).slice(-2);dt[e]=parseInt([n,o,a,"0001"].join("")),n=null,o=null,a=null,Le.log("autoIncrementIndex start index:".concat(dt[e]))}return dt[e]++}(e)),0===this.sequence&&this.conversationType===E.CONV_C2C&&(this.sequence=this.clientSequence)}},{key:"generateMessageID",value:function(e){var t=e===this.from?1:0,n=this.sequence>0?this.sequence:this.clientSequence;this.ID="".concat(this.conversationID,"-").concat(n,"-").concat(this.random,"-").concat(t)}},{key:"_initFlow",value:function(e){""!==e&&(e===this.from?(this.flow="out",this.isRead=!0):this.flow="in")}},{key:"_concatConversationID",value:function(e){var t=this.to,n="",o=this.conversationType;o!==E.CONV_SYSTEM?(n=o===E.CONV_C2C?e===this.from?t:this.from:this.to,this.conversationID="".concat(o).concat(n)):this.conversationID=E.CONV_SYSTEM}},{key:"isElement",value:function(e){return e instanceof qs||e instanceof Hs||e instanceof Vs||e instanceof Ks||e instanceof Xs||e instanceof Zs||e instanceof Ws||e instanceof Js||e instanceof Qs||e instanceof er||e instanceof nr}},{key:"setElement",value:function(e){var t=this;if(this.isElement(e))return this._elements=[e],void this._initProxy();var n=function(e){if(e.type&&e.content)switch(e.type){case E.MSG_TEXT:t.setTextElement(e.content);break;case E.MSG_IMAGE:t.setImageElement(e.content);break;case E.MSG_AUDIO:t.setAudioElement(e.content);break;case E.MSG_FILE:t.setFileElement(e.content);break;case E.MSG_VIDEO:t.setVideoElement(e.content);break;case E.MSG_CUSTOM:t.setCustomElement(e.content);break;case E.MSG_LOCATION:t.setLocationElement(e.content);break;case E.MSG_GRP_TIP:t.setGroupTipElement(e.content);break;case E.MSG_GRP_SYS_NOTICE:t.setGroupSystemNoticeElement(e.content);break;case E.MSG_FACE:t.setFaceElement(e.content);break;case E.MSG_MERGER:t.setMergerElement(e.content);break;default:Le.warn(e.type,e.content,"no operation......")}};if(We(e))for(var o=0;o<e.length;o++)n(e[o]);else n(e);this._initProxy()}},{key:"clearElement",value:function(){this._elements.length=0}},{key:"setTextElement",value:function(e){var t="string"==typeof e?e:e.text,n=new qs({text:t});this._elements.push(n)}},{key:"setImageElement",value:function(e){var t=new Hs(e);this._elements.push(t)}},{key:"setAudioElement",value:function(e){var t=new Ks(e);this._elements.push(t)}},{key:"setFileElement",value:function(e){var t=new Xs(e);this._elements.push(t)}},{key:"setVideoElement",value:function(e){var t=new Zs(e);this._elements.push(t)}},{key:"setLocationElement",value:function(e){var t=new er(e);this._elements.push(t)}},{key:"setCustomElement",value:function(e){var t=new Qs(e);this._elements.push(t)}},{key:"setGroupTipElement",value:function(e){var t={},n=e.operationType;Pt(e.memberInfoList)?e.operatorInfo&&(t=e.operatorInfo):n!==E.GRP_TIP_MBR_JOIN&&n!==E.GRP_TIP_MBR_KICKED_OUT&&n!==E.GRP_TIP_MBR_SET_ADMIN&&n!==E.GRP_TIP_MBR_CANCELED_ADMIN||(t=e.memberInfoList[0]);var o=t,a=o.nick,i=o.avatar;Ve(a)&&(this.nick=a),Ve(i)&&(this.avatar=i);var s=new Ws(e);this._elements.push(s)}},{key:"setGroupSystemNoticeElement",value:function(e){var t=new Js(e);this._elements.push(t)}},{key:"setFaceElement",value:function(e){var t=new Vs(e);this._elements.push(t)}},{key:"setMergerElement",value:function(e){var t=new nr(e);this._elements.push(t)}},{key:"setIsRead",value:function(e){this.isRead=e}},{key:"setRelayFlag",value:function(e){this._relayFlag=e}},{key:"getRelayFlag",value:function(){return this._relayFlag}},{key:"_computePriority",value:function(e){if(Ye(e))return E.MSG_PRIORITY_NORMAL;if(Ve(e)&&-1!==Object.values(or).indexOf(e))return e;if(He(e)){var t=""+e;if(-1!==Object.keys(or).indexOf(t))return or[t]}return E.MSG_PRIORITY_NORMAL}},{key:"setNickAndAvatar",value:function(e){var t=e.nick,n=e.avatar;Ve(t)&&(this.nick=t),Ve(n)&&(this.avatar=n)}},{key:"setNameCard",value:function(e){Ve(e)&&(this.nameCard=e)}},{key:"elements",get:function(){return Le.warn("\uff01\uff01\uff01Message \u5b9e\u4f8b\u7684 elements \u5c5e\u6027\u5373\u5c06\u5e9f\u5f03\uff0c\u8bf7\u5c3d\u5feb\u4fee\u6539\u3002\u4f7f\u7528 type \u548c payload \u5c5e\u6027\u5904\u7406\u5355\u6761\u6d88\u606f\uff0c\u517c\u5bb9\u7ec4\u5408\u6d88\u606f\u4f7f\u7528 _elements \u5c5e\u6027\uff01\uff01\uff01"),this._elements}}]),e}(),ir=function(e){return{code:0,data:e||{}}},sr="https://cloud.tencent.com/document/product/",rr="\u60a8\u53ef\u4ee5\u5728\u5373\u65f6\u901a\u4fe1 IM \u63a7\u5236\u53f0\u7684\u3010\u5f00\u53d1\u8f85\u52a9\u5de5\u5177(https://console.cloud.tencent.com/im-detail/tool-usersig)\u3011\u9875\u9762\u6821\u9a8c UserSig\u3002",cr="UserSig \u975e\u6cd5\uff0c\u8bf7\u4f7f\u7528\u5b98\u7f51\u63d0\u4f9b\u7684 API \u91cd\u65b0\u751f\u6210 UserSig(".concat(sr,"269/32688)\u3002"),ur="#.E6.B6.88.E6.81.AF.E5.85.83.E7.B4.A0-timmsgelement",lr={70001:"UserSig \u5df2\u8fc7\u671f\uff0c\u8bf7\u91cd\u65b0\u751f\u6210\u3002\u5efa\u8bae UserSig \u6709\u6548\u671f\u8bbe\u7f6e\u4e0d\u5c0f\u4e8e24\u5c0f\u65f6\u3002",70002:"UserSig \u957f\u5ea6\u4e3a0\uff0c\u8bf7\u68c0\u67e5\u4f20\u5165\u7684 UserSig \u662f\u5426\u6b63\u786e\u3002",70003:cr,70005:cr,70009:"UserSig \u9a8c\u8bc1\u5931\u8d25\uff0c\u53ef\u80fd\u56e0\u4e3a\u751f\u6210 UserSig \u65f6\u6df7\u7528\u4e86\u5176\u4ed6 SDKAppID \u7684\u79c1\u94a5\u6216\u5bc6\u94a5\u5bfc\u81f4\uff0c\u8bf7\u4f7f\u7528\u5bf9\u5e94 SDKAppID \u4e0b\u7684\u79c1\u94a5\u6216\u5bc6\u94a5\u91cd\u65b0\u751f\u6210 UserSig(".concat(sr,"269/32688)\u3002"),70013:"\u8bf7\u6c42\u4e2d\u7684 UserID \u4e0e\u751f\u6210 UserSig \u65f6\u4f7f\u7528\u7684 UserID \u4e0d\u5339\u914d\u3002".concat(rr),70014:"\u8bf7\u6c42\u4e2d\u7684 SDKAppID \u4e0e\u751f\u6210 UserSig \u65f6\u4f7f\u7528\u7684 SDKAppID \u4e0d\u5339\u914d\u3002".concat(rr),70016:"\u5bc6\u94a5\u4e0d\u5b58\u5728\uff0cUserSig \u9a8c\u8bc1\u5931\u8d25\uff0c\u8bf7\u5728\u5373\u65f6\u901a\u4fe1 IM \u63a7\u5236\u53f0\u83b7\u53d6\u5bc6\u94a5(".concat(sr,"269/32578#.E8.8E.B7.E5.8F.96.E5.AF.86.E9.92.A5)\u3002"),70020:"SDKAppID \u672a\u627e\u5230\uff0c\u8bf7\u5728\u5373\u65f6\u901a\u4fe1 IM \u63a7\u5236\u53f0\u786e\u8ba4\u5e94\u7528\u4fe1\u606f\u3002",70050:"UserSig \u9a8c\u8bc1\u6b21\u6570\u8fc7\u4e8e\u9891\u7e41\u3002\u8bf7\u68c0\u67e5 UserSig \u662f\u5426\u6b63\u786e\uff0c\u5e76\u4e8e1\u5206\u949f\u540e\u91cd\u65b0\u9a8c\u8bc1\u3002".concat(rr),70051:"\u5e10\u53f7\u88ab\u62c9\u5165\u9ed1\u540d\u5355\u3002",70052:"UserSig \u5df2\u7ecf\u5931\u6548\uff0c\u8bf7\u91cd\u65b0\u751f\u6210\uff0c\u518d\u6b21\u5c1d\u8bd5\u3002",70107:"\u56e0\u5b89\u5168\u539f\u56e0\u88ab\u9650\u5236\u767b\u5f55\uff0c\u8bf7\u4e0d\u8981\u9891\u7e41\u767b\u5f55\u3002",70169:"\u8bf7\u6c42\u7684\u7528\u6237\u5e10\u53f7\u4e0d\u5b58\u5728\u3002",70114:"".concat("\u670d\u52a1\u7aef\u5185\u90e8\u8d85\u65f6\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\u3002"),70202:"".concat("\u670d\u52a1\u7aef\u5185\u90e8\u8d85\u65f6\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\u3002"),70206:"\u8bf7\u6c42\u4e2d\u6279\u91cf\u6570\u91cf\u4e0d\u5408\u6cd5\u3002",70402:"\u53c2\u6570\u975e\u6cd5\uff0c\u8bf7\u68c0\u67e5\u5fc5\u586b\u5b57\u6bb5\u662f\u5426\u586b\u5145\uff0c\u6216\u8005\u5b57\u6bb5\u7684\u586b\u5145\u662f\u5426\u6ee1\u8db3\u534f\u8bae\u8981\u6c42\u3002",70403:"\u8bf7\u6c42\u5931\u8d25\uff0c\u9700\u8981 App \u7ba1\u7406\u5458\u6743\u9650\u3002",70398:"\u5e10\u53f7\u6570\u8d85\u9650\u3002\u5982\u9700\u521b\u5efa\u591a\u4e8e100\u4e2a\u5e10\u53f7\uff0c\u8bf7\u5c06\u5e94\u7528\u5347\u7ea7\u4e3a\u4e13\u4e1a\u7248\uff0c\u5177\u4f53\u64cd\u4f5c\u6307\u5f15\u8bf7\u53c2\u89c1\u8d2d\u4e70\u6307\u5f15(".concat(sr,"269/32458)\u3002"),70500:"".concat("\u670d\u52a1\u7aef\u5185\u90e8\u9519\u8bef\uff0c\u8bf7\u91cd\u8bd5\u3002"),71e3:"\u5220\u9664\u5e10\u53f7\u5931\u8d25\u3002\u4ec5\u652f\u6301\u5220\u9664\u4f53\u9a8c\u7248\u5e10\u53f7\uff0c\u60a8\u5f53\u524d\u5e94\u7528\u4e3a\u4e13\u4e1a\u7248\uff0c\u6682\u4e0d\u652f\u6301\u5e10\u53f7\u5220\u9664\u3002",20001:"\u8bf7\u6c42\u5305\u975e\u6cd5\u3002",20002:"UserSig \u6216 A2 \u5931\u6548\u3002",20003:"\u6d88\u606f\u53d1\u9001\u65b9\u6216\u63a5\u6536\u65b9 UserID \u65e0\u6548\u6216\u4e0d\u5b58\u5728\uff0c\u8bf7\u68c0\u67e5 UserID \u662f\u5426\u5df2\u5bfc\u5165\u5373\u65f6\u901a\u4fe1 IM\u3002",20004:"\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u91cd\u8bd5\u3002",20005:"".concat("\u670d\u52a1\u7aef\u5185\u90e8\u9519\u8bef\uff0c\u8bf7\u91cd\u8bd5\u3002"),20006:"\u89e6\u53d1\u53d1\u9001".concat("\u5355\u804a\u6d88\u606f","\u4e4b\u524d\u56de\u8c03\uff0cApp \u540e\u53f0\u8fd4\u56de\u7981\u6b62\u4e0b\u53d1\u8be5\u6d88\u606f\u3002"),20007:"\u53d1\u9001".concat("\u5355\u804a\u6d88\u606f","\uff0c\u88ab\u5bf9\u65b9\u62c9\u9ed1\uff0c\u7981\u6b62\u53d1\u9001\u3002\u6d88\u606f\u53d1\u9001\u72b6\u6001\u9ed8\u8ba4\u5c55\u793a\u4e3a\u5931\u8d25\uff0c\u60a8\u53ef\u4ee5\u767b\u5f55\u63a7\u5236\u53f0\u4fee\u6539\u8be5\u573a\u666f\u4e0b\u7684\u6d88\u606f\u53d1\u9001\u72b6\u6001\u5c55\u793a\u7ed3\u679c\uff0c\u5177\u4f53\u64cd\u4f5c\u8bf7\u53c2\u89c1\u6d88\u606f\u4fdd\u7559\u8bbe\u7f6e(").concat(sr,"269/38656)\u3002"),20009:"\u6d88\u606f\u53d1\u9001\u53cc\u65b9\u4e92\u76f8\u4e0d\u662f\u597d\u53cb\uff0c\u7981\u6b62\u53d1\u9001\uff08\u914d\u7f6e".concat("\u5355\u804a\u6d88\u606f","\u6821\u9a8c\u597d\u53cb\u5173\u7cfb\u624d\u4f1a\u51fa\u73b0\uff09\u3002"),20010:"\u53d1\u9001".concat("\u5355\u804a\u6d88\u606f","\uff0c\u81ea\u5df1\u4e0d\u662f\u5bf9\u65b9\u7684\u597d\u53cb\uff08\u5355\u5411\u5173\u7cfb\uff09\uff0c\u7981\u6b62\u53d1\u9001\u3002"),20011:"\u53d1\u9001".concat("\u5355\u804a\u6d88\u606f","\uff0c\u5bf9\u65b9\u4e0d\u662f\u81ea\u5df1\u7684\u597d\u53cb\uff08\u5355\u5411\u5173\u7cfb\uff09\uff0c\u7981\u6b62\u53d1\u9001\u3002"),20012:"\u53d1\u9001\u65b9\u88ab\u7981\u8a00\uff0c\u8be5\u6761\u6d88\u606f\u88ab\u7981\u6b62\u53d1\u9001\u3002",20016:"\u6d88\u606f\u64a4\u56de\u8d85\u8fc7\u4e86\u65f6\u95f4\u9650\u5236\uff08\u9ed8\u8ba42\u5206\u949f\uff09\u3002",20018:"\u5220\u9664\u6f2b\u6e38\u5185\u90e8\u9519\u8bef\u3002",90001:"JSON \u683c\u5f0f\u89e3\u6790\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u8bf7\u6c42\u5305\u662f\u5426\u7b26\u5408 JSON \u89c4\u8303\u3002",90002:"".concat("JSON \u683c\u5f0f\u8bf7\u6c42\u5305\u4f53","\u4e2d MsgBody \u4e0d\u7b26\u5408\u6d88\u606f\u683c\u5f0f\u63cf\u8ff0\uff0c\u6216\u8005 MsgBody \u4e0d\u662f Array \u7c7b\u578b\uff0c\u8bf7\u53c2\u8003 TIMMsgElement \u5bf9\u8c61\u7684\u5b9a\u4e49(").concat(sr,"269/2720").concat(ur,")\u3002"),90003:"".concat("JSON \u683c\u5f0f\u8bf7\u6c42\u5305\u4f53","\u4e2d\u7f3a\u5c11 To_Account \u5b57\u6bb5\u6216\u8005 To_Account \u5e10\u53f7\u4e0d\u5b58\u5728\u3002"),90005:"".concat("JSON \u683c\u5f0f\u8bf7\u6c42\u5305\u4f53","\u4e2d\u7f3a\u5c11 MsgRandom \u5b57\u6bb5\u6216\u8005 MsgRandom \u5b57\u6bb5\u4e0d\u662f Integer \u7c7b\u578b\u3002"),90006:"".concat("JSON \u683c\u5f0f\u8bf7\u6c42\u5305\u4f53","\u4e2d\u7f3a\u5c11 MsgTimeStamp \u5b57\u6bb5\u6216\u8005 MsgTimeStamp \u5b57\u6bb5\u4e0d\u662f Integer \u7c7b\u578b\u3002"),90007:"".concat("JSON \u683c\u5f0f\u8bf7\u6c42\u5305\u4f53","\u4e2d MsgBody \u7c7b\u578b\u4e0d\u662f Array \u7c7b\u578b\uff0c\u8bf7\u5c06\u5176\u4fee\u6539\u4e3a Array \u7c7b\u578b\u3002"),90008:"".concat("JSON \u683c\u5f0f\u8bf7\u6c42\u5305\u4f53","\u4e2d\u7f3a\u5c11 From_Account \u5b57\u6bb5\u6216\u8005 From_Account \u5e10\u53f7\u4e0d\u5b58\u5728\u3002"),90009:"\u8bf7\u6c42\u9700\u8981 App \u7ba1\u7406\u5458\u6743\u9650\u3002",90010:"".concat("JSON \u683c\u5f0f\u8bf7\u6c42\u5305\u4f53","\u4e0d\u7b26\u5408\u6d88\u606f\u683c\u5f0f\u63cf\u8ff0\uff0c\u8bf7\u53c2\u8003 TIMMsgElement \u5bf9\u8c61\u7684\u5b9a\u4e49(").concat(sr,"269/2720").concat(ur,")\u3002"),90011:"\u6279\u91cf\u53d1\u6d88\u606f\u76ee\u6807\u5e10\u53f7\u8d85\u8fc7500\uff0c\u8bf7\u51cf\u5c11 To_Account \u4e2d\u76ee\u6807\u5e10\u53f7\u6570\u91cf\u3002",90012:"To_Account \u6ca1\u6709\u6ce8\u518c\u6216\u4e0d\u5b58\u5728\uff0c\u8bf7\u786e\u8ba4 To_Account \u662f\u5426\u5bfc\u5165\u5373\u65f6\u901a\u4fe1 IM \u6216\u8005\u662f\u5426\u62fc\u5199\u9519\u8bef\u3002",90026:"\u6d88\u606f\u79bb\u7ebf\u5b58\u50a8\u65f6\u95f4\u9519\u8bef\uff08\u6700\u591a\u4e0d\u80fd\u8d85\u8fc77\u5929\uff09\u3002",90031:"".concat("JSON \u683c\u5f0f\u8bf7\u6c42\u5305\u4f53","\u4e2d SyncOtherMachine \u5b57\u6bb5\u4e0d\u662f Integer \u7c7b\u578b\u3002"),90044:"".concat("JSON \u683c\u5f0f\u8bf7\u6c42\u5305\u4f53","\u4e2d MsgLifeTime \u5b57\u6bb5\u4e0d\u662f Integer \u7c7b\u578b\u3002"),90048:"\u8bf7\u6c42\u7684\u7528\u6237\u5e10\u53f7\u4e0d\u5b58\u5728\u3002",90054:"\u64a4\u56de\u8bf7\u6c42\u4e2d\u7684 MsgKey \u4e0d\u5408\u6cd5\u3002",90994:"".concat("\u670d\u52a1\u7aef\u5185\u90e8\u9519\u8bef\uff0c\u8bf7\u91cd\u8bd5\u3002"),90995:"".concat("\u670d\u52a1\u7aef\u5185\u90e8\u9519\u8bef\uff0c\u8bf7\u91cd\u8bd5\u3002"),91e3:"".concat("\u670d\u52a1\u7aef\u5185\u90e8\u9519\u8bef\uff0c\u8bf7\u91cd\u8bd5\u3002"),90992:"".concat("\u670d\u52a1\u7aef\u5185\u90e8\u9519\u8bef\uff0c\u8bf7\u91cd\u8bd5\u3002","\u5982\u679c\u6240\u6709\u8bf7\u6c42\u90fd\u8fd4\u56de\u8be5\u9519\u8bef\u7801\uff0c\u4e14 App \u914d\u7f6e\u4e86\u7b2c\u4e09\u65b9\u56de\u8c03\uff0c\u8bf7\u68c0\u67e5 App \u670d\u52a1\u7aef\u662f\u5426\u6b63\u5e38\u5411\u5373\u65f6\u901a\u4fe1 IM \u540e\u53f0\u670d\u52a1\u7aef\u8fd4\u56de\u56de\u8c03\u7ed3\u679c\u3002"),93e3:"JSON \u6570\u636e\u5305\u8d85\u957f\uff0c\u6d88\u606f\u5305\u4f53\u8bf7\u4e0d\u8981\u8d85\u8fc78k\u3002",91101:"Web \u7aef\u957f\u8f6e\u8be2\u88ab\u8e22\uff08Web \u7aef\u540c\u65f6\u5728\u7ebf\u5b9e\u4f8b\u4e2a\u6570\u8d85\u51fa\u9650\u5236\uff09\u3002",10002:"".concat("\u670d\u52a1\u7aef\u5185\u90e8\u9519\u8bef\uff0c\u8bf7\u91cd\u8bd5\u3002"),10003:"\u8bf7\u6c42\u4e2d\u7684\u63a5\u53e3\u540d\u79f0\u9519\u8bef\uff0c\u8bf7\u6838\u5bf9\u63a5\u53e3\u540d\u79f0\u5e76\u91cd\u8bd5\u3002",10004:"\u53c2\u6570\u975e\u6cd5\uff0c\u8bf7\u6839\u636e\u9519\u8bef\u63cf\u8ff0\u68c0\u67e5\u8bf7\u6c42\u662f\u5426\u6b63\u786e\u3002",10005:"\u8bf7\u6c42\u5305\u4f53\u4e2d\u643a\u5e26\u7684\u5e10\u53f7\u6570\u91cf\u8fc7\u591a\u3002",10006:"\u64cd\u4f5c\u9891\u7387\u9650\u5236\uff0c\u8bf7\u5c1d\u8bd5\u964d\u4f4e\u8c03\u7528\u7684\u9891\u7387\u3002",10007:"\u64cd\u4f5c\u6743\u9650\u4e0d\u8db3\uff0c\u4f8b\u5982 Work ".concat("\u7fa4\u7ec4","\u4e2d\u666e\u901a\u6210\u5458\u5c1d\u8bd5\u6267\u884c\u8e22\u4eba\u64cd\u4f5c\uff0c\u4f46\u53ea\u6709 App \u7ba1\u7406\u5458\u624d\u6709\u6743\u9650\u3002"),10008:"\u8bf7\u6c42\u975e\u6cd5\uff0c\u53ef\u80fd\u662f\u8bf7\u6c42\u4e2d\u643a\u5e26\u7684\u7b7e\u540d\u4fe1\u606f\u9a8c\u8bc1\u4e0d\u6b63\u786e\uff0c\u8bf7\u518d\u6b21\u5c1d\u8bd5\u3002",10009:"\u8be5\u7fa4\u4e0d\u5141\u8bb8\u7fa4\u4e3b\u4e3b\u52a8\u9000\u51fa\u3002",10010:"".concat("\u7fa4\u7ec4","\u4e0d\u5b58\u5728\uff0c\u6216\u8005\u66fe\u7ecf\u5b58\u5728\u8fc7\uff0c\u4f46\u662f\u76ee\u524d\u5df2\u7ecf\u88ab\u89e3\u6563\u3002"),10011:"\u89e3\u6790 JSON \u5305\u4f53\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u5305\u4f53\u7684\u683c\u5f0f\u662f\u5426\u7b26\u5408 JSON \u683c\u5f0f\u3002",10012:"\u53d1\u8d77\u64cd\u4f5c\u7684 UserID \u975e\u6cd5\uff0c\u8bf7\u68c0\u67e5\u53d1\u8d77\u64cd\u4f5c\u7684\u7528\u6237 UserID \u662f\u5426\u586b\u5199\u6b63\u786e\u3002",10013:"\u88ab\u9080\u8bf7\u52a0\u5165\u7684\u7528\u6237\u5df2\u7ecf\u662f\u7fa4\u6210\u5458\u3002",10014:"\u7fa4\u5df2\u6ee1\u5458\uff0c\u65e0\u6cd5\u5c06\u8bf7\u6c42\u4e2d\u7684\u7528\u6237\u52a0\u5165".concat("\u7fa4\u7ec4","\uff0c\u5982\u679c\u662f\u6279\u91cf\u52a0\u4eba\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u51cf\u5c11\u52a0\u5165\u7528\u6237\u7684\u6570\u91cf\u3002"),10015:"\u627e\u4e0d\u5230\u6307\u5b9a ID \u7684".concat("\u7fa4\u7ec4","\u3002"),10016:"App \u540e\u53f0\u901a\u8fc7\u7b2c\u4e09\u65b9\u56de\u8c03\u62d2\u7edd\u672c\u6b21\u64cd\u4f5c\u3002",10017:"\u56e0\u88ab\u7981\u8a00\u800c\u4e0d\u80fd\u53d1\u9001\u6d88\u606f\uff0c\u8bf7\u68c0\u67e5\u53d1\u9001\u8005\u662f\u5426\u88ab\u8bbe\u7f6e\u7981\u8a00\u3002",10018:"\u5e94\u7b54\u5305\u957f\u5ea6\u8d85\u8fc7\u6700\u5927\u5305\u957f\uff081MB\uff09\uff0c\u8bf7\u6c42\u7684\u5185\u5bb9\u8fc7\u591a\uff0c\u8bf7\u5c1d\u8bd5\u51cf\u5c11\u5355\u6b21\u8bf7\u6c42\u7684\u6570\u636e\u91cf\u3002",10019:"\u8bf7\u6c42\u7684\u7528\u6237\u5e10\u53f7\u4e0d\u5b58\u5728\u3002",10021:"".concat("\u7fa4\u7ec4"," ID \u5df2\u88ab\u4f7f\u7528\uff0c\u8bf7\u9009\u62e9\u5176\u4ed6\u7684").concat("\u7fa4\u7ec4"," ID\u3002"),10023:"\u53d1\u6d88\u606f\u7684\u9891\u7387\u8d85\u9650\uff0c\u8bf7\u5ef6\u957f\u4e24\u6b21\u53d1\u6d88\u606f\u65f6\u95f4\u7684\u95f4\u9694\u3002",10024:"\u6b64\u9080\u8bf7\u6216\u8005\u7533\u8bf7\u8bf7\u6c42\u5df2\u7ecf\u88ab\u5904\u7406\u3002",10025:"".concat("\u7fa4\u7ec4"," ID \u5df2\u88ab\u4f7f\u7528\uff0c\u5e76\u4e14\u64cd\u4f5c\u8005\u4e3a\u7fa4\u4e3b\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u3002"),10026:"\u8be5 SDKAppID \u8bf7\u6c42\u7684\u547d\u4ee4\u5b57\u5df2\u88ab\u7981\u7528\u3002",10030:"\u8bf7\u6c42\u64a4\u56de\u7684\u6d88\u606f\u4e0d\u5b58\u5728\u3002",10031:"\u6d88\u606f\u64a4\u56de\u8d85\u8fc7\u4e86\u65f6\u95f4\u9650\u5236\uff08\u9ed8\u8ba42\u5206\u949f\uff09\u3002",10032:"\u8bf7\u6c42\u64a4\u56de\u7684\u6d88\u606f\u4e0d\u652f\u6301\u64a4\u56de\u64cd\u4f5c\u3002",10033:"".concat("\u7fa4\u7ec4","\u7c7b\u578b\u4e0d\u652f\u6301\u6d88\u606f\u64a4\u56de\u64cd\u4f5c\u3002"),10034:"\u8be5\u6d88\u606f\u7c7b\u578b\u4e0d\u652f\u6301\u5220\u9664\u64cd\u4f5c\u3002",10035:"\u76f4\u64ad\u7fa4\u548c\u5728\u7ebf\u6210\u5458\u5e7f\u64ad\u5927\u7fa4\u4e0d\u652f\u6301\u5220\u9664\u6d88\u606f\u3002",10036:"\u76f4\u64ad\u7fa4\u521b\u5efa\u6570\u91cf\u8d85\u8fc7\u4e86\u9650\u5236\uff0c\u8bf7\u53c2\u8003\u4ef7\u683c\u8bf4\u660e(".concat(sr,"269/11673)\u8d2d\u4e70\u9884\u4ed8\u8d39\u5957\u9910\u201cIM\u76f4\u64ad\u7fa4\u201d\u3002"),10037:"\u5355\u4e2a\u7528\u6237\u53ef\u521b\u5efa\u548c\u52a0\u5165\u7684".concat("\u7fa4\u7ec4","\u6570\u91cf\u8d85\u8fc7\u4e86\u9650\u5236\uff0c\u8bf7\u53c2\u8003\u4ef7\u683c\u8bf4\u660e(").concat(sr,"269/11673)\u8d2d\u4e70\u6216\u5347\u7ea7\u9884\u4ed8\u8d39\u5957\u9910\u201c\u5355\u4eba\u53ef\u521b\u5efa\u4e0e\u52a0\u5165").concat("\u7fa4\u7ec4","\u6570\u201d\u3002"),10038:"\u7fa4\u6210\u5458\u6570\u91cf\u8d85\u8fc7\u9650\u5236\uff0c\u8bf7\u53c2\u8003\u4ef7\u683c\u8bf4\u660e(".concat(sr,"269/11673)\u8d2d\u4e70\u6216\u5347\u7ea7\u9884\u4ed8\u8d39\u5957\u9910\u201c\u6269\u5c55\u7fa4\u4eba\u6570\u4e0a\u9650\u201d\u3002"),10041:"\u8be5\u5e94\u7528\uff08SDKAppID\uff09\u5df2\u914d\u7f6e\u4e0d\u652f\u6301\u7fa4\u6d88\u606f\u64a4\u56de\u3002",10050:"\u7fa4\u5c5e\u6027 key \u4e0d\u5b58\u5728",10056:"\u8bf7\u5728\u5199\u5165\u7fa4\u5c5e\u6027\u524d\u5148\u4f7f\u7528 getGroupAttributes \u63a5\u53e3\u66f4\u65b0\u672c\u5730\u7fa4\u5c5e\u6027\uff0c\u907f\u514d\u51b2\u7a81\u3002",30001:"\u8bf7\u6c42\u53c2\u6570\u9519\u8bef\uff0c\u8bf7\u6839\u636e\u9519\u8bef\u63cf\u8ff0\u68c0\u67e5\u8bf7\u6c42\u53c2\u6570",30002:"SDKAppID \u4e0d\u5339\u914d",30003:"\u8bf7\u6c42\u7684\u7528\u6237\u5e10\u53f7\u4e0d\u5b58\u5728",30004:"\u8bf7\u6c42\u9700\u8981 App \u7ba1\u7406\u5458\u6743\u9650",30005:"\u5173\u7cfb\u94fe\u5b57\u6bb5\u4e2d\u5305\u542b\u654f\u611f\u8bcd",30006:"".concat("\u670d\u52a1\u7aef\u5185\u90e8\u9519\u8bef\uff0c\u8bf7\u91cd\u8bd5\u3002"),30007:"".concat("\u7f51\u7edc\u8d85\u65f6\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5. "),30008:"\u5e76\u53d1\u5199\u5bfc\u81f4\u5199\u51b2\u7a81\uff0c\u5efa\u8bae\u4f7f\u7528\u6279\u91cf\u65b9\u5f0f",30009:"\u540e\u53f0\u7981\u6b62\u8be5\u7528\u6237\u53d1\u8d77\u52a0\u597d\u53cb\u8bf7\u6c42",30010:"\u81ea\u5df1\u7684\u597d\u53cb\u6570\u5df2\u8fbe\u7cfb\u7edf\u4e0a\u9650",30011:"\u5206\u7ec4\u5df2\u8fbe\u7cfb\u7edf\u4e0a\u9650",30012:"\u672a\u51b3\u6570\u5df2\u8fbe\u7cfb\u7edf\u4e0a\u9650",30014:"\u5bf9\u65b9\u7684\u597d\u53cb\u6570\u5df2\u8fbe\u7cfb\u7edf\u4e0a\u9650",30515:"\u8bf7\u6c42\u6dfb\u52a0\u597d\u53cb\u65f6\uff0c\u5bf9\u65b9\u5728\u81ea\u5df1\u7684\u9ed1\u540d\u5355\u4e2d\uff0c\u4e0d\u5141\u8bb8\u52a0\u597d\u53cb",30516:"\u8bf7\u6c42\u6dfb\u52a0\u597d\u53cb\u65f6\uff0c\u5bf9\u65b9\u7684\u52a0\u597d\u53cb\u9a8c\u8bc1\u65b9\u5f0f\u662f\u4e0d\u5141\u8bb8\u4efb\u4f55\u4eba\u6dfb\u52a0\u81ea\u5df1\u4e3a\u597d\u53cb",30525:"\u8bf7\u6c42\u6dfb\u52a0\u597d\u53cb\u65f6\uff0c\u81ea\u5df1\u5728\u5bf9\u65b9\u7684\u9ed1\u540d\u5355\u4e2d\uff0c\u4e0d\u5141\u8bb8\u52a0\u597d\u53cb",30539:"\u7b49\u5f85\u5bf9\u65b9\u540c\u610f",30540:"\u6dfb\u52a0\u597d\u53cb\u8bf7\u6c42\u88ab\u5b89\u5168\u7b56\u7565\u6253\u51fb\uff0c\u8bf7\u52ff\u9891\u7e41\u53d1\u8d77\u6dfb\u52a0\u597d\u53cb\u8bf7\u6c42",31704:"\u4e0e\u8bf7\u6c42\u5220\u9664\u7684\u5e10\u53f7\u4e4b\u95f4\u4e0d\u5b58\u5728\u597d\u53cb\u5173\u7cfb",31707:"\u5220\u9664\u597d\u53cb\u8bf7\u6c42\u88ab\u5b89\u5168\u7b56\u7565\u6253\u51fb\uff0c\u8bf7\u52ff\u9891\u7e41\u53d1\u8d77\u5220\u9664\u597d\u53cb\u8bf7\u6c42"},dr=function(e){l(n,e);var t=y(n);function n(e){var o;return a(this,n),(o=t.call(this)).code=e.code,o.message=lr[e.code]||e.message,o.data=e.data||{},o}return n}(h(Error)),fr=null,pr=function(e){fr=e},gr=function(e){return Promise.resolve(ir(e))},hr=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e instanceof dr)return t&&null!==fr&&fr.emit(D.ERROR,e),Promise.reject(e);if(e instanceof Error){var n=new dr({code:Uo.UNCAUGHT_ERROR,message:e.message});return t&&null!==fr&&fr.emit(D.ERROR,n),Promise.reject(n)}if(Ye(e)||Ye(e.code)||Ye(e.message))Le.error("IMPromise.reject \u5fc5\u987b\u6307\u5b9acode(\u9519\u8bef\u7801)\u548cmessage(\u9519\u8bef\u4fe1\u606f)!!!");else{if(He(e.code)&&Ve(e.message)){var o=new dr(e);return t&&null!==fr&&fr.emit(D.ERROR,o),Promise.reject(o)}Le.error("IMPromise.reject code(\u9519\u8bef\u7801)\u5fc5\u987b\u4e3a\u6570\u5b57\uff0cmessage(\u9519\u8bef\u4fe1\u606f)\u5fc5\u987b\u4e3a\u5b57\u7b26\u4e32!!!")}},mr=function(e){l(n,e);var t=y(n);function n(e){var o;return a(this,n),(o=t.call(this,e))._className="C2CModule",o}return s(n,[{key:"onNewC2CMessage",value:function(e){var t=e.dataList,n=e.isInstantMessage,o=e.C2CRemainingUnreadList,a=e.C2CPairUnreadList;Le.debug("".concat(this._className,".onNewC2CMessage count:").concat(t.length," isInstantMessage:").concat(n));var i=this._newC2CMessageStoredAndSummary({dataList:t,C2CRemainingUnreadList:o,C2CPairUnreadList:a,isInstantMessage:n}),s=i.conversationOptionsList,r=i.messageList,c=i.isUnreadC2CMessage;this.filterModifiedMessage(r),s.length>0&&this.getModule(en).onNewMessage({conversationOptionsList:s,isInstantMessage:n,isUnreadC2CMessage:c});var u=this.filterUnmodifiedMessage(r);n&&u.length>0&&this.emitOuterEvent(D.MESSAGE_RECEIVED,u),r.length=0}},{key:"_newC2CMessageStoredAndSummary",value:function(e){for(var t=e.dataList,n=e.C2CRemainingUnreadList,o=e.C2CPairUnreadList,a=e.isInstantMessage,i=null,s=[],r=[],c={},u=this.getModule(sn),l=this.getModule(mn),d=!1,f=0,p=t.length;f<p;f++){var g=t[f];g.currentUser=this.getMyUserID(),g.conversationType=E.CONV_C2C,g.isSystemMessage=!!g.isSystemMessage,(Ye(g.nick)||Ye(g.avatar))&&(d=!0,Le.debug("".concat(this._className,"._newC2CMessageStoredAndSummary nick or avatar missing!"))),i=new ar(g),g.elements=u.parseElements(g.elements,g.from),i.setElement(g.elements),i.setNickAndAvatar({nick:g.nick,avatar:g.avatar});var h=i.conversationID;if(a){var m=!1,_=this.getModule(en);if(i.from!==this.getMyUserID()){var v=_.getLatestMessageSentByPeer(h);if(v){var y=v.nick,M=v.avatar;d?i.setNickAndAvatar({nick:y,avatar:M}):y===i.nick&&M===i.avatar||(m=!0)}}else{var C=_.getLatestMessageSentByMe(h);if(C){var w=C.nick,I=C.avatar;w===i.nick&&I===i.avatar||_.modifyMessageSentByMe({conversationID:h,latestNick:i.nick,latestAvatar:i.avatar})}}var b=1===t[f].isModified;if(_.isMessageSentByCurrentInstance(i)?i.isModified=b:b=!1,0===g.msgLifeTime)i._onlineOnlyFlag=!0,r.push(i);else{if(!_.pushIntoMessageList(r,i,b))continue;m&&(_.modifyMessageSentByPeer({conversationID:h,latestNick:i.nick,latestAvatar:i.avatar}),_.updateUserProfileSpecifiedKey({conversationID:h,nick:i.nick,avatar:i.avatar}))}a&&i.clientTime>0&&l.addMessageDelay(i.clientTime)}if(0!==g.msgLifeTime){if(!1===i._onlineOnlyFlag)if(Ye(c[h])){var T=0;"in"===i.flow&&(i._isExcludedFromUnreadCount||(T=1)),c[h]=s.push({conversationID:h,unreadCount:T,type:i.conversationType,subType:i.conversationSubType,lastMessage:i._isExcludedFromLastMessage?"":i})-1}else{var k=c[h];s[k].type=i.conversationType,s[k].subType=i.conversationSubType,s[k].lastMessage=i._isExcludedFromLastMessage?"":i,"in"===i.flow&&(i._isExcludedFromUnreadCount||s[k].unreadCount++)}}else i._onlineOnlyFlag=!0}var S=!1;if(We(o))for(var D=function(e,t){if(o[e].unreadCount>0){S=!0;var n=s.find((function(t){return t.conversationID==="C2C".concat(o[e].from)}));n?n.unreadCount=o[e].unreadCount:s.push({conversationID:"C2C".concat(o[e].from),unreadCount:o[e].unreadCount,type:E.CONV_C2C})}},A=0,N=o.length;A<N;A++)D(A);if(We(n))for(var O=function(e,t){s.find((function(t){return t.conversationID==="C2C".concat(n[e].from)}))||s.push({conversationID:"C2C".concat(n[e].from),type:E.CONV_C2C,lastMsgTime:n[e].lastMsgTime})},P=0,L=n.length;P<L;P++)O(P);return{conversationOptionsList:s,messageList:r,isUnreadC2CMessage:S}}},{key:"onC2CMessageRevoked",value:function(e){var t=this;Le.debug("".concat(this._className,".onC2CMessageRevoked count:").concat(e.dataList.length));var n=this.getModule(en),o=[],a=null;e.dataList.forEach((function(e){if(e.c2cMessageRevokedNotify){var i=e.c2cMessageRevokedNotify.revokedInfos;Ye(i)||i.forEach((function(e){var i=t.getMyUserID()===e.from?"".concat(E.CONV_C2C).concat(e.to):"".concat(E.CONV_C2C).concat(e.from);(a=n.revoke(i,e.sequence,e.random))&&o.push(a)}))}})),0!==o.length&&(n.onMessageRevoked(o),this.emitOuterEvent(D.MESSAGE_REVOKED,o))}},{key:"onC2CMessageReadReceipt",value:function(e){var t=this;e.dataList.forEach((function(e){if(!Pt(e.c2cMessageReadReceipt)){var n=e.c2cMessageReadReceipt.to;e.c2cMessageReadReceipt.uinPairReadArray.forEach((function(e){var o=e.peerReadTime;Le.debug("".concat(t._className,"._onC2CMessageReadReceipt to:").concat(n," peerReadTime:").concat(o));var a="".concat(E.CONV_C2C).concat(n),i=t.getModule(en);i.recordPeerReadTime(a,o),i.updateMessageIsPeerReadProperty(a,o)}))}}))}},{key:"onC2CMessageReadNotice",value:function(e){var t=this;e.dataList.forEach((function(e){if(!Pt(e.c2cMessageReadNotice)){var n=t.getModule(en);e.c2cMessageReadNotice.uinPairReadArray.forEach((function(e){var o=e.from,a=e.peerReadTime;Le.debug("".concat(t._className,".onC2CMessageReadNotice from:").concat(o," lastReadTime:").concat(a));var i="".concat(E.CONV_C2C).concat(o);n.updateIsReadAfterReadReport({conversationID:i,lastMessageTime:a}),n.updateUnreadCount(i)}))}}))}},{key:"sendMessage",value:function(e,t){var n=this._createC2CMessagePack(e,t);return this.request(n)}},{key:"_createC2CMessagePack",value:function(e,t){var n=null;t&&(t.offlinePushInfo&&(n=t.offlinePushInfo),!0===t.onlineUserOnly&&(n?n.disablePush=!0:n={disablePush:!0}));var o="";Ve(e.cloudCustomData)&&e.cloudCustomData.length>0&&(o=e.cloudCustomData);var a=[];if(ze(t)&&ze(t.messageControlInfo)){var i=t.messageControlInfo,s=i.excludedFromUnreadCount,r=i.excludedFromLastMessage;!0===s&&a.push("NoUnread"),!0===r&&a.push("NoLastMsg")}return{protocolName:Tn,tjgID:this.generateTjgID(e),requestData:{fromAccount:this.getMyUserID(),toAccount:e.to,msgBody:e.getElements(),cloudCustomData:o,msgSeq:e.sequence,msgRandom:e.random,msgLifeTime:this.isOnlineMessage(e,t)?0:void 0,nick:e.nick,avatar:e.avatar,offlinePushInfo:n?{pushFlag:!0===n.disablePush?1:0,title:n.title||"",desc:n.description||"",ext:n.extension||"",apnsInfo:{badgeMode:!0===n.ignoreIOSBadge?1:0},androidInfo:{OPPOChannelID:n.androidOPPOChannelID||""}}:void 0,messageControlInfo:a,clientTime:Ae()}}}},{key:"isOnlineMessage",value:function(e,t){return!(!t||!0!==t.onlineUserOnly)}},{key:"revokeMessage",value:function(e){return this.request({protocolName:On,requestData:{msgInfo:{fromAccount:e.from,toAccount:e.to,msgSeq:e.sequence,msgRandom:e.random,msgTimeStamp:e.time}}})}},{key:"deleteMessage",value:function(e){var t=e.to,n=e.keyList;return Le.log("".concat(this._className,".deleteMessage toAccount:").concat(t," count:").concat(n.length)),this.request({protocolName:$n,requestData:{fromAccount:this.getMyUserID(),to:t,keyList:n}})}},{key:"setMessageRead",value:function(e){var t=this,n=e.conversationID,o=e.lastMessageTime,a="".concat(this._className,".setMessageRead");Le.log("".concat(a," conversationID:").concat(n," lastMessageTime:").concat(o)),He(o)||Le.warn("".concat(a," \u8bf7\u52ff\u4fee\u6539 Conversation.lastMessage.lastTime\uff0c\u5426\u5219\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5df2\u8bfb\u4e0a\u62a5\u7ed3\u679c\u4e0d\u51c6\u786e"));var i=new gi(xi);return i.setMessage("conversationID:".concat(n," lastMessageTime:").concat(o)),this.request({protocolName:Pn,requestData:{C2CMsgReaded:{cookie:"",C2CMsgReadedItem:[{toAccount:n.replace("C2C",""),lastMessageTime:o,receipt:1}]}}}).then((function(){i.setNetworkType(t.getNetworkType()).end(),Le.log("".concat(a," ok"));var e=t.getModule(en);return e.updateIsReadAfterReadReport({conversationID:n,lastMessageTime:o}),e.updateUnreadCount(n),ir()})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],a=n[1];i.setError(e,o,a).end()})),Le.log("".concat(a," failed. error:"),e),hr(e)}))}},{key:"getRoamingMessage",value:function(e){var t=this,n="".concat(this._className,".getRoamingMessage"),o=e.peerAccount,a=e.conversationID,i=e.count,s=e.lastMessageTime,r=e.messageKey,c="peerAccount:".concat(o," count:").concat(i||15," lastMessageTime:").concat(s||0," messageKey:").concat(r);Le.log("".concat(n," ").concat(c));var u=new gi(Oi);return this.request({protocolName:xn,requestData:{peerAccount:o,count:i||15,lastMessageTime:s||0,messageKey:r}}).then((function(e){var o=e.data,i=o.complete,s=o.messageList,r=o.messageKey,l=o.lastMessageTime;Ye(s)?Le.log("".concat(n," ok. complete:").concat(i," but messageList is undefined!")):Le.log("".concat(n," ok. complete:").concat(i," count:").concat(s.length)),u.setNetworkType(t.getNetworkType()).setMessage("".concat(c," complete:").concat(i," length:").concat(s.length)).end();var d=t.getModule(en);1===i&&d.setCompleted(a);var f=d.storeRoamingMessage(s,a);d.modifyMessageList(a),d.updateIsRead(a),d.updateRoamingMessageKeyAndTime(a,r,l);var p=d.getPeerReadTime(a);if(Le.log("".concat(n," update isPeerRead property. conversationID:").concat(a," peerReadTime:").concat(p)),p)d.updateMessageIsPeerReadProperty(a,p);else{var g=a.replace(E.CONV_C2C,"");t.getRemotePeerReadTime([g]).then((function(){d.updateMessageIsPeerReadProperty(a,d.getPeerReadTime(a))}))}return f})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],a=n[1];u.setMessage(c).setError(e,o,a).end()})),Le.warn("".concat(n," failed. error:"),e),hr(e)}))}},{key:"getRemotePeerReadTime",value:function(e){var t=this,n="".concat(this._className,".getRemotePeerReadTime");if(Pt(e))return Le.warn("".concat(n," userIDList is empty!")),Promise.resolve();var o=new gi(Ui);return Le.log("".concat(n," userIDList:").concat(e)),this.request({protocolName:Gn,requestData:{userIDList:e}}).then((function(a){var i=a.data.peerReadTimeList;Le.log("".concat(n," ok. peerReadTimeList:").concat(i));for(var s="",r=t.getModule(en),c=0;c<e.length;c++)s+="".concat(e[c],"-").concat(i[c]," "),i[c]>0&&r.recordPeerReadTime("C2C".concat(e[c]),i[c]);o.setNetworkType(t.getNetworkType()).setMessage(s).end()})).catch((function(e){t.probeNetwork().then((function(t){var n=M(t,2),a=n[0],i=n[1];o.setError(e,a,i).end()})),Le.warn("".concat(n," failed. error:"),e)}))}}]),n}(vn),_r=function(){function e(t){a(this,e),this.list=new Map,this._className="MessageListHandler",this._latestMessageSentByPeerMap=new Map,this._latestMessageSentByMeMap=new Map,this._groupLocalLastMessageSequenceMap=new Map}return s(e,[{key:"getLocalOldestMessageByConversationID",value:function(e){if(!e)return null;if(!this.list.has(e))return null;var t=this.list.get(e).values();return t?t.next().value:null}},{key:"pushIn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.conversationID,o=e.ID,a=!0;this.list.has(n)||this.list.set(n,new Map);var i=this.list.get(n).has(o);if(i){var s=this.list.get(n).get(o);if(!t||!0===s.isModified)return!1}return this.list.get(n).set(o,e),this._setLatestMessageSentByPeer(n,e),this._setLatestMessageSentByMe(n,e),this._setGroupLocalLastMessageSequence(n,e),a}},{key:"unshift",value:function(e){var t;if(We(e)){if(e.length>0){t=e[0].conversationID;var n=e.length;this._unshiftMultipleMessages(e),this._setGroupLocalLastMessageSequence(t,e[n-1])}}else t=e.conversationID,this._unshiftSingleMessage(e),this._setGroupLocalLastMessageSequence(t,e);if(t&&t.startsWith(E.CONV_C2C)){var o=Array.from(this.list.get(t).values()),a=o.length;if(0===a)return;for(var i=a-1;i>=0;i--)if("out"===o[i].flow){this._setLatestMessageSentByMe(t,o[i]);break}for(var s=a-1;s>=0;s--)if("in"===o[s].flow){this._setLatestMessageSentByPeer(t,o[s]);break}}}},{key:"_unshiftSingleMessage",value:function(e){var t=e.conversationID,n=e.ID;if(!this.list.has(t))return this.list.set(t,new Map),void this.list.get(t).set(n,e);var o=Array.from(this.list.get(t));o.unshift([n,e]),this.list.set(t,new Map(o))}},{key:"_unshiftMultipleMessages",value:function(e){for(var t=e.length,n=[],o=e[0].conversationID,a=this.list.has(o)?Array.from(this.list.get(o)):[],i=0;i<t;i++)n.push([e[i].ID,e[i]]);this.list.set(o,new Map(n.concat(a)))}},{key:"remove",value:function(e){var t=e.conversationID,n=e.ID;this.list.has(t)&&this.list.get(t).delete(n)}},{key:"revoke",value:function(e,t,n){if(Le.debug("revoke message",e,t,n),this.list.has(e)){var o,a=S(this.list.get(e));try{for(a.s();!(o=a.n()).done;){var i=M(o.value,2)[1];if(i.sequence===t&&!i.isRevoked&&(Ye(n)||i.random===n))return i.isRevoked=!0,i}}catch(u){a.e(u)}finally{a.f()}}return null}},{key:"removeByConversationID",value:function(e){this.list.has(e)&&(this.list.delete(e),this._latestMessageSentByPeerMap.delete(e),this._latestMessageSentByMeMap.delete(e))}},{key:"updateMessageIsPeerReadProperty",value:function(e,t){var n=[];if(this.list.has(e)){var o,a=S(this.list.get(e));try{for(a.s();!(o=a.n()).done;){var i=M(o.value,2)[1];i.time<=t&&!i.isPeerRead&&"out"===i.flow&&(i.isPeerRead=!0,n.push(i))}}catch(u){a.e(u)}finally{a.f()}Le.log("".concat(this._className,".updateMessageIsPeerReadProperty conversationID:").concat(e," peerReadTime:").concat(t," count:").concat(n.length))}return n}},{key:"updateMessageIsModifiedProperty",value:function(e){var t=e.conversationID,n=e.ID;if(this.list.has(t)){var o=this.list.get(t).get(n);o&&(o.isModified=!0)}}},{key:"hasLocalMessageList",value:function(e){return this.list.has(e)}},{key:"getLocalMessageList",value:function(e){return this.hasLocalMessageList(e)?C(this.list.get(e).values()):[]}},{key:"hasLocalMessage",value:function(e,t){return!!this.hasLocalMessageList(e)&&this.list.get(e).has(t)}},{key:"getLocalMessage",value:function(e,t){return this.hasLocalMessage(e,t)?this.list.get(e).get(t):null}},{key:"getLocalLastMessage",value:function(e){var t=this.getLocalMessageList(e);return t[t.length-1]}},{key:"_setLatestMessageSentByPeer",value:function(e,t){e.startsWith(E.CONV_C2C)&&"in"===t.flow&&this._latestMessageSentByPeerMap.set(e,t)}},{key:"_setLatestMessageSentByMe",value:function(e,t){e.startsWith(E.CONV_C2C)&&"out"===t.flow&&this._latestMessageSentByMeMap.set(e,t)}},{key:"_setGroupLocalLastMessageSequence",value:function(e,t){e.startsWith(E.CONV_GROUP)&&this._groupLocalLastMessageSequenceMap.set(e,t.sequence)}},{key:"getLatestMessageSentByPeer",value:function(e){return this._latestMessageSentByPeerMap.get(e)}},{key:"getLatestMessageSentByMe",value:function(e){return this._latestMessageSentByMeMap.get(e)}},{key:"getGroupLocalLastMessageSequence",value:function(e){return this._groupLocalLastMessageSequenceMap.get(e)||0}},{key:"modifyMessageSentByPeer",value:function(e){var t=e.conversationID,n=e.latestNick,o=e.latestAvatar,a=this.list.get(t);if(!Pt(a)){var i=Array.from(a.values()),s=i.length;if(0!==s){for(var r=null,c=0,u=!1,l=s-1;l>=0;l--)"in"===i[l].flow&&((r=i[l]).nick!==n&&(r.setNickAndAvatar({nick:n}),u=!0),r.avatar!==o&&(r.setNickAndAvatar({avatar:o}),u=!0),u&&(c+=1));Le.log("".concat(this._className,".modifyMessageSentByPeer conversationID:").concat(t," count:").concat(c))}}}},{key:"modifyMessageSentByMe",value:function(e){var t=e.conversationID,n=e.latestNick,o=e.latestAvatar,a=this.list.get(t);if(!Pt(a)){var i=Array.from(a.values()),s=i.length;if(0!==s){for(var r=null,c=0,u=!1,l=s-1;l>=0;l--)"out"===i[l].flow&&((r=i[l]).nick!==n&&(r.setNickAndAvatar({nick:n}),u=!0),r.avatar!==o&&(r.setNickAndAvatar({avatar:o}),u=!0),u&&(c+=1));Le.log("".concat(this._className,".modifyMessageSentByMe conversationID:").concat(t," count:").concat(c))}}}},{key:"traversal",value:function(){if(0!==this.list.size&&-1===Le.getLevel()){console.group("conversationID-messageCount");var e,t=S(this.list);try{for(t.s();!(e=t.n()).done;){var n=M(e.value,2),a=n[0],i=n[1];o("log","".concat(a,"-").concat(i.size)," at node_modules/tim-wx-sdk/tim-wx.js:1")}}catch(c){t.e(c)}finally{t.f()}console.groupEnd()}}},{key:"reset",value:function(){this.list.clear(),this._latestMessageSentByPeerMap.clear(),this._latestMessageSentByMeMap.clear(),this._groupLocalLastMessageSequenceMap.clear()}}]),e}(),vr="_a2KeyAndTinyIDUpdated",yr="_cloudConfigUpdated",Mr="_profileUpdated";function Cr(e){this.mixin(e)}Cr.mixin=function(e){var t=e.prototype||e;t._isReady=!1,t.ready=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e)return this._isReady?void(t?e.call(this):setTimeout(e,1)):(this._readyQueue=this._readyQueue||[],void this._readyQueue.push(e))},t.triggerReady=function(){var e=this;this._isReady=!0,setTimeout((function(){var t=e._readyQueue;e._readyQueue=[],t&&t.length>0&&t.forEach((function(e){e.call(this)}),e)}),1)},t.resetReady=function(){this._isReady=!1,this._readyQueue=[]},t.isReady=function(){return this._isReady}};var wr=["jpg","jpeg","gif","png","bmp","image","webp"],Ir=["mp4"],br=1,Tr=2,kr=3,Sr=255,Dr=function(){function e(t){var n=this;a(this,e),Pt(t)||(this.userID=t.userID||"",this.nick=t.nick||"",this.gender=t.gender||"",this.birthday=t.birthday||0,this.location=t.location||"",this.selfSignature=t.selfSignature||"",this.allowType=t.allowType||E.ALLOW_TYPE_ALLOW_ANY,this.language=t.language||0,this.avatar=t.avatar||"",this.messageSettings=t.messageSettings||0,this.adminForbidType=t.adminForbidType||E.FORBID_TYPE_NONE,this.level=t.level||0,this.role=t.role||0,this.lastUpdatedTime=0,this.profileCustomField=[],Pt(t.profileCustomField)||t.profileCustomField.forEach((function(e){n.profileCustomField.push({key:e.key,value:e.value})})))}return s(e,[{key:"validate",value:function(e){var t=!0,n="";if(Pt(e))return{valid:!1,tips:"empty options"};if(e.profileCustomField)for(var o=e.profileCustomField.length,a=null,i=0;i<o;i++){if(a=e.profileCustomField[i],!Ve(a.key)||-1===a.key.indexOf("Tag_Profile_Custom"))return{valid:!1,tips:"\u81ea\u5b9a\u4e49\u8d44\u6599\u5b57\u6bb5\u7684\u524d\u7f00\u5fc5\u987b\u662f Tag_Profile_Custom"};if(!Ve(a.value))return{valid:!1,tips:"\u81ea\u5b9a\u4e49\u8d44\u6599\u5b57\u6bb5\u7684 value \u5fc5\u987b\u662f\u5b57\u7b26\u4e32"}}for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if("profileCustomField"===s)continue;if(Pt(e[s])&&!Ve(e[s])&&!He(e[s])){n="key:"+s+", invalid value:"+e[s],t=!1;continue}switch(s){case"nick":Ve(e[s])||(n="nick should be a string",t=!1),st(e[s])>500&&(n="nick name limited: must less than or equal to ".concat(500," bytes, current size: ").concat(st(e[s])," bytes"),t=!1);break;case"gender":lt(Ge,e.gender)||(n="key:gender, invalid value:"+e.gender,t=!1);break;case"birthday":He(e.birthday)||(n="birthday should be a number",t=!1);break;case"location":Ve(e.location)||(n="location should be a string",t=!1);break;case"selfSignature":Ve(e.selfSignature)||(n="selfSignature should be a string",t=!1);break;case"allowType":lt(Ue,e.allowType)||(n="key:allowType, invalid value:"+e.allowType,t=!1);break;case"language":He(e.language)||(n="language should be a number",t=!1);break;case"avatar":Ve(e.avatar)||(n="avatar should be a string",t=!1);break;case"messageSettings":0!==e.messageSettings&&1!==e.messageSettings&&(n="messageSettings should be 0 or 1",t=!1);break;case"adminForbidType":lt($e,e.adminForbidType)||(n="key:adminForbidType, invalid value:"+e.adminForbidType,t=!1);break;case"level":He(e.level)||(n="level should be a number",t=!1);break;case"role":He(e.role)||(n="role should be a number",t=!1);break;default:n="unknown key:"+s+"  "+e[s],t=!1}}return{valid:t,tips:n}}}]),e}(),Er=function e(t){a(this,e),this.value=t,this.next=null},Ar=function(){function e(t){a(this,e),this.MAX_LENGTH=t,this.pTail=null,this.pNodeToDel=null,this.map=new Map,Le.debug("SinglyLinkedList init MAX_LENGTH:".concat(this.MAX_LENGTH))}return s(e,[{key:"set",value:function(e){var t=new Er(e);if(this.map.size<this.MAX_LENGTH)null===this.pTail?(this.pTail=t,this.pNodeToDel=t):(this.pTail.next=t,this.pTail=t),this.map.set(e,1);else{var n=this.pNodeToDel;this.pNodeToDel=this.pNodeToDel.next,this.map.delete(n.value),n.next=null,n=null,this.pTail.next=t,this.pTail=t,this.map.set(e,1)}}},{key:"has",value:function(e){return this.map.has(e)}},{key:"delete",value:function(e){this.has(e)&&this.map.delete(e)}},{key:"tail",value:function(){return this.pTail}},{key:"size",value:function(){return this.map.size}},{key:"data",value:function(){return Array.from(this.map.keys())}},{key:"reset",value:function(){for(var e;null!==this.pNodeToDel;)e=this.pNodeToDel,this.pNodeToDel=this.pNodeToDel.next,e.next=null,e=null;this.pTail=null,this.map.clear()}}]),e}(),Nr=["groupID","name","avatar","type","introduction","notification","ownerID","selfInfo","createTime","infoSequence","lastInfoTime","lastMessage","nextMessageSeq","memberNum","maxMemberNum","memberList","joinOption","groupCustomField","muteAllMembers"],Or=function(){function e(t){a(this,e),this.groupID="",this.name="",this.avatar="",this.type="",this.introduction="",this.notification="",this.ownerID="",this.createTime="",this.infoSequence="",this.lastInfoTime="",this.selfInfo={messageRemindType:"",joinTime:"",nameCard:"",role:"",userID:"",memberCustomField:void 0,readedSequence:0,excludedUnreadSequenceList:void 0},this.lastMessage={lastTime:"",lastSequence:"",fromAccount:"",messageForShow:""},this.nextMessageSeq="",this.memberNum="",this.memberCount="",this.maxMemberNum="",this.maxMemberCount="",this.joinOption="",this.groupCustomField=[],this.muteAllMembers=void 0,this._initGroup(t)}return s(e,[{key:"_initGroup",value:function(e){for(var t in e)Nr.indexOf(t)<0||("selfInfo"!==t?("memberNum"===t&&(this.memberCount=e[t]),"maxMemberNum"===t&&(this.maxMemberCount=e[t]),this[t]=e[t]):this.updateSelfInfo(e[t]))}},{key:"updateGroup",value:function(e){var t=this,n=JSON.parse(JSON.stringify(e));n.lastMsgTime&&(this.lastMessage.lastTime=n.lastMsgTime),Ye(n.muteAllMembers)||("On"===n.muteAllMembers?n.muteAllMembers=!0:n.muteAllMembers=!1),n.groupCustomField&&ht(this.groupCustomField,n.groupCustomField),Ye(n.memberNum)||(this.memberCount=n.memberNum),Ye(n.maxMemberNum)||(this.maxMemberCount=n.maxMemberNum),at(this,n,["members","errorCode","lastMsgTime","groupCustomField","memberNum","maxMemberNum"]),We(n.members)&&n.members.length>0&&n.members.forEach((function(e){e.userID===t.selfInfo.userID&&at(t.selfInfo,e,["sequence"])}))}},{key:"updateSelfInfo",value:function(e){var t=e.nameCard,n=e.joinTime,o=e.role,a=e.messageRemindType,i=e.readedSequence,s=e.excludedUnreadSequenceList;at(this.selfInfo,{nameCard:t,joinTime:n,role:o,messageRemindType:a,readedSequence:i,excludedUnreadSequenceList:s},[],["",null,void 0,0,NaN])}},{key:"setSelfNameCard",value:function(e){this.selfInfo.nameCard=e}},{key:"memberNum",set:function(e){},get:function(){return Le.warn("\uff01\uff01\uff01v2.8.0\u8d77\u5f03\u7528memberNum\uff0c\u8bf7\u4f7f\u7528 memberCount"),this.memberCount}},{key:"maxMemberNum",set:function(e){},get:function(){return Le.warn("\uff01\uff01\uff01v2.8.0\u8d77\u5f03\u7528maxMemberNum\uff0c\u8bf7\u4f7f\u7528 maxMemberCount"),this.maxMemberCount}}]),e}(),Pr=function(e,t){if(Ye(t))return"";switch(e){case E.MSG_TEXT:return t.text;case E.MSG_IMAGE:return"[\u56fe\u7247]";case E.MSG_LOCATION:return"[\u4f4d\u7f6e]";case E.MSG_AUDIO:return"[\u8bed\u97f3]";case E.MSG_VIDEO:return"[\u89c6\u9891]";case E.MSG_FILE:return"[\u6587\u4ef6]";case E.MSG_CUSTOM:return"[\u81ea\u5b9a\u4e49\u6d88\u606f]";case E.MSG_GRP_TIP:return"[\u7fa4\u63d0\u793a\u6d88\u606f]";case E.MSG_GRP_SYS_NOTICE:return"[\u7fa4\u7cfb\u7edf\u901a\u77e5]";case E.MSG_FACE:return"[\u52a8\u753b\u8868\u60c5]";case E.MSG_MERGER:return"[\u804a\u5929\u8bb0\u5f55]";default:return""}},Lr=function(e){return Ye(e)?{lastTime:0,lastSequence:0,fromAccount:0,messageForShow:"",payload:null,type:"",isRevoked:!1,cloudCustomData:"",onlineOnlyFlag:!1,nick:"",nameCard:""}:e instanceof ar?{lastTime:e.time||0,lastSequence:e.sequence||0,fromAccount:e.from||"",messageForShow:Pr(e.type,e.payload),payload:e.payload||null,type:e.type||null,isRevoked:e.isRevoked||!1,cloudCustomData:e.cloudCustomData||"",onlineOnlyFlag:e._onlineOnlyFlag||!1,nick:e.nick||"",nameCard:e.nameCard||""}:u({},e,{messageForShow:Pr(e.type,e.payload)})},Rr=function(){function e(t){a(this,e),this.conversationID=t.conversationID||"",this.unreadCount=t.unreadCount||0,this.type=t.type||"",this.lastMessage=Lr(t.lastMessage),t.lastMsgTime&&(this.lastMessage.lastTime=t.lastMsgTime),this._isInfoCompleted=!1,this.peerReadTime=t.peerReadTime||0,this.groupAtInfoList=[],this.remark="",this.isPinned=t.isPinned||!1,this.messageRemindType="",this._initProfile(t)}return s(e,[{key:"_initProfile",value:function(e){var t=this;Object.keys(e).forEach((function(n){switch(n){case"userProfile":t.userProfile=e.userProfile;break;case"groupProfile":t.groupProfile=e.groupProfile}})),Ye(this.userProfile)&&this.type===E.CONV_C2C?this.userProfile=new Dr({userID:e.conversationID.replace("C2C","")}):Ye(this.groupProfile)&&this.type===E.CONV_GROUP&&(this.groupProfile=new Or({groupID:e.conversationID.replace("GROUP","")}))}},{key:"updateUnreadCount",value:function(e){var t=e.nextUnreadCount,n=e.isFromGetConversations,o=e.isUnreadC2CMessage;Ye(t)||(_t(this.subType)?this.unreadCount=0:n&&this.type===E.CONV_GROUP||o&&this.type===E.CONV_C2C?this.unreadCount=t:this.unreadCount=this.unreadCount+t)}},{key:"updateLastMessage",value:function(e){this.lastMessage=Lr(e)}},{key:"updateGroupAtInfoList",value:function(e){var t,n=(w(t=e.groupAtType)||I(t)||b(t)||k()).slice(0);-1!==n.indexOf(E.CONV_AT_ME)&&-1!==n.indexOf(E.CONV_AT_ALL)&&(n=[E.CONV_AT_ALL_AT_ME]);var o={from:e.from,groupID:e.groupID,messageSequence:e.sequence,atTypeArray:n,__random:e.__random,__sequence:e.__sequence};this.groupAtInfoList.push(o),Le.debug("Conversation.updateGroupAtInfoList conversationID:".concat(this.conversationID),this.groupAtInfoList)}},{key:"clearGroupAtInfoList",value:function(){this.groupAtInfoList.length=0}},{key:"reduceUnreadCount",value:function(){this.unreadCount>=1&&(this.unreadCount-=1)}},{key:"isLastMessageRevoked",value:function(e){var t=e.sequence,n=e.time;return this.type===E.CONV_C2C&&t===this.lastMessage.lastSequence&&n===this.lastMessage.lastTime||this.type===E.CONV_GROUP&&t===this.lastMessage.lastSequence}},{key:"setLastMessageRevoked",value:function(e){this.lastMessage.isRevoked=e}},{key:"toAccount",get:function(){return this.conversationID.startsWith(E.CONV_C2C)?this.conversationID.replace(E.CONV_C2C,""):this.conversationID.startsWith(E.CONV_GROUP)?this.conversationID.replace(E.CONV_GROUP,""):""}},{key:"subType",get:function(){return this.groupProfile?this.groupProfile.type:""}}]),e}(),xr=function(){function e(t){a(this,e),this._conversationModule=t,this._className="MessageRemindHandler",this._updateSequence=0}return s(e,[{key:"getC2CMessageRemindType",value:function(){var e=this,t="".concat(this._className,".getC2CMessageRemindType");return this._conversationModule.request({protocolName:Rn,updateSequence:this._updateSequence}).then((function(n){Le.log("".concat(t," ok"));var o=n.data,a=o.updateSequence,i=o.muteFlagList;e._updateSequence=a,e._patchC2CMessageRemindType(i)})).catch((function(e){Le.error("".concat(t," failed. error:"),e)}))}},{key:"_patchC2CMessageRemindType",value:function(e){var t=this,n=0,o="";We(e)&&e.length>0&&e.forEach((function(e){var a=e.userID,i=e.muteFlag;0===i?o=E.MSG_REMIND_ACPT_AND_NOTE:1===i?o=E.MSG_REMIND_DISCARD:2===i&&(o=E.MSG_REMIND_ACPT_NOT_NOTE),!0===t._conversationModule.patchMessageRemindType({ID:a,isC2CConversation:!0,messageRemindType:o})&&(n+=1)})),Le.log("".concat(this._className,"._patchC2CMessageRemindType count:").concat(n))}},{key:"set",value:function(e){return e.groupID?this._setGroupMessageRemindType(e):We(e.userIDList)?this._setC2CMessageRemindType(e):void 0}},{key:"_setGroupMessageRemindType",value:function(e){var t=this,n="".concat(this._className,"._setGroupMessageRemindType"),o=e.groupID,a=e.messageRemindType,i="groupID:".concat(o," messageRemindType:").concat(a),s=new gi(as);return s.setMessage(i),this._getModule(Zt).modifyGroupMemberInfo({groupID:o,messageRemindType:a,userID:this._conversationModule.getMyUserID()}).then((function(){s.setNetworkType(t._conversationModule.getNetworkType()).end(),Le.log("".concat(n," ok. ").concat(i));var e=t._getModule(Xt).getLocalGroupProfile(o);return e&&(e.selfInfo.messageRemindType=a),t._conversationModule.patchMessageRemindType({ID:o,isC2CConversation:!1,messageRemindType:a})&&t._emitConversationUpdate(),ir({group:e})})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var n=M(t,2),o=n[0],a=n[1];s.setError(e,o,a).end()})),Le.error("".concat(n," failed. error:"),e),hr(e)}))}},{key:"_setC2CMessageRemindType",value:function(e){var t=this,n="".concat(this._className,"._setC2CMessageRemindType"),o=e.userIDList,a=e.messageRemindType,i=o.slice(0,30),s=0;a===E.MSG_REMIND_DISCARD?s=1:a===E.MSG_REMIND_ACPT_NOT_NOTE&&(s=2);var r="userIDList:".concat(i," messageRemindType:").concat(a),c=new gi(as);return c.setMessage(r),this._conversationModule.request({protocolName:Ln,requestData:{userIDList:i,muteFlag:s}}).then((function(e){c.setNetworkType(t._conversationModule.getNetworkType()).end();var o=e.data,s=o.updateSequence,r=o.errorList;t._updateSequence=s;var u=[],l=[];We(r)&&r.forEach((function(e){u.push(e.userID),l.push({userID:e.userID,code:e.errorCode})}));var d=i.filter((function(e){return-1===u.indexOf(e)}));Le.log("".concat(n," ok. successUserIDList:").concat(d," failureUserIDList:").concat(JSON.stringify(l)));var f=0;return d.forEach((function(e){t._conversationModule.patchMessageRemindType({ID:e,isC2CConversation:!0,messageRemindType:a})&&(f+=1)})),f>=1&&t._emitConversationUpdate(),i.length=u.length=0,gr({successUserIDList:d.map((function(e){return{userID:e}})),failureUserIDList:l})})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var n=M(t,2),o=n[0],a=n[1];c.setError(e,o,a).end()})),Le.error("".concat(n," failed. error:"),e),hr(e)}))}},{key:"_getModule",value:function(e){return this._conversationModule.getModule(e)}},{key:"_emitConversationUpdate",value:function(){this._conversationModule.emitConversationUpdate(!0,!1)}},{key:"setUpdateSequence",value:function(e){this._updateSequence=e}},{key:"reset",value:function(){Le.log("".concat(this._className,".reset")),this._updateSequence=0}}]),e}(),Gr=function(e){l(n,e);var t=y(n);function n(e){var o;return a(this,n),(o=t.call(this,e))._className="ConversationModule",Cr.mixin(_(o)),o._messageListHandler=new _r,o._messageRemindHandler=new xr(_(o)),o.singlyLinkedList=new Ar(100),o._pagingStatus=$t.NOT_START,o._pagingTimeStamp=0,o._pagingStartIndex=0,o._pagingPinnedTimeStamp=0,o._pagingPinnedStartIndex=0,o._conversationMap=new Map,o._tmpGroupList=[],o._tmpGroupAtTipsList=[],o._peerReadTimeMap=new Map,o._completedMap=new Map,o._roamingMessageKeyAndTimeMap=new Map,o._remoteGroupReadSequenceMap=new Map,o._initListeners(),o}return s(n,[{key:"_initListeners",value:function(){var e=this.getInnerEmitterInstance();e.on(vr,this._initLocalConversationList,this),e.on(Mr,this._onProfileUpdated,this)}},{key:"onCheckTimer",value:function(e){e%60==0&&this._messageListHandler.traversal()}},{key:"_initLocalConversationList",value:function(){var e=this,t=new gi(Wi);Le.log("".concat(this._className,"._initLocalConversationList."));var n="",o=this._getStorageConversationList();if(o){for(var a=o.length,i=0;i<a;i++){var s=o[i];if(s){if(s.conversationID==="".concat(E.CONV_C2C,"@TLS#ERROR")||s.conversationID==="".concat(E.CONV_C2C,"@TLS#NOT_FOUND"))continue;if(s.groupProfile){var r=s.groupProfile.type;if(_t(r))continue}}this._conversationMap.set(o[i].conversationID,new Rr(o[i]))}this.emitConversationUpdate(!0,!1),n="count:".concat(a)}else n="count:0";t.setNetworkType(this.getNetworkType()).setMessage(n).end(),this.getModule(Jt)||this.triggerReady(),this.ready((function(){e._tmpGroupList.length>0&&(e.updateConversationGroupProfile(e._tmpGroupList),e._tmpGroupList.length=0)})),this._syncConversationList()}},{key:"onMessageSent",value:function(e){this._onSendOrReceiveMessage({conversationOptionsList:e.conversationOptionsList,isInstantMessage:!0})}},{key:"onNewMessage",value:function(e){this._onSendOrReceiveMessage(e)}},{key:"_onSendOrReceiveMessage",value:function(e){var t=this,n=e.conversationOptionsList,o=e.isInstantMessage,a=void 0===o||o,i=e.isUnreadC2CMessage,s=void 0!==i&&i;this._isReady?0!==n.length&&(this._getC2CPeerReadTime(n),this._updateLocalConversationList({conversationOptionsList:n,isInstantMessage:a,isUnreadC2CMessage:s,isFromGetConversations:!1}),this._setStorageConversationList(),this.emitConversationUpdate()):this.ready((function(){t._onSendOrReceiveMessage(e)}))}},{key:"updateConversationGroupProfile",value:function(e){var t=this;We(e)&&0===e.length||(0!==this._conversationMap.size?(e.forEach((function(e){var n="GROUP".concat(e.groupID);if(t._conversationMap.has(n)){var o=t._conversationMap.get(n);o.groupProfile=JSON.parse(JSON.stringify(e)),o.lastMessage.lastSequence<e.nextMessageSeq&&(o.lastMessage.lastSequence=e.nextMessageSeq-1),o.subType||(o.subType=e.type)}})),this.emitConversationUpdate(!0,!1)):this._tmpGroupList=e)}},{key:"_updateConversationUserProfile",value:function(e){var t=this;e.data.forEach((function(e){var n="C2C".concat(e.userID);t._conversationMap.has(n)&&(t._conversationMap.get(n).userProfile=e)})),this.emitConversationUpdate(!0,!1)}},{key:"onMessageRevoked",value:function(e){var t=this;if(0!==e.length){var n=null,o=!1;e.forEach((function(e){(n=t._conversationMap.get(e.conversationID))&&n.isLastMessageRevoked(e)&&(o=!0,n.setLastMessageRevoked(!0))})),o&&this.emitConversationUpdate(!0,!1)}}},{key:"onMessageDeleted",value:function(e){if(0!==e.length){e.forEach((function(e){e.isDeleted=!0}));for(var t=e[0].conversationID,n=this._messageListHandler.getLocalMessageList(t),o={},a=n.length-1;a>=0;a--)if(!n[a].isDeleted){o=n[a];break}var i=this._conversationMap.get(t);if(i){var s=!1;i.lastMessage.lastSequence===o.sequence&&i.lastMessage.lastTime===o.time||(Pt(o)&&(o=void 0),i.updateLastMessage(o),s=!0,Le.log("".concat(this._className,".onMessageDeleted. update conversationID:").concat(t," with lastMessage:"),i.lastMessage)),t.startsWith(E.CONV_C2C)&&this.updateUnreadCount(t),s&&this.emitConversationUpdate(!0,!1)}}}},{key:"onNewGroupAtTips",value:function(e){var t=this,n=e.dataList,o=null;n.forEach((function(e){e.groupAtTips?o=e.groupAtTips:e.elements&&(o=e.elements),o.__random=e.random,o.__sequence=e.clientSequence,t._tmpGroupAtTipsList.push(o)})),Le.debug("".concat(this._className,".onNewGroupAtTips isReady:").concat(this._isReady),this._tmpGroupAtTipsList),this._isReady&&this._handleGroupAtTipsList()}},{key:"_handleGroupAtTipsList",value:function(){var e=this;if(0!==this._tmpGroupAtTipsList.length){var t=!1;this._tmpGroupAtTipsList.forEach((function(n){var o=n.groupID;if(n.from!==e.getMyUserID()){var a=e._conversationMap.get("".concat(E.CONV_GROUP).concat(o));a&&(a.updateGroupAtInfoList(n),t=!0)}})),t&&this.emitConversationUpdate(!0,!1),this._tmpGroupAtTipsList.length=0}}},{key:"_getC2CPeerReadTime",value:function(e){var t=this,n=[];if(e.forEach((function(e){t._conversationMap.has(e.conversationID)||e.type!==E.CONV_C2C||n.push(e.conversationID.replace(E.CONV_C2C,""))})),n.length>0){Le.debug("".concat(this._className,"._getC2CPeerReadTime userIDList:").concat(n));var o=this.getModule(Jt);o&&o.getRemotePeerReadTime(n)}}},{key:"_getStorageConversationList",value:function(){return this.getModule(nn).getItem("conversationMap")}},{key:"_setStorageConversationList",value:function(){var e=this.getLocalConversationList().slice(0,20).map((function(e){return{conversationID:e.conversationID,type:e.type,subType:e.subType,lastMessage:e.lastMessage,groupProfile:e.groupProfile,userProfile:e.userProfile}}));this.getModule(nn).setItem("conversationMap",e)}},{key:"emitConversationUpdate",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=C(this._conversationMap.values());if(t){var o=this.getModule(Xt);o&&o.updateGroupLastMessage(n)}e&&this.emitOuterEvent(D.CONVERSATION_LIST_UPDATED)}},{key:"getLocalConversationList",value:function(){return C(this._conversationMap.values())}},{key:"getLocalConversation",value:function(e){return this._conversationMap.get(e)}},{key:"_syncConversationList",value:function(){var e=this,t=new gi(Yi);return this._pagingStatus===$t.NOT_START&&this._conversationMap.clear(),this._pagingGetConversationList().then((function(n){return e._pagingStatus=$t.RESOLVED,e._setStorageConversationList(),e._handleC2CPeerReadTime(),e._patchConversationProperties(),t.setMessage(e._conversationMap.size).setNetworkType(e.getNetworkType()).end(),n})).catch((function(n){return e._pagingStatus=$t.REJECTED,t.setMessage(e._pagingTimeStamp),e.probeNetwork().then((function(e){var o=M(e,2),a=o[0],i=o[1];t.setError(n,a,i).end()})),hr(n)}))}},{key:"_patchConversationProperties",value:function(){var e=this,t=Date.now(),n=this.checkAndPatchRemark(),o=this._messageRemindHandler.getC2CMessageRemindType(),a=this.getModule(Xt).getGroupList();Promise.all([n,o,a]).then((function(){var n=Date.now()-t;Le.log("".concat(e._className,"._patchConversationProperties ok. cost ").concat(n," ms")),e.emitConversationUpdate(!0,!1)}))}},{key:"_pagingGetConversationList",value:function(){var e=this,t="".concat(this._className,"._pagingGetConversationList");return Le.log("".concat(t," timeStamp:").concat(this._pagingTimeStamp," startIndex:").concat(this._pagingStartIndex)+" pinnedTimeStamp:".concat(this._pagingPinnedTimeStamp," pinnedStartIndex:").concat(this._pagingPinnedStartIndex)),this._pagingStatus=$t.PENDING,this.request({protocolName:Un,requestData:{fromAccount:this.getMyUserID(),timeStamp:this._pagingTimeStamp,startIndex:this._pagingStartIndex,pinnedTimeStamp:this._pagingPinnedTimeStamp,pinnedStartIndex:this._pagingStartIndex,orderType:1}}).then((function(n){var o=n.data,a=o.completeFlag,i=o.conversations,s=void 0===i?[]:i,r=o.timeStamp,c=o.startIndex,u=o.pinnedTimeStamp,l=o.pinnedStartIndex;if(Le.log("".concat(t," ok. completeFlag:").concat(a," count:").concat(s.length," isReady:").concat(e._isReady)),s.length>0){var d=e._getConversationOptions(s);e._updateLocalConversationList({conversationOptionsList:d,isFromGetConversations:!0}),e.isLoggedIn()&&e.emitConversationUpdate()}if(!e._isReady){if(!e.isLoggedIn())return gr();e.triggerReady()}return e._pagingTimeStamp=r,e._pagingStartIndex=c,e._pagingPinnedTimeStamp=u,e._pagingPinnedStartIndex=l,1!==a?e._pagingGetConversationList():(e._handleGroupAtTipsList(),gr())})).catch((function(n){throw e.isLoggedIn()&&(e._isReady||(Le.warn("".concat(t," failed. error:"),n),e.triggerReady())),n}))}},{key:"_updateLocalConversationList",value:function(e){var t,n=e.isFromGetConversations,o=Date.now();t=this._getTmpConversationListMapping(e),this._conversationMap=new Map(this._sortConversationList([].concat(C(t.toBeUpdatedConversationList),C(this._conversationMap)))),n||this._updateUserOrGroupProfile(t.newConversationList),Le.debug("".concat(this._className,"._updateLocalConversationList cost ").concat(Date.now()-o," ms"))}},{key:"_getTmpConversationListMapping",value:function(e){for(var t=e.conversationOptionsList,n=e.isFromGetConversations,o=e.isInstantMessage,a=e.isUnreadC2CMessage,i=void 0!==a&&a,s=[],r=[],c=this.getModule(Xt),u=this.getModule(Qt),l=0,d=t.length;l<d;l++){var f=new Rr(t[l]),p=f.conversationID;if(p!=="".concat(E.CONV_C2C,"@TLS#ERROR")&&p!=="".concat(E.CONV_C2C,"@TLS#NOT_FOUND"))if(this._conversationMap.has(p)){var g=this._conversationMap.get(p),h=["unreadCount","allowType","adminForbidType","payload","isPinned"];!1===o&&h.push("lastMessage");var m=t[l].lastMessage,_=!Ye(m);_||this._onLastMessageNotExist(t[l]),Ye(o)&&_&&null===g.lastMessage.payload&&(g.lastMessage.payload=m.payload),at(g,f,h,[null,void 0,"",0,NaN]),g.updateUnreadCount({nextUnreadCount:f.unreadCount,isFromGetConversations:n,isUnreadC2CMessage:i}),o&&_&&(g.lastMessage.payload=m.payload,g.type===E.CONV_GROUP&&(g.lastMessage.nameCard=m.nameCard,g.lastMessage.nick=m.nick)),_&&g.lastMessage.cloudCustomData!==m.cloudCustomData&&(g.lastMessage.cloudCustomData=m.cloudCustomData||""),this._conversationMap.delete(p),s.push([p,g])}else{if(f.type===E.CONV_GROUP&&c){var v=f.groupProfile.groupID,y=c.getLocalGroupProfile(v);y&&(f.groupProfile=y,f.updateUnreadCount({nextUnreadCount:0}))}else if(f.type===E.CONV_C2C){var M=p.replace(E.CONV_C2C,"");u&&u.isMyFriend(M)&&(f.remark=u.getFriendRemark(M))}r.push(f),s.push([p,f])}}return{toBeUpdatedConversationList:s,newConversationList:r}}},{key:"_onLastMessageNotExist",value:function(e){new gi(js).setMessage("".concat(JSON.stringify(e))).setNetworkType(this.getNetworkType()).end()}},{key:"_sortConversationList",value:function(e){var t=[],n=[];return e.forEach((function(e){!0===e[1].isPinned?t.push(e):n.push(e)})),t.sort((function(e,t){return t[1].lastMessage.lastTime-e[1].lastMessage.lastTime})).concat(n.sort((function(e,t){return t[1].lastMessage.lastTime-e[1].lastMessage.lastTime})))}},{key:"_sortConversationListAndEmitEvent",value:function(){this._conversationMap=new Map(this._sortConversationList(C(this._conversationMap))),this.emitConversationUpdate(!0,!1)}},{key:"_updateUserOrGroupProfile",value:function(e){var t=this;if(0!==e.length){var n=[],o=[],a=this.getModule(Yt),i=this.getModule(Xt);e.forEach((function(e){if(e.type===E.CONV_C2C)n.push(e.toAccount);else if(e.type===E.CONV_GROUP){var t=e.toAccount;i.hasLocalGroup(t)?e.groupProfile=i.getLocalGroupProfile(t):o.push(t)}})),Le.log("".concat(this._className,"._updateUserOrGroupProfile c2cUserIDList:").concat(n," groupIDList:").concat(o)),n.length>0&&a.getUserProfile({userIDList:n}).then((function(e){var n=e.data;We(n)?n.forEach((function(e){t._conversationMap.get("C2C".concat(e.userID)).userProfile=e})):t._conversationMap.get("C2C".concat(n.userID)).userProfile=n})),o.length>0&&i.getGroupProfileAdvance({groupIDList:o,responseFilter:{groupBaseInfoFilter:["Type","Name","FaceUrl"]}}).then((function(e){e.data.successGroupList.forEach((function(e){var n="GROUP".concat(e.groupID);if(t._conversationMap.has(n)){var o=t._conversationMap.get(n);at(o.groupProfile,e,[],[null,void 0,"",0,NaN]),!o.subType&&e.type&&(o.subType=e.type)}}))}))}}},{key:"_getConversationOptions",value:function(e){var t=this,n=[],o=e.filter((function(e){var t=e.lastMsg;return ze(t)})).filter((function(e){var t=e.type,n=e.userID;return 1===t&&"@TLS#NOT_FOUND"!==n&&"@TLS#ERROR"!==n||2===t})).map((function(e){if(1===e.type){var o={userID:e.userID,nick:e.peerNick,avatar:e.peerAvatar};return n.push(o),{conversationID:"C2C".concat(e.userID),type:"C2C",lastMessage:{lastTime:e.time,lastSequence:e.sequence,fromAccount:e.lastC2CMsgFromAccount,messageForShow:e.messageShow,type:e.lastMsg.elements[0]?e.lastMsg.elements[0].type:null,payload:e.lastMsg.elements[0]?e.lastMsg.elements[0].content:null,cloudCustomData:e.lastMsg.cloudCustomData||"",isRevoked:8===e.lastMessageFlag,onlineOnlyFlag:!1,nick:"",nameCard:""},userProfile:new Dr(o),peerReadTime:e.c2cPeerReadTime,isPinned:1===e.isPinned,messageRemindType:""}}return{conversationID:"GROUP".concat(e.groupID),type:"GROUP",lastMessage:u({lastTime:e.time,lastSequence:e.messageReadSeq+e.unreadCount,fromAccount:e.msgGroupFromAccount,messageForShow:e.messageShow},t._patchTypeAndPayload(e),{cloudCustomData:e.lastMsg.cloudCustomData||"",isRevoked:2===e.lastMessageFlag,onlineOnlyFlag:!1,nick:e.senderNick||"",nameCard:e.senderNameCard||""}),groupProfile:new Or({groupID:e.groupID,name:e.groupNick,avatar:e.groupImage}),unreadCount:e.unreadCount,peerReadTime:0,isPinned:1===e.isPinned,messageRemindType:""}}));return n.length>0&&this.getModule(Yt).onConversationsProfileUpdated(n),o}},{key:"_patchTypeAndPayload",value:function(e){var t=e.lastMsg,n=t.event,o=void 0===n?void 0:n,a=t.elements,i=void 0===a?[]:a,s=t.groupTips,r=void 0===s?{}:s;if(!Ye(o)&&!Pt(r)){var c=new ar(r);c.setElement({type:E.MSG_GRP_TIP,content:u({},r.elements,{groupProfile:r.groupProfile})});var l=JSON.parse(JSON.stringify(c.payload));return c=null,{type:E.MSG_GRP_TIP,payload:l}}return{type:i[0]?i[0].type:null,payload:i[0]?i[0].content:null}}},{key:"getLocalMessageList",value:function(e){return this._messageListHandler.getLocalMessageList(e)}},{key:"deleteLocalMessage",value:function(e){e instanceof ar&&this._messageListHandler.remove(e)}},{key:"onConversationDeleted",value:function(e){var t=this;Le.log("".concat(this._className,".onConversationDeleted")),We(e)&&e.forEach((function(e){var n=e.type,o=e.userID,a=e.groupID,i="";1===n?i="".concat(E.CONV_C2C).concat(o):2===n&&(i="".concat(E.CONV_GROUP).concat(a)),t.deleteLocalConversation(i)}))}},{key:"onConversationPinned",value:function(e){var t=this;if(We(e)){var n=!1;e.forEach((function(e){var o,a=e.type,i=e.userID,s=e.groupID;1===a?o=t.getLocalConversation("".concat(E.CONV_C2C).concat(i)):2===a&&(o=t.getLocalConversation("".concat(E.CONV_GROUP).concat(s))),o&&(Le.log("".concat(t._className,".onConversationPinned conversationID:").concat(o.conversationID," isPinned:").concat(o.isPinned)),o.isPinned||(o.isPinned=!0,n=!0))})),n&&this._sortConversationListAndEmitEvent()}}},{key:"onConversationUnpinned",value:function(e){var t=this;if(We(e)){var n=!1;e.forEach((function(e){var o,a=e.type,i=e.userID,s=e.groupID;1===a?o=t.getLocalConversation("".concat(E.CONV_C2C).concat(i)):2===a&&(o=t.getLocalConversation("".concat(E.CONV_GROUP).concat(s))),o&&(Le.log("".concat(t._className,".onConversationUnpinned conversationID:").concat(o.conversationID," isPinned:").concat(o.isPinned)),o.isPinned&&(o.isPinned=!1,n=!0))})),n&&this._sortConversationListAndEmitEvent()}}},{key:"getMessageList",value:function(e){var t=this,n=e.conversationID,o=e.nextReqMessageID,a=e.count,i="".concat(this._className,".getMessageList"),s=this.getLocalConversation(n),r="";if(s&&s.groupProfile&&(r=s.groupProfile.type),_t(r))return Le.log("".concat(i," not available in avchatroom. conversationID:").concat(n)),gr({messageList:[],nextReqMessageID:"",isCompleted:!0});(Ye(a)||a>15)&&(a=15);var c=this._computeLeftCount({conversationID:n,nextReqMessageID:o});return Le.log("".concat(i," conversationID:").concat(n," leftCount:").concat(c," count:").concat(a," nextReqMessageID:").concat(o)),this._needGetHistory({conversationID:n,leftCount:c,count:a})?this.getHistoryMessages({conversationID:n,nextReqMessageID:o,count:20}).then((function(){return c=t._computeLeftCount({conversationID:n,nextReqMessageID:o}),ir(t._computeResult({conversationID:n,nextReqMessageID:o,count:a,leftCount:c}))})):(Le.log("".concat(i,".getMessageList get message list from memory")),this.modifyMessageList(n),gr(this._computeResult({conversationID:n,nextReqMessageID:o,count:a,leftCount:c})))}},{key:"_computeLeftCount",value:function(e){var t=e.conversationID,n=e.nextReqMessageID;return n?this._messageListHandler.getLocalMessageList(t).findIndex((function(e){return e.ID===n})):this._getMessageListSize(t)}},{key:"_getMessageListSize",value:function(e){return this._messageListHandler.getLocalMessageList(e).length}},{key:"_needGetHistory",value:function(e){var t=e.conversationID,n=e.leftCount,o=e.count,a=this.getLocalConversation(t),i="";return a&&a.groupProfile&&(i=a.groupProfile.type),!Ct(t)&&!_t(i)&&n<o&&!this._completedMap.has(t)}},{key:"_computeResult",value:function(e){var t=e.conversationID,n=e.nextReqMessageID,o=e.count,a=e.leftCount,i=this._computeMessageList({conversationID:t,nextReqMessageID:n,count:o}),s=this._computeIsCompleted({conversationID:t,leftCount:a,count:o}),r=this._computeNextReqMessageID({messageList:i,isCompleted:s,conversationID:t}),c="".concat(this._className,"._computeResult. conversationID:").concat(t);return Le.log("".concat(c," leftCount:").concat(a," count:").concat(o," nextReqMessageID:").concat(r," isCompleted:").concat(s)),{messageList:i,nextReqMessageID:r,isCompleted:s}}},{key:"_computeMessageList",value:function(e){var t=e.conversationID,n=e.nextReqMessageID,o=e.count,a=this._messageListHandler.getLocalMessageList(t),i=this._computeIndexEnd({nextReqMessageID:n,messageList:a}),s=this._computeIndexStart({indexEnd:i,count:o});return a.slice(s,i)}},{key:"_computeNextReqMessageID",value:function(e){var t=e.messageList,n=e.isCompleted,o=e.conversationID;if(!n)return 0===t.length?"":t[0].ID;var a=this._messageListHandler.getLocalMessageList(o);return 0===a.length?"":a[0].ID}},{key:"_computeIndexEnd",value:function(e){var t=e.messageList,n=void 0===t?[]:t,o=e.nextReqMessageID;return o?n.findIndex((function(e){return e.ID===o})):n.length}},{key:"_computeIndexStart",value:function(e){var t=e.indexEnd,n=e.count;return t>n?t-n:0}},{key:"_computeIsCompleted",value:function(e){var t=e.conversationID;return!!(e.leftCount<=e.count&&this._completedMap.has(t))}},{key:"getHistoryMessages",value:function(e){var t=e.conversationID,n=e.nextReqMessageID;if(t===E.CONV_SYSTEM)return gr();e.count?e.count>20&&(e.count=20):e.count=15;var o=this._messageListHandler.getLocalOldestMessageByConversationID(t);o||((o={}).time=0,o.sequence=0,0===t.indexOf(E.CONV_C2C)?(o.to=t.replace(E.CONV_C2C,""),o.conversationType=E.CONV_C2C):0===t.indexOf(E.CONV_GROUP)&&(o.to=t.replace(E.CONV_GROUP,""),o.conversationType=E.CONV_GROUP));var a="",i=null,s=this._roamingMessageKeyAndTimeMap.has(t);switch(o.conversationType){case E.CONV_C2C:return a=t.replace(E.CONV_C2C,""),(i=this.getModule(Jt))?i.getRoamingMessage({conversationID:e.conversationID,peerAccount:a,count:e.count,lastMessageTime:s?this._roamingMessageKeyAndTimeMap.get(t).lastMessageTime:0,messageKey:s?this._roamingMessageKeyAndTimeMap.get(t).messageKey:""}):hr({code:Uo.CANNOT_FIND_MODULE,message:Ja});case E.CONV_GROUP:return(i=this.getModule(Xt))?i.getRoamingMessage({conversationID:e.conversationID,groupID:o.to,count:e.count,sequence:n&&!1===o._onlineOnlyFlag?o.sequence-1:o.sequence}):hr({code:Uo.CANNOT_FIND_MODULE,message:Ja});default:return gr()}}},{key:"patchConversationLastMessage",value:function(e){var t=this.getLocalConversation(e);if(t){var n=t.lastMessage,o=n.messageForShow,a=n.payload;if(Pt(o)||Pt(a)){var i=this._messageListHandler.getLocalMessageList(e);if(0===i.length)return;var s=i[i.length-1];Le.log("".concat(this._className,".patchConversationLastMessage conversationID:").concat(e," payload:"),s.payload),t.updateLastMessage(s)}}}},{key:"storeRoamingMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.startsWith(E.CONV_C2C)?E.CONV_C2C:E.CONV_GROUP,o=null,a=[],i=0,s=e.length,r=null,c=n===E.CONV_GROUP,l=this.getModule(sn),d=function(){i=c?e.length-1:0,s=c?0:e.length},f=function(){c?--i:++i},p=function(){return c?i>=s:i<s};for(d();p();f())if(c&&1===e[i].sequence&&this.setCompleted(t),1!==e[i].isPlaceMessage)if((o=new ar(e[i])).to=e[i].to,o.isSystemMessage=!!e[i].isSystemMessage,o.conversationType=n,4===e[i].event?r={type:E.MSG_GRP_TIP,content:u({},e[i].elements,{groupProfile:e[i].groupProfile})}:(e[i].elements=l.parseElements(e[i].elements,e[i].from),r=e[i].elements),c||o.setNickAndAvatar({nick:e[i].nick,avatar:e[i].avatar}),Pt(r)){var g=new gi($i);g.setMessage("from:".concat(o.from," to:").concat(o.to," sequence:").concat(o.sequence," event:").concat(e[i].event)),g.setNetworkType(this.getNetworkType()).setLevel("warning").end()}else o.setElement(r),o.reInitialize(this.getMyUserID()),a.push(o);return this._messageListHandler.unshift(a),d=f=p=null,a}},{key:"setMessageRead",value:function(e){var t=e.conversationID,n=(e.messageID,this.getLocalConversation(t));if(Le.log("".concat(this._className,".setMessageRead conversationID:").concat(t," unreadCount:").concat(n?n.unreadCount:0)),!n)return gr();if(n.type!==E.CONV_GROUP||Pt(n.groupAtInfoList)||this.deleteGroupAtTips(t),0===n.unreadCount)return gr();var o=this._messageListHandler.getLocalLastMessage(t),a=n.lastMessage.lastTime;o&&a<o.time&&(a=o.time);var i=n.lastMessage.lastSequence;o&&i<o.sequence&&(i=o.sequence);var s=null;switch(n.type){case E.CONV_C2C:return(s=this.getModule(Jt))?s.setMessageRead({conversationID:t,lastMessageTime:a}):hr({code:Uo.CANNOT_FIND_MODULE,message:Ja});case E.CONV_GROUP:return(s=this._moduleManager.getModule(Xt))?s.setMessageRead({conversationID:t,lastMessageSeq:i}):hr({code:Uo.CANNOT_FIND_MODULE,message:Ja});case E.CONV_SYSTEM:return n.unreadCount=0,this.emitConversationUpdate(!0,!1),gr();default:return gr()}}},{key:"setAllMessageRead",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n="".concat(this._className,".setAllMessageRead");t.scope||(t.scope=E.READ_ALL_MSG),Le.log("".concat(n," options:"),t);var o=this._createSetAllMessageReadPack(t);if(0===o.readAllC2CMessage&&0===o.groupMessageReadInfoList.length)return gr();var a=new gi(Ji);return this.request({protocolName:ao,requestData:o}).then((function(n){var o=n.data,i=e._handleAllMessageRead(o);return a.setMessage("scope:".concat(t.scope," failureGroups:").concat(JSON.stringify(i))).setNetworkType(e.getNetworkType()).end(),gr()})).catch((function(t){return e.probeNetwork().then((function(e){var n=M(e,2),o=n[0],i=n[1];a.setError(t,o,i).end()})),Le.warn("".concat(n," failed. error:"),t),hr({code:t&&t.code?t.code:Uo.MESSAGE_UNREAD_ALL_FAIL,message:t&&t.message?t.message:na})}))}},{key:"_getConversationLastMessageSequence",value:function(e){var t=this._messageListHandler.getLocalLastMessage(e.conversationID),n=e.lastMessage.lastSequence;return t&&n<t.sequence&&(n=t.sequence),n}},{key:"_getConversationLastMessageTime",value:function(e){var t=this._messageListHandler.getLocalLastMessage(e.conversationID),n=e.lastMessage.lastTime;return t&&n<t.time&&(n=t.time),n}},{key:"_createSetAllMessageReadPack",value:function(e){var t,n={readAllC2CMessage:0,groupMessageReadInfoList:[]},o=e.scope,a=S(this._conversationMap);try{for(a.s();!(t=a.n()).done;){var i=M(t.value,2)[1];if(i.unreadCount>0)if(i.type===E.CONV_C2C&&0===n.readAllC2CMessage){if(o===E.READ_ALL_MSG)n.readAllC2CMessage=1;else if(o===E.READ_ALL_C2C_MSG){n.readAllC2CMessage=1;break}}else if(i.type===E.CONV_GROUP&&(o===E.READ_ALL_GROUP_MSG||o===E.READ_ALL_MSG)){var s=this._getConversationLastMessageSequence(i);n.groupMessageReadInfoList.push({groupID:i.groupProfile.groupID,messageSequence:s})}}}catch(l){a.e(l)}finally{a.f()}return n}},{key:"onPushedAllMessageRead",value:function(e){this._handleAllMessageRead(e)}},{key:"_handleAllMessageRead",value:function(e){var t=e.groupMessageReadInfoList,n=e.readAllC2CMessage,o=this._parseGroupReadInfo(t);return this._updateAllConversationUnreadCount({readAllC2CMessage:n})>=1&&this.emitConversationUpdate(!0,!1),o}},{key:"_parseGroupReadInfo",value:function(e){var t=[];if(e&&e.length)for(var n=0,o=e.length;n<o;n++){var a=e[n],i=a.groupID,s=a.sequence,r=a.retCode,c=a.lastMessageSeq;Ye(r)?this._remoteGroupReadSequenceMap.set(i,c):(this._remoteGroupReadSequenceMap.set(i,s),0!==r&&t.push("".concat(i,"-").concat(s,"-").concat(r)))}return t}},{key:"_updateAllConversationUnreadCount",value:function(e){var t,n=e.readAllC2CMessage,o=0,a=S(this._conversationMap);try{for(a.s();!(t=a.n()).done;){var i=M(t.value,2),s=i[0],r=i[1];if(r.unreadCount>=1){if(1===n&&r.type===E.CONV_C2C){var c=this._getConversationLastMessageTime(r);this.updateIsReadAfterReadReport({conversationID:s,lastMessageTime:c})}else if(r.type===E.CONV_GROUP){var u=s.replace(E.CONV_GROUP,"");if(this._remoteGroupReadSequenceMap.has(u)){var l=this._remoteGroupReadSequenceMap.get(u),d=this._getConversationLastMessageSequence(r);this.updateIsReadAfterReadReport({conversationID:s,remoteReadSequence:l}),d>=l&&this._remoteGroupReadSequenceMap.delete(u)}}this.updateUnreadCount(s,!1)&&(o+=1)}}}catch(h){a.e(h)}finally{a.f()}return o}},{key:"isRemoteRead",value:function(e){var t=e.conversationID,n=e.sequence,o=t.replace(E.CONV_GROUP,""),a=!1;if(this._remoteGroupReadSequenceMap.has(o)){var i=this._remoteGroupReadSequenceMap.get(o);n<=i&&(a=!0,Le.log("".concat(this._className,".isRemoteRead conversationID:").concat(t," messageSequence:").concat(n," remoteReadSequence:").concat(i))),n>=i+10&&this._remoteGroupReadSequenceMap.delete(o)}return a}},{key:"updateIsReadAfterReadReport",value:function(e){var t=e.conversationID,n=e.lastMessageSeq,o=e.lastMessageTime,a=this._messageListHandler.getLocalMessageList(t);if(0!==a.length)for(var i,s=a.length-1;s>=0;s--)if(i=a[s],!(o&&i.time>o||n&&i.sequence>n)){if("in"===i.flow&&i.isRead)break;i.setIsRead(!0)}}},{key:"updateUnreadCount",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!1,o=this.getLocalConversation(e),a=this._messageListHandler.getLocalMessageList(e);if(o){var i=o.unreadCount,s=a.filter((function(e){return!e.isRead&&!e._onlineOnlyFlag&&!e.isDeleted})).length;return i!==s&&(o.unreadCount=s,n=!0,Le.log("".concat(this._className,".updateUnreadCount from ").concat(i," to ").concat(s,", conversationID:").concat(e)),!0===t&&this.emitConversationUpdate(!0,!1)),n}}},{key:"recomputeGroupUnreadCount",value:function(e){var t=e.conversationID,n=e.count,o=this.getLocalConversation(t);if(o){var a=o.unreadCount,i=a-n;i<0&&(i=0),o.unreadCount=i,Le.log("".concat(this._className,".recomputeGroupUnreadCount from ").concat(a," to ").concat(i,", conversationID:").concat(t))}}},{key:"updateIsRead",value:function(e){var t=this.getLocalConversation(e),n=this.getLocalMessageList(e);if(t&&0!==n.length&&!Ct(t.type)){for(var o=[],a=0,i=n.length;a<i;a++)"in"!==n[a].flow?"out"!==n[a].flow||n[a].isRead||n[a].setIsRead(!0):o.push(n[a]);var s=0;if(t.type===E.CONV_C2C){var r=o.slice(-t.unreadCount).filter((function(e){return e.isRevoked})).length;s=o.length-t.unreadCount-r}else s=o.length-t.unreadCount;for(var c=0;c<s&&!o[c].isRead;c++)o[c].setIsRead(!0)}}},{key:"deleteGroupAtTips",value:function(e){var t="".concat(this._className,".deleteGroupAtTips");Le.log("".concat(t));var n=this._conversationMap.get(e);if(!n)return Promise.resolve();var o=n.groupAtInfoList;if(0===o.length)return Promise.resolve();var a=this.getMyUserID();return this.request({protocolName:qn,requestData:{messageListToDelete:o.map((function(e){return{from:e.from,to:a,messageSeq:e.__sequence,messageRandom:e.__random,groupID:e.groupID}}))}}).then((function(){return Le.log("".concat(t," ok. count:").concat(o.length)),n.clearGroupAtInfoList(),Promise.resolve()})).catch((function(e){return Le.error("".concat(t," failed. error:"),e),hr(e)}))}},{key:"appendToMessageList",value:function(e){this._messageListHandler.pushIn(e)}},{key:"setMessageRandom",value:function(e){this.singlyLinkedList.set(e.random)}},{key:"deleteMessageRandom",value:function(e){this.singlyLinkedList.delete(e.random)}},{key:"pushIntoMessageList",value:function(e,t,n){return!(!this._messageListHandler.pushIn(t,n)||this._isMessageFromCurrentInstance(t)&&!n)&&(e.push(t),!0)}},{key:"_isMessageFromCurrentInstance",value:function(e){return this.singlyLinkedList.has(e.random)}},{key:"revoke",value:function(e,t,n){return this._messageListHandler.revoke(e,t,n)}},{key:"getPeerReadTime",value:function(e){return this._peerReadTimeMap.get(e)}},{key:"recordPeerReadTime",value:function(e,t){this._peerReadTimeMap.has(e)?this._peerReadTimeMap.get(e)<t&&this._peerReadTimeMap.set(e,t):this._peerReadTimeMap.set(e,t)}},{key:"updateMessageIsPeerReadProperty",value:function(e,t){if(e.startsWith(E.CONV_C2C)&&t>0){var n=this._messageListHandler.updateMessageIsPeerReadProperty(e,t);n.length>0&&this.emitOuterEvent(D.MESSAGE_READ_BY_PEER,n)}}},{key:"updateMessageIsModifiedProperty",value:function(e){this._messageListHandler.updateMessageIsModifiedProperty(e)}},{key:"setCompleted",value:function(e){Le.log("".concat(this._className,".setCompleted. conversationID:").concat(e)),this._completedMap.set(e,!0)}},{key:"updateRoamingMessageKeyAndTime",value:function(e,t,n){this._roamingMessageKeyAndTimeMap.set(e,{messageKey:t,lastMessageTime:n})}},{key:"getConversationList",value:function(e){var t=this,n="".concat(this._className,".getConversationList"),o="pagingStatus:".concat(this._pagingStatus,", local conversation count:").concat(this._conversationMap.size,", options:").concat(e);if(Le.log("".concat(n,". ").concat(o)),this._pagingStatus===$t.REJECTED){var a=new gi(Hi);return a.setMessage(o),this._syncConversationList().then((function(){a.setNetworkType(t.getNetworkType()).end();var n=t._getConversationList(e);return ir({conversationList:n})})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];a.setError(e,o,i).end()})),Le.error("".concat(n," failed. error:"),e),hr(e)}))}if(0===this._conversationMap.size){var i=new gi(Hi);return i.setMessage(o),this._syncConversationList().then((function(){i.setNetworkType(t.getNetworkType()).end();var n=t._getConversationList(e);return ir({conversationList:n})})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],a=n[1];i.setError(e,o,a).end()})),Le.error("".concat(n," failed. error:"),e),hr(e)}))}var s=this._getConversationList(e);return Le.log("".concat(n,". returned conversation count:").concat(s.length)),gr({conversationList:s})}},{key:"_getConversationList",value:function(e){var t=this;if(Ye(e))return this.getLocalConversationList();if(We(e)){var n=[];return e.forEach((function(e){if(t._conversationMap.has(e)){var o=t.getLocalConversation(e);n.push(o)}})),n}}},{key:"_handleC2CPeerReadTime",value:function(){var e,t=S(this._conversationMap);try{for(t.s();!(e=t.n()).done;){var n=M(e.value,2),o=n[0],a=n[1];a.type===E.CONV_C2C&&(Le.debug("".concat(this._className,"._handleC2CPeerReadTime conversationID:").concat(o," peerReadTime:").concat(a.peerReadTime)),this.recordPeerReadTime(o,a.peerReadTime))}}catch(c){t.e(c)}finally{t.f()}}},{key:"getConversationProfile",value:function(e){var t,n=this;if((t=this._conversationMap.has(e)?this._conversationMap.get(e):new Rr({conversationID:e,type:e.slice(0,3)===E.CONV_C2C?E.CONV_C2C:E.CONV_GROUP}))._isInfoCompleted||t.type===E.CONV_SYSTEM)return gr({conversation:t});var o=new gi(Vi),a="".concat(this._className,".getConversationProfile");return Le.log("".concat(a,". conversationID:").concat(e," remark:").concat(t.remark," lastMessage:"),t.lastMessage),this._updateUserOrGroupProfileCompletely(t).then((function(i){o.setNetworkType(n.getNetworkType()).setMessage("conversationID:".concat(e," unreadCount:").concat(i.data.conversation.unreadCount)).end();var s=n.getModule(Qt);if(s&&t.type===E.CONV_C2C){var r=e.replace(E.CONV_C2C,"");if(s.isMyFriend(r)){var c=s.getFriendRemark(r);t.remark!==c&&(t.remark=c,Le.log("".concat(a,". conversationID:").concat(e," patch remark:").concat(t.remark)))}}return Le.log("".concat(a," ok. conversationID:").concat(e)),i})).catch((function(t){return n.probeNetwork().then((function(n){var a=M(n,2),i=a[0],s=a[1];o.setError(t,i,s).setMessage("conversationID:".concat(e)).end()})),Le.error("".concat(a," failed. error:"),t),hr(t)}))}},{key:"_updateUserOrGroupProfileCompletely",value:function(e){var t=this;return e.type===E.CONV_C2C?this.getModule(Yt).getUserProfile({userIDList:[e.toAccount]}).then((function(n){var o=n.data;return 0===o.length?hr(new dr({code:Uo.USER_OR_GROUP_NOT_FOUND,message:wa})):(e.userProfile=o[0],e._isInfoCompleted=!0,t._unshiftConversation(e),gr({conversation:e}))})):this.getModule(Xt).getGroupProfile({groupID:e.toAccount}).then((function(n){return e.groupProfile=n.data.group,e._isInfoCompleted=!0,t._unshiftConversation(e),gr({conversation:e})}))}},{key:"_unshiftConversation",value:function(e){e instanceof Rr&&!this._conversationMap.has(e.conversationID)&&(this._conversationMap=new Map([[e.conversationID,e]].concat(C(this._conversationMap))),this._setStorageConversationList(),this.emitConversationUpdate(!0,!1))}},{key:"_onProfileUpdated",value:function(e){var t=this;e.data.forEach((function(e){var n=e.userID;if(n===t.getMyUserID())t._onMyProfileModified({latestNick:e.nick,latestAvatar:e.avatar});else{var o=t._conversationMap.get("".concat(E.CONV_C2C).concat(n));o&&(o.userProfile=e)}}))}},{key:"deleteConversation",value:function(e){var t=this,n={fromAccount:this.getMyUserID(),toAccount:void 0,type:void 0};if(!this._conversationMap.has(e)){var o=new dr({code:Uo.CONVERSATION_NOT_FOUND,message:Ca});return hr(o)}switch(this._conversationMap.get(e).type){case E.CONV_C2C:n.type=1,n.toAccount=e.replace(E.CONV_C2C,"");break;case E.CONV_GROUP:n.type=2,n.toGroupID=e.replace(E.CONV_GROUP,"");break;case E.CONV_SYSTEM:return this.getModule(Xt).deleteGroupSystemNotice({messageList:this._messageListHandler.getLocalMessageList(e)}),this.deleteLocalConversation(e),gr({conversationID:e});default:var a=new dr({code:Uo.CONVERSATION_UN_RECORDED_TYPE,message:Ia});return hr(a)}var i=new gi(Ki);i.setMessage("conversationID:".concat(e));var s="".concat(this._className,".deleteConversation");return Le.log("".concat(s,". conversationID:").concat(e)),this.setMessageRead({conversationID:e}).then((function(){return t.request({protocolName:Bn,requestData:n})})).then((function(){return i.setNetworkType(t.getNetworkType()).end(),Le.log("".concat(s," ok")),t.deleteLocalConversation(e),gr({conversationID:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],a=n[1];i.setError(e,o,a).end()})),Le.error("".concat(s," failed. error:"),e),hr(e)}))}},{key:"pinConversation",value:function(e){var t=this,n=e.conversationID,o=e.isPinned;if(!this._conversationMap.has(n))return hr({code:Uo.CONVERSATION_NOT_FOUND,message:Ca});var a=this.getLocalConversation(n);if(a.isPinned===o)return gr({conversationID:n});var i=new gi(zi);i.setMessage("conversationID:".concat(n," isPinned:").concat(o));var s="".concat(this._className,".pinConversation");Le.log("".concat(s,". conversationID:").concat(n," isPinned:").concat(o));var r=null;return yt(n)?r={type:1,toAccount:n.replace(E.CONV_C2C,"")}:Mt(n)&&(r={type:2,groupID:n.replace(E.CONV_GROUP,"")}),this.request({protocolName:jn,requestData:{fromAccount:this.getMyUserID(),operationType:!0===o?1:2,itemList:[r]}}).then((function(){return i.setNetworkType(t.getNetworkType()).end(),Le.log("".concat(s," ok")),a.isPinned!==o&&(a.isPinned=o,t._sortConversationListAndEmitEvent()),ir({conversationID:n})})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],a=n[1];i.setError(e,o,a).end()})),Le.error("".concat(s," failed. error:"),e),hr(e)}))}},{key:"setMessageRemindType",value:function(e){return this._messageRemindHandler.set(e)}},{key:"patchMessageRemindType",value:function(e){var t=e.ID,n=e.isC2CConversation,o=e.messageRemindType,a=!1,i=this.getLocalConversation(n?"".concat(E.CONV_C2C).concat(t):"".concat(E.CONV_GROUP).concat(t));return i&&i.messageRemindType!==o&&(i.messageRemindType=o,a=!0),a}},{key:"onC2CMessageRemindTypeSynced",value:function(e){var t=this;Le.debug("".concat(this._className,".onC2CMessageRemindTypeSynced options:"),e),e.dataList.forEach((function(e){if(!Pt(e.muteNotificationsSync)){var n,o=e.muteNotificationsSync,a=o.to,i=o.updateSequence,s=o.muteFlag;t._messageRemindHandler.setUpdateSequence(i),0===s?n=E.MSG_REMIND_ACPT_AND_NOTE:1===s?n=E.MSG_REMIND_DISCARD:2===s&&(n=E.MSG_REMIND_ACPT_NOT_NOTE);var r=0;t.patchMessageRemindType({ID:a,isC2CConversation:!0,messageRemindType:n})&&(r+=1),Le.log("".concat(t._className,".onC2CMessageRemindTypeSynced updateCount:").concat(r)),r>=1&&t.emitConversationUpdate(!0,!1)}}))}},{key:"deleteLocalConversation",value:function(e){var t=this._conversationMap.has(e);Le.log("".concat(this._className,".deleteLocalConversation conversationID:").concat(e," has:").concat(t)),t&&(this._conversationMap.delete(e),this._roamingMessageKeyAndTimeMap.delete(e),this._setStorageConversationList(),this._messageListHandler.removeByConversationID(e),this._completedMap.delete(e),this.emitConversationUpdate(!0,!1))}},{key:"isMessageSentByCurrentInstance",value:function(e){return!(!this._messageListHandler.hasLocalMessage(e.conversationID,e.ID)&&!this.singlyLinkedList.has(e.random))}},{key:"modifyMessageList",value:function(e){if(e.startsWith(E.CONV_C2C)&&this._conversationMap.has(e)){var t=this._conversationMap.get(e),n=Date.now();this._messageListHandler.modifyMessageSentByPeer({conversationID:e,latestNick:t.userProfile.nick,latestAvatar:t.userProfile.avatar});var o=this.getModule(Yt).getNickAndAvatarByUserID(this.getMyUserID());this._messageListHandler.modifyMessageSentByMe({conversationID:e,latestNick:o.nick,latestAvatar:o.avatar}),Le.log("".concat(this._className,".modifyMessageList conversationID:").concat(e," cost ").concat(Date.now()-n," ms"))}}},{key:"updateUserProfileSpecifiedKey",value:function(e){Le.log("".concat(this._className,".updateUserProfileSpecifiedKey options:"),e);var t=e.conversationID,n=e.nick,o=e.avatar;if(this._conversationMap.has(t)){var a=this._conversationMap.get(t).userProfile;Ve(n)&&a.nick!==n&&(a.nick=n),Ve(o)&&a.avatar!==o&&(a.avatar=o),this.emitConversationUpdate(!0,!1)}}},{key:"_onMyProfileModified",value:function(e){var t=this,n=this.getLocalConversationList(),o=Date.now();n.forEach((function(n){t.modifyMessageSentByMe(u({conversationID:n.conversationID},e))})),Le.log("".concat(this._className,"._onMyProfileModified. modify all messages sent by me, cost ").concat(Date.now()-o," ms"))}},{key:"modifyMessageSentByMe",value:function(e){this._messageListHandler.modifyMessageSentByMe(e)}},{key:"getLatestMessageSentByMe",value:function(e){return this._messageListHandler.getLatestMessageSentByMe(e)}},{key:"modifyMessageSentByPeer",value:function(e){this._messageListHandler.modifyMessageSentByPeer(e)}},{key:"getLatestMessageSentByPeer",value:function(e){return this._messageListHandler.getLatestMessageSentByPeer(e)}},{key:"pushIntoNoticeResult",value:function(e,t){return!(!this._messageListHandler.pushIn(t)||this.singlyLinkedList.has(t.random))&&(e.push(t),!0)}},{key:"getGroupLocalLastMessageSequence",value:function(e){return this._messageListHandler.getGroupLocalLastMessageSequence(e)}},{key:"checkAndPatchRemark",value:function(){var e=Promise.resolve();if(0===this._conversationMap.size)return e;var t=this.getModule(Qt);if(!t)return e;var n=C(this._conversationMap.values()).filter((function(e){return e.type===E.CONV_C2C}));if(0===n.length)return e;var o=0;return n.forEach((function(e){var n=e.conversationID.replace(E.CONV_C2C,"");if(t.isMyFriend(n)){var a=t.getFriendRemark(n);e.remark!==a&&(e.remark=a,o+=1)}})),Le.log("".concat(this._className,".checkAndPatchRemark. c2c conversation count:").concat(n.length,", patched count:").concat(o)),e}},{key:"reset",value:function(){Le.log("".concat(this._className,".reset")),this._pagingStatus=$t.NOT_START,this._messageListHandler.reset(),this._messageRemindHandler.reset(),this._roamingMessageKeyAndTimeMap.clear(),this.singlyLinkedList.reset(),this._peerReadTimeMap.clear(),this._completedMap.clear(),this._conversationMap.clear(),this._pagingTimeStamp=0,this._pagingStartIndex=0,this._pagingPinnedTimeStamp=0,this._pagingPinnedStartIndex=0,this._remoteGroupReadSequenceMap.clear(),this.resetReady()}}]),n}(vn),$r=function(){function e(t){a(this,e),this._groupModule=t,this._className="GroupTipsHandler",this._cachedGroupTipsMap=new Map,this._checkCountMap=new Map,this.MAX_CHECK_COUNT=4}return s(e,[{key:"onCheckTimer",value:function(e){e%1==0&&this._cachedGroupTipsMap.size>0&&this._checkCachedGroupTips()}},{key:"_checkCachedGroupTips",value:function(){var e=this;this._cachedGroupTipsMap.forEach((function(t,n){var o=e._checkCountMap.get(n),a=e._groupModule.hasLocalGroup(n);Le.log("".concat(e._className,"._checkCachedGroupTips groupID:").concat(n," hasLocalGroup:").concat(a," checkCount:").concat(o)),a?(e._notifyCachedGroupTips(n),e._checkCountMap.delete(n),e._groupModule.deleteUnjoinedAVChatRoom(n)):o>=e.MAX_CHECK_COUNT?(e._deleteCachedGroupTips(n),e._checkCountMap.delete(n)):(o++,e._checkCountMap.set(n,o))}))}},{key:"onNewGroupTips",value:function(e){Le.debug("".concat(this._className,".onReceiveGroupTips count:").concat(e.dataList.length));var t=this.newGroupTipsStoredAndSummary(e),n=t.eventDataList,o=t.result,a=t.AVChatRoomMessageList;a.length>0&&this._groupModule.onAVChatRoomMessage(a),n.length>0&&(this._groupModule.getModule(en).onNewMessage({conversationOptionsList:n,isInstantMessage:!0}),this._groupModule.updateNextMessageSeq(n)),o.length>0&&(this._groupModule.emitOuterEvent(D.MESSAGE_RECEIVED,o),this.handleMessageList(o))}},{key:"newGroupTipsStoredAndSummary",value:function(e){for(var t=e.event,n=e.dataList,o=null,a=[],i=[],s={},r=[],c=0,l=n.length;c<l;c++){var d=n[c],f=d.groupProfile.groupID,p=this._groupModule.hasLocalGroup(f);if(p||!this._groupModule.isUnjoinedAVChatRoom(f))if(p)if(this._groupModule.isMessageFromAVChatroom(f)){var g=gt(d);g.event=t,r.push(g)}else{d.currentUser=this._groupModule.getMyUserID(),d.conversationType=E.CONV_GROUP,(o=new ar(d)).setElement({type:E.MSG_GRP_TIP,content:u({},d.elements,{groupProfile:d.groupProfile})}),o.isSystemMessage=!1;var h=this._groupModule.getModule(en),m=o,_=m.conversationID,v=m.sequence;if(6===t)o._onlineOnlyFlag=!0,i.push(o);else if(!h.pushIntoNoticeResult(i,o))continue;if(6!==t||!h.getLocalConversation(_)){6!==t&&this._groupModule.getModule(mn).addMessageSequence({key:ri,message:o});var y=h.isRemoteRead({conversationID:_,sequence:v});if(Ye(s[_]))s[_]=a.push({conversationID:_,unreadCount:"in"!==o.flow||o._onlineOnlyFlag||y?0:1,type:o.conversationType,subType:o.conversationSubType,lastMessage:o})-1;else{var M=s[_];a[M].type=o.conversationType,a[M].subType=o.conversationSubType,a[M].lastMessage=o,"in"!==o.flow||o._onlineOnlyFlag||y||a[M].unreadCount++}}}else this._cacheGroupTipsAndProbe({groupID:f,event:t,item:d})}return{eventDataList:a,result:i,AVChatRoomMessageList:r}}},{key:"handleMessageList",value:function(e){var t=this;e.forEach((function(e){switch(e.payload.operationType){case 1:t._onNewMemberComeIn(e);break;case 2:t._onMemberQuit(e);break;case 3:t._onMemberKickedOut(e);break;case 4:t._onMemberSetAdmin(e);break;case 5:t._onMemberCancelledAdmin(e);break;case 6:t._onGroupProfileModified(e);break;case 7:t._onMemberInfoModified(e);break;default:Le.warn("".concat(t._className,".handleMessageList unknown operationType:").concat(e.payload.operationType))}}))}},{key:"_onNewMemberComeIn",value:function(e){var t=e.payload,n=t.memberNum,o=t.groupProfile.groupID,a=this._groupModule.getLocalGroupProfile(o);a&&He(n)&&(a.memberNum=n)}},{key:"_onMemberQuit",value:function(e){var t=e.payload,n=t.memberNum,o=t.groupProfile.groupID,a=this._groupModule.getLocalGroupProfile(o);a&&He(n)&&(a.memberNum=n),this._groupModule.deleteLocalGroupMembers(o,e.payload.userIDList)}},{key:"_onMemberKickedOut",value:function(e){var t=e.payload,n=t.memberNum,o=t.groupProfile.groupID,a=this._groupModule.getLocalGroupProfile(o);a&&He(n)&&(a.memberNum=n),this._groupModule.deleteLocalGroupMembers(o,e.payload.userIDList)}},{key:"_onMemberSetAdmin",value:function(e){var t=e.payload.groupProfile.groupID,n=e.payload.userIDList,o=this._groupModule.getModule(Zt);n.forEach((function(e){var n=o.getLocalGroupMemberInfo(t,e);n&&n.updateRole(E.GRP_MBR_ROLE_ADMIN)}))}},{key:"_onMemberCancelledAdmin",value:function(e){var t=e.payload.groupProfile.groupID,n=e.payload.userIDList,o=this._groupModule.getModule(Zt);n.forEach((function(e){var n=o.getLocalGroupMemberInfo(t,e);n&&n.updateRole(E.GRP_MBR_ROLE_MEMBER)}))}},{key:"_onGroupProfileModified",value:function(e){var t=this,n=e.payload,o=n.newGroupProfile,a=n.groupProfile.groupID,i=this._groupModule.getLocalGroupProfile(a);Object.keys(o).forEach((function(e){switch(e){case"ownerID":t._ownerChanged(i,o);break;default:i[e]=o[e]}})),this._groupModule.emitGroupListUpdate(!0,!0)}},{key:"_ownerChanged",value:function(e,t){var n=e.groupID,o=this._groupModule.getLocalGroupProfile(n),a=this._groupModule.getMyUserID();if(a===t.ownerID){o.updateGroup({selfInfo:{role:E.GRP_MBR_ROLE_OWNER}});var i=this._groupModule.getModule(Zt),s=i.getLocalGroupMemberInfo(n,a),r=this._groupModule.getLocalGroupProfile(n).ownerID,c=i.getLocalGroupMemberInfo(n,r);s&&s.updateRole(E.GRP_MBR_ROLE_OWNER),c&&c.updateRole(E.GRP_MBR_ROLE_MEMBER)}}},{key:"_onMemberInfoModified",value:function(e){var t=e.payload.groupProfile.groupID,n=this._groupModule.getModule(Zt);e.payload.memberList.forEach((function(e){var o=n.getLocalGroupMemberInfo(t,e.userID);o&&He(e.muteTime)&&o.updateMuteUntil(e.muteTime)}))}},{key:"_cacheGroupTips",value:function(e,t){this._cachedGroupTipsMap.has(e)||this._cachedGroupTipsMap.set(e,[]),this._cachedGroupTipsMap.get(e).push(t)}},{key:"_deleteCachedGroupTips",value:function(e){this._cachedGroupTipsMap.has(e)&&this._cachedGroupTipsMap.delete(e)}},{key:"_notifyCachedGroupTips",value:function(e){var t=this,n=this._cachedGroupTipsMap.get(e)||[];n.forEach((function(e){t.onNewGroupTips(e)})),this._deleteCachedGroupTips(e),Le.log("".concat(this._className,"._notifyCachedGroupTips groupID:").concat(e," count:").concat(n.length))}},{key:"_cacheGroupTipsAndProbe",value:function(e){var t=this,n=e.groupID,o=e.event,a=e.item;this._cacheGroupTips(n,{event:o,dataList:[a]}),this._groupModule.getGroupSimplifiedInfo(n).then((function(e){e.type===E.GRP_AVCHATROOM?t._groupModule.hasLocalGroup(n)?t._notifyCachedGroupTips(n):t._groupModule.setUnjoinedAVChatRoom(n):(t._groupModule.updateGroupMap([e]),t._notifyCachedGroupTips(n))})),this._checkCountMap.has(n)||this._checkCountMap.set(n,0),Le.log("".concat(this._className,"._cacheGroupTipsAndProbe groupID:").concat(n))}},{key:"reset",value:function(){this._cachedGroupTipsMap.clear(),this._checkCountMap.clear()}}]),e}(),Ur=function(){function e(t){a(this,e),this._groupModule=t,this._className="CommonGroupHandler",this.tempConversationList=null,this._cachedGroupMessageMap=new Map,this._checkCountMap=new Map,this.MAX_CHECK_COUNT=4,t.getInnerEmitterInstance().once(vr,this._initGroupList,this)}return s(e,[{key:"onCheckTimer",value:function(e){e%1==0&&this._cachedGroupMessageMap.size>0&&this._checkCachedGroupMessage()}},{key:"_checkCachedGroupMessage",value:function(){var e=this;this._cachedGroupMessageMap.forEach((function(t,n){var o=e._checkCountMap.get(n),a=e._groupModule.hasLocalGroup(n);Le.log("".concat(e._className,"._checkCachedGroupMessage groupID:").concat(n," hasLocalGroup:").concat(a," checkCount:").concat(o)),a?(e._notifyCachedGroupMessage(n),e._checkCountMap.delete(n),e._groupModule.deleteUnjoinedAVChatRoom(n)):o>=e.MAX_CHECK_COUNT?(e._deleteCachedGroupMessage(n),e._checkCountMap.delete(n)):(o++,e._checkCountMap.set(n,o))}))}},{key:"_initGroupList",value:function(){var e=this;Le.log("".concat(this._className,"._initGroupList"));var t=new gi(us),n=this._groupModule.getStorageGroupList();if(We(n)&&n.length>0){n.forEach((function(t){e._groupModule.initGroupMap(t)})),this._groupModule.emitGroupListUpdate(!0,!1);var o=this._groupModule.getLocalGroupList().length;t.setNetworkType(this._groupModule.getNetworkType()).setMessage("group count:".concat(o)).end()}else t.setNetworkType(this._groupModule.getNetworkType()).setMessage("group count:0").end();Le.log("".concat(this._className,"._initGroupList ok"))}},{key:"handleUpdateGroupLastMessage",value:function(e){var t="".concat(this._className,".handleUpdateGroupLastMessage");if(Le.debug("".concat(t," conversation count:").concat(e.length,", local group count:").concat(this._groupModule.getLocalGroupList().length)),0!==this._groupModule.getGroupMap().size){for(var n,o,a,i=!1,s=0,r=e.length;s<r;s++)(n=e[s]).type===E.CONV_GROUP&&(o=n.conversationID.split(/^GROUP/)[1],(a=this._groupModule.getLocalGroupProfile(o))&&(a.lastMessage=n.lastMessage,i=!0));i&&(this._groupModule.sortLocalGroupList(),this._groupModule.emitGroupListUpdate(!0,!1))}else this.tempConversationList=e}},{key:"onNewGroupMessage",value:function(e){Le.debug("".concat(this._className,".onNewGroupMessage count:").concat(e.dataList.length));var t=this._newGroupMessageStoredAndSummary(e),n=t.conversationOptionsList,o=t.messageList,a=t.AVChatRoomMessageList;a.length>0&&this._groupModule.onAVChatRoomMessage(a),this._groupModule.filterModifiedMessage(o),n.length>0&&(this._groupModule.getModule(en).onNewMessage({conversationOptionsList:n,isInstantMessage:!0}),this._groupModule.updateNextMessageSeq(n));var i=this._groupModule.filterUnmodifiedMessage(o);i.length>0&&this._groupModule.emitOuterEvent(D.MESSAGE_RECEIVED,i),o.length=0}},{key:"_newGroupMessageStoredAndSummary",value:function(e){var t=e.dataList,n=e.event,o=e.isInstantMessage,a=null,i=[],s=[],r=[],c={},u=E.CONV_GROUP,l=this._groupModule.getModule(sn),d=this._groupModule.getModule(mn),f=t.length;f>1&&t.sort((function(e,t){return e.sequence-t.sequence}));for(var p=0;p<f;p++){var g=t[p],h=g.groupProfile.groupID,m=this._groupModule.hasLocalGroup(h);if(m||!this._groupModule.isUnjoinedAVChatRoom(h))if(m)if(this._groupModule.isMessageFromAVChatroom(h)){var _=gt(g);_.event=n,r.push(_)}else{g.currentUser=this._groupModule.getMyUserID(),g.conversationType=u,g.isSystemMessage=!!g.isSystemMessage,a=new ar(g),g.elements=l.parseElements(g.elements,g.from),a.setElement(g.elements);var v=1===t[p].isModified,y=this._groupModule.getModule(en);if(y.isMessageSentByCurrentInstance(a)?a.isModified=v:v=!1,1===g.onlineOnlyFlag)a._onlineOnlyFlag=!0,s.push(a);else{if(!y.pushIntoMessageList(s,a,v))continue;d.addMessageSequence({key:ri,message:a}),o&&a.clientTime>0&&d.addMessageDelay(a.clientTime);var M=a,C=M.conversationID,w=M.sequence,I=y.isRemoteRead({conversationID:C,sequence:w});if(Ye(c[C])){var b=0;"in"===a.flow&&(a._isExcludedFromUnreadCount||I||(b=1)),c[C]=i.push({conversationID:C,unreadCount:b,type:a.conversationType,subType:a.conversationSubType,lastMessage:a._isExcludedFromLastMessage?"":a})-1}else{var T=c[C];i[T].type=a.conversationType,i[T].subType=a.conversationSubType,i[T].lastMessage=a._isExcludedFromLastMessage?"":a,"in"===a.flow&&(a._isExcludedFromUnreadCount||I||i[T].unreadCount++)}}}else this._cacheGroupMessageAndProbe({groupID:h,event:n,item:g})}return{conversationOptionsList:i,messageList:s,AVChatRoomMessageList:r}}},{key:"onGroupMessageRevoked",value:function(e){Le.debug("".concat(this._className,".onGroupMessageRevoked nums:").concat(e.dataList.length));var t=this._groupModule.getModule(en),n=[],o=null;e.dataList.forEach((function(e){var a=e.elements.revokedInfos;Ye(a)||a.forEach((function(e){(o=t.revoke("GROUP".concat(e.groupID),e.sequence,e.random))&&n.push(o)}))})),0!==n.length&&(t.onMessageRevoked(n),this._groupModule.emitOuterEvent(D.MESSAGE_REVOKED,n))}},{key:"_groupListTreeShaking",value:function(e){for(var t=new Map(C(this._groupModule.getGroupMap())),n=0,o=e.length;n<o;n++)t.delete(e[n].groupID);this._groupModule.hasJoinedAVChatRoom()&&this._groupModule.getJoinedAVChatRoom().forEach((function(e){t.delete(e)}));for(var a=C(t.keys()),i=0,s=a.length;i<s;i++)this._groupModule.deleteGroup(a[i])}},{key:"getGroupList",value:function(e){var t=this,n="".concat(this._className,".getGroupList"),o=new gi(rs);Le.log("".concat(n));var a={introduction:"Introduction",notification:"Notification",createTime:"CreateTime",ownerID:"Owner_Account",lastInfoTime:"LastInfoTime",memberNum:"MemberNum",maxMemberNum:"MaxMemberNum",joinOption:"ApplyJoinOption",muteAllMembers:"ShutUpAllMember"},i=["Type","Name","FaceUrl","NextMsgSeq","LastMsgTime"],s=[];return e&&e.groupProfileFilter&&e.groupProfileFilter.forEach((function(e){a[e]&&i.push(a[e])})),this._pagingGetGroupList({limit:50,offset:0,groupBaseInfoFilter:i,groupList:s}).then((function(){Le.log("".concat(n," ok. count:").concat(s.length)),t._groupListTreeShaking(s),t._groupModule.updateGroupMap(s);var e=t._groupModule.getLocalGroupList().length;return o.setNetworkType(t._groupModule.getNetworkType()).setMessage("remote count:".concat(s.length,", after tree shaking, local count:").concat(e)).end(),t.tempConversationList&&(Le.log("".concat(n," update last message with tempConversationList, count:").concat(t.tempConversationList.length)),t.handleUpdateGroupLastMessage({data:t.tempConversationList}),t.tempConversationList=null),t._groupModule.emitGroupListUpdate(),t._groupModule.patchGroupMessageRemindType(),t._groupModule.recomputeUnreadCount(),ir({groupList:t._groupModule.getLocalGroupList()})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=M(t,2),a=n[0],i=n[1];o.setError(e,a,i).end()})),Le.error("".concat(n," failed. error:"),e),hr(e)}))}},{key:"_pagingGetGroupList",value:function(e){var t=this,n="".concat(this._className,"._pagingGetGroupList"),o=e.isCommunityRelay,a=void 0!==o&&o,i=e.limit,s=e.offset,r=e.groupBaseInfoFilter,c=e.groupList,u=new gi(fs);return this._groupModule.request({protocolName:Hn,requestData:{type:a?E.GRP_COMMUNITY:void 0,memberAccount:this._groupModule.getMyUserID(),limit:i,offset:s,responseFilter:{groupBaseInfoFilter:r,selfInfoFilter:["Role","JoinTime","MsgFlag","MsgSeq"]}}}).then((function(e){var o=e.data,l=o.groups,d=o.totalCount;c.push.apply(c,C(l));var f=s+i,p=!(d>f),g="offset:".concat(s," totalCount:").concat(d," isCompleted:").concat(p," ")+"currentCount:".concat(c.length," isCommunityRelay:").concat(a);return u.setNetworkType(t._groupModule.getNetworkType()).setMessage("".concat(g)).end(),a||p?!a&&p?(Le.log("".concat(n," start to get community list")),s=0,t._pagingGetGroupList({limit:i,offset:s,groupBaseInfoFilter:r,groupList:c,isCommunityRelay:!0})):a&&!p?(s=f,t._pagingGetGroupList({limit:i,offset:s,groupBaseInfoFilter:r,groupList:c,isCommunityRelay:!0})):(Le.log("".concat(n," ok. totalCount:").concat(c.length)),ir({groupList:c})):(s=f,t._pagingGetGroupList({limit:i,offset:s,groupBaseInfoFilter:r,groupList:c}))})).catch((function(e){return 11e3!==e.code&&t._groupModule.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];u.setMessage("isCommunityRelay:".concat(a)).setError(e,o,i).end()})),a?(11e3===e.code&&(u=null,Le.log("".concat(n," ok. community unavailable"))),gr({groupList:c})):hr(e)}))}},{key:"_cacheGroupMessage",value:function(e,t){this._cachedGroupMessageMap.has(e)||this._cachedGroupMessageMap.set(e,[]),this._cachedGroupMessageMap.get(e).push(t)}},{key:"_deleteCachedGroupMessage",value:function(e){this._cachedGroupMessageMap.has(e)&&this._cachedGroupMessageMap.delete(e)}},{key:"_notifyCachedGroupMessage",value:function(e){var t=this,n=this._cachedGroupMessageMap.get(e)||[];n.forEach((function(e){t.onNewGroupMessage(e)})),this._deleteCachedGroupMessage(e),Le.log("".concat(this._className,"._notifyCachedGroupMessage groupID:").concat(e," count:").concat(n.length))}},{key:"_cacheGroupMessageAndProbe",value:function(e){var t=this,n=e.groupID,o=e.event,a=e.item;this._cacheGroupMessage(n,{event:o,dataList:[a]}),this._groupModule.getGroupSimplifiedInfo(n).then((function(e){e.type===E.GRP_AVCHATROOM?t._groupModule.hasLocalGroup(n)?t._notifyCachedGroupMessage(n):t._groupModule.setUnjoinedAVChatRoom(n):(t._groupModule.updateGroupMap([e]),t._notifyCachedGroupMessage(n))})),this._checkCountMap.has(n)||this._checkCountMap.set(n,0),Le.log("".concat(this._className,"._cacheGroupMessageAndProbe groupID:").concat(n))}},{key:"reset",value:function(){this._cachedGroupMessageMap.clear(),this._checkCountMap.clear(),this._groupModule.getInnerEmitterInstance().once(vr,this._initGroupList,this)}}]),e}(),Fr={1:"init",2:"modify",3:"clear",4:"delete"},Br=function(){function e(t){a(this,e),this._groupModule=t,this._className="GroupAttributesHandler",this._groupAttributesMap=new Map,this.CACHE_EXPIRE_TIME=3e4,this._groupModule.getInnerEmitterInstance().on(yr,this._onCloudConfigUpdated,this)}return s(e,[{key:"_onCloudConfigUpdated",value:function(){var e=this._groupModule.getCloudConfig("grp_attr_cache_time");Ye(e)||(this.CACHE_EXPIRE_TIME=Number(e))}},{key:"updateLocalMainSequenceOnReconnected",value:function(){this._groupAttributesMap.forEach((function(e){e.localMainSequence=0}))}},{key:"onGroupAttributesUpdated",value:function(e){var t=this,n=e.groupID,o=e.groupAttributeOption,a=o.mainSequence,i=o.hasChangedAttributeInfo,s=o.groupAttributeList,r=void 0===s?[]:s,c=o.operationType;if(Le.log("".concat(this._className,".onGroupAttributesUpdated. hasChangedAttributeInfo:").concat(i," operationType:").concat(c)),!Ye(c)){if(1===i){if(4===c){var u=[];r.forEach((function(e){u.push(e.key)})),r=C(u),u=null}return this._refreshCachedGroupAttributes({groupID:n,remoteMainSequence:a,groupAttributeList:r,operationType:Fr[c]}),void this._emitGroupAttributesUpdated(n)}if(this._groupAttributesMap.has(n)){var l=this._groupAttributesMap.get(n).avChatRoomKey;this._getGroupAttributes({groupID:n,avChatRoomKey:l}).then((function(){t._emitGroupAttributesUpdated(n)}))}}}},{key:"initGroupAttributesCache",value:function(e){var t=e.groupID,n=e.avChatRoomKey;this._groupAttributesMap.set(t,{lastUpdateTime:0,localMainSequence:0,remoteMainSequence:0,attributes:new Map,avChatRoomKey:n}),Le.log("".concat(this._className,".initGroupAttributesCache groupID:").concat(t," avChatRoomKey:").concat(n))}},{key:"initGroupAttributes",value:function(e){var t=this,n=e.groupID,o=e.groupAttributes,a=this._checkCachedGroupAttributes({groupID:n,funcName:"initGroupAttributes"});if(!0!==a)return hr(a);var i=this._groupAttributesMap.get(n),s=i.remoteMainSequence,r=i.avChatRoomKey,c=new gi(hs);return c.setMessage("groupID:".concat(n," mainSequence:").concat(s," groupAttributes:").concat(JSON.stringify(o))),this._groupModule.request({protocolName:po,requestData:{groupID:n,avChatRoomKey:r,mainSequence:s,groupAttributeList:this._transformGroupAttributes(o)}}).then((function(e){var a=e.data,i=a.mainSequence,s=C(a.groupAttributeList);return s.forEach((function(e){e.value=o[e.key]})),t._refreshCachedGroupAttributes({groupID:n,remoteMainSequence:i,groupAttributeList:s,operationType:"init"}),c.setNetworkType(t._groupModule.getNetworkType()).end(),Le.log("".concat(t._className,".initGroupAttributes ok. groupID:").concat(n)),ir({groupAttributes:o})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=M(t,2),o=n[0],a=n[1];c.setError(e,o,a).end()})),hr(e)}))}},{key:"setGroupAttributes",value:function(e){var t=this,n=e.groupID,o=e.groupAttributes,a=this._checkCachedGroupAttributes({groupID:n,funcName:"setGroupAttributes"});if(!0!==a)return hr(a);var i=this._groupAttributesMap.get(n),s=i.remoteMainSequence,r=i.avChatRoomKey,c=i.attributes,u=this._transformGroupAttributes(o);u.forEach((function(e){var t=e.key;e.sequence=0,c.has(t)&&(e.sequence=c.get(t).sequence)}));var l=new gi(ms);return l.setMessage("groupID:".concat(n," mainSequence:").concat(s," groupAttributes:").concat(JSON.stringify(o))),this._groupModule.request({protocolName:go,requestData:{groupID:n,avChatRoomKey:r,mainSequence:s,groupAttributeList:u}}).then((function(e){var a=e.data,i=a.mainSequence,s=C(a.groupAttributeList);return s.forEach((function(e){e.value=o[e.key]})),t._refreshCachedGroupAttributes({groupID:n,remoteMainSequence:i,groupAttributeList:s,operationType:"modify"}),l.setNetworkType(t._groupModule.getNetworkType()).end(),Le.log("".concat(t._className,".setGroupAttributes ok. groupID:").concat(n)),ir({groupAttributes:o})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=M(t,2),o=n[0],a=n[1];l.setError(e,o,a).end()})),hr(e)}))}},{key:"deleteGroupAttributes",value:function(e){var t=this,n=e.groupID,o=e.keyList,a=void 0===o?[]:o,i=this._checkCachedGroupAttributes({groupID:n,funcName:"deleteGroupAttributes"});if(!0!==i)return hr(i);var s=this._groupAttributesMap.get(n),r=s.remoteMainSequence,c=s.avChatRoomKey,u=s.attributes,l=C(u.keys()),d=mo,f="clear",p={groupID:n,avChatRoomKey:c,mainSequence:r};if(a.length>0){var g=[];l=[],d=ho,f="delete",a.forEach((function(e){var t=0;u.has(e)&&(t=u.get(e).sequence,l.push(e)),g.push({key:e,sequence:t})})),p.groupAttributeList=g}var h=new gi(_s);return h.setMessage("groupID:".concat(n," mainSequence:").concat(r," keyList:").concat(a," protocolName:").concat(d)),this._groupModule.request({protocolName:d,requestData:p}).then((function(e){var o=e.data.mainSequence;return t._refreshCachedGroupAttributes({groupID:n,remoteMainSequence:o,groupAttributeList:a,operationType:f}),h.setNetworkType(t._groupModule.getNetworkType()).end(),Le.log("".concat(t._className,".deleteGroupAttributes ok. groupID:").concat(n)),ir({keyList:l})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=M(t,2),o=n[0],a=n[1];h.setError(e,o,a).end()})),hr(e)}))}},{key:"getGroupAttributes",value:function(e){var t=this,n=e.groupID,o=this._checkCachedGroupAttributes({groupID:n,funcName:"getGroupAttributes"});if(!0!==o)return hr(o);var a=this._groupAttributesMap.get(n),i=a.avChatRoomKey,s=a.lastUpdateTime,r=a.localMainSequence,c=a.remoteMainSequence,u=new gi(vs);if(u.setMessage("groupID:".concat(n," localMainSequence:").concat(r," remoteMainSequence:").concat(c," keyList:").concat(e.keyList)),Date.now()-s>=this.CACHE_EXPIRE_TIME||r<c)return this._getGroupAttributes({groupID:n,avChatRoomKey:i}).then((function(o){u.setMoreMessage("get attributes from remote. count:".concat(o.length)).setNetworkType(t._groupModule.getNetworkType()).end(),Le.log("".concat(t._className,".getGroupAttributes from remote. groupID:").concat(n));var a=t._getLocalGroupAttributes(e);return ir({groupAttributes:a})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=M(t,2),o=n[0],a=n[1];u.setError(e,o,a).end()})),hr(e)}));u.setMoreMessage("get attributes from cache").setNetworkType(this._groupModule.getNetworkType()).end(),Le.log("".concat(this._className,".getGroupAttributes from cache. groupID:").concat(n));var l=this._getLocalGroupAttributes(e);return gr({groupAttributes:l})}},{key:"_getGroupAttributes",value:function(e){var t=this;return this._groupModule.request({protocolName:_o,requestData:u({},e)}).then((function(n){var o=n.data,a=o.mainSequence,i=o.groupAttributeList,s=C(i);return Ye(a)||t._refreshCachedGroupAttributes({groupID:e.groupID,remoteMainSequence:a,groupAttributeList:s,operationType:"get"}),Le.log("".concat(t._className,"._getGroupAttributes ok. groupID:").concat(e.groupID)),i})).catch((function(e){return hr(e)}))}},{key:"_getLocalGroupAttributes",value:function(e){var t=e.groupID,n=e.keyList,o=void 0===n?[]:n,a={};if(!this._groupAttributesMap.has(t))return a;var i=this._groupAttributesMap.get(t).attributes;if(o.length>0)o.forEach((function(e){i.has(e)&&(a[e]=i.get(e).value)}));else{var s,r=S(i.keys());try{for(r.s();!(s=r.n()).done;){var c=s.value;a[c]=i.get(c).value}}catch(f){r.e(f)}finally{r.f()}}return a}},{key:"_refreshCachedGroupAttributes",value:function(e){var t=e.groupID,n=e.remoteMainSequence,o=e.groupAttributeList,a=e.operationType;if(this._groupAttributesMap.has(t)){var i=this._groupAttributesMap.get(t),s=i.localMainSequence;if("get"===a||n-s==1)i.remoteMainSequence=n,i.localMainSequence=n,i.lastUpdateTime=Date.now(),this._updateCachedAttributes({groupAttributes:i,groupAttributeList:o,operationType:a});else{if(s===n)return;i.remoteMainSequence=n}this._groupAttributesMap.set(t,i);var r="operationType:".concat(a," localMainSequence:").concat(s," remoteMainSequence:").concat(n);Le.log("".concat(this._className,"._refreshCachedGroupAttributes. ").concat(r))}}},{key:"_updateCachedAttributes",value:function(e){var t=e.groupAttributes,n=e.groupAttributeList,o=e.operationType;"clear"!==o?"delete"!==o?("init"===o&&t.attributes.clear(),n.forEach((function(e){var n=e.key,o=e.value,a=e.sequence;t.attributes.set(n,{value:o,sequence:a})}))):n.forEach((function(e){t.attributes.delete(e)})):t.attributes.clear()}},{key:"_checkCachedGroupAttributes",value:function(e){var t=e.groupID,n=e.funcName;if(this._groupModule.hasLocalGroup(t)&&this._groupModule.getLocalGroupProfile(t).type!==E.GRP_AVCHATROOM)return Le.warn("".concat(this._className,"._checkCachedGroupAttributes. ").concat("\u975e\u76f4\u64ad\u7fa4\u4e0d\u80fd\u4f7f\u7528\u7fa4\u5c5e\u6027 API")),new dr({code:Uo.CANNOT_USE_GRP_ATTR_NOT_AVCHATROOM,message:"\u975e\u76f4\u64ad\u7fa4\u4e0d\u80fd\u4f7f\u7528\u7fa4\u5c5e\u6027 API"});var o=this._groupAttributesMap.get(t);if(Ye(o)){var a="\u5982\u679c groupID:".concat(t," \u662f\u76f4\u64ad\u7fa4\uff0c\u4f7f\u7528 ").concat(n," \u524d\u5148\u4f7f\u7528 joinGroup \u63a5\u53e3\u7533\u8bf7\u52a0\u5165\u7fa4\u7ec4\uff0c\u8be6\u7ec6\u8bf7\u53c2\u8003 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#joinGroup");return Le.warn("".concat(this._className,"._checkCachedGroupAttributes. ").concat(a)),new dr({code:Uo.CANNOT_USE_GRP_ATTR_AVCHATROOM_UNJOIN,message:a})}return!0}},{key:"_transformGroupAttributes",value:function(e){var t=[];return Object.keys(e).forEach((function(n){t.push({key:n,value:e[n]})})),t}},{key:"_emitGroupAttributesUpdated",value:function(e){var t=this._getLocalGroupAttributes({groupID:e});this._groupModule.emitOuterEvent(D.GROUP_ATTRIBUTES_UPDATED,{groupID:e,groupAttributes:t})}},{key:"reset",value:function(){this._groupAttributesMap.clear(),this.CACHE_EXPIRE_TIME=3e4}}]),e}(),jr=function(){function e(t){a(this,e);var n=t.manager,o=t.groupID,i=t.onInit,s=t.onSuccess,r=t.onFail;this._className="Polling",this._manager=n,this._groupModule=n._groupModule,this._onInit=i,this._onSuccess=s,this._onFail=r,this._groupID=o,this._timeoutID=-1,this._isRunning=!1,this._protocolName=co}return s(e,[{key:"start",value:function(){var e=this._groupModule.isLoggedIn();e||(this._protocolName=uo),Le.log("".concat(this._className,".start pollingInterval:").concat(this._manager.getPollingInterval()," isLoggedIn:").concat(e)),this._isRunning=!0,this._request()}},{key:"isRunning",value:function(){return this._isRunning}},{key:"_request",value:function(){var e=this,t=this._onInit(this._groupID);this._groupModule.request({protocolName:this._protocolName,requestData:t}).then((function(t){e._onSuccess(e._groupID,t),e.isRunning()&&(clearTimeout(e._timeoutID),e._timeoutID=setTimeout(e._request.bind(e),e._manager.getPollingInterval()))})).catch((function(t){e._onFail(e._groupID,t),e.isRunning()&&(clearTimeout(e._timeoutID),e._timeoutID=setTimeout(e._request.bind(e),e._manager.MAX_POLLING_INTERVAL))}))}},{key:"stop",value:function(){Le.log("".concat(this._className,".stop")),this._timeoutID>0&&(clearTimeout(this._timeoutID),this._timeoutID=-1),this._isRunning=!1}}]),e}(),qr={3:!0,4:!0,5:!0,6:!0},Hr=function(){function e(t){a(this,e),this._groupModule=t,this._className="AVChatRoomHandler",this._joinedGroupMap=new Map,this._pollingRequestInfoMap=new Map,this._pollingInstanceMap=new Map,this.sequencesLinkedList=new Ar(100),this.messageIDLinkedList=new Ar(100),this.receivedMessageCount=0,this._reportMessageStackedCount=0,this._onlineMemberCountMap=new Map,this.DEFAULT_EXPIRE_TIME=60,this.DEFAULT_POLLING_INTERVAL=300,this.MAX_POLLING_INTERVAL=2e3,this._pollingInterval=this.DEFAULT_POLLING_INTERVAL}return s(e,[{key:"hasJoinedAVChatRoom",value:function(){return this._joinedGroupMap.size>0}},{key:"checkJoinedAVChatRoomByID",value:function(e){return this._joinedGroupMap.has(e)}},{key:"getJoinedAVChatRoom",value:function(){return this._joinedGroupMap.size>0?C(this._joinedGroupMap.keys()):null}},{key:"_updateRequestData",value:function(e){return u({},this._pollingRequestInfoMap.get(e))}},{key:"_handleSuccess",value:function(e,t){var n=t.data,o=n.key,a=n.nextSeq,i=n.rspMsgList;if(0!==n.errorCode){var s=this._pollingRequestInfoMap.get(e),r=new gi(Ds),c=s?"".concat(s.key,"-").concat(s.startSeq):"requestInfo is undefined";r.setMessage("".concat(e,"-").concat(c,"-").concat(t.errorInfo)).setCode(t.errorCode).setNetworkType(this._groupModule.getNetworkType()).end(!0)}else{if(!this.checkJoinedAVChatRoomByID(e))return;Ve(o)&&He(a)&&this._pollingRequestInfoMap.set(e,{key:o,startSeq:a}),We(i)&&i.length>0&&(i.forEach((function(e){e.to=e.groupID})),this.onMessage(i))}}},{key:"_handleFailure",value:function(e,t){}},{key:"onMessage",value:function(e){if(We(e)&&0!==e.length){var t=null,n=[],o=this._getModule(en),a=this._getModule(mn),i=e.length;i>1&&e.sort((function(e,t){return e.sequence-t.sequence}));for(var s=this._getModule(tn),r=0;r<i;r++)if(qr[e[r].event]){this.receivedMessageCount+=1,t=this.packMessage(e[r],e[r].event);var c=1===e[r].isModified,u=1===e[r].isHistoryMessage;if((s.isUnlimitedAVChatRoom()||!this.sequencesLinkedList.has(t.sequence))&&!this.messageIDLinkedList.has(t.ID)){var l=t.conversationID;if(this.receivedMessageCount%40==0&&this._getModule(fn).detectMessageLoss(l,this.sequencesLinkedList.data()),null!==this.sequencesLinkedList.tail()){var d=this.sequencesLinkedList.tail().value,f=t.sequence-d;f>1&&f<=20?this._getModule(fn).onMessageMaybeLost(l,d+1,f-1):f<-1&&f>=-20&&this._getModule(fn).onMessageMaybeLost(l,t.sequence+1,Math.abs(f)-1)}this.sequencesLinkedList.set(t.sequence),this.messageIDLinkedList.set(t.ID);var p=!1;if(this._isMessageSentByCurrentInstance(t)?c&&(p=!0,t.isModified=c,o.updateMessageIsModifiedProperty(t)):p=!0,p){if(t.conversationType,E.CONV_SYSTEM,!u&&t.conversationType!==E.CONV_SYSTEM){var g=t.conversationID.replace(E.CONV_GROUP,"");this._pollingInstanceMap.has(g)?a.addMessageSequence({key:ui,message:t}):(t.type!==E.MSG_GRP_TIP&&t.clientTime>0&&a.addMessageDelay(t.clientTime),a.addMessageSequence({key:ci,message:t}))}n.push(t)}}}else Le.warn("".concat(this._className,".onMessage \u672a\u5904\u7406\u7684 event \u7c7b\u578b: ").concat(e[r].event));if(0!==n.length){this._groupModule.filterModifiedMessage(n);var h=this.packConversationOption(n);h.length>0&&this._getModule(en).onNewMessage({conversationOptionsList:h,isInstantMessage:!0}),Le.debug("".concat(this._className,".onMessage count:").concat(n.length)),this._checkMessageStacked(n);var m=this._groupModule.filterUnmodifiedMessage(n);m.length>0&&this._groupModule.emitOuterEvent(D.MESSAGE_RECEIVED,m),n.length=0}}}},{key:"_checkMessageStacked",value:function(e){var t=e.length;t>=100&&(Le.warn("".concat(this._className,"._checkMessageStacked \u76f4\u64ad\u7fa4\u6d88\u606f\u5806\u79ef\u6570:").concat(e.length,'\uff01\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u6e32\u67d3\u65f6\u9047\u5230 "Dom limit exceeded" \u7684\u9519\u8bef\uff0c\u5efa\u8bae\u63a5\u5165\u4fa7\u6b64\u65f6\u53ea\u6e32\u67d3\u6700\u8fd1\u768410\u6761\u6d88\u606f')),this._reportMessageStackedCount<5&&(new gi(As).setNetworkType(this._groupModule.getNetworkType()).setMessage("count:".concat(t," groupID:").concat(C(this._joinedGroupMap.keys()))).setLevel("warning").end(),this._reportMessageStackedCount+=1))}},{key:"_isMessageSentByCurrentInstance",value:function(e){return!!this._getModule(en).isMessageSentByCurrentInstance(e)}},{key:"packMessage",value:function(e,t){e.currentUser=this._groupModule.getMyUserID(),e.conversationType=5===t?E.CONV_SYSTEM:E.CONV_GROUP,e.isSystemMessage=!!e.isSystemMessage;var n=new ar(e),o=this.packElements(e,t);return n.setElement(o),n}},{key:"packElements",value:function(e,t){return 4===t||6===t?(this._updateMemberCountByGroupTips(e),this._onGroupAttributesUpdated(e),{type:E.MSG_GRP_TIP,content:u({},e.elements,{groupProfile:e.groupProfile})}):5===t?{type:E.MSG_GRP_SYS_NOTICE,content:u({},e.elements,{groupProfile:e.groupProfile})}:this._getModule(sn).parseElements(e.elements,e.from)}},{key:"packConversationOption",value:function(e){for(var t=new Map,n=0;n<e.length;n++){var o=e[n],a=o.conversationID;if(t.has(a)){var i=t.get(a);i.lastMessage=o,"in"===o.flow&&i.unreadCount++}else t.set(a,{conversationID:o.conversationID,unreadCount:"out"===o.flow?0:1,type:o.conversationType,subType:o.conversationSubType,lastMessage:o})}return C(t.values())}},{key:"_updateMemberCountByGroupTips",value:function(e){var t=e.groupProfile.groupID,n=e.elements.onlineMemberInfo,o=void 0===n?void 0:n;if(!Pt(o)){var a=o.onlineMemberNum,i=void 0===a?0:a,s=o.expireTime,r=void 0===s?this.DEFAULT_EXPIRE_TIME:s,c=this._onlineMemberCountMap.get(t)||{},u=Date.now();Pt(c)?Object.assign(c,{lastReqTime:0,lastSyncTime:0,latestUpdateTime:u,memberCount:i,expireTime:r}):(c.latestUpdateTime=u,c.memberCount=i),Le.debug("".concat(this._className,"._updateMemberCountByGroupTips info:"),c),this._onlineMemberCountMap.set(t,c)}}},{key:"start",value:function(e){if(this._pollingInstanceMap.has(e)){var t=this._pollingInstanceMap.get(e);t.isRunning()||t.start()}else{var n=new jr({manager:this,groupID:e,onInit:this._updateRequestData.bind(this),onSuccess:this._handleSuccess.bind(this),onFail:this._handleFailure.bind(this)});n.start(),this._pollingInstanceMap.set(e,n),Le.log("".concat(this._className,".start groupID:").concat(e))}}},{key:"handleJoinResult",value:function(e){var t=this;return this._preCheck().then((function(){var n=e.longPollingKey,o=e.group,a=o.groupID;return t._joinedGroupMap.set(a,o),t._groupModule.updateGroupMap([o]),t._groupModule.deleteUnjoinedAVChatRoom(a),t._groupModule.emitGroupListUpdate(!0,!1),Ye(n)?gr({status:Fe,group:o}):Promise.resolve()}))}},{key:"startRunLoop",value:function(e){var t=this;return this.handleJoinResult(e).then((function(){var n=e.longPollingKey,o=e.group,a=o.groupID;return t._pollingRequestInfoMap.set(a,{key:n,startSeq:0}),t.start(a),t._groupModule.isLoggedIn()?gr({status:Fe,group:o}):gr({status:Fe})}))}},{key:"_preCheck",value:function(){if(this._getModule(tn).isUnlimitedAVChatRoom())return Promise.resolve();if(!this.hasJoinedAVChatRoom())return Promise.resolve();var e=M(this._joinedGroupMap.entries().next().value,2),t=e[0],n=e[1];if(this._groupModule.isLoggedIn()){if(n.selfInfo.role!==E.GRP_MBR_ROLE_OWNER&&n.ownerID!==this._groupModule.getMyUserID())return this._groupModule.quitGroup(t);this._groupModule.deleteLocalGroupAndConversation(t)}else this._groupModule.deleteLocalGroupAndConversation(t);return this.reset(t),Promise.resolve()}},{key:"joinWithoutAuth",value:function(e){var t=this,n=e.groupID,o="".concat(this._className,".joinWithoutAuth"),a=new gi(gs);return this._groupModule.request({protocolName:Jn,requestData:e}).then((function(e){var i=e.data.longPollingKey;if(t._groupModule.probeNetwork().then((function(e){var t=M(e,2),o=(t[0],t[1]);a.setNetworkType(o).setMessage("groupID:".concat(n," longPollingKey:").concat(i)).end(!0)})),Ye(i))return hr(new dr({code:Uo.CANNOT_JOIN_NON_AVCHATROOM_WITHOUT_LOGIN,message:Pa}));Le.log("".concat(o," ok. groupID:").concat(n)),t._getModule(en).setCompleted("".concat(E.CONV_GROUP).concat(n));var s=new Or({groupID:n});return t.startRunLoop({group:s,longPollingKey:i}),ir({status:Fe})})).catch((function(e){return Le.error("".concat(o," failed. groupID:").concat(n," error:"),e),t._groupModule.probeNetwork().then((function(t){var o=M(t,2),i=o[0],s=o[1];a.setError(e,i,s).setMessage("groupID:".concat(n)).end(!0)})),hr(e)})).finally((function(){t._groupModule.getModule(on).reportAtOnce()}))}},{key:"getGroupOnlineMemberCount",value:function(e){var t=this._onlineMemberCountMap.get(e)||{},n=Date.now();return Pt(t)||n-t.lastSyncTime>1e3*t.expireTime&&n-t.latestUpdateTime>1e4&&n-t.lastReqTime>3e3?(t.lastReqTime=n,this._onlineMemberCountMap.set(e,t),this._getGroupOnlineMemberCount(e).then((function(e){return ir({memberCount:e.memberCount})})).catch((function(e){return hr(e)}))):gr({memberCount:t.memberCount})}},{key:"_getGroupOnlineMemberCount",value:function(e){var t=this,n="".concat(this._className,"._getGroupOnlineMemberCount");return this._groupModule.request({protocolName:lo,requestData:{groupID:e}}).then((function(o){var a=t._onlineMemberCountMap.get(e)||{},i=o.data,s=i.onlineMemberNum,r=void 0===s?0:s,c=i.expireTime,u=void 0===c?t.DEFAULT_EXPIRE_TIME:c;Le.log("".concat(n," ok. groupID:").concat(e," memberCount:").concat(r," expireTime:").concat(u));var l=Date.now();return Pt(a)&&(a.lastReqTime=l),t._onlineMemberCountMap.set(e,Object.assign(a,{lastSyncTime:l,latestUpdateTime:l,memberCount:r,expireTime:u})),{memberCount:r}})).catch((function(o){return Le.warn("".concat(n," failed. error:"),o),new gi(Ss).setCode(o.code).setMessage("groupID:".concat(e," error:").concat(JSON.stringify(o))).setNetworkType(t._groupModule.getNetworkType()).end(),Promise.reject(o)}))}},{key:"_onGroupAttributesUpdated",value:function(e){var t=e.groupProfile.groupID,n=e.elements,o=n.operationType,a=n.newGroupProfile;if(6===o){var i=(void 0===a?void 0:a).groupAttributeOption;Pt(i)||this._groupModule.onGroupAttributesUpdated({groupID:t,groupAttributeOption:i})}}},{key:"_getModule",value:function(e){return this._groupModule.getModule(e)}},{key:"setPollingInterval",value:function(e){Ye(e)||He(e)||(this._pollingInterval=parseInt(e,10),Le.log("".concat(this._className,".setPollingInterval value:").concat(this._pollingInterval)))}},{key:"getPollingInterval",value:function(){return this._pollingInterval}},{key:"reset",value:function(e){if(e){Le.log("".concat(this._className,".reset groupID:").concat(e));var t=this._pollingInstanceMap.get(e);t&&t.stop(),this._pollingInstanceMap.delete(e),this._joinedGroupMap.delete(e),this._pollingRequestInfoMap.delete(e),this._onlineMemberCountMap.delete(e)}else{Le.log("".concat(this._className,".reset all"));var n,o=S(this._pollingInstanceMap.values());try{for(o.s();!(n=o.n()).done;)n.value.stop()}catch(r){o.e(r)}finally{o.f()}this._pollingInstanceMap.clear(),this._joinedGroupMap.clear(),this._pollingRequestInfoMap.clear(),this._onlineMemberCountMap.clear()}this.sequencesLinkedList.reset(),this.messageIDLinkedList.reset(),this.receivedMessageCount=0,this._reportMessageStackedCount=0,this._pollingInterval=this.DEFAULT_POLLING_INTERVAL}}]),e}(),Vr=1,Kr=15,zr=function(){function e(t){a(this,e),this._groupModule=t,this._className="GroupSystemNoticeHandler",this.pendencyMap=new Map}return s(e,[{key:"onNewGroupSystemNotice",value:function(e){var t=e.dataList,n=e.isSyncingEnded,o=e.isInstantMessage;Le.debug("".concat(this._className,".onReceiveSystemNotice count:").concat(t.length));var a=this.newSystemNoticeStoredAndSummary({notifiesList:t,isInstantMessage:o}),i=a.eventDataList,s=a.result;i.length>0&&(this._groupModule.getModule(en).onNewMessage({conversationOptionsList:i,isInstantMessage:o}),this._onReceivedGroupSystemNotice({result:s,isInstantMessage:o})),o?s.length>0&&this._groupModule.emitOuterEvent(D.MESSAGE_RECEIVED,s):!0===n&&this._clearGroupSystemNotice()}},{key:"newSystemNoticeStoredAndSummary",value:function(e){var t=e.notifiesList,n=e.isInstantMessage,o=null,a=t.length,i=0,s=[],r={conversationID:E.CONV_SYSTEM,unreadCount:0,type:E.CONV_SYSTEM,subType:null,lastMessage:null};for(i=0;i<a;i++){var c=t[i];c.elements.operationType!==Kr&&(c.currentUser=this._groupModule.getMyUserID(),c.conversationType=E.CONV_SYSTEM,c.conversationID=E.CONV_SYSTEM,(o=new ar(c)).setElement({type:E.MSG_GRP_SYS_NOTICE,content:u({},c.elements,{groupProfile:c.groupProfile})}),o.isSystemMessage=!0,(1===o.sequence&&1===o.random||2===o.sequence&&2===o.random)&&(o.sequence=rt(),o.random=rt(),o.generateMessageID(c.currentUser),Le.log("".concat(this._className,".newSystemNoticeStoredAndSummary sequence and random maybe duplicated, regenerate. ID:").concat(o.ID))),this._groupModule.getModule(en).pushIntoNoticeResult(s,o)&&(n?r.unreadCount++:o.setIsRead(!0),r.subType=o.conversationSubType))}return r.lastMessage=s[s.length-1],{eventDataList:s.length>0?[r]:[],result:s}}},{key:"_clearGroupSystemNotice",value:function(){var e=this;this.getPendencyList().then((function(t){t.forEach((function(t){e.pendencyMap.set("".concat(t.from,"_").concat(t.groupID,"_").concat(t.to),t)}));var n=e._groupModule.getModule(en).getLocalMessageList(E.CONV_SYSTEM),o=[];n.forEach((function(t){var n=t.payload,a=n.operatorID,i=n.operationType,s=n.groupProfile;if(i===Vr){var r="".concat(a,"_").concat(s.groupID,"_").concat(s.to),c=e.pendencyMap.get(r);c&&He(c.handled)&&0!==c.handled&&o.push(t)}})),e.deleteGroupSystemNotice({messageList:o})}))}},{key:"deleteGroupSystemNotice",value:function(e){var t=this,n="".concat(this._className,".deleteGroupSystemNotice");return We(e.messageList)&&0!==e.messageList.length?(Le.log("".concat(n)+e.messageList.map((function(e){return e.ID}))),this._groupModule.request({protocolName:ro,requestData:{messageListToDelete:e.messageList.map((function(e){return{from:E.CONV_SYSTEM,messageSeq:e.clientSequence,messageRandom:e.random}}))}}).then((function(){Le.log("".concat(n," ok"));var o=t._groupModule.getModule(en);return e.messageList.forEach((function(e){o.deleteLocalMessage(e)})),ir()})).catch((function(e){return Le.error("".concat(n," error:"),e),hr(e)}))):gr()}},{key:"getPendencyList",value:function(e){var t=this;return this._groupModule.request({protocolName:so,requestData:{startTime:e&&e.startTime?e.startTime:0,limit:e&&e.limit?e.limit:10,handleAccount:this._groupModule.getMyUserID()}}).then((function(e){var n=e.data.pendencyList;return 0!==e.data.nextStartTime?t.getPendencyList({startTime:e.data.nextStartTime}).then((function(e){return[].concat(C(n),C(e))})):n}))}},{key:"_onReceivedGroupSystemNotice",value:function(e){var t=this,n=e.result;e.isInstantMessage&&n.forEach((function(e){switch(e.payload.operationType){case 1:break;case 2:t._onApplyGroupRequestAgreed(e);break;case 3:break;case 4:t._onMemberKicked(e);break;case 5:t._onGroupDismissed(e);break;case 6:break;case 7:t._onInviteGroup(e);break;case 8:t._onQuitGroup(e);break;case 9:t._onSetManager(e);break;case 10:t._onDeleteManager(e)}}))}},{key:"_onApplyGroupRequestAgreed",value:function(e){var t=this,n=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(n)||this._groupModule.getGroupProfile({groupID:n}).then((function(e){var n=e.data.group;n&&(t._groupModule.updateGroupMap([n]),t._groupModule.emitGroupListUpdate())}))}},{key:"_onMemberKicked",value:function(e){var t=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(t)&&this._groupModule.deleteLocalGroupAndConversation(t)}},{key:"_onGroupDismissed",value:function(e){var t=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(t)&&this._groupModule.deleteLocalGroupAndConversation(t);var n=this._groupModule._AVChatRoomHandler;n&&n.checkJoinedAVChatRoomByID(t)&&n.reset(t)}},{key:"_onInviteGroup",value:function(e){var t=this,n=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(n)||this._groupModule.getGroupProfile({groupID:n}).then((function(e){var n=e.data.group;n&&(t._groupModule.updateGroupMap([n]),t._groupModule.emitGroupListUpdate())}))}},{key:"_onQuitGroup",value:function(e){var t=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(t)&&this._groupModule.deleteLocalGroupAndConversation(t)}},{key:"_onSetManager",value:function(e){var t=e.payload.groupProfile,n=t.to,o=t.groupID,a=this._groupModule.getModule(Zt).getLocalGroupMemberInfo(o,n);a&&a.updateRole(E.GRP_MBR_ROLE_ADMIN)}},{key:"_onDeleteManager",value:function(e){var t=e.payload.groupProfile,n=t.to,o=t.groupID,a=this._groupModule.getModule(Zt).getLocalGroupMemberInfo(o,n);a&&a.updateRole(E.GRP_MBR_ROLE_MEMBER)}},{key:"reset",value:function(){this.pendencyMap.clear()}}]),e}(),Wr=function(e){l(n,e);var t=y(n);function n(e){var o;return a(this,n),(o=t.call(this,e))._className="GroupModule",o._commonGroupHandler=null,o._AVChatRoomHandler=null,o._groupSystemNoticeHandler=null,o._commonGroupHandler=new Ur(_(o)),o._groupAttributesHandler=new Br(_(o)),o._AVChatRoomHandler=new Hr(_(o)),o._groupTipsHandler=new $r(_(o)),o._groupSystemNoticeHandler=new zr(_(o)),o.groupMap=new Map,o._unjoinedAVChatRoomList=new Map,o.getInnerEmitterInstance().on(yr,o._onCloudConfigUpdated,_(o)),o}return s(n,[{key:"_onCloudConfigUpdated",value:function(){var e=this.getCloudConfig("polling_interval");this._AVChatRoomHandler&&this._AVChatRoomHandler.setPollingInterval(e)}},{key:"onCheckTimer",value:function(e){this.isLoggedIn()&&(this._commonGroupHandler.onCheckTimer(e),this._groupTipsHandler.onCheckTimer(e))}},{key:"guardForAVChatRoom",value:function(e){var t=this;if(e.conversationType===E.CONV_GROUP){var n=e.to;return this.hasLocalGroup(n)?gr():this.getGroupProfile({groupID:n}).then((function(o){var a=o.data.group.type;if(Le.log("".concat(t._className,".guardForAVChatRoom. groupID:").concat(n," type:").concat(a)),a===E.GRP_AVCHATROOM){var i="userId:".concat(e.from," \u672a\u52a0\u5165\u7fa4 groupID:").concat(n,"\u3002\u53d1\u6d88\u606f\u524d\u5148\u4f7f\u7528 joinGroup \u63a5\u53e3\u7533\u8bf7\u52a0\u7fa4\uff0c\u8be6\u7ec6\u8bf7\u53c2\u8003 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#joinGroup");return Le.warn("".concat(t._className,".guardForAVChatRoom sendMessage not allowed. ").concat(i)),hr(new dr({code:Uo.MESSAGE_SEND_FAIL,message:i,data:{message:e}}))}return gr()}))}return gr()}},{key:"checkJoinedAVChatRoomByID",value:function(e){return!!this._AVChatRoomHandler&&this._AVChatRoomHandler.checkJoinedAVChatRoomByID(e)}},{key:"onNewGroupMessage",value:function(e){this._commonGroupHandler&&this._commonGroupHandler.onNewGroupMessage(e)}},{key:"updateNextMessageSeq",value:function(e){var t=this;We(e)&&e.forEach((function(e){var n=e.conversationID.replace(E.CONV_GROUP,"");t.groupMap.has(n)&&(t.groupMap.get(n).nextMessageSeq=e.lastMessage.sequence+1)}))}},{key:"onNewGroupTips",value:function(e){this._groupTipsHandler&&this._groupTipsHandler.onNewGroupTips(e)}},{key:"onGroupMessageRevoked",value:function(e){this._commonGroupHandler&&this._commonGroupHandler.onGroupMessageRevoked(e)}},{key:"onNewGroupSystemNotice",value:function(e){this._groupSystemNoticeHandler&&this._groupSystemNoticeHandler.onNewGroupSystemNotice(e)}},{key:"onGroupMessageReadNotice",value:function(e){var t=this;e.dataList.forEach((function(e){var n=e.elements.groupMessageReadNotice;if(!Ye(n)){var o=t.getModule(en);n.forEach((function(e){var n=e.groupID,a=e.lastMessageSeq;Le.debug("".concat(t._className,".onGroupMessageReadNotice groupID:").concat(n," lastMessageSeq:").concat(a));var i="".concat(E.CONV_GROUP).concat(n);o.updateIsReadAfterReadReport({conversationID:i,lastMessageSeq:a}),o.updateUnreadCount(i)}))}}))}},{key:"deleteGroupSystemNotice",value:function(e){this._groupSystemNoticeHandler&&this._groupSystemNoticeHandler.deleteGroupSystemNotice(e)}},{key:"initGroupMap",value:function(e){this.groupMap.set(e.groupID,new Or(e))}},{key:"deleteGroup",value:function(e){this.groupMap.delete(e)}},{key:"updateGroupMap",value:function(e){var t=this;e.forEach((function(e){t.groupMap.has(e.groupID)?t.groupMap.get(e.groupID).updateGroup(e):t.groupMap.set(e.groupID,new Or(e))}));var n,o=this.getMyUserID(),a=S(this.groupMap);try{for(a.s();!(n=a.n()).done;)M(n.value,2)[1].selfInfo.userID=o}catch(c){a.e(c)}finally{a.f()}this._setStorageGroupList()}},{key:"getStorageGroupList",value:function(){return this.getModule(nn).getItem("groupMap")}},{key:"_setStorageGroupList",value:function(){var e=this.getLocalGroupList().filter((function(e){var t=e.type;return!_t(t)})).slice(0,20).map((function(e){return{groupID:e.groupID,name:e.name,avatar:e.avatar,type:e.type}}));this.getModule(nn).setItem("groupMap",e)}},{key:"getGroupMap",value:function(){return this.groupMap}},{key:"getLocalGroupList",value:function(){return C(this.groupMap.values())}},{key:"getLocalGroupProfile",value:function(e){return this.groupMap.get(e)}},{key:"sortLocalGroupList",value:function(){var e=C(this.groupMap).filter((function(e){var t=M(e,2);return t[0],!Pt(t[1].lastMessage)}));e.sort((function(e,t){return t[1].lastMessage.lastTime-e[1].lastMessage.lastTime})),this.groupMap=new Map(C(e))}},{key:"updateGroupLastMessage",value:function(e){this._commonGroupHandler&&this._commonGroupHandler.handleUpdateGroupLastMessage(e)}},{key:"emitGroupListUpdate",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.getLocalGroupList();if(e&&this.emitOuterEvent(D.GROUP_LIST_UPDATED),t){var o=JSON.parse(JSON.stringify(n)),a=this.getModule(en);a.updateConversationGroupProfile(o)}}},{key:"patchGroupMessageRemindType",value:function(){var e=this.getLocalGroupList(),t=this.getModule(en),n=0;e.forEach((function(e){!0===t.patchMessageRemindType({ID:e.groupID,isC2CConversation:!1,messageRemindType:e.selfInfo.messageRemindType})&&(n+=1)})),Le.log("".concat(this._className,".patchGroupMessageRemindType count:").concat(n))}},{key:"recomputeUnreadCount",value:function(){var e=this.getLocalGroupList(),t=this.getModule(en);e.forEach((function(e){var n=e.groupID,o=e.selfInfo,a=o.excludedUnreadSequenceList,i=o.readedSequence;if(We(a)){var s=0;a.forEach((function(t){t>=i&&t<=e.nextMessageSeq-1&&(s+=1)})),s>=1&&t.recomputeGroupUnreadCount({conversationID:"".concat(E.CONV_GROUP).concat(n),count:s})}}))}},{key:"getMyNameCardByGroupID",value:function(e){var t=this.getLocalGroupProfile(e);return t?t.selfInfo.nameCard:""}},{key:"getGroupList",value:function(e){return this._commonGroupHandler?this._commonGroupHandler.getGroupList(e):gr()}},{key:"getGroupProfile",value:function(e){var t=this,n=new gi(cs),o="".concat(this._className,".getGroupProfile"),a=e.groupID,i=e.groupCustomFieldFilter;Le.log("".concat(o," groupID:").concat(a));var s={groupIDList:[a],responseFilter:{groupBaseInfoFilter:["Type","Name","Introduction","Notification","FaceUrl","Owner_Account","CreateTime","InfoSeq","LastInfoTime","LastMsgTime","MemberNum","MaxMemberNum","ApplyJoinOption","NextMsgSeq","ShutUpAllMember"],groupCustomFieldFilter:i,memberInfoFilter:["Role","JoinTime","MsgSeq","MsgFlag","NameCard"]}};return this.getGroupProfileAdvance(s).then((function(e){var i,s=e.data,r=s.successGroupList,c=s.failureGroupList;return Le.log("".concat(o," ok")),c.length>0?hr(c[0]):(_t(r[0].type)&&!t.hasLocalGroup(a)?i=new Or(r[0]):(t.updateGroupMap(r),i=t.getLocalGroupProfile(a)),t.getModule(en).updateConversationGroupProfile([i]),n.setNetworkType(t.getNetworkType()).setMessage("groupID:".concat(a," type:").concat(i.type," muteAllMembers:").concat(i.muteAllMembers," ownerID:").concat(i.ownerID)).end(),ir({group:i}))})).catch((function(a){return t.probeNetwork().then((function(t){var o=M(t,2),i=o[0],s=o[1];n.setError(a,i,s).setMessage("groupID:".concat(e.groupID)).end()})),Le.error("".concat(o," failed. error:"),a),hr(a)}))}},{key:"getGroupProfileAdvance",value:function(e){var t=this,n="".concat(this._className,".getGroupProfileAdvance"),o=e.groupIDList;We(o)&&o.length>50&&(Le.warn("".concat(n," \u83b7\u53d6\u7fa4\u8d44\u6599\u7684\u6570\u91cf\u4e0d\u80fd\u8d85\u8fc750\u4e2a")),o.length=50);var a=[],i=[];o.forEach((function(e){vt({groupID:e})?i.push(e):a.push(e)}));var s=[];if(a.length>0){var r=this._getGroupProfileAdvance(u({},e,{groupIDList:a}));s.push(r)}if(i.length>0){var c=this._getGroupProfileAdvance(u({},e,{groupIDList:i,relayFlag:a.length>0}));s.push(c)}return Promise.all(s).then((function(e){var t=[],n=[];return e.forEach((function(e){t.push.apply(t,C(e.successGroupList)),n.push.apply(n,C(e.failureGroupList))})),ir({successGroupList:t,failureGroupList:n})})).catch((function(e){return Le.error("".concat(t._className,"._getGroupProfileAdvance failed. error:"),e),hr(e)}))}},{key:"_getGroupProfileAdvance",value:function(e){var t=this,n=e.relayFlag,o=void 0!==n&&n,a=m(e,["relayFlag"]);return this.request({protocolName:Vn,requestData:a}).then((function(e){Le.log("".concat(t._className,"._getGroupProfileAdvance ok."));var n=e.data.groups;return{successGroupList:n.filter((function(e){return Ye(e.errorCode)||0===e.errorCode})),failureGroupList:n.filter((function(e){return e.errorCode&&0!==e.errorCode})).map((function(e){return new dr({code:e.errorCode,message:e.errorInfo,data:{groupID:e.groupID}})}))}})).catch((function(t){return o&&vt({groupID:e.groupIDList[0]})?{successGroupList:[],failureGroupList:[]}:hr(t)}))}},{key:"createGroup",value:function(e){var t=this,n="".concat(this._className,".createGroup"),o=e.type,a=e.groupID;if(!["Public","Private","ChatRoom","AVChatRoom","Community"].includes(o))return hr({code:Uo.ILLEGAL_GROUP_TYPE,message:ba});if(!vt({type:o})&&!Pt(a)&&vt({groupID:a}))return hr({code:Uo.ILLEGAL_GROUP_ID,message:ka});if(_t(o)&&!Ye(e.memberList)&&e.memberList.length>0&&(Le.warn("".concat(n," \u521b\u5efa AVChatRoom \u65f6\u4e0d\u80fd\u6dfb\u52a0\u7fa4\u6210\u5458\uff0c\u81ea\u52a8\u5ffd\u7565\u8be5\u5b57\u6bb5")),e.memberList=void 0),mt(o)||Ye(e.joinOption)||(Le.warn("".concat(n," \u521b\u5efa Work/Meeting/AVChatRoom/Community \u7fa4\u65f6\u4e0d\u80fd\u8bbe\u7f6e\u5b57\u6bb5 joinOption\uff0c\u81ea\u52a8\u5ffd\u7565\u8be5\u5b57\u6bb5")),e.joinOption=void 0),vt({type:o})&&!Pt(a)&&!vt({groupID:a}))return hr({code:Uo.ILLEGAL_GROUP_ID,message:ka});var i=new gi(Xi);Le.log("".concat(n," options:"),e);var s=[];return this.request({protocolName:Kn,requestData:u({},e,{ownerID:this.getMyUserID(),webPushFlag:1})}).then((function(o){var a=o.data,r=a.groupID,c=a.overLimitUserIDList,l=void 0===c?[]:c;if(s=l,i.setNetworkType(t.getNetworkType()).setMessage("groupType:".concat(e.type," groupID:").concat(r," overLimitUserIDList=").concat(l)).end(),Le.log("".concat(n," ok groupID:").concat(r," overLimitUserIDList:"),l),e.type===E.GRP_AVCHATROOM)return t.getGroupProfile({groupID:r});Pt(e.memberList)||Pt(l)||(e.memberList=e.memberList.filter((function(e){return-1===l.indexOf(e.userID)}))),t.updateGroupMap([u({},e,{groupID:r})]);var d=t.getModule(Wt),f=d.createCustomMessage({to:r,conversationType:E.CONV_GROUP,payload:{data:"group_create",extension:"".concat(t.getMyUserID(),"\u521b\u5efa\u7fa4\u7ec4")}});return d.sendMessageInstance(f),t.emitGroupListUpdate(),t.getGroupProfile({groupID:r})})).then((function(e){var t=e.data.group,n=t.selfInfo,o=n.nameCard,a=n.joinTime;return t.updateSelfInfo({nameCard:o,joinTime:a,messageRemindType:E.MSG_REMIND_ACPT_AND_NOTE,role:E.GRP_MBR_ROLE_OWNER}),ir({group:t,overLimitUserIDList:s})})).catch((function(o){return i.setMessage("groupType:".concat(e.type)),t.probeNetwork().then((function(e){var t=M(e,2),n=t[0],a=t[1];i.setError(o,n,a).end()})),Le.error("".concat(n," failed. error:"),o),hr(o)}))}},{key:"dismissGroup",value:function(e){var t=this,n="".concat(this._className,".dismissGroup");if(this.hasLocalGroup(e)&&this.getLocalGroupProfile(e).type===E.GRP_WORK)return hr(new dr({code:Uo.CANNOT_DISMISS_WORK,message:Ea}));var o=new gi(is);return o.setMessage("groupID:".concat(e)),Le.log("".concat(n," groupID:").concat(e)),this.request({protocolName:zn,requestData:{groupID:e}}).then((function(){return o.setNetworkType(t.getNetworkType()).end(),Le.log("".concat(n," ok")),t.deleteLocalGroupAndConversation(e),t.checkJoinedAVChatRoomByID(e)&&t._AVChatRoomHandler.reset(e),ir({groupID:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),a=n[0],i=n[1];o.setError(e,a,i).end()})),Le.error("".concat(n," failed. error:"),e),hr(e)}))}},{key:"updateGroupProfile",value:function(e){var t=this,n="".concat(this._className,".updateGroupProfile");!this.hasLocalGroup(e.groupID)||mt(this.getLocalGroupProfile(e.groupID).type)||Ye(e.joinOption)||(Le.warn("".concat(n," Work/Meeting/AVChatRoom/Community \u7fa4\u4e0d\u80fd\u8bbe\u7f6e\u5b57\u6bb5 joinOption\uff0c\u81ea\u52a8\u5ffd\u7565\u8be5\u5b57\u6bb5")),e.joinOption=void 0),Ye(e.muteAllMembers)||(e.muteAllMembers?e.muteAllMembers="On":e.muteAllMembers="Off");var o=new gi(ss);return o.setMessage(JSON.stringify(e)),Le.log("".concat(n," groupID:").concat(e.groupID)),this.request({protocolName:Wn,requestData:e}).then((function(){return o.setNetworkType(t.getNetworkType()).end(),Le.log("".concat(n," ok")),t.hasLocalGroup(e.groupID)&&(t.groupMap.get(e.groupID).updateGroup(e),t._setStorageGroupList()),ir({group:t.groupMap.get(e.groupID)})})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),a=n[0],i=n[1];o.setError(e,a,i).end()})),Le.log("".concat(n," failed. error:"),e),hr(e)}))}},{key:"joinGroup",value:function(e){var t=this,n=e.groupID,o=e.type,a="".concat(this._className,".joinGroup");if(o===E.GRP_WORK){var i=new dr({code:Uo.CANNOT_JOIN_WORK,message:Ta});return hr(i)}if(this.deleteUnjoinedAVChatRoom(n),this.hasLocalGroup(n)){if(!this.isLoggedIn())return gr({status:E.JOIN_STATUS_ALREADY_IN_GROUP});var s=new gi(Qi);return this.getGroupProfile({groupID:n}).then((function(){return s.setNetworkType(t.getNetworkType()).setMessage("groupID:".concat(n," joinedStatus:").concat(E.JOIN_STATUS_ALREADY_IN_GROUP)).end(),gr({status:E.JOIN_STATUS_ALREADY_IN_GROUP})})).catch((function(o){return s.setNetworkType(t.getNetworkType()).setMessage("groupID:".concat(n," unjoined")).end(),Le.warn("".concat(a," ").concat(n," was unjoined, now join!")),t.groupMap.delete(n),t.applyJoinGroup(e)}))}return Le.log("".concat(a," groupID:").concat(n)),this.isLoggedIn()?this.applyJoinGroup(e):this._AVChatRoomHandler.joinWithoutAuth(e)}},{key:"applyJoinGroup",value:function(e){var t=this,n="".concat(this._className,".applyJoinGroup"),o=e.groupID,a=new gi(Qi),i=u({},e),s=this.canIUse(K.AVCHATROOM_HISTORY_MSG);return s&&(i.historyMessageFlag=1),this.request({protocolName:Yn,requestData:i}).then((function(e){var i=e.data,r=i.joinedStatus,c=i.longPollingKey,u=i.avChatRoomFlag,l=i.avChatRoomKey,d=i.messageList,f="groupID:".concat(o," joinedStatus:").concat(r," longPollingKey:").concat(c)+" avChatRoomFlag:".concat(u," canGetAVChatRoomHistoryMessage:").concat(s);switch(a.setNetworkType(t.getNetworkType()).setMessage("".concat(f)).end(),Le.log("".concat(n," ok. ").concat(f)),r){case Be:return ir({status:Be});case Fe:return t.getGroupProfile({groupID:o}).then((function(e){var n,a=e.data.group,i={status:Fe,group:a};return 1===u?(t.getModule(en).setCompleted("".concat(E.CONV_GROUP).concat(o)),t._groupAttributesHandler.initGroupAttributesCache({groupID:o,avChatRoomKey:l}),(n=Ye(c)?t._AVChatRoomHandler.handleJoinResult({group:a}):t._AVChatRoomHandler.startRunLoop({longPollingKey:c,group:a})).then((function(){t._onAVChatRoomHistoryMessage(d)})),n):(t.emitGroupListUpdate(!0,!1),ir(i))}));default:var p=new dr({code:Uo.JOIN_GROUP_FAIL,message:Na});return Le.error("".concat(n," error:"),p),hr(p)}})).catch((function(o){return a.setMessage("groupID:".concat(e.groupID)),t.probeNetwork().then((function(e){var t=M(e,2),n=t[0],i=t[1];a.setError(o,n,i).end()})),Le.error("".concat(n," error:"),o),hr(o)}))}},{key:"quitGroup",value:function(e){var t=this,n="".concat(this._className,".quitGroup");Le.log("".concat(n," groupID:").concat(e));var o=this.checkJoinedAVChatRoomByID(e);if(!o&&!this.hasLocalGroup(e)){var a=new dr({code:Uo.MEMBER_NOT_IN_GROUP,message:Aa});return hr(a)}if(o&&!this.isLoggedIn())return Le.log("".concat(n," anonymously ok. groupID:").concat(e)),this.deleteLocalGroupAndConversation(e),this._AVChatRoomHandler.reset(e),gr({groupID:e});var i=new gi(Zi);return i.setMessage("groupID:".concat(e)),this.request({protocolName:Xn,requestData:{groupID:e}}).then((function(){return i.setNetworkType(t.getNetworkType()).end(),Le.log("".concat(n," ok")),o&&t._AVChatRoomHandler.reset(e),t.deleteLocalGroupAndConversation(e),ir({groupID:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],a=n[1];i.setError(e,o,a).end()})),Le.error("".concat(n," failed. error:"),e),hr(e)}))}},{key:"searchGroupByID",value:function(e){var t=this,n="".concat(this._className,".searchGroupByID"),o={groupIDList:[e]},a=new gi(es);return a.setMessage("groupID:".concat(e)),Le.log("".concat(n," groupID:").concat(e)),this.request({protocolName:Qn,requestData:o}).then((function(e){var o=e.data.groupProfile;if(0!==o[0].errorCode)throw new dr({code:o[0].errorCode,message:o[0].errorInfo});return a.setNetworkType(t.getNetworkType()).end(),Le.log("".concat(n," ok")),ir({group:new Or(o[0])})})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],i=n[1];a.setError(e,o,i).end()})),Le.warn("".concat(n," failed. error:"),e),hr(e)}))}},{key:"changeGroupOwner",value:function(e){var t=this,n="".concat(this._className,".changeGroupOwner");if(this.hasLocalGroup(e.groupID)&&this.getLocalGroupProfile(e.groupID).type===E.GRP_AVCHATROOM)return hr(new dr({code:Uo.CANNOT_CHANGE_OWNER_IN_AVCHATROOM,message:Sa}));if(e.newOwnerID===this.getMyUserID())return hr(new dr({code:Uo.CANNOT_CHANGE_OWNER_TO_SELF,message:Da}));var o=new gi(ts);return o.setMessage("groupID:".concat(e.groupID," newOwnerID:").concat(e.newOwnerID)),Le.log("".concat(n," groupID:").concat(e.groupID)),this.request({protocolName:Zn,requestData:e}).then((function(){o.setNetworkType(t.getNetworkType()).end(),Le.log("".concat(n," ok"));var a=e.groupID,i=e.newOwnerID;t.groupMap.get(a).ownerID=i;var s=t.getModule(Zt).getLocalGroupMemberList(a);if(s instanceof Map){var r=s.get(t.getMyUserID());Ye(r)||(r.updateRole("Member"),t.groupMap.get(a).selfInfo.role="Member");var c=s.get(i);Ye(c)||c.updateRole("Owner")}return t.emitGroupListUpdate(!0,!1),ir({group:t.groupMap.get(a)})})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),a=n[0],i=n[1];o.setError(e,a,i).end()})),Le.error("".concat(n," failed. error:"),e),hr(e)}))}},{key:"handleGroupApplication",value:function(e){var t=this,n="".concat(this._className,".handleGroupApplication"),o=e.message.payload,a=o.groupProfile.groupID,i=o.authentication,s=o.messageKey,r=o.operatorID,c=new gi(ns);return c.setMessage("groupID:".concat(a)),Le.log("".concat(n," groupID:").concat(a)),this.request({protocolName:eo,requestData:u({},e,{applicant:r,groupID:a,authentication:i,messageKey:s})}).then((function(){return c.setNetworkType(t.getNetworkType()).end(),Le.log("".concat(n," ok")),t._groupSystemNoticeHandler.deleteGroupSystemNotice({messageList:[e.message]}),ir({group:t.getLocalGroupProfile(a)})})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],a=n[1];c.setError(e,o,a).end()})),Le.error("".concat(n," failed. error"),e),hr(e)}))}},{key:"handleGroupInvitation",value:function(e){var t=this,n="".concat(this._className,".handleGroupInvitation"),o=e.message.payload,a=o.groupProfile.groupID,i=o.authentication,s=o.messageKey,r=o.operatorID,c=e.handleAction,l=new gi(os);return l.setMessage("groupID:".concat(a," inviter:").concat(r," handleAction:").concat(c)),Le.log("".concat(n," groupID:").concat(a," inviter:").concat(r," handleAction:").concat(c)),this.request({protocolName:to,requestData:u({},e,{inviter:r,groupID:a,authentication:i,messageKey:s})}).then((function(){return l.setNetworkType(t.getNetworkType()).end(),Le.log("".concat(n," ok")),t._groupSystemNoticeHandler.deleteGroupSystemNotice({messageList:[e.message]}),ir({group:t.getLocalGroupProfile(a)})})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],a=n[1];l.setError(e,o,a).end()})),Le.error("".concat(n," failed. error"),e),hr(e)}))}},{key:"getGroupOnlineMemberCount",value:function(e){return this._AVChatRoomHandler?this._AVChatRoomHandler.checkJoinedAVChatRoomByID(e)?this._AVChatRoomHandler.getGroupOnlineMemberCount(e):gr({memberCount:0}):hr({code:Uo.CANNOT_FIND_MODULE,message:Ja})}},{key:"hasLocalGroup",value:function(e){return this.groupMap.has(e)}},{key:"deleteLocalGroupAndConversation",value:function(e){this._deleteLocalGroup(e),this.getModule(en).deleteLocalConversation("GROUP".concat(e)),this.emitGroupListUpdate(!0,!1)}},{key:"_deleteLocalGroup",value:function(e){this.groupMap.delete(e),this.getModule(Zt).deleteGroupMemberList(e),this._setStorageGroupList()}},{key:"sendMessage",value:function(e,t){var n=this.createGroupMessagePack(e,t);return this.request(n)}},{key:"createGroupMessagePack",value:function(e,t){var n=null;t&&t.offlinePushInfo&&(n=t.offlinePushInfo);var o="";Ve(e.cloudCustomData)&&e.cloudCustomData.length>0&&(o=e.cloudCustomData);var a=[];if(ze(t)&&ze(t.messageControlInfo)){var i=t.messageControlInfo,s=i.excludedFromUnreadCount,r=i.excludedFromLastMessage;!0===s&&a.push("NoUnread"),!0===r&&a.push("NoLastMsg")}var c=e.getGroupAtInfoList();return{protocolName:kn,tjgID:this.generateTjgID(e),requestData:{fromAccount:this.getMyUserID(),groupID:e.to,msgBody:e.getElements(),cloudCustomData:o,random:e.random,priority:e.priority,clientSequence:e.clientSequence,groupAtInfo:e.type!==E.MSG_TEXT||Pt(c)?void 0:c,onlineOnlyFlag:this.isOnlineMessage(e,t)?1:0,clientTime:Ae(),offlinePushInfo:n?{pushFlag:!0===n.disablePush?1:0,title:n.title||"",desc:n.description||"",ext:n.extension||"",apnsInfo:{badgeMode:!0===n.ignoreIOSBadge?1:0},androidInfo:{OPPOChannelID:n.androidOPPOChannelID||""}}:void 0,messageControlInfo:a}}}},{key:"revokeMessage",value:function(e){return this.request({protocolName:no,requestData:{groupID:e.to,msgSeqList:[{msgSeq:e.sequence}]}})}},{key:"deleteMessage",value:function(e){var t=e.to,n=e.keyList;return Le.log("".concat(this._className,".deleteMessage groupID:").concat(t," count:").concat(n.length)),this.request({protocolName:fo,requestData:{groupID:t,deleter:this.getMyUserID(),keyList:n}})}},{key:"getRoamingMessage",value:function(e){var t=this,n="".concat(this._className,".getRoamingMessage"),o=new gi(Pi),a=0;return this._computeLastSequence(e).then((function(n){return a=n,Le.log("".concat(t._className,".getRoamingMessage groupID:").concat(e.groupID," lastSequence:").concat(a)),t.request({protocolName:io,requestData:{groupID:e.groupID,count:21,sequence:a}})})).then((function(i){var s=i.data,r=s.messageList,c=s.complete;Ye(r)?Le.log("".concat(n," ok. complete:").concat(c," but messageList is undefined!")):Le.log("".concat(n," ok. complete:").concat(c," count:").concat(r.length)),o.setNetworkType(t.getNetworkType()).setMessage("groupID:".concat(e.groupID," lastSequence:").concat(a," complete:").concat(c," count:").concat(r?r.length:"undefined")).end();var u="GROUP".concat(e.groupID),l=t.getModule(en);if(2===c||Pt(r))return l.setCompleted(u),[];var d=l.storeRoamingMessage(r,u);return l.updateIsRead(u),l.patchConversationLastMessage(u),d})).catch((function(i){return t.probeNetwork().then((function(t){var n=M(t,2),s=n[0],r=n[1];o.setError(i,s,r).setMessage("groupID:".concat(e.groupID," lastSequence:").concat(a)).end()})),Le.warn("".concat(n," failed. error:"),i),hr(i)}))}},{key:"setMessageRead",value:function(e){var t=this,n=e.conversationID,o=e.lastMessageSeq,a="".concat(this._className,".setMessageRead");Le.log("".concat(a," conversationID:").concat(n," lastMessageSeq:").concat(o)),He(o)||Le.warn("".concat(a," \u8bf7\u52ff\u4fee\u6539 Conversation.lastMessage.lastSequence\uff0c\u5426\u5219\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5df2\u8bfb\u4e0a\u62a5\u7ed3\u679c\u4e0d\u51c6\u786e"));var i=new gi(Gi);return i.setMessage("".concat(n,"-").concat(o)),this.request({protocolName:oo,requestData:{groupID:n.replace("GROUP",""),messageReadSeq:o}}).then((function(){i.setNetworkType(t.getNetworkType()).end(),Le.log("".concat(a," ok."));var e=t.getModule(en);return e.updateIsReadAfterReadReport({conversationID:n,lastMessageSeq:o}),e.updateUnreadCount(n),ir()})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],a=n[1];i.setError(e,o,a).end()})),Le.log("".concat(a," failed. error:"),e),hr(e)}))}},{key:"_computeLastSequence",value:function(e){return e.sequence>0?Promise.resolve(e.sequence):this.getGroupLastSequence(e.groupID)}},{key:"getGroupLastSequence",value:function(e){var t=this,n="".concat(this._className,".getGroupLastSequence"),o=new gi(ls),a=0,i="";if(this.hasLocalGroup(e)){var s=this.getLocalGroupProfile(e),r=s.lastMessage;if(r.lastSequence>0&&!1===r.onlineOnlyFlag)return a=r.lastSequence,i="got lastSequence:".concat(a," from local group profile[lastMessage.lastSequence]. groupID:").concat(e),Le.log("".concat(n," ").concat(i)),o.setNetworkType(this.getNetworkType()).setMessage("".concat(i)).end(),Promise.resolve(a);if(s.nextMessageSeq>1)return a=s.nextMessageSeq-1,i="got lastSequence:".concat(a," from local group profile[nextMessageSeq]. groupID:").concat(e),Le.log("".concat(n," ").concat(i)),o.setNetworkType(this.getNetworkType()).setMessage("".concat(i)).end(),Promise.resolve(a)}var c="GROUP".concat(e),u=this.getModule(en).getLocalConversation(c);if(u&&u.lastMessage.lastSequence&&!1===u.lastMessage.onlineOnlyFlag)return a=u.lastMessage.lastSequence,i="got lastSequence:".concat(a," from local conversation profile[lastMessage.lastSequence]. groupID:").concat(e),Le.log("".concat(n," ").concat(i)),o.setNetworkType(this.getNetworkType()).setMessage("".concat(i)).end(),Promise.resolve(a);var l={groupIDList:[e],responseFilter:{groupBaseInfoFilter:["NextMsgSeq"]}};return this.getGroupProfileAdvance(l).then((function(s){var r=s.data.successGroupList;return Pt(r)?Le.log("".concat(n," successGroupList is empty. groupID:").concat(e)):(a=r[0].nextMessageSeq-1,i="got lastSequence:".concat(a," from getGroupProfileAdvance. groupID:").concat(e),Le.log("".concat(n," ").concat(i))),o.setNetworkType(t.getNetworkType()).setMessage("".concat(i)).end(),a})).catch((function(a){return t.probeNetwork().then((function(t){var n=M(t,2),i=n[0],s=n[1];o.setError(a,i,s).setMessage("get lastSequence failed from getGroupProfileAdvance. groupID:".concat(e)).end()})),Le.warn("".concat(n," failed. error:"),a),hr(a)}))}},{key:"isMessageFromAVChatroom",value:function(e){return!!this._AVChatRoomHandler&&this._AVChatRoomHandler.checkJoinedAVChatRoomByID(e)}},{key:"hasJoinedAVChatRoom",value:function(){return this._AVChatRoomHandler?this._AVChatRoomHandler.hasJoinedAVChatRoom():0}},{key:"getJoinedAVChatRoom",value:function(){return this._AVChatRoomHandler?this._AVChatRoomHandler.getJoinedAVChatRoom():[]}},{key:"isOnlineMessage",value:function(e,t){return!(!this._canIUseOnlineOnlyFlag(e)||!t||!0!==t.onlineUserOnly)}},{key:"_canIUseOnlineOnlyFlag",value:function(e){var t=this.getJoinedAVChatRoom();return!t||!t.includes(e.to)||e.conversationType!==E.CONV_GROUP}},{key:"deleteLocalGroupMembers",value:function(e,t){this.getModule(Zt).deleteLocalGroupMembers(e,t)}},{key:"_onAVChatRoomHistoryMessage",value:function(e){if(!Pt(e)){Le.log("".concat(this._className,"._onAVChatRoomHistoryMessage count:").concat(e.length));var t=[];e.forEach((function(e){t.push(u({},e,{isHistoryMessage:1}))})),this.onAVChatRoomMessage(t)}}},{key:"onAVChatRoomMessage",value:function(e){this._AVChatRoomHandler&&this._AVChatRoomHandler.onMessage(e)}},{key:"getGroupSimplifiedInfo",value:function(e){var t=this,n=new gi(ps),o={groupIDList:[e],responseFilter:{groupBaseInfoFilter:["Type","Name"]}};return this.getGroupProfileAdvance(o).then((function(o){var a=o.data.successGroupList;return n.setNetworkType(t.getNetworkType()).setMessage("groupID:".concat(e," type:").concat(a[0].type)).end(),a[0]})).catch((function(o){t.probeNetwork().then((function(t){var a=M(t,2),i=a[0],s=a[1];n.setError(o,i,s).setMessage("groupID:".concat(e)).end()}))}))}},{key:"setUnjoinedAVChatRoom",value:function(e){this._unjoinedAVChatRoomList.set(e,1)}},{key:"deleteUnjoinedAVChatRoom",value:function(e){this._unjoinedAVChatRoomList.has(e)&&this._unjoinedAVChatRoomList.delete(e)}},{key:"isUnjoinedAVChatRoom",value:function(e){return this._unjoinedAVChatRoomList.has(e)}},{key:"onGroupAttributesUpdated",value:function(e){this._groupAttributesHandler&&this._groupAttributesHandler.onGroupAttributesUpdated(e)}},{key:"updateLocalMainSequenceOnReconnected",value:function(){this._groupAttributesHandler&&this._groupAttributesHandler.updateLocalMainSequenceOnReconnected()}},{key:"initGroupAttributes",value:function(e){return this._groupAttributesHandler.initGroupAttributes(e)}},{key:"setGroupAttributes",value:function(e){return this._groupAttributesHandler.setGroupAttributes(e)}},{key:"deleteGroupAttributes",value:function(e){return this._groupAttributesHandler.deleteGroupAttributes(e)}},{key:"getGroupAttributes",value:function(e){return this._groupAttributesHandler.getGroupAttributes(e)}},{key:"reset",value:function(){this.groupMap.clear(),this._unjoinedAVChatRoomList.clear(),this._commonGroupHandler.reset(),this._groupSystemNoticeHandler.reset(),this._groupTipsHandler.reset(),this._AVChatRoomHandler&&this._AVChatRoomHandler.reset()}}]),n}(vn),Yr=function(){function e(t){a(this,e),this.userID="",this.avatar="",this.nick="",this.role="",this.joinTime="",this.lastSendMsgTime="",this.nameCard="",this.muteUntil=0,this.memberCustomField=[],this._initMember(t)}return s(e,[{key:"_initMember",value:function(e){this.updateMember(e)}},{key:"updateMember",value:function(e){var t=[null,void 0,"",0,NaN];e.memberCustomField&&ht(this.memberCustomField,e.memberCustomField),at(this,e,["memberCustomField"],t)}},{key:"updateRole",value:function(e){["Owner","Admin","Member"].indexOf(e)<0||(this.role=e)}},{key:"updateMuteUntil",value:function(e){Ye(e)||(this.muteUntil=Math.floor((Date.now()+1e3*e)/1e3))}},{key:"updateNameCard",value:function(e){Ye(e)||(this.nameCard=e)}},{key:"updateMemberCustomField",value:function(e){e&&ht(this.memberCustomField,e)}}]),e}(),Jr=function(e){l(n,e);var t=y(n);function n(e){var o;return a(this,n),(o=t.call(this,e))._className="GroupMemberModule",o.groupMemberListMap=new Map,o.getInnerEmitterInstance().on(Mr,o._onProfileUpdated,_(o)),o}return s(n,[{key:"_onProfileUpdated",value:function(e){for(var t=this,n=e.data,o=function(e){var o=n[e];t.groupMemberListMap.forEach((function(e){e.has(o.userID)&&e.get(o.userID).updateMember({nick:o.nick,avatar:o.avatar})}))},a=0;a<n.length;a++)o(a)}},{key:"deleteGroupMemberList",value:function(e){this.groupMemberListMap.delete(e)}},{key:"getGroupMemberList",value:function(e){var t=this,n=e.groupID,o=e.offset,a=void 0===o?0:o,i=e.count,s=void 0===i?15:i,r="".concat(this._className,".getGroupMemberList"),c=new gi(ys);Le.log("".concat(r," groupID:").concat(n," offset:").concat(a," count:").concat(s));var u=0,l={groupID:n,limit:s>100?100:s};vt({groupID:n})?l.next="".concat(a):(l.offset=a,u=a+1);var d=[];return this.request({protocolName:vo,requestData:l}).then((function(e){var o=e.data,a=o.members,i=o.memberNum,s=o.next,r=void 0===s?void 0:s;if(Ye(r)||(u=Pt(r)?0:r),!We(a)||0===a.length)return u=0,Promise.resolve([]);var c=t.getModule(Xt);return c.hasLocalGroup(n)&&(c.getLocalGroupProfile(n).memberNum=i),d=t._updateLocalGroupMemberMap(n,a),t.getModule(Yt).getUserProfile({userIDList:a.map((function(e){return e.userID})),tagList:[xe.NICK,xe.AVATAR]})})).then((function(e){var o=e.data;if(!We(o)||0===o.length)return gr({memberList:[],offset:u});var a=o.map((function(e){return{userID:e.userID,nick:e.nick,avatar:e.avatar}}));return t._updateLocalGroupMemberMap(n,a),c.setNetworkType(t.getNetworkType()).setMessage("groupID:".concat(n," offset:").concat(u," count:").concat(s)).end(),Le.log("".concat(r," ok.")),ir({memberList:d,offset:u})})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],a=n[1];c.setError(e,o,a).end()})),Le.error("".concat(r," failed. error:"),e),hr(e)}))}},{key:"getGroupMemberProfile",value:function(e){var t=this,n="".concat(this._className,".getGroupMemberProfile"),o=new gi(Ms);o.setMessage(e.userIDList.length>5?"userIDList.length:".concat(e.userIDList.length):"userIDList:".concat(e.userIDList)),Le.log("".concat(n," groupID:").concat(e.groupID," userIDList:").concat(e.userIDList.join(","))),e.userIDList.length>50&&(e.userIDList=e.userIDList.slice(0,50));var a=e.groupID,i=e.userIDList;return this._getGroupMemberProfileAdvance(u({},e,{userIDList:i})).then((function(e){var n=e.data.members;return We(n)&&0!==n.length?(t._updateLocalGroupMemberMap(a,n),t.getModule(Yt).getUserProfile({userIDList:n.map((function(e){return e.userID})),tagList:[xe.NICK,xe.AVATAR]})):gr([])})).then((function(e){var n=e.data.map((function(e){return{userID:e.userID,nick:e.nick,avatar:e.avatar}}));t._updateLocalGroupMemberMap(a,n);var s=i.filter((function(e){return t.hasLocalGroupMember(a,e)})).map((function(e){return t.getLocalGroupMemberInfo(a,e)}));return o.setNetworkType(t.getNetworkType()).end(),ir({memberList:s})}))}},{key:"addGroupMember",value:function(e){var t=this,n="".concat(this._className,".addGroupMember"),o=e.groupID,a=this.getModule(Xt).getLocalGroupProfile(o),i=a.type,s=new gi(Cs);if(s.setMessage("groupID:".concat(o," groupType:").concat(i)),_t(i)){var r=new dr({code:Uo.CANNOT_ADD_MEMBER_IN_AVCHATROOM,message:Oa});return s.setCode(Uo.CANNOT_ADD_MEMBER_IN_AVCHATROOM).setError(Oa).setNetworkType(this.getNetworkType()).end(),hr(r)}return e.userIDList=e.userIDList.map((function(e){return{userID:e}})),Le.log("".concat(n," groupID:").concat(o)),this.request({protocolName:Mo,requestData:e}).then((function(o){var i=o.data.members;Le.log("".concat(n," ok"));var r=i.filter((function(e){return 1===e.result})).map((function(e){return e.userID})),c=i.filter((function(e){return 0===e.result})).map((function(e){return e.userID})),u=i.filter((function(e){return 2===e.result})).map((function(e){return e.userID})),l=i.filter((function(e){return 4===e.result})).map((function(e){return e.userID})),d="groupID:".concat(e.groupID,", ")+"successUserIDList:".concat(r,", ")+"failureUserIDList:".concat(c,", ")+"existedUserIDList:".concat(u,", ")+"overLimitUserIDList:".concat(l);return s.setNetworkType(t.getNetworkType()).setMoreMessage(d).end(),0===r.length?ir({successUserIDList:r,failureUserIDList:c,existedUserIDList:u,overLimitUserIDList:l}):(a.memberNum+=r.length,ir({successUserIDList:r,failureUserIDList:c,existedUserIDList:u,overLimitUserIDList:l,group:a}))})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],a=n[1];s.setError(e,o,a).end()})),Le.error("".concat(n," failed. error:"),e),hr(e)}))}},{key:"deleteGroupMember",value:function(e){var t=this,n="".concat(this._className,".deleteGroupMember"),o=e.groupID,a=e.userIDList,i=new gi(ws),s="groupID:".concat(o," ").concat(a.length>5?"userIDList.length:".concat(a.length):"userIDList:".concat(a));i.setMessage(s),Le.log("".concat(n," groupID:").concat(o," userIDList:"),a);var r=this.getModule(Xt).getLocalGroupProfile(o);return _t(r.type)?hr(new dr({code:Uo.CANNOT_KICK_MEMBER_IN_AVCHATROOM,message:La})):this.request({protocolName:Co,requestData:e}).then((function(){return i.setNetworkType(t.getNetworkType()).end(),Le.log("".concat(n," ok")),r.memberNum--,t.deleteLocalGroupMembers(o,a),ir({group:r,userIDList:a})})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],a=n[1];i.setError(e,o,a).end()})),Le.error("".concat(n," failed. error:"),e),hr(e)}))}},{key:"setGroupMemberMuteTime",value:function(e){var t=this,n=e.groupID,o=e.userID,a=e.muteTime,i="".concat(this._className,".setGroupMemberMuteTime");if(o===this.getMyUserID())return hr(new dr({code:Uo.CANNOT_MUTE_SELF,message:Ua}));Le.log("".concat(i," groupID:").concat(n," userID:").concat(o));var s=new gi(Is);return s.setMessage("groupID:".concat(n," userID:").concat(o," muteTime:").concat(a)),this.modifyGroupMemberInfo({groupID:n,userID:o,muteTime:a}).then((function(e){s.setNetworkType(t.getNetworkType()).end(),Le.log("".concat(i," ok"));var o=t.getModule(Xt);return ir({group:o.getLocalGroupProfile(n),member:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],a=n[1];s.setError(e,o,a).end()})),Le.error("".concat(i," failed. error:"),e),hr(e)}))}},{key:"setGroupMemberRole",value:function(e){var t=this,n="".concat(this._className,".setGroupMemberRole"),o=e.groupID,a=e.userID,i=e.role,s=this.getModule(Xt).getLocalGroupProfile(o);if(s.selfInfo.role!==E.GRP_MBR_ROLE_OWNER)return hr({code:Uo.NOT_OWNER,message:Ra});if([E.GRP_WORK,E.GRP_AVCHATROOM].includes(s.type))return hr({code:Uo.CANNOT_SET_MEMBER_ROLE_IN_WORK_AND_AVCHATROOM,message:xa});var r=[E.GRP_MBR_ROLE_ADMIN,E.GRP_MBR_ROLE_MEMBER];if(vt({groupID:o})&&r.push(E.GRP_MBR_ROLE_CUSTOM),r.indexOf(i)<0)return hr({code:Uo.INVALID_MEMBER_ROLE,message:Ga});if(a===this.getMyUserID())return hr({code:Uo.CANNOT_SET_SELF_MEMBER_ROLE,message:$a});var c=new gi(Ts);return c.setMessage("groupID:".concat(o," userID:").concat(a," role:").concat(i)),Le.log("".concat(n," groupID:").concat(o," userID:").concat(a)),this.modifyGroupMemberInfo({groupID:o,userID:a,role:i}).then((function(e){return c.setNetworkType(t.getNetworkType()).end(),Le.log("".concat(n," ok")),ir({group:s,member:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],a=n[1];c.setError(e,o,a).end()})),Le.error("".concat(n," failed. error:"),e),hr(e)}))}},{key:"setGroupMemberNameCard",value:function(e){var t=this,n="".concat(this._className,".setGroupMemberNameCard"),o=e.groupID,a=e.userID,i=void 0===a?this.getMyUserID():a,s=e.nameCard;Le.log("".concat(n," groupID:").concat(o," userID:").concat(i));var r=new gi(bs);return r.setMessage("groupID:".concat(o," userID:").concat(i," nameCard:").concat(s)),this.modifyGroupMemberInfo({groupID:o,userID:i,nameCard:s}).then((function(e){Le.log("".concat(n," ok")),r.setNetworkType(t.getNetworkType()).end();var a=t.getModule(Xt).getLocalGroupProfile(o);return i===t.getMyUserID()&&a&&a.setSelfNameCard(s),ir({group:a,member:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],a=n[1];r.setError(e,o,a).end()})),Le.error("".concat(n," failed. error:"),e),hr(e)}))}},{key:"setGroupMemberCustomField",value:function(e){var t=this,n="".concat(this._className,".setGroupMemberCustomField"),o=e.groupID,a=e.userID,i=void 0===a?this.getMyUserID():a,s=e.memberCustomField;Le.log("".concat(n," groupID:").concat(o," userID:").concat(i));var r=new gi(ks);return r.setMessage("groupID:".concat(o," userID:").concat(i," memberCustomField:").concat(JSON.stringify(s))),this.modifyGroupMemberInfo({groupID:o,userID:i,memberCustomField:s}).then((function(e){r.setNetworkType(t.getNetworkType()).end(),Le.log("".concat(n," ok"));var a=t.getModule(Xt).getLocalGroupProfile(o);return ir({group:a,member:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],a=n[1];r.setError(e,o,a).end()})),Le.error("".concat(n," failed. error:"),e),hr(e)}))}},{key:"modifyGroupMemberInfo",value:function(e){var t=this,n=e.groupID,o=e.userID;return this.request({protocolName:wo,requestData:e}).then((function(){if(t.hasLocalGroupMember(n,o)){var a=t.getLocalGroupMemberInfo(n,o);return Ye(e.muteTime)||a.updateMuteUntil(e.muteTime),Ye(e.role)||a.updateRole(e.role),Ye(e.nameCard)||a.updateNameCard(e.nameCard),Ye(e.memberCustomField)||a.updateMemberCustomField(e.memberCustomField),a}return t.getGroupMemberProfile({groupID:n,userIDList:[o]}).then((function(e){return M(e.data.memberList,1)[0]}))}))}},{key:"_getGroupMemberProfileAdvance",value:function(e){return this.request({protocolName:yo,requestData:u({},e,{memberInfoFilter:e.memberInfoFilter?e.memberInfoFilter:["Role","JoinTime","NameCard","ShutUpUntil"]})})}},{key:"_updateLocalGroupMemberMap",value:function(e,t){var n=this;return We(t)&&0!==t.length?t.map((function(t){return n.hasLocalGroupMember(e,t.userID)?n.getLocalGroupMemberInfo(e,t.userID).updateMember(t):n.setLocalGroupMember(e,new Yr(t)),n.getLocalGroupMemberInfo(e,t.userID)})):[]}},{key:"deleteLocalGroupMembers",value:function(e,t){var n=this.groupMemberListMap.get(e);n&&t.forEach((function(e){n.delete(e)}))}},{key:"getLocalGroupMemberInfo",value:function(e,t){return this.groupMemberListMap.has(e)?this.groupMemberListMap.get(e).get(t):null}},{key:"setLocalGroupMember",value:function(e,t){if(this.groupMemberListMap.has(e))this.groupMemberListMap.get(e).set(t.userID,t);else{var n=(new Map).set(t.userID,t);this.groupMemberListMap.set(e,n)}}},{key:"getLocalGroupMemberList",value:function(e){return this.groupMemberListMap.get(e)}},{key:"hasLocalGroupMember",value:function(e,t){return this.groupMemberListMap.has(e)&&this.groupMemberListMap.get(e).has(t)}},{key:"hasLocalGroupMemberMap",value:function(e){return this.groupMemberListMap.has(e)}},{key:"reset",value:function(){this.groupMemberListMap.clear()}}]),n}(vn),Xr=function(){function e(t){a(this,e),this._userModule=t,this._className="ProfileHandler",this.TAG="profile",this.accountProfileMap=new Map,this.expirationTime=864e5}return s(e,[{key:"setExpirationTime",value:function(e){this.expirationTime=e}},{key:"getUserProfile",value:function(e){var t=this,n=e.userIDList;e.fromAccount=this._userModule.getMyAccount(),n.length>100&&(Le.warn("".concat(this._className,".getUserProfile \u83b7\u53d6\u7528\u6237\u8d44\u6599\u4eba\u6570\u4e0d\u80fd\u8d85\u8fc7100\u4eba")),n.length=100);for(var o,a=[],i=[],s=0,r=n.length;s<r;s++)o=n[s],this._userModule.isMyFriend(o)&&this._containsAccount(o)?i.push(this._getProfileFromMap(o)):a.push(o);if(0===a.length)return gr(i);e.toAccount=a;var c=e.bFromGetMyProfile||!1,u=[];e.toAccount.forEach((function(e){u.push({toAccount:e,standardSequence:0,customSequence:0})})),e.userItem=u;var l=new gi(Ns);return l.setMessage(n.length>5?"userIDList.length:".concat(n.length):"userIDList:".concat(n)),this._userModule.request({protocolName:Sn,requestData:e}).then((function(e){l.setNetworkType(t._userModule.getNetworkType()).end(),Le.info("".concat(t._className,".getUserProfile ok"));var n=t._handleResponse(e).concat(i);return ir(c?n[0]:n)})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=M(t,2),o=n[0],a=n[1];l.setError(e,o,a).end()})),Le.error("".concat(t._className,".getUserProfile failed. error:"),e),hr(e)}))}},{key:"getMyProfile",value:function(){var e=this._userModule.getMyAccount();if(Le.log("".concat(this._className,".getMyProfile myAccount:").concat(e)),this._fillMap(),this._containsAccount(e)){var t=this._getProfileFromMap(e);return Le.debug("".concat(this._className,".getMyProfile from cache, myProfile:")+JSON.stringify(t)),gr(t)}return this.getUserProfile({fromAccount:e,userIDList:[e],bFromGetMyProfile:!0})}},{key:"_handleResponse",value:function(e){for(var t,n,o=ot.now(),a=e.data.userProfileItem,i=[],s=0,r=a.length;s<r;s++)"@TLS#NOT_FOUND"!==a[s].to&&""!==a[s].to&&(t=a[s].to,n=this._updateMap(t,this._getLatestProfileFromResponse(t,a[s].profileItem)),i.push(n));return Le.log("".concat(this._className,"._handleResponse cost ").concat(ot.now()-o," ms")),i}},{key:"_getLatestProfileFromResponse",value:function(e,t){var n={};if(n.userID=e,n.profileCustomField=[],!Pt(t))for(var o=0,a=t.length;o<a;o++)if(t[o].tag.indexOf("Tag_Profile_Custom")>-1)n.profileCustomField.push({key:t[o].tag,value:t[o].value});else switch(t[o].tag){case xe.NICK:n.nick=t[o].value;break;case xe.GENDER:n.gender=t[o].value;break;case xe.BIRTHDAY:n.birthday=t[o].value;break;case xe.LOCATION:n.location=t[o].value;break;case xe.SELFSIGNATURE:n.selfSignature=t[o].value;break;case xe.ALLOWTYPE:n.allowType=t[o].value;break;case xe.LANGUAGE:n.language=t[o].value;break;case xe.AVATAR:n.avatar=t[o].value;break;case xe.MESSAGESETTINGS:n.messageSettings=t[o].value;break;case xe.ADMINFORBIDTYPE:n.adminForbidType=t[o].value;break;case xe.LEVEL:n.level=t[o].value;break;case xe.ROLE:n.role=t[o].value;break;default:Le.warn("".concat(this._className,"._handleResponse unknown tag:"),t[o].tag,t[o].value)}return n}},{key:"updateMyProfile",value:function(e){var t=this,n="".concat(this._className,".updateMyProfile"),o=new gi(Os);o.setMessage(JSON.stringify(e));var a=(new Dr).validate(e);if(!a.valid)return o.setCode(Uo.UPDATE_PROFILE_INVALID_PARAM).setMoreMessage("".concat(n," info:").concat(a.tips)).setNetworkType(this._userModule.getNetworkType()).end(),Le.error("".concat(n," info:").concat(a.tips,"\uff0c\u8bf7\u53c2\u8003 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#updateMyProfile")),hr({code:Uo.UPDATE_PROFILE_INVALID_PARAM,message:Fa});var i=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&("profileCustomField"===s?e.profileCustomField.forEach((function(e){i.push({tag:e.key,value:e.value})})):i.push({tag:xe[s.toUpperCase()],value:e[s]}));return 0===i.length?(o.setCode(Uo.UPDATE_PROFILE_NO_KEY).setMoreMessage(Ba).setNetworkType(this._userModule.getNetworkType()).end(),Le.error("".concat(n," info:").concat(Ba,"\uff0c\u8bf7\u53c2\u8003 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#updateMyProfile")),hr({code:Uo.UPDATE_PROFILE_NO_KEY,message:Ba})):this._userModule.request({protocolName:Dn,requestData:{fromAccount:this._userModule.getMyAccount(),profileItem:i}}).then((function(a){o.setNetworkType(t._userModule.getNetworkType()).end(),Le.info("".concat(n," ok"));var i=t._updateMap(t._userModule.getMyAccount(),e);return t._userModule.emitOuterEvent(D.PROFILE_UPDATED,[i]),gr(i)})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=M(t,2),a=n[0],i=n[1];o.setError(e,a,i).end()})),Le.error("".concat(n," failed. error:"),e),hr(e)}))}},{key:"onProfileModified",value:function(e){var t=e.dataList;if(!Pt(t)){var n,o,a=t.length;Le.debug("".concat(this._className,".onProfileModified count:").concat(a," dataList:"),e.dataList);for(var i=[],s=0;s<a;s++)n=t[s].userID,o=this._updateMap(n,this._getLatestProfileFromResponse(n,t[s].profileList)),i.push(o);i.length>0&&(this._userModule.emitInnerEvent(Mr,i),this._userModule.emitOuterEvent(D.PROFILE_UPDATED,i))}}},{key:"_fillMap",value:function(){if(0===this.accountProfileMap.size){for(var e=this._getCachedProfiles(),t=Date.now(),n=0,o=e.length;n<o;n++)t-e[n].lastUpdatedTime<this.expirationTime&&this.accountProfileMap.set(e[n].userID,e[n]);Le.log("".concat(this._className,"._fillMap from cache, map.size:").concat(this.accountProfileMap.size))}}},{key:"_updateMap",value:function(e,t){var n,o=Date.now();return this._containsAccount(e)?(n=this._getProfileFromMap(e),t.profileCustomField&&ht(n.profileCustomField,t.profileCustomField),at(n,t,["profileCustomField"]),n.lastUpdatedTime=o):(n=new Dr(t),(this._userModule.isMyFriend(e)||e===this._userModule.getMyAccount())&&(n.lastUpdatedTime=o,this.accountProfileMap.set(e,n))),this._flushMap(e===this._userModule.getMyAccount()),n}},{key:"_flushMap",value:function(e){var t=C(this.accountProfileMap.values()),n=this._userModule.getStorageModule();Le.debug("".concat(this._className,"._flushMap length:").concat(t.length," flushAtOnce:").concat(e)),n.setItem(this.TAG,t,e)}},{key:"_containsAccount",value:function(e){return this.accountProfileMap.has(e)}},{key:"_getProfileFromMap",value:function(e){return this.accountProfileMap.get(e)}},{key:"_getCachedProfiles",value:function(){var e=this._userModule.getStorageModule().getItem(this.TAG);return Pt(e)?[]:e}},{key:"onConversationsProfileUpdated",value:function(e){for(var t,n,o,a=[],i=0,s=e.length;i<s;i++)n=(t=e[i]).userID,this._userModule.isMyFriend(n)||(this._containsAccount(n)?(o=this._getProfileFromMap(n),at(o,t)>0&&a.push(n)):a.push(t.userID));0!==a.length&&(Le.info("".concat(this._className,".onConversationsProfileUpdated toAccountList:").concat(a)),this.getUserProfile({userIDList:a}))}},{key:"getNickAndAvatarByUserID",value:function(e){if(this._containsAccount(e)){var t=this._getProfileFromMap(e);return{nick:t.nick,avatar:t.avatar}}return{nick:"",avatar:""}}},{key:"reset",value:function(){this._flushMap(!0),this.accountProfileMap.clear()}}]),e}(),Qr=function e(t){a(this,e),Pt||(this.userID=t.userID||"",this.timeStamp=t.timeStamp||0)},Zr=function(){function e(t){a(this,e),this._userModule=t,this._className="BlacklistHandler",this._blacklistMap=new Map,this.startIndex=0,this.maxLimited=100,this.currentSequence=0}return s(e,[{key:"getLocalBlacklist",value:function(){return C(this._blacklistMap.keys())}},{key:"getBlacklist",value:function(){var e=this,t="".concat(this._className,".getBlacklist"),n={fromAccount:this._userModule.getMyAccount(),maxLimited:this.maxLimited,startIndex:0,lastSequence:this.currentSequence},o=new gi(Ps);return this._userModule.request({protocolName:En,requestData:n}).then((function(n){var a=n.data,i=a.blackListItem,s=a.currentSequence,r=Pt(i)?0:i.length;o.setNetworkType(e._userModule.getNetworkType()).setMessage("blackList count:".concat(r)).end(),Le.info("".concat(t," ok")),e.currentSequence=s,e._handleResponse(i,!0),e._userModule.emitOuterEvent(D.BLACKLIST_UPDATED,C(e._blacklistMap.keys()))})).catch((function(n){return e._userModule.probeNetwork().then((function(e){var t=M(e,2),a=t[0],i=t[1];o.setError(n,a,i).end()})),Le.error("".concat(t," failed. error:"),n),hr(n)}))}},{key:"addBlacklist",value:function(e){var t=this,n="".concat(this._className,".addBlacklist"),o=new gi(Ls);if(!We(e.userIDList))return o.setCode(Uo.ADD_BLACKLIST_INVALID_PARAM).setMessage(ja).setNetworkType(this._userModule.getNetworkType()).end(),Le.error("".concat(n," options.userIDList \u5fc5\u9700\u662f\u6570\u7ec4")),hr({code:Uo.ADD_BLACKLIST_INVALID_PARAM,message:ja});var a=this._userModule.getMyAccount();return 1===e.userIDList.length&&e.userIDList[0]===a?(o.setCode(Uo.CANNOT_ADD_SELF_TO_BLACKLIST).setMessage(Ha).setNetworkType(this._userModule.getNetworkType()).end(),Le.error("".concat(n," \u4e0d\u80fd\u628a\u81ea\u5df1\u62c9\u9ed1")),hr({code:Uo.CANNOT_ADD_SELF_TO_BLACKLIST,message:Ha})):(e.userIDList.includes(a)&&(e.userIDList=e.userIDList.filter((function(e){return e!==a})),Le.warn("".concat(n," \u4e0d\u80fd\u628a\u81ea\u5df1\u62c9\u9ed1\uff0c\u5df2\u8fc7\u6ee4"))),e.fromAccount=this._userModule.getMyAccount(),e.toAccount=e.userIDList,this._userModule.request({protocolName:An,requestData:e}).then((function(a){return o.setNetworkType(t._userModule.getNetworkType()).setMessage(e.userIDList.length>5?"userIDList.length:".concat(e.userIDList.length):"userIDList:".concat(e.userIDList)).end(),Le.info("".concat(n," ok")),t._handleResponse(a.resultItem,!0),ir(C(t._blacklistMap.keys()))})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=M(t,2),a=n[0],i=n[1];o.setError(e,a,i).end()})),Le.error("".concat(n," failed. error:"),e),hr(e)})))}},{key:"_handleResponse",value:function(e,t){if(!Pt(e))for(var n,o,a,i=0,s=e.length;i<s;i++)o=e[i].to,a=e[i].resultCode,(Ye(a)||0===a)&&(t?((n=this._blacklistMap.has(o)?this._blacklistMap.get(o):new Qr).userID=o,!Pt(e[i].addBlackTimeStamp)&&(n.timeStamp=e[i].addBlackTimeStamp),this._blacklistMap.set(o,n)):this._blacklistMap.has(o)&&(n=this._blacklistMap.get(o),this._blacklistMap.delete(o)));Le.log("".concat(this._className,"._handleResponse total:").concat(this._blacklistMap.size," bAdd:").concat(t))}},{key:"deleteBlacklist",value:function(e){var t=this,n="".concat(this._className,".deleteBlacklist"),o=new gi(Rs);return We(e.userIDList)?(e.fromAccount=this._userModule.getMyAccount(),e.toAccount=e.userIDList,this._userModule.request({protocolName:Nn,requestData:e}).then((function(a){return o.setNetworkType(t._userModule.getNetworkType()).setMessage(e.userIDList.length>5?"userIDList.length:".concat(e.userIDList.length):"userIDList:".concat(e.userIDList)).end(),Le.info("".concat(n," ok")),t._handleResponse(a.data.resultItem,!1),ir(C(t._blacklistMap.keys()))})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=M(t,2),a=n[0],i=n[1];o.setError(e,a,i).end()})),Le.error("".concat(n," failed. error:"),e),hr(e)}))):(o.setCode(Uo.DEL_BLACKLIST_INVALID_PARAM).setMessage(qa).setNetworkType(this._userModule.getNetworkType()).end(),Le.error("".concat(n," options.userIDList \u5fc5\u9700\u662f\u6570\u7ec4")),hr({code:Uo.DEL_BLACKLIST_INVALID_PARAM,message:qa}))}},{key:"onAccountDeleted",value:function(e){for(var t,n=[],o=0,a=e.length;o<a;o++)t=e[o],this._blacklistMap.has(t)&&(this._blacklistMap.delete(t),n.push(t));n.length>0&&(Le.log("".concat(this._className,".onAccountDeleted count:").concat(n.length," userIDList:"),n),this._userModule.emitOuterEvent(D.BLACKLIST_UPDATED,C(this._blacklistMap.keys())))}},{key:"onAccountAdded",value:function(e){for(var t,n=[],o=0,a=e.length;o<a;o++)t=e[o],this._blacklistMap.has(t)||(this._blacklistMap.set(t,new Qr({userID:t})),n.push(t));n.length>0&&(Le.log("".concat(this._className,".onAccountAdded count:").concat(n.length," userIDList:"),n),this._userModule.emitOuterEvent(D.BLACKLIST_UPDATED,C(this._blacklistMap.keys())))}},{key:"reset",value:function(){this._blacklistMap.clear(),this.startIndex=0,this.maxLimited=100,this.currentSequence=0}}]),e}(),ec=function(e){l(n,e);var t=y(n);function n(e){var o;return a(this,n),(o=t.call(this,e))._className="UserModule",o._profileHandler=new Xr(_(o)),o._blacklistHandler=new Zr(_(o)),o.getInnerEmitterInstance().on(vr,o.onContextUpdated,_(o)),o}return s(n,[{key:"onContextUpdated",value:function(e){this._profileHandler.getMyProfile(),this._blacklistHandler.getBlacklist()}},{key:"onProfileModified",value:function(e){this._profileHandler.onProfileModified(e)}},{key:"onRelationChainModified",value:function(e){var t=e.dataList;if(!Pt(t)){var n=[];t.forEach((function(e){e.blackListDelAccount&&n.push.apply(n,C(e.blackListDelAccount))})),n.length>0&&this._blacklistHandler.onAccountDeleted(n);var o=[];t.forEach((function(e){e.blackListAddAccount&&o.push.apply(o,C(e.blackListAddAccount))})),o.length>0&&this._blacklistHandler.onAccountAdded(o)}}},{key:"onConversationsProfileUpdated",value:function(e){this._profileHandler.onConversationsProfileUpdated(e)}},{key:"getMyAccount",value:function(){return this.getMyUserID()}},{key:"getMyProfile",value:function(){return this._profileHandler.getMyProfile()}},{key:"getStorageModule",value:function(){return this.getModule(nn)}},{key:"isMyFriend",value:function(e){var t=this.getModule(Qt);return!!t&&t.isMyFriend(e)}},{key:"getUserProfile",value:function(e){return this._profileHandler.getUserProfile(e)}},{key:"updateMyProfile",value:function(e){return this._profileHandler.updateMyProfile(e)}},{key:"getNickAndAvatarByUserID",value:function(e){return this._profileHandler.getNickAndAvatarByUserID(e)}},{key:"getLocalBlacklist",value:function(){var e=this._blacklistHandler.getLocalBlacklist();return gr(e)}},{key:"addBlacklist",value:function(e){return this._blacklistHandler.addBlacklist(e)}},{key:"deleteBlacklist",value:function(e){return this._blacklistHandler.deleteBlacklist(e)}},{key:"reset",value:function(){Le.log("".concat(this._className,".reset")),this._profileHandler.reset(),this._blacklistHandler.reset()}}]),n}(vn),tc=function(){function e(t,n){a(this,e),this._moduleManager=t,this._isLoggedIn=!1,this._SDKAppID=n.SDKAppID,this._userID=n.userID||"",this._userSig=n.userSig||"",this._version="2.17.1",this._a2Key="",this._tinyID="",this._contentType="json",this._unlimitedAVChatRoom=n.unlimitedAVChatRoom,this._scene=n.scene||"",this._oversea=n.oversea,this._instanceID=n.instanceID,this._statusInstanceID=0,this._isDevMode=n.devMode,this._proxyServer=n.proxyServer}return s(e,[{key:"isLoggedIn",value:function(){return this._isLoggedIn}},{key:"isOversea",value:function(){return this._oversea}},{key:"isDevMode",value:function(){return this._isDevMode}},{key:"isSingaporeSite",value:function(){return this._SDKAppID>=2e7&&this._SDKAppID<3e7}},{key:"isKoreaSite",value:function(){return this._SDKAppID>=3e7&&this._SDKAppID<4e7}},{key:"isGermanySite",value:function(){return this._SDKAppID>=4e7&&this._SDKAppID<5e7}},{key:"isIndiaSite",value:function(){return this._SDKAppID>=5e7&&this._SDKAppID<6e7}},{key:"isUnlimitedAVChatRoom",value:function(){return this._unlimitedAVChatRoom}},{key:"getUserID",value:function(){return this._userID}},{key:"setUserID",value:function(e){this._userID=e}},{key:"setUserSig",value:function(e){this._userSig=e}},{key:"getUserSig",value:function(){return this._userSig}},{key:"getSDKAppID",value:function(){return this._SDKAppID}},{key:"getTinyID",value:function(){return this._tinyID}},{key:"setTinyID",value:function(e){this._tinyID=e,this._isLoggedIn=!0}},{key:"getScene",value:function(){return this._isTUIKit()?"tuikit":this._scene}},{key:"getInstanceID",value:function(){return this._instanceID}},{key:"getStatusInstanceID",value:function(){return this._statusInstanceID}},{key:"setStatusInstanceID",value:function(e){this._statusInstanceID=e}},{key:"getVersion",value:function(){return this._version}},{key:"getA2Key",value:function(){return this._a2Key}},{key:"setA2Key",value:function(e){this._a2Key=e}},{key:"getContentType",value:function(){return this._contentType}},{key:"getProxyServer",value:function(){return this._proxyServer}},{key:"_isTUIKit",value:function(){var e=!1,t=!1,n=!1,o=!1,a=[];oe&&(a=Object.keys(ie)),ae&&(a=Object.keys(window));for(var i=0,s=a.length;i<s;i++)if(a[i].toLowerCase().includes("uikit")){e=!0;break}if(a=null,oe&&Xe(getApp)){var r=getApp().globalData;ze(r)&&!0===r.isTUIKit&&(t=!0)}!0===this._moduleManager.getModule(nn).getStorageSync("TIM_".concat(this._SDKAppID,"_isTUIKit"))&&(n=!0);var c=null;if(X&&"undefined"==typeof uni&&__wxConfig&&(c=__wxConfig.pages),Q&&"undefined"==typeof uni&&__qqConfig&&(c=__qqConfig.pages),We(c)&&c.length>0){for(var u=0,l=c.length;u<l;u++)if(c[u].toLowerCase().includes("tui")){o=!0;break}c=null}return e||t||n||o}},{key:"reset",value:function(){this._isLoggedIn=!1,this._userSig="",this._a2Key="",this._tinyID="",this._statusInstanceID=0}}]),e}(),nc=function(e){l(n,e);var t=y(n);function n(e){var o;return a(this,n),(o=t.call(this,e))._className="SignModule",o._helloInterval=120,o._lastLoginTs=0,o._lastWsHelloTs=0,Cr.mixin(_(o)),o}return s(n,[{key:"onCheckTimer",value:function(e){this.isLoggedIn()&&e%this._helloInterval==0&&this._hello()}},{key:"login",value:function(e){if(this.isLoggedIn()){var t="\u60a8\u5df2\u7ecf\u767b\u5f55\u8d26\u53f7".concat(e.userID,"\uff01\u5982\u9700\u5207\u6362\u8d26\u53f7\u767b\u5f55\uff0c\u8bf7\u5148\u8c03\u7528 logout \u63a5\u53e3\u767b\u51fa\uff0c\u518d\u8c03\u7528 login \u63a5\u53e3\u767b\u5f55\u3002");return Le.warn(t),gr({actionStatus:"OK",errorCode:0,errorInfo:t,repeatLogin:!0})}if(Date.now()-this._lastLoginTs<=15e3)return Le.warn("\u60a8\u6b63\u5728\u5c1d\u8bd5\u767b\u5f55\u8d26\u53f7".concat(e.userID,"\uff01\u8bf7\u52ff\u91cd\u590d\u767b\u5f55\u3002")),hr({code:Uo.REPEAT_LOGIN,message:Ko});Le.log("".concat(this._className,".login userID:").concat(e.userID));var n=this._checkLoginInfo(e);if(0!==n.code)return hr(n);var o=this.getModule(tn),a=e.userID,i=e.userSig;return o.setUserID(a),o.setUserSig(i),this.getModule(ln).updateProtocolConfig(),this._login()}},{key:"_login",value:function(){var e=this,t=this.getModule(tn),n=t.getScene(),o=new gi(_i);return o.setMessage("".concat(n)).setMoreMessage("identifier:".concat(this.getMyUserID())),ne&&("tuikit"===n?o.setFramework("uni-app_uikit"):o.setFramework("uni-app")),this._lastLoginTs=Date.now(),this.request({protocolName:yn}).then((function(a){e._lastLoginTs=0;var i=Date.now(),s=null,r=a.data,c=r.a2Key,u=r.tinyID,l=r.helloInterval,d=r.instanceID,f=r.timeStamp;Le.log("".concat(e._className,".login ok. scene:").concat(n," helloInterval:").concat(l," instanceID:").concat(d," timeStamp:").concat(f));var p=1e3*f,g=i-o.getStartTs(),h=p+parseInt(g/2)-i,m=o.getStartTs()+h;if(o.start(m),function(e,t){Se=t;var n=new Date;n.setTime(e),Le.info("baseTime from server: ".concat(n," offset: ").concat(Se))}(p,h),!u)throw s=new dr({code:Uo.NO_TINYID,message:qo}),o.setError(s,!0,e.getNetworkType()).end(),s;if(!c)throw s=new dr({code:Uo.NO_A2KEY,message:Ho}),o.setError(s,!0,e.getNetworkType()).end(),s;return o.setNetworkType(e.getNetworkType()).setMoreMessage("helloInterval:".concat(l," instanceID:").concat(d," offset:").concat(h)).end(),t.setA2Key(c),t.setTinyID(u),t.setStatusInstanceID(d),e.getModule(ln).updateProtocolConfig(),e.emitInnerEvent(vr),e._helloInterval=l,e.triggerReady(),e._fetchCloudControlConfig(),a})).catch((function(t){return e.probeNetwork().then((function(e){var n=M(e,2),a=n[0],i=n[1];o.setError(t,a,i).end(!0)})),Le.error("".concat(e._className,".login failed. error:"),t),e._lastLoginTs=0,e._moduleManager.onLoginFailed(),hr(t)}))}},{key:"logout",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!this.isLoggedIn())return hr({code:Uo.USER_NOT_LOGGED_IN,message:Vo});var n=new gi(vi);return n.setNetworkType(this.getNetworkType()).setMessage("identifier:".concat(this.getMyUserID())).end(!0),Le.info("".concat(this._className,".logout type:").concat(t)),this.request({protocolName:Mn,requestData:{type:t}}).then((function(){return e.resetReady(),gr({})})).catch((function(t){return Le.error("".concat(e._className,"._logout error:"),t),e.resetReady(),gr({})}))}},{key:"_fetchCloudControlConfig",value:function(){this.getModule(pn).fetchConfig()}},{key:"_hello",value:function(){var e=this;this._lastWsHelloTs=Date.now(),this.request({protocolName:Cn}).catch((function(t){Le.warn("".concat(e._className,"._hello error:"),t)}))}},{key:"getLastWsHelloTs",value:function(){return this._lastWsHelloTs}},{key:"_checkLoginInfo",value:function(e){var t=0,n="";return Pt(this.getModule(tn).getSDKAppID())?(t=Uo.NO_SDKAPPID,n=Fo):Pt(e.userID)?(t=Uo.NO_IDENTIFIER,n=Bo):Pt(e.userSig)&&(t=Uo.NO_USERSIG,n=jo),{code:t,message:n}}},{key:"onMultipleAccountKickedOut",value:function(e){var t=this;new gi(yi).setNetworkType(this.getNetworkType()).setMessage("type:".concat(E.KICKED_OUT_MULT_ACCOUNT," newInstanceInfo:").concat(JSON.stringify(e))).end(!0),Le.warn("".concat(this._className,".onMultipleAccountKickedOut userID:").concat(this.getMyUserID()," newInstanceInfo:"),e),this.logout(1).then((function(){t.emitOuterEvent(D.KICKED_OUT,{type:E.KICKED_OUT_MULT_ACCOUNT}),t._moduleManager.reset()}))}},{key:"onMultipleDeviceKickedOut",value:function(e){var t=this;new gi(yi).setNetworkType(this.getNetworkType()).setMessage("type:".concat(E.KICKED_OUT_MULT_DEVICE," newInstanceInfo:").concat(JSON.stringify(e))).end(!0),Le.warn("".concat(this._className,".onMultipleDeviceKickedOut userID:").concat(this.getMyUserID()," newInstanceInfo:"),e),this.logout(1).then((function(){t.emitOuterEvent(D.KICKED_OUT,{type:E.KICKED_OUT_MULT_DEVICE}),t._moduleManager.reset()}))}},{key:"onUserSigExpired",value:function(){new gi(yi).setNetworkType(this.getNetworkType()).setMessage(E.KICKED_OUT_USERSIG_EXPIRED).end(!0),Le.warn("".concat(this._className,".onUserSigExpired: userSig \u7b7e\u540d\u8fc7\u671f\u88ab\u8e22\u4e0b\u7ebf")),0!==this.getModule(tn).getStatusInstanceID()&&(this.emitOuterEvent(D.KICKED_OUT,{type:E.KICKED_OUT_USERSIG_EXPIRED}),this._moduleManager.reset())}},{key:"reset",value:function(){Le.log("".concat(this._className,".reset")),this.resetReady(),this._helloInterval=120,this._lastLoginTs=0,this._lastWsHelloTs=0}}]),n}(vn);function oc(){return null}var ac=function(){function e(t){a(this,e),this._moduleManager=t,this._className="StorageModule",this._storageQueue=new Map,this._errorTolerantHandle()}return s(e,[{key:"_errorTolerantHandle",value:function(){oe||!Ye(window)&&!Ye(window.localStorage)||(this.getItem=oc,this.setItem=oc,this.removeItem=oc,this.clear=oc)}},{key:"onCheckTimer",value:function(e){if(e%20==0){if(0===this._storageQueue.size)return;this._doFlush()}}},{key:"_doFlush",value:function(){try{var e,t=S(this._storageQueue);try{for(t.s();!(e=t.n()).done;){var n=M(e.value,2),o=n[0],a=n[1];this._setStorageSync(this._getKey(o),a)}}catch(c){t.e(c)}finally{t.f()}this._storageQueue.clear()}catch(u){Le.warn("".concat(this._className,"._doFlush error:"),u)}}},{key:"_getPrefix",value:function(){var e=this._moduleManager.getModule(tn);return"TIM_".concat(e.getSDKAppID(),"_").concat(e.getUserID(),"_")}},{key:"_getKey",value:function(e){return"".concat(this._getPrefix()).concat(e)}},{key:"getItem",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{var n=t?this._getKey(e):e;return this.getStorageSync(n)}catch(s){return Le.warn("".concat(this._className,".getItem error:"),s),{}}}},{key:"setItem",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(n){var a=o?this._getKey(e):e;this._setStorageSync(a,t)}else this._storageQueue.set(e,t)}},{key:"clear",value:function(){try{oe?ie.clearStorageSync():localStorage&&localStorage.clear()}catch(e){Le.warn("".concat(this._className,".clear error:"),e)}}},{key:"removeItem",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{var n=t?this._getKey(e):e;this._removeStorageSync(n)}catch(s){Le.warn("".concat(this._className,".removeItem error:"),s)}}},{key:"getSize",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"b";try{var o={size:0,limitSize:5242880,unit:n};if(Object.defineProperty(o,"leftSize",{enumerable:!0,get:function(){return o.limitSize-o.size}}),oe&&(o.limitSize=1024*ie.getStorageInfoSync().limitSize),e)o.size=JSON.stringify(this.getItem(e)).length+this._getKey(e).length;else if(oe){var a=ie.getStorageInfoSync(),i=a.keys;i.forEach((function(e){o.size+=JSON.stringify(t.getStorageSync(e)).length+t._getKey(e).length}))}else if(localStorage)for(var s in localStorage)localStorage.hasOwnProperty(s)&&(o.size+=localStorage.getItem(s).length+s.length);return this._convertUnit(o)}catch(l){Le.warn("".concat(this._className," error:"),l)}}},{key:"_convertUnit",value:function(e){var t={},n=e.unit;for(var o in t.unit=n,e)"number"==typeof e[o]&&("kb"===n.toLowerCase()?t[o]=Math.round(e[o]/1024):"mb"===n.toLowerCase()?t[o]=Math.round(e[o]/1024/1024):t[o]=e[o]);return t}},{key:"_setStorageSync",value:function(e,t){oe?te?my.setStorageSync({key:e,data:t}):ie.setStorageSync(e,t):localStorage&&localStorage.setItem(e,JSON.stringify(t))}},{key:"getStorageSync",value:function(e){return oe?te?my.getStorageSync({key:e}).data:ie.getStorageSync(e):localStorage?JSON.parse(localStorage.getItem(e)):{}}},{key:"_removeStorageSync",value:function(e){oe?te?my.removeStorageSync({key:e}):ie.removeStorageSync(e):localStorage&&localStorage.removeItem(e)}},{key:"reset",value:function(){Le.log("".concat(this._className,".reset")),this._doFlush()}}]),e}(),ic=function(){function e(t){a(this,e),this._className="SSOLogBody",this._report=[]}return s(e,[{key:"pushIn",value:function(e){Le.debug("".concat(this._className,".pushIn"),this._report.length,e),this._report.push(e)}},{key:"backfill",value:function(e){var t;We(e)&&0!==e.length&&(Le.debug("".concat(this._className,".backfill"),this._report.length,e.length),(t=this._report).unshift.apply(t,C(e)))}},{key:"getLogsNumInMemory",value:function(){return this._report.length}},{key:"isEmpty",value:function(){return 0===this._report.length}},{key:"_reset",value:function(){this._report.length=0,this._report=[]}},{key:"getLogsInMemory",value:function(){var e=this._report.slice();return this._reset(),e}}]),e}(),sc=function(e){var t=e.getModule(tn);return{SDKType:10,SDKAppID:t.getSDKAppID(),SDKVersion:t.getVersion(),tinyID:Number(t.getTinyID()),userID:t.getUserID(),platform:e.getPlatform(),instanceID:t.getInstanceID(),traceID:De()}},rc=function(e){l(n,e);var t=y(n);function n(e){var o;a(this,n),(o=t.call(this,e))._className="EventStatModule",o.TAG="im-ssolog-event",o._reportBody=new ic,o.MIN_THRESHOLD=20,o.MAX_THRESHOLD=100,o.WAITING_TIME=6e4,o.REPORT_LEVEL=[4,5,6],o.REPORT_SDKAPPID_BLACKLIST=[],o.REPORT_TINYID_WHITELIST=[],o._lastReportTime=Date.now();var i=o.getInnerEmitterInstance();return i.on(vr,o._onLoginSuccess,_(o)),i.on(yr,o._onCloudConfigUpdated,_(o)),o}return s(n,[{key:"reportAtOnce",value:function(){Le.debug("".concat(this._className,".reportAtOnce")),this._report()}},{key:"_onLoginSuccess",value:function(){var e=this,t=this.getModule(nn),n=t.getItem(this.TAG,!1);!Pt(n)&&Xe(n.forEach)&&(Le.log("".concat(this._className,"._onLoginSuccess get ssolog in storage, count:").concat(n.length)),n.forEach((function(t){e._reportBody.pushIn(t)})),t.removeItem(this.TAG,!1))}},{key:"_onCloudConfigUpdated",value:function(){var e=this.getCloudConfig("evt_rpt_threshold"),t=this.getCloudConfig("evt_rpt_waiting"),n=this.getCloudConfig("evt_rpt_level"),o=this.getCloudConfig("evt_rpt_sdkappid_bl"),a=this.getCloudConfig("evt_rpt_tinyid_wl");Ye(e)||(this.MIN_THRESHOLD=Number(e)),Ye(t)||(this.WAITING_TIME=Number(t)),Ye(n)||(this.REPORT_LEVEL=n.split(",").map((function(e){return Number(e)}))),Ye(o)||(this.REPORT_SDKAPPID_BLACKLIST=o.split(",").map((function(e){return Number(e)}))),Ye(a)||(this.REPORT_TINYID_WHITELIST=a.split(","))}},{key:"pushIn",value:function(e){e instanceof gi&&(e.updateTimeStamp(),this._reportBody.pushIn(e),this._reportBody.getLogsNumInMemory()>=this.MIN_THRESHOLD&&this._report())}},{key:"onCheckTimer",value:function(){Date.now()<this._lastReportTime+this.WAITING_TIME||this._reportBody.isEmpty()||this._report()}},{key:"_filterLogs",value:function(e){var t=this,n=this.getModule(tn),o=n.getSDKAppID(),a=n.getTinyID();return At(this.REPORT_SDKAPPID_BLACKLIST,o)&&!Nt(this.REPORT_TINYID_WHITELIST,a)?[]:e.filter((function(e){return t.REPORT_LEVEL.includes(e.level)}))}},{key:"_report",value:function(){var e=this;if(!this._reportBody.isEmpty()){var t=this._reportBody.getLogsInMemory(),n=this._filterLogs(t);if(0!==n.length){var o={header:sc(this),event:n};this.request({protocolName:ko,requestData:u({},o)}).then((function(){e._lastReportTime=Date.now()})).catch((function(n){Le.warn("".concat(e._className,".report failed. networkType:").concat(e.getNetworkType()," error:"),n),e._reportBody.backfill(t),e._reportBody.getLogsNumInMemory()>e.MAX_THRESHOLD&&e._flushAtOnce()}))}else this._lastReportTime=Date.now()}}},{key:"_flushAtOnce",value:function(){var e=this.getModule(nn),t=e.getItem(this.TAG,!1),n=this._reportBody.getLogsInMemory();if(Pt(t))Le.log("".concat(this._className,"._flushAtOnce count:").concat(n.length)),e.setItem(this.TAG,n,!0,!1);else{var o=n.concat(t);o.length>this.MAX_THRESHOLD&&(o=o.slice(0,this.MAX_THRESHOLD)),Le.log("".concat(this._className,"._flushAtOnce count:").concat(o.length)),e.setItem(this.TAG,o,!0,!1)}}},{key:"reset",value:function(){Le.log("".concat(this._className,".reset")),this._lastReportTime=0,this._report(),this.REPORT_SDKAPPID_BLACKLIST=[],this.REPORT_TINYID_WHITELIST=[]}}]),n}(vn),cc="none",uc="online",lc=function(){function e(t){a(this,e),this._moduleManager=t,this._networkType="",this._className="NetMonitorModule",this.MAX_WAIT_TIME=3e3,this._mpNetworkStatusCallback=null,this._webOnlineCallback=null,this._webOfflineCallback=null}return s(e,[{key:"start",value:function(){var e=this;oe?(ie.getNetworkType({success:function(t){e._networkType=t.networkType,t.networkType===cc?Le.warn("".concat(e._className,".start no network, please check!")):Le.info("".concat(e._className,".start networkType:").concat(t.networkType))}}),this._mpNetworkStatusCallback=this._onNetworkStatusChange.bind(this),ie.onNetworkStatusChange(this._mpNetworkStatusCallback)):(this._networkType=uc,this._webOnlineCallback=this._onWebOnline.bind(this),this._webOfflineCallback=this._onWebOffline.bind(this),window&&(window.addEventListener("online",this._webOnlineCallback),window.addEventListener("offline",this._webOfflineCallback)))}},{key:"_onWebOnline",value:function(){this._onNetworkStatusChange({isConnected:!0,networkType:uc})}},{key:"_onWebOffline",value:function(){this._onNetworkStatusChange({isConnected:!1,networkType:cc})}},{key:"_onNetworkStatusChange",value:function(e){var t=e.isConnected,n=e.networkType,o=!1;t?(Le.info("".concat(this._className,"._onNetworkStatusChange previousNetworkType:").concat(this._networkType," currentNetworkType:").concat(n)),this._networkType!==n&&(o=!0,this._moduleManager.getModule(dn).reConnect(!0))):this._networkType!==n&&(o=!0,Le.warn("".concat(this._className,"._onNetworkStatusChange no network, please check!"))),o&&(new gi(ki).setMessage("isConnected:".concat(t," previousNetworkType:").concat(this._networkType," networkType:").concat(n)).end(),this._networkType=n)}},{key:"probe",value:function(){var e=this;return new Promise((function(t,n){if(oe)ie.getNetworkType({success:function(n){e._networkType=n.networkType,n.networkType===cc?(Le.warn("".concat(e._className,".probe no network, please check!")),t([!1,n.networkType])):(Le.info("".concat(e._className,".probe networkType:").concat(n.networkType)),t([!0,n.networkType]))}});else if(window&&window.fetch)fetch("".concat(ft(),"//web.sdk.qcloud.com/im/assets/speed.xml?random=").concat(Math.random())).then((function(e){e.ok?t([!0,uc]):t([!1,cc])})).catch((function(e){t([!1,cc])}));else{var o=new XMLHttpRequest,a=setTimeout((function(){Le.warn("".concat(e._className,".probe fetch timeout. Probably no network, please check!")),o.abort(),e._networkType=cc,t([!1,cc])}),e.MAX_WAIT_TIME);o.onreadystatechange=function(){4===o.readyState&&(clearTimeout(a),200===o.status||304===o.status||514===o.status?(this._networkType=uc,t([!0,uc])):(Le.warn("".concat(this.className,".probe fetch status:").concat(o.status,". Probably no network, please check!")),this._networkType=cc,t([!1,cc])))},o.open("GET","".concat(ft(),"//web.sdk.qcloud.com/im/assets/speed.xml?random=").concat(Math.random())),o.send()}}))}},{key:"getNetworkType",value:function(){return this._networkType}},{key:"reset",value:function(){Le.log("".concat(this._className,".reset")),oe?null!==this._mpNetworkStatusCallback&&(ie.offNetworkStatusChange&&(ne||Z?ie.offNetworkStatusChange(this._mpNetworkStatusCallback):ie.offNetworkStatusChange()),this._mpNetworkStatusCallback=null):window&&(null!==this._webOnlineCallback&&(window.removeEventListener("online",this._webOnlineCallback),this._webOnlineCallback=null),null!==this._onWebOffline&&(window.removeEventListener("offline",this._webOfflineCallback),this._webOfflineCallback=null))}}]),e}(),dc=O((function(e){var t=Object.prototype.hasOwnProperty,n="~";function o(){}function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,o,i,s){if("function"!=typeof o)throw new TypeError("The listener must be a function");var r=new a(o,i||e,s),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],r]:e._events[c].push(r):(e._events[c]=r,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new o:delete e._events[t]}function r(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(n=!1)),r.prototype.eventNames=function(){var e,o,a=[];if(0===this._eventsCount)return a;for(o in e=this._events)t.call(e,o)&&a.push(n?o.slice(1):o);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},r.prototype.listeners=function(e){var t=n?n+e:e,o=this._events[t];if(!o)return[];if(o.fn)return[o.fn];for(var a=0,i=o.length,s=new Array(i);a<i;a++)s[a]=o[a].fn;return s},r.prototype.listenerCount=function(e){var t=n?n+e:e,o=this._events[t];return o?o.fn?1:o.length:0},r.prototype.emit=function(e,t,o,a,i,s){var r=n?n+e:e;if(!this._events[r])return!1;var c,u,l=this._events[r],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,o),!0;case 4:return l.fn.call(l.context,t,o,a),!0;case 5:return l.fn.call(l.context,t,o,a,i),!0;case 6:return l.fn.call(l.context,t,o,a,i,s),!0}for(u=1,c=new Array(d-1);u<d;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var f,p=l.length;for(u=0;u<p;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),d){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,o);break;case 4:l[u].fn.call(l[u].context,t,o,a);break;default:if(!c)for(f=1,c=new Array(d-1);f<d;f++)c[f-1]=arguments[f];l[u].fn.apply(l[u].context,c)}}return!0},r.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},r.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},r.prototype.removeListener=function(e,t,o,a){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return s(this,i),this;var r=this._events[i];if(r.fn)r.fn!==t||a&&!r.once||o&&r.context!==o||s(this,i);else{for(var c=0,u=[],l=r.length;c<l;c++)(r[c].fn!==t||a&&!r[c].once||o&&r[c].context!==o)&&u.push(r[c]);u.length?this._events[i]=1===u.length?u[0]:u:s(this,i)}return this},r.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new o,this._eventsCount=0),this},r.prototype.off=r.prototype.removeListener,r.prototype.addListener=r.prototype.on,r.prefixed=n,r.EventEmitter=r,e.exports=r})),fc=function(e){l(n,e);var t=y(n);function n(e){var o;return a(this,n),(o=t.call(this,e))._className="BigDataChannelModule",o.FILETYPE={SOUND:2106,FILE:2107,VIDEO:2113},o._bdh_download_server="grouptalk.c2c.qq.com",o._BDHBizID=10001,o._authKey="",o._expireTime=0,o.getInnerEmitterInstance().on(vr,o._getAuthKey,_(o)),o}return s(n,[{key:"_getAuthKey",value:function(){var e=this;this.request({protocolName:bn}).then((function(t){t.data.authKey&&(e._authKey=t.data.authKey,e._expireTime=parseInt(t.data.expireTime))}))}},{key:"_isFromOlderVersion",value:function(e){return!(!e.content||2===e.content.downloadFlag)}},{key:"parseElements",value:function(e,t){if(!We(e)||!t)return[];for(var n=[],o=null,a=0;a<e.length;a++)o=e[a],this._needParse(o)?n.push(this._parseElement(o,t)):n.push(e[a]);return n}},{key:"_needParse",value:function(e){return!e.cloudCustomData&&!(!this._isFromOlderVersion(e)||e.type!==E.MSG_AUDIO&&e.type!==E.MSG_FILE&&e.type!==E.MSG_VIDEO)}},{key:"_parseElement",value:function(e,t){switch(e.type){case E.MSG_AUDIO:return this._parseAudioElement(e,t);case E.MSG_FILE:return this._parseFileElement(e,t);case E.MSG_VIDEO:return this._parseVideoElement(e,t)}}},{key:"_parseAudioElement",value:function(e,t){return e.content.url=this._genAudioUrl(e.content.uuid,t),e}},{key:"_parseFileElement",value:function(e,t){return e.content.url=this._genFileUrl(e.content.uuid,t,e.content.fileName),e}},{key:"_parseVideoElement",value:function(e,t){return e.content.url=this._genVideoUrl(e.content.uuid,t),e}},{key:"_genAudioUrl",value:function(e,t){if(""===this._authKey)return Le.warn("".concat(this._className,"._genAudioUrl no authKey!")),"";var n=this.getModule(tn).getSDKAppID();return"https://".concat(this._bdh_download_server,"/asn.com/stddownload_common_file?authkey=").concat(this._authKey,"&bid=").concat(this._BDHBizID,"&subbid=").concat(n,"&fileid=").concat(e,"&filetype=").concat(this.FILETYPE.SOUND,"&openid=").concat(t,"&ver=0")}},{key:"_genFileUrl",value:function(e,t,n){if(""===this._authKey)return Le.warn("".concat(this._className,"._genFileUrl no authKey!")),"";n||(n="".concat(Math.floor(1e5*Math.random()),"-").concat(Date.now()));var o=this.getModule(tn).getSDKAppID();return"https://".concat(this._bdh_download_server,"/asn.com/stddownload_common_file?authkey=").concat(this._authKey,"&bid=").concat(this._BDHBizID,"&subbid=").concat(o,"&fileid=").concat(e,"&filetype=").concat(this.FILETYPE.FILE,"&openid=").concat(t,"&ver=0&filename=").concat(encodeURIComponent(n))}},{key:"_genVideoUrl",value:function(e,t){if(""===this._authKey)return Le.warn("".concat(this._className,"._genVideoUrl no authKey!")),"";var n=this.getModule(tn).getSDKAppID();return"https://".concat(this._bdh_download_server,"/asn.com/stddownload_common_file?authkey=").concat(this._authKey,"&bid=").concat(this._BDHBizID,"&subbid=").concat(n,"&fileid=").concat(e,"&filetype=").concat(this.FILETYPE.VIDEO,"&openid=").concat(t,"&ver=0")}},{key:"reset",value:function(){Le.log("".concat(this._className,".reset")),this._authKey="",this.expireTime=0}}]),n}(vn),pc=function(e){l(n,e);var t=y(n);function n(e){var o;return a(this,n),(o=t.call(this,e))._className="UploadModule",o.TIMUploadPlugin=null,o.timUploadPlugin=null,o.COSSDK=null,o._cosUploadMethod=null,o.expiredTimeLimit=600,o.appid=0,o.bucketName="",o.ciUrl="",o.directory="",o.downloadUrl="",o.uploadUrl="",o.region="ap-shanghai",o.cos=null,o.cosOptions={secretId:"",secretKey:"",sessionToken:"",expiredTime:0},o.uploadFileType="",o.duration=900,o.tryCount=0,o.getInnerEmitterInstance().on(vr,o._init,_(o)),o}return s(n,[{key:"_init",value:function(){var e="".concat(this._className,"._init"),t=this.getModule(cn);if(this.TIMUploadPlugin=t.getPlugin("tim-upload-plugin"),this.TIMUploadPlugin)this._initUploaderMethod();else{var n=oe?"cos-wx-sdk":"cos-js-sdk";this.COSSDK=t.getPlugin(n),this.COSSDK?(this._getAuthorizationKey(),Le.warn("".concat(e," v2.9.2\u8d77\u63a8\u8350\u4f7f\u7528 tim-upload-plugin \u4ee3\u66ff ").concat(n,"\uff0c\u4e0a\u4f20\u66f4\u5feb\u66f4\u5b89\u5168\u3002\u8be6\u7ec6\u8bf7\u53c2\u8003 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#registerPlugin"))):Le.warn("".concat(e," \u6ca1\u6709\u68c0\u6d4b\u5230\u4e0a\u4f20\u63d2\u4ef6\uff0c\u5c06\u65e0\u6cd5\u53d1\u9001\u56fe\u7247\u3001\u97f3\u9891\u3001\u89c6\u9891\u3001\u6587\u4ef6\u7b49\u7c7b\u578b\u7684\u6d88\u606f\u3002\u8be6\u7ec6\u8bf7\u53c2\u8003 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#registerPlugin"))}}},{key:"_getAuthorizationKey",value:function(){var e=this,t=new gi(Si),n=Math.ceil(Date.now()/1e3);this.request({protocolName:Io,requestData:{duration:this.expiredTimeLimit}}).then((function(o){var a=o.data;Le.log("".concat(e._className,"._getAuthorizationKey ok. data:"),a);var i=a.expiredTime-n;t.setMessage("requestId:".concat(a.requestId," requestTime:").concat(n," expiredTime:").concat(a.expiredTime," diff:").concat(i,"s")).setNetworkType(e.getNetworkType()).end(),!oe&&a.region&&(e.region=a.region),e.appid=a.appid,e.bucketName=a.bucketName,e.ciUrl=a.ciUrl,e.directory=a.directory,e.downloadUrl=a.downloadUrl,e.uploadUrl=a.uploadUrl,e.cosOptions={secretId:a.secretId,secretKey:a.secretKey,sessionToken:a.sessionToken,expiredTime:a.expiredTime},Le.log("".concat(e._className,"._getAuthorizationKey ok. region:").concat(e.region," bucketName:").concat(e.bucketName)),e._initUploaderMethod()})).catch((function(n){e.probeNetwork().then((function(e){var o=M(e,2),a=o[0],i=o[1];t.setError(n,a,i).end()})),Le.warn("".concat(e._className,"._getAuthorizationKey failed. error:"),n)}))}},{key:"_getCosPreSigUrl",value:function(e){var t=this,n="".concat(this._className,"._getCosPreSigUrl"),o=Math.ceil(Date.now()/1e3),a=new gi(Di);return this.request({protocolName:bo,requestData:{fileType:e.fileType,fileName:e.fileName,uploadMethod:e.uploadMethod,duration:e.duration}}).then((function(e){t.tryCount=0;var i=e.data||{},s=i.expiredTime-o;return Le.log("".concat(n," ok. data:"),i),a.setMessage("requestId:".concat(i.requestId," expiredTime:").concat(i.expiredTime," diff:").concat(s,"s")).setNetworkType(t.getNetworkType()).end(),i})).catch((function(o){return-1===o.code&&(o.code=Uo.COS_GET_SIG_FAIL),t.probeNetwork().then((function(e){var t=M(e,2),n=t[0],i=t[1];a.setError(o,n,i).end()})),Le.warn("".concat(n," failed. error:"),o),t.tryCount<1?(t.tryCount++,t._getCosPreSigUrl(e)):(t.tryCount=0,hr({code:Uo.COS_GET_SIG_FAIL,message:Wo}))}))}},{key:"_initUploaderMethod",value:function(){var e=this;if(this.TIMUploadPlugin)return this.timUploadPlugin=new this.TIMUploadPlugin,void(this._cosUploadMethod=function(t,n){e.timUploadPlugin.uploadFile(t,n)});this.appid&&(this.cos=oe?new this.COSSDK({ForcePathStyle:!0,getAuthorization:this._getAuthorization.bind(this)}):new this.COSSDK({getAuthorization:this._getAuthorization.bind(this)}),this._cosUploadMethod=oe?function(t,n){e.cos.postObject(t,n)}:function(t,n){e.cos.uploadFiles(t,n)})}},{key:"onCheckTimer",value:function(e){this.COSSDK&&(this.TIMUploadPlugin||this.isLoggedIn()&&e%60==0&&Math.ceil(Date.now()/1e3)>=this.cosOptions.expiredTime-120&&this._getAuthorizationKey())}},{key:"_getAuthorization",value:function(e,t){t({TmpSecretId:this.cosOptions.secretId,TmpSecretKey:this.cosOptions.secretKey,XCosSecurityToken:this.cosOptions.sessionToken,ExpiredTime:this.cosOptions.expiredTime})}},{key:"upload",value:function(e){if(!0===e.getRelayFlag())return Promise.resolve();var t=this.getModule(mn);switch(e.type){case E.MSG_IMAGE:return t.addTotalCount(si),this._uploadImage(e);case E.MSG_FILE:return t.addTotalCount(si),this._uploadFile(e);case E.MSG_AUDIO:return t.addTotalCount(si),this._uploadAudio(e);case E.MSG_VIDEO:return t.addTotalCount(si),this._uploadVideo(e);default:return Promise.resolve()}}},{key:"_uploadImage",value:function(e){var t=this.getModule(Wt),n=e.getElements()[0],o=t.getMessageOptionByID(e.ID);return this.doUploadImage({file:o.payload.file,to:o.to,onProgress:function(e){if(n.updatePercent(e),Xe(o.onProgress))try{o.onProgress(e)}catch(t){return hr({code:Uo.MESSAGE_ONPROGRESS_FUNCTION_ERROR,message:Zo})}}}).then((function(t){var o=t.location,a=t.fileType,i=t.fileSize,s=t.width,r=t.height,c=pt(o);n.updateImageFormat(a);var l=kt({originUrl:c,originWidth:s,originHeight:r,min:198}),d=kt({originUrl:c,originWidth:s,originHeight:r,min:720});return n.updateImageInfoArray([{size:i,url:c,width:s,height:r},u({},d),u({},l)]),e}))}},{key:"_uploadFile",value:function(e){var t=this.getModule(Wt),n=e.getElements()[0],o=t.getMessageOptionByID(e.ID);return this.doUploadFile({file:o.payload.file,to:o.to,onProgress:function(e){if(n.updatePercent(e),Xe(o.onProgress))try{o.onProgress(e)}catch(t){return hr({code:Uo.MESSAGE_ONPROGRESS_FUNCTION_ERROR,message:Zo})}}}).then((function(t){var o=t.location,a=pt(o);return n.updateFileUrl(a),e}))}},{key:"_uploadAudio",value:function(e){var t=this.getModule(Wt),n=e.getElements()[0],o=t.getMessageOptionByID(e.ID);return this.doUploadAudio({file:o.payload.file,to:o.to,onProgress:function(e){if(n.updatePercent(e),Xe(o.onProgress))try{o.onProgress(e)}catch(t){return hr({code:Uo.MESSAGE_ONPROGRESS_FUNCTION_ERROR,message:Zo})}}}).then((function(t){var o=t.location,a=pt(o);return n.updateAudioUrl(a),e}))}},{key:"_uploadVideo",value:function(e){var t=this.getModule(Wt),n=e.getElements()[0],o=t.getMessageOptionByID(e.ID);return this.doUploadVideo({file:o.payload.file,to:o.to,onProgress:function(e){if(n.updatePercent(e),Xe(o.onProgress))try{o.onProgress(e)}catch(t){return hr({code:Uo.MESSAGE_ONPROGRESS_FUNCTION_ERROR,message:Zo})}}}).then((function(t){var o=t.location,a=t.snapshotInfo,i=pt(o);return n.updateVideoUrl(i),Pt(a)||n.updateSnapshotInfo(a),e}))}},{key:"doUploadImage",value:function(e){if(!e.file)return hr({code:Uo.MESSAGE_IMAGE_SELECT_FILE_FIRST,message:aa});var t=this._checkImageType(e.file);if(!0!==t)return t;var n=this._checkImageSize(e.file);if(!0!==n)return n;var o=null;return this._setUploadFileType(br),this.uploadByCOS(e).then((function(e){return o=e,It("https://".concat(e.location))})).then((function(e){return o.width=e.width,o.height=e.height,Promise.resolve(o)}))}},{key:"_checkImageType",value:function(e){var t="";return t=oe?e.url.slice(e.url.lastIndexOf(".")+1):e.files[0].name.slice(e.files[0].name.lastIndexOf(".")+1),wr.indexOf(t.toLowerCase())>=0||hr({code:Uo.MESSAGE_IMAGE_TYPES_LIMIT,message:ia})}},{key:"_checkImageSize",value:function(e){var t=0;return 0===(t=oe?e.size:e.files[0].size)?hr({code:Uo.MESSAGE_FILE_IS_EMPTY,message:"".concat(Qo)}):t<20971520||hr({code:Uo.MESSAGE_IMAGE_SIZE_LIMIT,message:"".concat(sa)})}},{key:"doUploadFile",value:function(e){var t=null;return e.file?e.file.files[0].size>104857600?hr(t={code:Uo.MESSAGE_FILE_SIZE_LIMIT,message:ga}):0===e.file.files[0].size?(t={code:Uo.MESSAGE_FILE_IS_EMPTY,message:"".concat(Qo)},hr(t)):(this._setUploadFileType(Sr),this.uploadByCOS(e)):hr(t={code:Uo.MESSAGE_FILE_SELECT_FILE_FIRST,message:pa})}},{key:"doUploadVideo",value:function(e){return e.file.videoFile.size>104857600?hr({code:Uo.MESSAGE_VIDEO_SIZE_LIMIT,message:"".concat(la)}):0===e.file.videoFile.size?hr({code:Uo.MESSAGE_FILE_IS_EMPTY,message:"".concat(Qo)}):-1===Ir.indexOf(e.file.videoFile.type)?hr({code:Uo.MESSAGE_VIDEO_TYPES_LIMIT,message:"".concat(da)}):(this._setUploadFileType(Tr),oe?this.handleVideoUpload({file:e.file.videoFile,onProgress:e.onProgress}):ae?this.handleVideoUpload(e):void 0)}},{key:"handleVideoUpload",value:function(e){var t=this;return new Promise((function(n,o){t.uploadByCOS(e).then((function(e){n(e)})).catch((function(){t.uploadByCOS(e).then((function(e){n(e)})).catch((function(){o(new dr({code:Uo.MESSAGE_VIDEO_UPLOAD_FAIL,message:ua}))}))}))}))}},{key:"doUploadAudio",value:function(e){return e.file?e.file.size>20971520?hr(new dr({code:Uo.MESSAGE_AUDIO_SIZE_LIMIT,message:"".concat(ca)})):0===e.file.size?hr(new dr({code:Uo.MESSAGE_FILE_IS_EMPTY,message:"".concat(Qo)})):(this._setUploadFileType(kr),this.uploadByCOS(e)):hr(new dr({code:Uo.MESSAGE_AUDIO_UPLOAD_FAIL,message:ra}))}},{key:"uploadByCOS",value:function(e){var t=this,n="".concat(this._className,".uploadByCOS");if(!Xe(this._cosUploadMethod))return Le.warn("".concat(n," \u6ca1\u6709\u68c0\u6d4b\u5230\u4e0a\u4f20\u63d2\u4ef6\uff0c\u5c06\u65e0\u6cd5\u53d1\u9001\u56fe\u7247\u3001\u97f3\u9891\u3001\u89c6\u9891\u3001\u6587\u4ef6\u7b49\u7c7b\u578b\u7684\u6d88\u606f\u3002\u8be6\u7ec6\u8bf7\u53c2\u8003 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#registerPlugin")),hr({code:Uo.COS_UNDETECTED,message:zo});if(this.timUploadPlugin)return this._uploadWithPreSigUrl(e);var o=new gi(Ai),a=Date.now(),i=this._getFile(e);return new Promise((function(s,r){var c=oe?t._createCosOptionsWXMiniApp(e):t._createCosOptionsWeb(e),u=t;t._cosUploadMethod(c,(function(e,c){var l=Object.create(null);if(c){if(e||We(c.files)&&c.files[0].error){var d=new dr({code:Uo.MESSAGE_FILE_UPLOAD_FAIL,message:fa});return o.setError(d,!0,t.getNetworkType()).end(),Le.log("".concat(n," failed. error:"),c.files[0].error),403===c.files[0].error.statusCode&&(Le.warn("".concat(n," failed. cos AccessKeyId was invalid, regain auth key!")),t._getAuthorizationKey()),void r(d)}l.fileName=i.name,l.fileSize=i.size,l.fileType=i.type.slice(i.type.indexOf("/")+1).toLowerCase(),l.location=oe?c.Location:c.files[0].data.Location;var f=Date.now()-a,p=u._formatFileSize(i.size),g=u._formatSpeed(1e3*i.size/f),h="size:".concat(p," time:").concat(f,"ms speed:").concat(g);Le.log("".concat(n," success. name:").concat(i.name," ").concat(h)),s(l);var m=t.getModule(mn);return m.addCost(si,f),m.addFileSize(si,i.size),void o.setNetworkType(t.getNetworkType()).setMessage(h).end()}var _=new dr({code:Uo.MESSAGE_FILE_UPLOAD_FAIL,message:fa});o.setError(_,!0,u.getNetworkType()).end(),Le.warn("".concat(n," failed. error:"),e),403===e.statusCode&&(Le.warn("".concat(n," failed. cos AccessKeyId was invalid, regain auth key!")),t._getAuthorizationKey()),r(_)}))}))}},{key:"_uploadWithPreSigUrl",value:function(e){var t=this,n="".concat(this._className,"._uploadWithPreSigUrl"),o=this._getFile(e);return this._createCosOptionsPreSigUrl(e).then((function(e){return new Promise((function(a,i){var s=new gi(Ai),r=e.requestSnapshotUrl,c=void 0===r?void 0:r,u=m(e,["requestSnapshotUrl"]),l=Date.now();t._cosUploadMethod(u,(function(e,r){var u=Object.create(null);if(e||403===r.statusCode){var d=new dr({code:Uo.MESSAGE_FILE_UPLOAD_FAIL,message:fa});return s.setError(d,!0,t.getNetworkType()).end(),Le.log("".concat(n," failed, error:"),e),void i(d)}var f=r.data.location||"";0!==f.indexOf("https://")&&0!==f.indexOf("http://")||(f=f.split("//")[1]),u.fileName=o.name,u.fileSize=o.size,u.fileType=o.type.slice(o.type.indexOf("/")+1).toLowerCase(),u.location=f;var p=Date.now()-l,g=t._formatFileSize(o.size),h=t._formatSpeed(1e3*o.size/p),m="size:".concat(g,",time:").concat(p,"ms,speed:").concat(h," res:").concat(JSON.stringify(r.data));Le.log("".concat(n," success name:").concat(o.name,",").concat(m)),s.setNetworkType(t.getNetworkType()).setMessage(m).end();var _=t.getModule(mn);if(_.addCost(si,p),_.addFileSize(si,o.size),!Pt(c))return t._getSnapshotInfoByUrl(c).then((function(e){u.snapshotInfo=e,a(u)}));a(u)}))}))}))}},{key:"_getFile",value:function(e){var t=null;return oe?t=ne&&We(e.file.files)?e.file.files[0]:e.file:ae&&(t=e.file.files[0]),t}},{key:"_formatFileSize",value:function(e){return e<1024?e+"B":e<1048576?Math.floor(e/1024)+"KB":Math.floor(e/1048576)+"MB"}},{key:"_formatSpeed",value:function(e){return e<=1048576?Et(e/1024,1)+"KB/s":Et(e/1048576,1)+"MB/s"}},{key:"_createCosOptionsWeb",value:function(e){var t=e.file.files[0].name,n=t.slice(t.lastIndexOf(".")),o=this._genFileName("".concat(rt(999999)).concat(n));return{files:[{Bucket:"".concat(this.bucketName,"-").concat(this.appid),Region:this.region,Key:"".concat(this.directory,"/").concat(o),Body:e.file.files[0]}],SliceSize:1048576,onProgress:function(t){if("function"==typeof e.onProgress)try{e.onProgress(t.percent)}catch(n){Le.warn("onProgress callback error:",n)}},onFileFinish:function(e,t,n){}}}},{key:"_createCosOptionsWXMiniApp",value:function(e){var t=this._getFile(e),n=this._genFileName(t.name),o=t.url;return{Bucket:"".concat(this.bucketName,"-").concat(this.appid),Region:this.region,Key:"".concat(this.directory,"/").concat(n),FilePath:o,onProgress:function(t){if(Le.log(JSON.stringify(t)),"function"==typeof e.onProgress)try{e.onProgress(t.percent)}catch(n){Le.warn("onProgress callback error:",n)}}}}},{key:"_createCosOptionsPreSigUrl",value:function(e){var t=this,n="",o="",a=0;if(oe){var i=this._getFile(e);n=this._genFileName(i.name),o=i.url,a=1}else{var s=e.file.files[0].name,r=s.slice(s.lastIndexOf("."));n=this._genFileName("".concat(rt(999999)).concat(r)),o=e.file.files[0],a=0}return this._getCosPreSigUrl({fileType:this.uploadFileType,fileName:n,uploadMethod:a,duration:this.duration}).then((function(a){var i=a.uploadUrl,s=a.downloadUrl,r=a.requestSnapshotUrl,c=void 0===r?void 0:r;return{url:i,fileType:t.uploadFileType,fileName:n,resources:o,downloadUrl:s,requestSnapshotUrl:c,onProgress:function(t){if("function"==typeof e.onProgress)try{e.onProgress(t.percent)}catch(n){Le.warn("onProgress callback error:",n),Le.error(n)}}}}))}},{key:"_genFileName",value:function(e){return"".concat(bt(),"-").concat(e)}},{key:"_setUploadFileType",value:function(e){this.uploadFileType=e}},{key:"_getSnapshotInfoByUrl",value:function(e){var t=this,n=new gi(Ei);return this.request({protocolName:To,requestData:{platform:this.getPlatform(),coverName:this._genFileName(rt(99999)),requestSnapshotUrl:e}}).then((function(e){var t=(e.data||{}).snapshotUrl;return n.setMessage("snapshotUrl:".concat(t)).end(),Pt(t)?{}:It(t).then((function(e){return{snapshotUrl:t,snapshotWidth:e.width,snapshotHeight:e.height}}))})).catch((function(e){return Le.warn("".concat(t._className,"._getSnapshotInfoByUrl failed. error:"),e),n.setCode(e.errorCode).setMessage(e.errorInfo).end(),{}}))}},{key:"reset",value:function(){Le.log("".concat(this._className,".reset"))}}]),n}(vn),gc=function(){function e(t){a(this,e),this._className="MergerMessageHandler",this._messageModule=t}return s(e,[{key:"uploadMergerMessage",value:function(e,t){var n=this;Le.debug("".concat(this._className,".uploadMergerMessage message:"),e,"messageBytes:".concat(t));var o=e.payload.messageList,a=o.length,i=new gi(Fi);return this._messageModule.request({protocolName:Oo,requestData:{messageList:o}}).then((function(e){Le.debug("".concat(n._className,".uploadMergerMessage ok. response:"),e.data);var o=e.data,s=o.pbDownloadKey,r=o.downloadKey,c={pbDownloadKey:s,downloadKey:r,messageNumber:a};return i.setNetworkType(n._messageModule.getNetworkType()).setMessage("".concat(a,"-").concat(t,"-").concat(r)).end(),c})).catch((function(e){throw Le.warn("".concat(n._className,".uploadMergerMessage failed. error:"),e),n._messageModule.probeNetwork().then((function(t){var n=M(t,2),o=n[0],a=n[1];i.setError(e,o,a).end()})),e}))}},{key:"downloadMergerMessage",value:function(e){var t=this;Le.debug("".concat(this._className,".downloadMergerMessage message:"),e);var n=e.payload.downloadKey,o=new gi(Bi);return o.setMessage("downloadKey:".concat(n)),this._messageModule.request({protocolName:Po,requestData:{downloadKey:n}}).then((function(n){if(Le.debug("".concat(t._className,".downloadMergerMessage ok. response:"),n.data),Xe(e.clearElement)){var a=e.payload,i=(a.downloadKey,a.pbDownloadKey,a.messageList,m(a,["downloadKey","pbDownloadKey","messageList"]));e.clearElement(),e.setElement({type:e.type,content:u({messageList:n.data.messageList},i)})}else{var s=[];n.data.messageList.forEach((function(e){if(!Pt(e)){var t=new tr(e);s.push(t)}})),e.payload.messageList=s,e.payload.downloadKey="",e.payload.pbDownloadKey=""}return o.setNetworkType(t._messageModule.getNetworkType()).end(),e})).catch((function(e){throw Le.warn("".concat(t._className,".downloadMergerMessage failed. key:").concat(n," error:"),e),t._messageModule.probeNetwork().then((function(t){var n=M(t,2),a=n[0],i=n[1];o.setError(e,a,i).end()})),e}))}},{key:"createMergerMessagePack",value:function(e,t,n){return e.conversationType===E.CONV_C2C?this._createC2CMergerMessagePack(e,t,n):this._createGroupMergerMessagePack(e,t,n)}},{key:"_createC2CMergerMessagePack",value:function(e,t,n){var o=null;t&&(t.offlinePushInfo&&(o=t.offlinePushInfo),!0===t.onlineUserOnly&&(o?o.disablePush=!0:o={disablePush:!0}));var a="";Ve(e.cloudCustomData)&&e.cloudCustomData.length>0&&(a=e.cloudCustomData);var i=n.pbDownloadKey,s=n.downloadKey,r=n.messageNumber,c=e.payload,u=c.title,l=c.abstractList,d=c.compatibleText,f=this._messageModule.getModule(Jt);return{protocolName:Tn,tjgID:this._messageModule.generateTjgID(e),requestData:{fromAccount:this._messageModule.getMyUserID(),toAccount:e.to,msgBody:[{msgType:e.type,msgContent:{pbDownloadKey:i,downloadKey:s,title:u,abstractList:l,compatibleText:d,messageNumber:r}}],cloudCustomData:a,msgSeq:e.sequence,msgRandom:e.random,msgLifeTime:f&&f.isOnlineMessage(e,t)?0:void 0,offlinePushInfo:o?{pushFlag:!0===o.disablePush?1:0,title:o.title||"",desc:o.description||"",ext:o.extension||"",apnsInfo:{badgeMode:!0===o.ignoreIOSBadge?1:0},androidInfo:{OPPOChannelID:o.androidOPPOChannelID||""}}:void 0}}}},{key:"_createGroupMergerMessagePack",value:function(e,t,n){var o=null;t&&t.offlinePushInfo&&(o=t.offlinePushInfo);var a="";Ve(e.cloudCustomData)&&e.cloudCustomData.length>0&&(a=e.cloudCustomData);var i=n.pbDownloadKey,s=n.downloadKey,r=n.messageNumber,c=e.payload,u=c.title,l=c.abstractList,d=c.compatibleText,f=this._messageModule.getModule(Xt);return{protocolName:kn,tjgID:this._messageModule.generateTjgID(e),requestData:{fromAccount:this._messageModule.getMyUserID(),groupID:e.to,msgBody:[{msgType:e.type,msgContent:{pbDownloadKey:i,downloadKey:s,title:u,abstractList:l,compatibleText:d,messageNumber:r}}],random:e.random,priority:e.priority,clientSequence:e.clientSequence,groupAtInfo:void 0,cloudCustomData:a,onlineOnlyFlag:f&&f.isOnlineMessage(e,t)?1:0,offlinePushInfo:o?{pushFlag:!0===o.disablePush?1:0,title:o.title||"",desc:o.description||"",ext:o.extension||"",apnsInfo:{badgeMode:!0===o.ignoreIOSBadge?1:0},androidInfo:{OPPOChannelID:o.androidOPPOChannelID||""}}:void 0}}}}]),e}(),hc={ERR_SVR_COMM_SENSITIVE_TEXT:80001,ERR_SVR_COMM_BODY_SIZE_LIMIT:80002,OPEN_SERVICE_OVERLOAD_ERROR:60022,ERR_SVR_MSG_PKG_PARSE_FAILED:20001,ERR_SVR_MSG_INTERNAL_AUTH_FAILED:20002,ERR_SVR_MSG_INVALID_ID:20003,ERR_SVR_MSG_PUSH_DENY:20006,ERR_SVR_MSG_IN_PEER_BLACKLIST:20007,ERR_SVR_MSG_BOTH_NOT_FRIEND:20009,ERR_SVR_MSG_NOT_PEER_FRIEND:20010,ERR_SVR_MSG_NOT_SELF_FRIEND:20011,ERR_SVR_MSG_SHUTUP_DENY:20012,ERR_SVR_GROUP_INVALID_PARAMETERS:10004,ERR_SVR_GROUP_PERMISSION_DENY:10007,ERR_SVR_GROUP_NOT_FOUND:10010,ERR_SVR_GROUP_INVALID_GROUPID:10015,ERR_SVR_GROUP_REJECT_FROM_THIRDPARTY:10016,ERR_SVR_GROUP_SHUTUP_DENY:10017,MESSAGE_SEND_FAIL:2100,OVER_FREQUENCY_LIMIT:2996},mc=[Uo.MESSAGE_ONPROGRESS_FUNCTION_ERROR,Uo.MESSAGE_IMAGE_SELECT_FILE_FIRST,Uo.MESSAGE_IMAGE_TYPES_LIMIT,Uo.MESSAGE_FILE_IS_EMPTY,Uo.MESSAGE_IMAGE_SIZE_LIMIT,Uo.MESSAGE_FILE_SELECT_FILE_FIRST,Uo.MESSAGE_FILE_SIZE_LIMIT,Uo.MESSAGE_VIDEO_SIZE_LIMIT,Uo.MESSAGE_VIDEO_TYPES_LIMIT,Uo.MESSAGE_AUDIO_UPLOAD_FAIL,Uo.MESSAGE_AUDIO_SIZE_LIMIT,Uo.COS_UNDETECTED],_c=function(e){l(n,e);var t=y(n);function n(e){var o;return a(this,n),(o=t.call(this,e))._className="MessageModule",o._messageOptionsMap=new Map,o._mergerMessageHandler=new gc(_(o)),o}return s(n,[{key:"createTextMessage",value:function(e){var t=e.to,n=e.payload.atUserList,o=void 0===n?[]:n;if(vt({groupID:t})&&o.includes(E.MSG_AT_ALL))return hr({code:Uo.MESSAGE_AT_TYPE_INVALID,message:Ma});var a=this.getMyUserID();e.currentUser=a;var i=new ar(e),s="string"==typeof e.payload?e.payload:e.payload.text,r=new qs({text:s}),c=this._getNickAndAvatarByUserID(a);return i.setElement(r),i.setNickAndAvatar(c),i.setNameCard(this._getNameCardByGroupID(i)),i}},{key:"createImageMessage",value:function(e){var t=this.getMyUserID();e.currentUser=t;var n=new ar(e);if(oe){var o=e.payload.file;if(qe(o))return void Le.warn("\u5c0f\u7a0b\u5e8f\u73af\u5883\u4e0b\u8c03\u7528 createImageMessage \u63a5\u53e3\u65f6\uff0cpayload.file \u4e0d\u652f\u6301\u4f20\u5165 File \u5bf9\u8c61");var a=o.tempFilePaths[0],i={url:a,name:a.slice(a.lastIndexOf("/")+1),size:o.tempFiles&&o.tempFiles[0].size||1,type:a.slice(a.lastIndexOf(".")+1).toLowerCase()};e.payload.file=i}else if(ae)if(qe(e.payload.file)){var s=e.payload.file;e.payload.file={files:[s]}}else if(ze(e.payload.file)&&"undefined"!=typeof uni){var r=e.payload.file.tempFiles[0];e.payload.file={files:[r]}}var c=new Hs({imageFormat:Re.UNKNOWN,uuid:this._generateUUID(),file:e.payload.file}),u=this._getNickAndAvatarByUserID(t);return n.setElement(c),n.setNickAndAvatar(u),n.setNameCard(this._getNameCardByGroupID(n)),this._messageOptionsMap.set(n.ID,e),n}},{key:"createAudioMessage",value:function(e){if(oe){var t=e.payload.file;if(oe){var n={url:t.tempFilePath,name:t.tempFilePath.slice(t.tempFilePath.lastIndexOf("/")+1),size:t.fileSize,second:parseInt(t.duration)/1e3,type:t.tempFilePath.slice(t.tempFilePath.lastIndexOf(".")+1).toLowerCase()};e.payload.file=n}var o=this.getMyUserID();e.currentUser=o;var a=new ar(e),i=new Ks({second:Math.floor(t.duration/1e3),size:t.fileSize,url:t.tempFilePath,uuid:this._generateUUID()}),s=this._getNickAndAvatarByUserID(o);return a.setElement(i),a.setNickAndAvatar(s),a.setNameCard(this._getNameCardByGroupID(a)),this._messageOptionsMap.set(a.ID,e),a}Le.warn("createAudioMessage \u76ee\u524d\u53ea\u652f\u6301\u5c0f\u7a0b\u5e8f\u73af\u5883\u4e0b\u53d1\u8bed\u97f3\u6d88\u606f")}},{key:"createVideoMessage",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.payload.file.thumbUrl="https://web.sdk.qcloud.com/im/assets/images/transparent.png",e.payload.file.thumbSize=1668;var n={};if(oe){if(te)return void Le.warn("createVideoMessage \u4e0d\u652f\u6301\u5728\u652f\u4ed8\u5b9d\u5c0f\u7a0b\u5e8f\u73af\u5883\u4e0b\u4f7f\u7528");if(qe(e.payload.file))return void Le.warn("\u5c0f\u7a0b\u5e8f\u73af\u5883\u4e0b\u8c03\u7528 createVideoMessage \u63a5\u53e3\u65f6\uff0cpayload.file \u4e0d\u652f\u6301\u4f20\u5165 File \u5bf9\u8c61");var o=e.payload.file;n.url=o.tempFilePath,n.name=o.tempFilePath.slice(o.tempFilePath.lastIndexOf("/")+1),n.size=o.size,n.second=o.duration,n.type=o.tempFilePath.slice(o.tempFilePath.lastIndexOf(".")+1).toLowerCase()}else if(ae){if(qe(e.payload.file)){var a=e.payload.file;e.payload.file.files=[a]}else if(ze(e.payload.file)&&"undefined"!=typeof uni){var i=e.payload.file.tempFile;e.payload.file.files=[i]}var s=e.payload.file;n.url=window.URL.createObjectURL(s.files[0]),n.name=s.files[0].name,n.size=s.files[0].size,n.second=s.files[0].duration||0,n.type=s.files[0].type.split("/")[1]}e.payload.file.videoFile=n;var r=new ar(e),c=new Zs({videoFormat:n.type,videoSecond:Et(n.second,0),videoSize:n.size,remoteVideoUrl:"",videoUrl:n.url,videoUUID:this._generateUUID(),thumbUUID:this._generateUUID(),thumbWidth:e.payload.file.width||200,thumbHeight:e.payload.file.height||200,thumbUrl:e.payload.file.thumbUrl,thumbSize:e.payload.file.thumbSize,thumbFormat:e.payload.file.thumbUrl.slice(e.payload.file.thumbUrl.lastIndexOf(".")+1).toLowerCase()}),u=this._getNickAndAvatarByUserID(t);return r.setElement(c),r.setNickAndAvatar(u),r.setNameCard(this._getNameCardByGroupID(r)),this._messageOptionsMap.set(r.ID,e),r}},{key:"createCustomMessage",value:function(e){var t=this.getMyUserID();e.currentUser=t;var n=new ar(e),o=new Qs({data:e.payload.data,description:e.payload.description,extension:e.payload.extension}),a=this._getNickAndAvatarByUserID(t);return n.setElement(o),n.setNickAndAvatar(a),n.setNameCard(this._getNameCardByGroupID(n)),n}},{key:"createFaceMessage",value:function(e){var t=this.getMyUserID();e.currentUser=t;var n=new ar(e),o=new Vs(e.payload),a=this._getNickAndAvatarByUserID(t);return n.setElement(o),n.setNickAndAvatar(a),n.setNameCard(this._getNameCardByGroupID(n)),n}},{key:"createMergerMessage",value:function(e){var t=this.getMyUserID();e.currentUser=t;var n=this._getNickAndAvatarByUserID(t),o=new ar(e),a=new nr(e.payload);return o.setElement(a),o.setNickAndAvatar(n),o.setNameCard(this._getNameCardByGroupID(o)),o.setRelayFlag(!0),o}},{key:"createForwardMessage",value:function(e){var t=e.to,n=e.conversationType,o=e.priority,a=e.payload,i=this.getMyUserID(),s=this._getNickAndAvatarByUserID(i);if(a.type===E.MSG_GRP_TIP)return hr(new dr({code:Uo.MESSAGE_FORWARD_TYPE_INVALID,message:ya}));var r={to:t,conversationType:n,conversationID:"".concat(n).concat(t),priority:o,isPlaceMessage:0,status:Gt.UNSEND,currentUser:i,cloudCustomData:e.cloudCustomData||a.cloudCustomData||""},c=new ar(r);return c.setElement(a.getElements()[0]),c.setNickAndAvatar(s),c.setNameCard(this._getNameCardByGroupID(a)),c.setRelayFlag(!0),c}},{key:"downloadMergerMessage",value:function(e){return this._mergerMessageHandler.downloadMergerMessage(e)}},{key:"createFileMessage",value:function(e){if(!oe||ne){if(ae||ne)if(qe(e.payload.file)){var t=e.payload.file;e.payload.file={files:[t]}}else if(ze(e.payload.file)&&"undefined"!=typeof uni){var n=e.payload.file,o=n.tempFiles,a=n.files,i=null;We(o)?i=o[0]:We(a)&&(i=a[0]),e.payload.file={files:[i]}}var s=this.getMyUserID();e.currentUser=s;var r=new ar(e),c=new Xs({uuid:this._generateUUID(),file:e.payload.file}),u=this._getNickAndAvatarByUserID(s);return r.setElement(c),r.setNickAndAvatar(u),r.setNameCard(this._getNameCardByGroupID(r)),this._messageOptionsMap.set(r.ID,e),r}Le.warn("\u5c0f\u7a0b\u5e8f\u76ee\u524d\u4e0d\u652f\u6301\u9009\u62e9\u6587\u4ef6\uff0c createFileMessage \u63a5\u53e3\u4e0d\u53ef\u7528\uff01")}},{key:"createLocationMessage",value:function(e){var t=this.getMyUserID();e.currentUser=t;var n=new ar(e),o=new er(e.payload),a=this._getNickAndAvatarByUserID(t);return n.setElement(o),n.setNickAndAvatar(a),n.setNameCard(this._getNameCardByGroupID(n)),this._messageOptionsMap.set(n.ID,e),n}},{key:"_onCannotFindModule",value:function(){return hr({code:Uo.CANNOT_FIND_MODULE,message:Ja})}},{key:"sendMessageInstance",value:function(e,t){var n,o=this,a=null;switch(e.conversationType){case E.CONV_C2C:if(!(a=this.getModule(Jt)))return this._onCannotFindModule();break;case E.CONV_GROUP:if(!(a=this.getModule(Xt)))return this._onCannotFindModule();if(vt({groupID:e.to})&&!Ye(t)&&!Ye(t.messageControlInfo))return hr({code:Uo.MESSAGE_CONTROL_INFO_FAIL,message:oa});break;default:return hr({code:Uo.MESSAGE_SEND_INVALID_CONVERSATION_TYPE,message:Xo})}var i=this.getModule(rn),s=this.getModule(Xt);return i.upload(e).then((function(){return o._getSendMessageSpecifiedKey(e)===ii&&o.getModule(mn).addSuccessCount(si),s.guardForAVChatRoom(e).then((function(){if(!e.isSendable())return hr({code:Uo.MESSAGE_FILE_URL_IS_EMPTY,message:ha});o._addSendMessageTotalCount(e),n=Date.now();var i=function(e){var t="utf-8";ae&&document&&(t=document.charset.toLowerCase());var n,o,a=0;if(o=e.length,"utf-8"===t||"utf8"===t)for(var i=0;i<o;i++)(n=e.codePointAt(i))<=127?a+=1:n<=2047?a+=2:n<=65535?a+=3:(a+=4,i++);else if("utf-16"===t||"utf16"===t)for(var s=0;s<o;s++)(n=e.codePointAt(s))<=65535?a+=2:(a+=4,s++);else a=e.replace(/[^\x00-\xff]/g,"aa").length;return a}(JSON.stringify(e));return e.type===E.MSG_MERGER&&i>7e3?o._mergerMessageHandler.uploadMergerMessage(e,i).then((function(n){var a=o._mergerMessageHandler.createMergerMessagePack(e,t,n);return o.request(a)})):(o.getModule(en).setMessageRandom(e),e.conversationType===E.CONV_C2C||e.conversationType===E.CONV_GROUP?a.sendMessage(e,t):void 0)})).then((function(i){var s=i.data,r=s.time,c=s.sequence;o._addSendMessageSuccessCount(e,n),o._messageOptionsMap.delete(e.ID);var u=o.getModule(en);e.status=Gt.SUCCESS,e.time=r;var l=!1;if(e.conversationType===E.CONV_GROUP)e.sequence=c,e.generateMessageID(o.getMyUserID());else if(e.conversationType===E.CONV_C2C){var d=u.getLatestMessageSentByMe(e.conversationID);if(d){var f=d.nick,p=d.avatar;f===e.nick&&p===e.avatar||(l=!0)}}if(u.appendToMessageList(e),l&&u.modifyMessageSentByMe({conversationID:e.conversationID,latestNick:e.nick,latestAvatar:e.avatar}),a.isOnlineMessage(e,t))e._onlineOnlyFlag=!0;else{var g=e;ze(t)&&ze(t.messageControlInfo)&&(!0===t.messageControlInfo.excludedFromLastMessage&&(e._isExcludedFromLastMessage=!0,g=""),!0===t.messageControlInfo.excludedFromUnreadCount&&(e._isExcludedFromUnreadCount=!0)),u.onMessageSent({conversationOptionsList:[{conversationID:e.conversationID,unreadCount:0,type:e.conversationType,subType:e.conversationSubType,lastMessage:g}]})}return e.getRelayFlag()||"TIMImageElem"!==e.type||St(e.payload.imageInfoArray),ir({message:e})}))})).catch((function(t){return o._onSendMessageFailed(e,t)}))}},{key:"_onSendMessageFailed",value:function(e,t){e.status=Gt.FAIL,this.getModule(en).deleteMessageRandom(e),this._addSendMessageFailCountOnUser(e,t);var n=new gi(Ni);return n.setMessage("tjg_id:".concat(this.generateTjgID(e)," type:").concat(e.type," from:").concat(e.from," to:").concat(e.to)),this.probeNetwork().then((function(e){var o=M(e,2),a=o[0],i=o[1];n.setError(t,a,i).end()})),Le.error("".concat(this._className,"._onSendMessageFailed error:"),t),hr(new dr({code:t&&t.code?t.code:Uo.MESSAGE_SEND_FAIL,message:t&&t.message?t.message:Yo,data:{message:e}}))}},{key:"_getSendMessageSpecifiedKey",value:function(e){if([E.MSG_IMAGE,E.MSG_AUDIO,E.MSG_VIDEO,E.MSG_FILE].includes(e.type))return ii;if(e.conversationType===E.CONV_C2C)return ni;if(e.conversationType===E.CONV_GROUP){var t=this.getModule(Xt).getLocalGroupProfile(e.to);if(!t)return;var n=t.type;return _t(n)?ai:oi}}},{key:"_addSendMessageTotalCount",value:function(e){var t=this._getSendMessageSpecifiedKey(e);t&&this.getModule(mn).addTotalCount(t)}},{key:"_addSendMessageSuccessCount",value:function(e,t){var n=Math.abs(Date.now()-t),o=this._getSendMessageSpecifiedKey(e);if(o){var a=this.getModule(mn);a.addSuccessCount(o),a.addCost(o,n)}}},{key:"_addSendMessageFailCountOnUser",value:function(e,t){var n,o,a=t.code,i=void 0===a?-1:a,s=this.getModule(mn),r=this._getSendMessageSpecifiedKey(e);r===ii&&(n=i,o=!1,mc.includes(n)&&(o=!0),o)?s.addFailedCountOfUserSide(si):function(e){var t=!1;return Object.values(hc).includes(e)&&(t=!0),(e>=120001&&e<=13e4||e>=10100&&e<=10200)&&(t=!0),t}(i)&&r&&s.addFailedCountOfUserSide(r)}},{key:"resendMessage",value:function(e){return e.isResend=!0,e.status=Gt.UNSEND,e.random=rt(),e.generateMessageID(this.getMyUserID()),this.sendMessageInstance(e)}},{key:"revokeMessage",value:function(e){var t=this,n=null;if(e.conversationType===E.CONV_C2C){if(!(n=this.getModule(Jt)))return this._onCannotFindModule()}else if(e.conversationType===E.CONV_GROUP&&!(n=this.getModule(Xt)))return this._onCannotFindModule();var o=new gi(Li);return o.setMessage("tjg_id:".concat(this.generateTjgID(e)," type:").concat(e.type," from:").concat(e.from," to:").concat(e.to)),n.revokeMessage(e).then((function(n){var a=n.data.recallRetList;if(!Pt(a)&&0!==a[0].retCode){var i=new dr({code:a[0].retCode,message:lr[a[0].retCode]||ea,data:{message:e}});return o.setCode(i.code).setMoreMessage(i.message).end(),hr(i)}return Le.info("".concat(t._className,".revokeMessage ok. ID:").concat(e.ID)),e.isRevoked=!0,o.end(),t.getModule(en).onMessageRevoked([e]),ir({message:e})})).catch((function(n){t.probeNetwork().then((function(e){var t=M(e,2),a=t[0],i=t[1];o.setError(n,a,i).end()}));var a=new dr({code:n&&n.code?n.code:Uo.MESSAGE_REVOKE_FAIL,message:n&&n.message?n.message:ea,data:{message:e}});return Le.warn("".concat(t._className,".revokeMessage failed. error:"),n),hr(a)}))}},{key:"deleteMessage",value:function(e){var t=this,n=null,o=e[0],a=o.conversationID,i="",s=[],r=[];if(o.conversationType===E.CONV_C2C?(n=this.getModule(Jt),i=a.replace(E.CONV_C2C,""),e.forEach((function(e){e&&e.status===Gt.SUCCESS&&e.conversationID===a&&(e._onlineOnlyFlag||s.push("".concat(e.sequence,"_").concat(e.random,"_").concat(e.time)),r.push(e))}))):o.conversationType===E.CONV_GROUP&&(n=this.getModule(Xt),i=a.replace(E.CONV_GROUP,""),e.forEach((function(e){e&&e.status===Gt.SUCCESS&&e.conversationID===a&&(e._onlineOnlyFlag||s.push("".concat(e.sequence)),r.push(e))}))),!n)return this._onCannotFindModule();if(0===s.length)return this._onMessageDeleted(r);s.length>30&&(s=s.slice(0,30),r=r.slice(0,30));var c=new gi(Ri);return c.setMessage("to:".concat(i," count:").concat(s.length)),n.deleteMessage({to:i,keyList:s}).then((function(e){return c.end(),Le.info("".concat(t._className,".deleteMessage ok")),t._onMessageDeleted(r)})).catch((function(e){t.probeNetwork().then((function(t){var n=M(t,2),o=n[0],a=n[1];c.setError(e,o,a).end()})),Le.warn("".concat(t._className,".deleteMessage failed. error:"),e);var n=new dr({code:e&&e.code?e.code:Uo.MESSAGE_DELETE_FAIL,message:e&&e.message?e.message:ta});return hr(n)}))}},{key:"_onMessageDeleted",value:function(e){return this.getModule(en).onMessageDeleted(e),gr({messageList:e})}},{key:"_generateUUID",value:function(){var e=this.getModule(tn);return"".concat(e.getSDKAppID(),"-").concat(e.getUserID(),"-").concat(function(){for(var e="",t=32;t>0;--t)e+=ct[Math.floor(Math.random()*ut)];return e}())}},{key:"getMessageOptionByID",value:function(e){return this._messageOptionsMap.get(e)}},{key:"_getNickAndAvatarByUserID",value:function(e){return this.getModule(Yt).getNickAndAvatarByUserID(e)}},{key:"_getNameCardByGroupID",value:function(e){if(e.conversationType===E.CONV_GROUP){var t=this.getModule(Xt);if(t)return t.getMyNameCardByGroupID(e.to)}return""}},{key:"reset",value:function(){Le.log("".concat(this._className,".reset")),this._messageOptionsMap.clear()}}]),n}(vn),vc=function(e){l(n,e);var t=y(n);function n(e){var o;return a(this,n),(o=t.call(this,e))._className="PluginModule",o.plugins={},o}return s(n,[{key:"registerPlugin",value:function(e){var t=this;Object.keys(e).forEach((function(n){t.plugins[n]=e[n]})),new gi(Mi).setMessage("key=".concat(Object.keys(e))).end()}},{key:"getPlugin",value:function(e){return this.plugins[e]}},{key:"reset",value:function(){Le.log("".concat(this._className,".reset"))}}]),n}(vn),yc=function(e){l(n,e);var t=y(n);function n(e){var o;return a(this,n),(o=t.call(this,e))._className="SyncUnreadMessageModule",o._cookie="",o._onlineSyncFlag=!1,o.getInnerEmitterInstance().on(vr,o._onLoginSuccess,_(o)),o}return s(n,[{key:"_onLoginSuccess",value:function(e){this._startSync({cookie:this._cookie,syncFlag:0,isOnlineSync:0})}},{key:"_startSync",value:function(e){var t=this,n=e.cookie,o=e.syncFlag,a=e.isOnlineSync;Le.log("".concat(this._className,"._startSync cookie:").concat(n," syncFlag:").concat(o," isOnlineSync:").concat(a)),this.request({protocolName:In,requestData:{cookie:n,syncFlag:o,isOnlineSync:a}}).then((function(e){var n=e.data,o=n.cookie,a=n.syncFlag,i=n.eventArray,s=n.messageList,r=n.C2CRemainingUnreadList,c=n.C2CPairUnreadList;t._cookie=o,Pt(o)||(0===a||1===a?(i&&t.getModule(ln).onMessage({head:{},body:{eventArray:i,isInstantMessage:t._onlineSyncFlag,isSyncingEnded:!1}}),t.getModule(Jt).onNewC2CMessage({dataList:s,isInstantMessage:!1,C2CRemainingUnreadList:r,C2CPairUnreadList:c}),t._startSync({cookie:o,syncFlag:a,isOnlineSync:0})):2===a&&(i&&t.getModule(ln).onMessage({head:{},body:{eventArray:i,isInstantMessage:t._onlineSyncFlag,isSyncingEnded:!0}}),t.getModule(Jt).onNewC2CMessage({dataList:s,isInstantMessage:t._onlineSyncFlag,C2CRemainingUnreadList:r,C2CPairUnreadList:c})))})).catch((function(e){Le.error("".concat(t._className,"._startSync failed. error:"),e)}))}},{key:"startOnlineSync",value:function(){Le.log("".concat(this._className,".startOnlineSync")),this._onlineSyncFlag=!0,this._startSync({cookie:this._cookie,syncFlag:0,isOnlineSync:1})}},{key:"startSyncOnReconnected",value:function(){Le.log("".concat(this._className,".startSyncOnReconnected.")),this._onlineSyncFlag=!0,this._startSync({cookie:this._cookie,syncFlag:0,isOnlineSync:0})}},{key:"reset",value:function(){Le.log("".concat(this._className,".reset")),this._onlineSyncFlag=!1,this._cookie=""}}]),n}(vn),Mc={request:{toAccount:"To_Account",fromAccount:"From_Account",to:"To_Account",from:"From_Account",groupID:"GroupId",groupAtUserID:"GroupAt_Account",extension:"Ext",data:"Data",description:"Desc",elements:"MsgBody",sizeType:"Type",downloadFlag:"Download_Flag",thumbUUID:"ThumbUUID",videoUUID:"VideoUUID",remoteAudioUrl:"Url",remoteVideoUrl:"VideoUrl",videoUrl:"",imageUrl:"URL",fileUrl:"Url",uuid:"UUID",priority:"MsgPriority",receiverUserID:"To_Account",receiverGroupID:"GroupId",messageSender:"SenderId",messageReceiver:"ReceiverId",nick:"From_AccountNick",avatar:"From_AccountHeadurl",messageNumber:"MsgNum",pbDownloadKey:"PbMsgKey",downloadKey:"JsonMsgKey",applicationType:"PendencyType",userIDList:"To_Account",groupNameList:"GroupName",userID:"To_Account",groupAttributeList:"GroupAttr",mainSequence:"AttrMainSeq",avChatRoomKey:"BytesKey",attributeControl:"AttrControl",sequence:"seq",messageControlInfo:"SendMsgControl",updateSequence:"UpdateSeq",clientTime:"MsgClientTime"},response:{MsgPriority:"priority",ThumbUUID:"thumbUUID",VideoUUID:"videoUUID",Download_Flag:"downloadFlag",GroupId:"groupID",Member_Account:"userID",MsgList:"messageList",SyncFlag:"syncFlag",To_Account:"to",From_Account:"from",MsgSeq:"sequence",MsgRandom:"random",MsgTime:"time",MsgTimeStamp:"time",MsgContent:"content",MsgBody:"elements",From_AccountNick:"nick",From_AccountHeadurl:"avatar",GroupWithdrawInfoArray:"revokedInfos",GroupReadInfoArray:"groupMessageReadNotice",LastReadMsgSeq:"lastMessageSeq",WithdrawC2cMsgNotify:"c2cMessageRevokedNotify",C2cWithdrawInfoArray:"revokedInfos",C2cReadedReceipt:"c2cMessageReadReceipt",ReadC2cMsgNotify:"c2cMessageReadNotice",LastReadTime:"peerReadTime",MsgRand:"random",MsgType:"type",MsgShow:"messageShow",NextMsgSeq:"nextMessageSeq",FaceUrl:"avatar",ProfileDataMod:"profileModify",Profile_Account:"userID",ValueBytes:"value",ValueNum:"value",NoticeSeq:"noticeSequence",NotifySeq:"notifySequence",MsgFrom_AccountExtraInfo:"messageFromAccountExtraInformation",Operator_Account:"operatorID",OpType:"operationType",ReportType:"operationType",UserId:"userID",User_Account:"userID",List_Account:"userIDList",MsgOperatorMemberExtraInfo:"operatorInfo",MsgMemberExtraInfo:"memberInfoList",ImageUrl:"avatar",NickName:"nick",MsgGroupNewInfo:"newGroupProfile",MsgAppDefinedData:"groupCustomField",Owner_Account:"ownerID",GroupFaceUrl:"avatar",GroupIntroduction:"introduction",GroupNotification:"notification",GroupApplyJoinOption:"joinOption",MsgKey:"messageKey",GroupInfo:"groupProfile",ShutupTime:"muteTime",Desc:"description",Ext:"extension",GroupAt_Account:"groupAtUserID",MsgNum:"messageNumber",PbMsgKey:"pbDownloadKey",JsonMsgKey:"downloadKey",MsgModifiedFlag:"isModified",PendencyItem:"applicationItem",PendencyType:"applicationType",AddTime:"time",AddSource:"source",AddWording:"wording",ProfileImImage:"avatar",PendencyAdd:"friendApplicationAdded",FrienPencydDel_Account:"friendApplicationDeletedUserIDList",Peer_Account:"userID",GroupAttr:"groupAttributeList",GroupAttrAry:"groupAttributeList",AttrMainSeq:"mainSequence",seq:"sequence",GroupAttrOption:"groupAttributeOption",BytesChangedKeys:"changedKeyList",GroupAttrInfo:"groupAttributeList",GroupAttrSeq:"mainSequence",PushChangedAttrValFlag:"hasChangedAttributeInfo",SubKeySeq:"sequence",Val:"value",MsgGroupFromCardName:"senderNameCard",MsgGroupFromNickName:"senderNick",C2cNick:"peerNick",C2cImage:"peerAvatar",SendMsgControl:"messageControlInfo",NoLastMsg:"excludedFromLastMessage",NoUnread:"excludedFromUnreadCount",UpdateSeq:"updateSequence",MuteNotifications:"muteFlag",MsgClientTime:"clientTime"},ignoreKeyWord:["C2C","ID","USP"]};function Cc(e,t){if("string"!=typeof e&&!Array.isArray(e))throw new TypeError("Expected the input to be `string | string[]`");var n;return t=Object.assign({pascalCase:!1},t),0===(e=Array.isArray(e)?e.map((function(e){return e.trim()})).filter((function(e){return e.length})).join("-"):e.trim()).length?"":1===e.length?t.pascalCase?e.toUpperCase():e.toLowerCase():(e!==e.toLowerCase()&&(e=wc(e)),e=e.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,(function(e,t){return t.toUpperCase()})).replace(/\d+(\w|$)/g,(function(e){return e.toUpperCase()})),n=e,t.pascalCase?n.charAt(0).toUpperCase()+n.slice(1):n)}var wc=function(e){for(var t=!1,n=!1,o=!1,a=0;a<e.length;a++){var i=e[a];t&&/[a-zA-Z]/.test(i)&&i.toUpperCase()===i?(e=e.slice(0,a)+"-"+e.slice(a),t=!1,o=n,n=!0,a++):n&&o&&/[a-zA-Z]/.test(i)&&i.toLowerCase()===i?(e=e.slice(0,a-1)+"-"+e.slice(a-1),o=n,n=!1,t=!0):(t=i.toLowerCase()===i&&i.toUpperCase()!==i,o=n,n=i.toUpperCase()===i&&i.toLowerCase()!==i)}return e};function Ic(e,t){var n=0;return function e(t,o){if(++n>100)return n--,t;if(We(t)){var a=t.map((function(t){return Ke(t)?e(t,o):t}));return n--,a}if(Ke(t)){var i=(s=t,r=function(e,t){if(!et(t))return!1;if((a=t)!==Cc(a))for(var n=0;n<Mc.ignoreKeyWord.length&&!t.includes(Mc.ignoreKeyWord[n]);n++);var a;return Ye(o[t])?function(e){return"OPPOChannelID"===e?e:e[0].toUpperCase()+Cc(e).slice(1)}(t):o[t]},c=Object.create(null),Object.keys(s).forEach((function(e){var t=r(s[e],e);t&&(c[t]=s[e])})),c);return i=wt(i,(function(t,n){return We(t)||Ke(t)?e(t,o):t})),n--,i}var s,r,c}(e,t)}function bc(e,t){if(We(e))return e.map((function(e){return Ke(e)?bc(e,t):e}));if(Ke(e)){var n=(o=e,a=function(e,n){return Ye(t[n])?Cc(n):t[n]},i={},Object.keys(o).forEach((function(e){i[a(o[e],e)]=o[e]})),i);return wt(n,(function(e){return We(e)||Ke(e)?bc(e,t):e}))}var o,a,i}var Tc=String.fromCharCode,kc=function(e){var t=0|e.charCodeAt(0);if(55296<=t)if(t<56320){var n=0|e.charCodeAt(1);if(56320<=n&&n<=57343){if((t=(t<<10)+n-56613888|0)>65535)return Tc(240|t>>>18,128|t>>>12&63,128|t>>>6&63,128|63&t)}else t=65533}else t<=57343&&(t=65533);return t<=2047?Tc(192|t>>>6,128|63&t):Tc(224|t>>>12,128|t>>>6&63,128|63&t)},Sc=function(e){for(var t=void 0===e?"":(""+e).replace(/[\x80-\uD7ff\uDC00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]?/g,kc),n=0|t.length,o=new Uint8Array(n),a=0;a<n;a=a+1|0)o[a]=0|t.charCodeAt(a);return o},Dc=function(e){for(var t=new Uint8Array(e),n="",o=0,a=t.length;o<a;){var i=t[o],s=0,r=0;if(i<=127?(s=0,r=255&i):i<=223?(s=1,r=31&i):i<=239?(s=2,r=15&i):i<=244&&(s=3,r=7&i),a-o-s>0)for(var c=0;c<s;)r=r<<6|63&(i=t[o+c+1]),c+=1;else r=65533,s=a-o;n+=String.fromCodePoint(r),o+=s+1}return n},Ec=function(){function e(t){a(this,e),this._handler=t;var n=t.getURL();if(this._socket=null,this._workerSocket=null,this._id=rt(),this._handler.getIsWorkerEnabled()){var o=URL.createObjectURL(new Blob([';let _socket = null;onmessage = function(event) {  if (event.data.cmd === "start") {    const url = event.data.url;    _socket = new WebSocket(url);    _socket.binaryType = "arraybuffer";    _socket.onopen = function() {      postMessage({ callback: "onOpen" });    };    _socket.onclose = function(e) {      postMessage({ callback: "onOpen", e: { code: e.code, reason: e.reason } });    };    _socket.onmessage = function(e) {      postMessage({ callback: "onMessage", data: e.data });    };    _socket.onerror = function(e) {      postMessage({ callback: "onError", e: { isTrusted: "true" } });    };  } else if (event.data.cmd === "sendMessage") {    if (_socket !== null) {      _socket.send(event.data.data);    }  } else if (event.data.cmd === "stop") {    if (_socket !== null) {      _socket.close(event.data.code);      _socket = null;    }  }};'],{type:"application/javascript; charset=utf-8"}));this._workerSocket=new Worker(o);var i=this;this._workerSocket.onmessage=function(e){var t=e.data,n=t.callback,o=t.e;"onOpen"===n?i._onOpen():"onClose"===n?i._onClose(o):"onError"===n?i._onError(o):"onMessage"===n&&i._onMessage(e.data)},this._workerSocket.postMessage({cmd:"start",id:this._id,url:n})}else oe?te?(ie.connectSocket({url:n,header:{"content-type":"application/json"}}),ie.onSocketClose(this._onClose.bind(this)),ie.onSocketOpen(this._onOpen.bind(this)),ie.onSocketMessage(this._onMessage.bind(this)),ie.onSocketError(this._onError.bind(this))):(this._socket=ie.connectSocket({url:n,header:{"content-type":"application/json"},complete:function(){}}),this._socket.onClose(this._onClose.bind(this)),this._socket.onOpen(this._onOpen.bind(this)),this._socket.onMessage(this._onMessage.bind(this)),this._socket.onError(this._onError.bind(this))):ae&&(this._socket=new WebSocket(n),this._socket.binaryType="arraybuffer",this._socket.onopen=this._onOpen.bind(this),this._socket.onmessage=this._onMessage.bind(this),this._socket.onclose=this._onClose.bind(this),this._socket.onerror=this._onError.bind(this));this._canIUseBinaryFrame=t.canIUseBinaryFrame()}return s(e,[{key:"getID",value:function(){return this._id}},{key:"_onOpen",value:function(){this._handler.onOpen({id:this._id})}},{key:"_onClose",value:function(e){this._handler.onClose({id:this._id,e:e})}},{key:"_onMessage",value:function(e){this._handler.onMessage({data:this._canIUseBinaryFrame?Dc(e.data):e.data})}},{key:"_onError",value:function(e){this._handler.onError({id:this._id,e:e})}},{key:"setIsWorkerEnabled",value:function(e){this._isWorkerEnabled=!0}},{key:"close",value:function(e){if(this._workerSocket&&(this._workerSocket.postMessage({cmd:"stop",code:e}),this._workerSocket.terminate(),this._workerSocket=null),te)return ie.offSocketClose(),ie.offSocketMessage(),ie.offSocketOpen(),ie.offSocketError(),void ie.closeSocket();this._socket&&(oe?(this._socket.onClose((function(){})),this._socket.onOpen((function(){})),this._socket.onMessage((function(){})),this._socket.onError((function(){}))):ae&&(this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null),ee?this._socket.close({code:e}):this._socket.close(e),this._socket=null)}},{key:"send",value:function(e){if(this._workerSocket)this._workerSocket.postMessage({cmd:"sendMessage",data:this._canIUseBinaryFrame?Sc(e.data).buffer:e.data});else{if(te)return void ie.sendSocketMessage({data:e.data,fail:function(){e.fail&&e.requestID&&e.fail(e.requestID)}});this._socket&&(oe?this._socket.send({data:this._canIUseBinaryFrame?Sc(e.data).buffer:e.data,fail:function(){e.fail&&e.requestID&&e.fail(e.requestID)}}):ae&&this._socket.send(this._canIUseBinaryFrame?Sc(e.data).buffer:e.data))}}}]),e}(),Ac=4e3,Nc=4001,Oc="connected",Pc="connecting",Lc="disconnected",Rc=function(){function e(t){a(this,e),this._channelModule=t,this._className="SocketHandler",this._promiseMap=new Map,this._readyState=Lc,this._simpleRequestMap=new Map,this.MAX_SIZE=100,this._startSequence=rt(),this._startTs=0,this._reConnectFlag=!1,this._nextPingTs=0,this._reConnectCount=0,this.MAX_RECONNECT_COUNT=3,this._socketID=-1,this._random=0,this._socket=null,this._url="",this._onOpenTs=0,this._canIUseBinaryFrame=!0,this._isWorkerEnabled=!0,this._setWebsocketHost(),this._initConnection()}return s(e,[{key:"_setWebsocketHost",value:function(){var e=this._channelModule.getModule(tn),t=U;this._channelModule.isOversea()&&(t=F),e.isSingaporeSite()?t=B:e.isKoreaSite()?t=j:e.isGermanySite()?t=q:e.isIndiaSite()&&(t=H),V.HOST.setCurrent(t)}},{key:"_initConnection",value:function(){Ye(V.HOST.CURRENT.BACKUP)||""===this._url?this._url=V.HOST.CURRENT.DEFAULT:this._url===V.HOST.CURRENT.DEFAULT?this._url=V.HOST.CURRENT.BACKUP:this._url===V.HOST.CURRENT.BACKUP&&(this._url=V.HOST.CURRENT.DEFAULT);var e=this._channelModule.getModule(tn).getProxyServer();Pt(e)||(this._url=e),this._connect(),this._nextPingTs=0}},{key:"onCheckTimer",value:function(e){e%1==0&&this._checkPromiseMap()}},{key:"_checkPromiseMap",value:function(){var e=this;0!==this._promiseMap.size&&this._promiseMap.forEach((function(t,n){var o=t.reject,a=t.timestamp;Date.now()-a>=15e3&&(Le.log("".concat(e._className,"._checkPromiseMap request timeout, delete requestID:").concat(n)),e._promiseMap.delete(n),o(new dr({code:Uo.NETWORK_TIMEOUT,message:Ka})),e._channelModule.onRequestTimeout(n))}))}},{key:"onOpen",value:function(e){this._onOpenTs=Date.now();var t=e.id;this._socketID=t;var n=Date.now()-this._startTs;Le.log("".concat(this._className,"._onOpen cost ").concat(n," ms. socketID:").concat(t)),new gi(Ii).setMessage(n).setCostTime(n).setMoreMessage("socketID:".concat(t)).end(),e.id===this._socketID&&(this._readyState=Oc,this._reConnectCount=0,this._resend(),!0===this._reConnectFlag&&(this._channelModule.onReconnected(),this._reConnectFlag=!1),this._channelModule.onOpen())}},{key:"onClose",value:function(e){var t=new gi(bi),n=e.id,o=e.e,a="sourceSocketID:".concat(n," currentSocketID:").concat(this._socketID," code:").concat(o.code," reason:").concat(o.reason),i=0;0!==this._onOpenTs&&(i=Date.now()-this._onOpenTs),t.setMessage(i).setCostTime(i).setMoreMessage(a).setCode(o.code).end(),Le.log("".concat(this._className,"._onClose ").concat(a," onlineTime:").concat(i)),n===this._socketID&&(this._readyState=Lc,i<1e3?this._channelModule.onReconnectFailed():this._channelModule.onClose())}},{key:"onError",value:function(e){var t=e.id,n=e.e,o="sourceSocketID:".concat(t," currentSocketID:").concat(this._socketID);new gi(Ti).setMessage(n.errMsg||it(n)).setMoreMessage(o).setLevel("error").end(),Le.warn("".concat(this._className,"._onError"),n,o),t===this._socketID&&(this._readyState="",this._channelModule.onError())}},{key:"onMessage",value:function(e){var t;try{t=JSON.parse(e.data)}catch(f){new gi(ji).setMessage(e.data).end()}if(t&&t.head){var n=this._getRequestIDFromHead(t.head),o=Dt(t.head),a=bc(t.body,this._getResponseKeyMap(o));if(Le.debug("".concat(this._className,".onMessage ret:").concat(JSON.stringify(a)," requestID:").concat(n," has:").concat(this._promiseMap.has(n))),this._setNextPingTs(),this._promiseMap.has(n)){var i=this._promiseMap.get(n),s=i.resolve,r=i.reject,c=i.timestamp;return this._promiseMap.delete(n),this._calcRTT(c),void(a.errorCode&&0!==a.errorCode?(this._channelModule.onErrorCodeNotZero(a),r(new dr({code:a.errorCode,message:a.errorInfo||""}))):s(ir(a)))}this._channelModule.onMessage({head:t.head,body:a})}}},{key:"_calcRTT",value:function(e){var t=Date.now()-e;this._channelModule.getModule(mn).addRTT(t)}},{key:"_connect",value:function(){this._startTs=Date.now(),this._onOpenTs=0,this._socket=new Ec(this),this._socketID=this._socket.getID(),this._readyState=Pc,Le.log("".concat(this._className,"._connect isWorkerEnabled:").concat(this.getIsWorkerEnabled()," socketID:").concat(this._socketID," url:").concat(this.getURL())),new gi(wi).setMessage("socketID:".concat(this._socketID," url:").concat(this.getURL())).end()}},{key:"getURL",value:function(){var e=this._channelModule.getModule(tn);e.isDevMode()&&(this._canIUseBinaryFrame=!1);var t=Tt();(te||X&&"windows"===t||ne)&&(this._canIUseBinaryFrame=!1);var n=this._channelModule.getPlatform(),o=e.getSDKAppID(),a=e.getInstanceID();return this._canIUseBinaryFrame?"".concat(this._url,"/binfo?sdkappid=").concat(o,"&instanceid=").concat(a,"&random=").concat(this._getRandom(),"&platform=").concat(n,"&host=").concat(t):"".concat(this._url,"/info?sdkappid=").concat(o,"&instanceid=").concat(a,"&random=").concat(this._getRandom(),"&platform=").concat(n,"&host=").concat(t)}},{key:"_closeConnection",value:function(e){Le.log("".concat(this._className,"._closeConnection")),this._socket&&(this._socket.close(e),this._socketID=-1,this._socket=null,this._readyState=Lc)}},{key:"_resend",value:function(){var e=this;if(Le.log("".concat(this._className,"._resend reConnectFlag:").concat(this._reConnectFlag),"promiseMap.size:".concat(this._promiseMap.size," simpleRequestMap.size:").concat(this._simpleRequestMap.size)),this._promiseMap.size>0&&this._promiseMap.forEach((function(t,n){var o=t.uplinkData,a=t.resolve,i=t.reject;e._promiseMap.set(n,{resolve:a,reject:i,timestamp:Date.now(),uplinkData:o}),e._execute(n,o)})),this._simpleRequestMap.size>0){var t,n=S(this._simpleRequestMap);try{for(n.s();!(t=n.n()).done;){var o=M(t.value,2),a=o[0],i=o[1];this._execute(a,i)}}catch(u){n.e(u)}finally{n.f()}this._simpleRequestMap.clear()}}},{key:"send",value:function(e){var t=this;e.head.seq=this._getSequence(),e.head.reqtime=Math.floor(Date.now()/1e3),e.keyMap;var n=m(e,["keyMap"]),o=this._getRequestIDFromHead(e.head),a=JSON.stringify(n);return new Promise((function(e,i){t._promiseMap.set(o,{resolve:e,reject:i,timestamp:Date.now(),uplinkData:a}),Le.debug("".concat(t._className,".send uplinkData:").concat(JSON.stringify(n)," requestID:").concat(o," readyState:").concat(t._readyState)),t._readyState!==Oc?t._reConnect():(t._execute(o,a),t._channelModule.getModule(mn).addRequestCount())}))}},{key:"simplySend",value:function(e){e.head.seq=this._getSequence(),e.head.reqtime=Math.floor(Date.now()/1e3),e.keyMap;var t=m(e,["keyMap"]),n=this._getRequestIDFromHead(e.head),o=JSON.stringify(t);this._readyState!==Oc?(this._simpleRequestMap.size<this.MAX_SIZE?this._simpleRequestMap.set(n,o):Le.log("".concat(this._className,".simplySend. simpleRequestMap is full, drop request!")),this._reConnect()):this._execute(n,o)}},{key:"_execute",value:function(e,t){this._socket.send({data:t,fail:oe?this._onSendFail.bind(this):void 0,requestID:e})}},{key:"_onSendFail",value:function(e){Le.log("".concat(this._className,"._onSendFail requestID:").concat(e))}},{key:"_getSequence",value:function(){var e;if(this._startSequence<2415919103)return e=this._startSequence,this._startSequence+=1,2415919103===this._startSequence&&(this._startSequence=rt()),e}},{key:"_getRequestIDFromHead",value:function(e){return e.servcmd+e.seq}},{key:"_getResponseKeyMap",value:function(e){var t=this._channelModule.getKeyMap(e);return u({},Mc.response,{},t.response)}},{key:"_reConnect",value:function(){this._readyState!==Oc&&this._readyState!==Pc&&this.forcedReconnect()}},{key:"forcedReconnect",value:function(){var e=this;Le.log("".concat(this._className,".forcedReconnect count:").concat(this._reConnectCount," readyState:").concat(this._readyState)),this._reConnectFlag=!0,this._resetRandom(),this._reConnectCount<this.MAX_RECONNECT_COUNT?(this._reConnectCount+=1,this._closeConnection(Nc),this._initConnection()):(this._reConnectCount=0,this._channelModule.probeNetwork().then((function(t){var n=M(t,2),o=n[0];n[1],o?(Le.warn("".concat(e._className,".forcedReconnect disconnected from wsserver but network is ok, continue...")),e._closeConnection(Nc),e._initConnection()):e._channelModule.onReconnectFailed()})))}},{key:"getReconnectFlag",value:function(){return this._reConnectFlag}},{key:"_setNextPingTs",value:function(){this._nextPingTs=Date.now()+1e4}},{key:"getNextPingTs",value:function(){return this._nextPingTs}},{key:"isConnected",value:function(){return this._readyState===Oc}},{key:"canIUseBinaryFrame",value:function(){return this._canIUseBinaryFrame}},{key:"setIsWorkerEnabled",value:function(e){Le.log("".concat(this._className,".setIsWorkerEnabled flag:").concat(e)),this._isWorkerEnabled=e}},{key:"getIsWorkerEnabled",value:function(){return this._isWorkerEnabled&&Ce}},{key:"_getRandom",value:function(){return 0===this._random&&(this._random=Math.random()),this._random}},{key:"_resetRandom",value:function(){this._random=0}},{key:"close",value:function(){Le.log("".concat(this._className,".close")),this._closeConnection(Ac),this._promiseMap.clear(),this._startSequence=rt(),this._readyState=Lc,this._simpleRequestMap.clear(),this._reConnectFlag=!1,this._reConnectCount=0,this._onOpenTs=0,this._url="",this._random=0,this._canIUseBinaryFrame=!0,this._isWorkerEnabled=!0}}]),e}(),xc=function(e){l(n,e);var t=y(n);function n(e){var o;if(a(this,n),(o=t.call(this,e))._className="ChannelModule",o._socketHandler=new Rc(_(o)),o._probing=!1,o._isAppShowing=!0,o._previousState=E.NET_STATE_CONNECTED,oe&&"function"==typeof ie.onAppShow&&"function"==typeof ie.onAppHide){var i=o._onAppHide.bind(_(o)),s=o._onAppShow.bind(_(o));"function"==typeof ie.offAppHide&&ie.offAppHide(i),"function"==typeof ie.offAppShow&&ie.offAppShow(s),ie.onAppHide(i),ie.onAppShow(s)}return o._timerForNotLoggedIn=-1,o._timerForNotLoggedIn=setInterval(o.onCheckTimer.bind(_(o)),1e3),o._fatalErrorFlag=!1,o}return s(n,[{key:"onCheckTimer",value:function(e){this._socketHandler&&(this.isLoggedIn()?(this._timerForNotLoggedIn>0&&(clearInterval(this._timerForNotLoggedIn),this._timerForNotLoggedIn=-1),this._socketHandler.onCheckTimer(e)):this._socketHandler.onCheckTimer(1),this._checkNextPing())}},{key:"onErrorCodeNotZero",value:function(e){this.getModule(ln).onErrorCodeNotZero(e)}},{key:"onMessage",value:function(e){this.getModule(ln).onMessage(e)}},{key:"send",value:function(e){return this._socketHandler?this._previousState!==E.NET_STATE_CONNECTED&&e.head.servcmd.includes(ko)?(this.reConnect(),this._sendLogViaHTTP(e)):this._socketHandler.send(e):Promise.reject()}},{key:"_sendLogViaHTTP",value:function(e){var t=V.HOST.CURRENT.STAT;return new Promise((function(n,o){var a="".concat(t,"/v4/imopenstat/tim_web_report_v2?sdkappid=").concat(e.head.sdkappid,"&reqtime=").concat(Date.now()),i=JSON.stringify(e.body),s="application/x-www-form-urlencoded;charset=UTF-8";if(oe)ie.request({url:a,data:i,method:"POST",timeout:3e3,header:{"content-type":s},success:function(){n()},fail:function(){o(new dr({code:Uo.NETWORK_ERROR,message:Va}))}});else{var r=new XMLHttpRequest,c=setTimeout((function(){r.abort(),o(new dr({code:Uo.NETWORK_TIMEOUT,message:Ka}))}),3e3);r.onreadystatechange=function(){4===r.readyState&&(clearTimeout(c),200===r.status||304===r.status?n():o(new dr({code:Uo.NETWORK_ERROR,message:Va})))},r.open("POST",a,!0),r.setRequestHeader("Content-type",s),r.send(i)}}))}},{key:"simplySend",value:function(e){return this._socketHandler?this._socketHandler.simplySend(e):Promise.reject()}},{key:"onOpen",value:function(){this._ping()}},{key:"onClose",value:function(){this._socketHandler&&this._socketHandler.getReconnectFlag()&&this._emitNetStateChangeEvent(E.NET_STATE_DISCONNECTED),this.reConnect()}},{key:"onError",value:function(){oe&&Le.error("".concat(this._className,".onError \u4ecev2.11.2\u8d77\uff0cSDK \u652f\u6301\u4e86 WebSocket\uff0c\u5982\u60a8\u672a\u6dfb\u52a0\u76f8\u5173\u53d7\u4fe1\u57df\u540d\uff0c\u8bf7\u5148\u6dfb\u52a0\uff01\u5347\u7ea7\u6307\u5f15: https://web.sdk.qcloud.com/im/doc/zh-cn/tutorial-02-upgradeguideline.html"))}},{key:"getKeyMap",value:function(e){return this.getModule(ln).getKeyMap(e)}},{key:"_onAppHide",value:function(){this._isAppShowing=!1}},{key:"_onAppShow",value:function(){this._isAppShowing=!0}},{key:"onRequestTimeout",value:function(e){}},{key:"onReconnected",value:function(){Le.log("".concat(this._className,".onReconnected")),this.getModule(ln).onReconnected(),this._emitNetStateChangeEvent(E.NET_STATE_CONNECTED)}},{key:"onReconnectFailed",value:function(){Le.log("".concat(this._className,".onReconnectFailed")),this._emitNetStateChangeEvent(E.NET_STATE_DISCONNECTED)}},{key:"setIsWorkerEnabled",value:function(e){this._socketHandler&&this._socketHandler.setIsWorkerEnabled(!1)}},{key:"reConnect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!1;this._socketHandler&&(t=this._socketHandler.getReconnectFlag());var n="forcedFlag:".concat(e," fatalErrorFlag:").concat(this._fatalErrorFlag," previousState:").concat(this._previousState," reconnectFlag:").concat(t);if(Le.log("".concat(this._className,".reConnect ").concat(n)),!this._fatalErrorFlag&&this._socketHandler){if(!0===e)this._socketHandler.forcedReconnect();else{if(this._previousState===E.NET_STATE_CONNECTING&&t)return;this._socketHandler.forcedReconnect()}this._emitNetStateChangeEvent(E.NET_STATE_CONNECTING)}}},{key:"_emitNetStateChangeEvent",value:function(e){this._previousState!==e&&(Le.log("".concat(this._className,"._emitNetStateChangeEvent from ").concat(this._previousState," to ").concat(e)),this._previousState=e,this.emitOuterEvent(D.NET_STATE_CHANGE,{state:e}))}},{key:"_ping",value:function(){var e=this;if(!0!==this._probing){this._probing=!0;var t=this.getModule(ln).getProtocolData({protocolName:So});this.send(t).then((function(){e._probing=!1})).catch((function(t){if(Le.warn("".concat(e._className,"._ping failed. error:"),t),e._probing=!1,t&&60002===t.code)return new gi(Bs).setMessage("code:".concat(t.code," message:").concat(t.message)).setNetworkType(e.getModule(an).getNetworkType()).end(),e._fatalErrorFlag=!0,void e._emitNetStateChangeEvent(E.NET_STATE_DISCONNECTED);e.probeNetwork().then((function(t){var n=M(t,2),o=n[0],a=n[1];Le.log("".concat(e._className,"._ping failed. probe network, isAppShowing:").concat(e._isAppShowing," online:").concat(o," networkType:").concat(a)),o?e.reConnect():e._emitNetStateChangeEvent(E.NET_STATE_DISCONNECTED)}))}))}}},{key:"_checkNextPing",value:function(){this._socketHandler&&this._socketHandler.isConnected()&&Date.now()>=this._socketHandler.getNextPingTs()&&this._ping()}},{key:"dealloc",value:function(){this._socketHandler&&(this._socketHandler.close(),this._socketHandler=null),this._timerForNotLoggedIn>-1&&clearInterval(this._timerForNotLoggedIn)}},{key:"reset",value:function(){Le.log("".concat(this._className,".reset")),this._previousState=E.NET_STATE_CONNECTED,this._probing=!1,this._fatalErrorFlag=!1,this._timerForNotLoggedIn=setInterval(this.onCheckTimer.bind(this),1e3)}}]),n}(vn),Gc=function(){function t(e){a(this,t),this._className="ProtocolHandler",this._sessionModule=e,this._configMap=new Map,this._fillConfigMap()}return s(t,[{key:"_fillConfigMap",value:function(){this._configMap.clear();var e=this._sessionModule.genCommonHead(),t=this._sessionModule.genCosSpecifiedHead(),n=this._sessionModule.genSSOReportHead();this._configMap.set(yn,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.IM_OPEN_STATUS,".").concat(V.CMD.LOGIN)}),body:{state:"Online"},keyMap:{response:{TinyId:"tinyID",InstId:"instanceID",HelloInterval:"helloInterval"}}}}(e)),this._configMap.set(Mn,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.IM_OPEN_STATUS,".").concat(V.CMD.LOGOUT)}),body:{type:0},keyMap:{request:{type:"wslogout_type"}}}}(e)),this._configMap.set(Cn,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.IM_OPEN_STATUS,".").concat(V.CMD.HELLO)}),body:{},keyMap:{response:{NewInstInfo:"newInstanceInfo"}}}}(e)),this._configMap.set(wn,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.STAT_SERVICE,".").concat(V.CMD.KICK_OTHER)}),body:{}}}(e)),this._configMap.set(Io,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.IM_COS_SIGN,".").concat(V.CMD.COS_SIGN)}),body:{cmd:"open_im_cos_svc",subCmd:"get_cos_token",duration:300,version:2},keyMap:{request:{userSig:"usersig",subCmd:"sub_cmd",cmd:"cmd",duration:"duration",version:"version"},response:{expired_time:"expiredTime",bucket_name:"bucketName",session_token:"sessionToken",tmp_secret_id:"secretId",tmp_secret_key:"secretKey"}}}}(t)),this._configMap.set(bo,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.CUSTOM_UPLOAD,".").concat(V.CMD.COS_PRE_SIG)}),body:{fileType:void 0,fileName:void 0,uploadMethod:0,duration:900},keyMap:{request:{userSig:"usersig",fileType:"file_type",fileName:"file_name",uploadMethod:"upload_method"},response:{expired_time:"expiredTime",request_id:"requestId",head_url:"headUrl",upload_url:"uploadUrl",download_url:"downloadUrl",ci_url:"ciUrl",snapshot_url:"requestSnapshotUrl"}}}}(t)),this._configMap.set(To,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.CUSTOM_UPLOAD,".").concat(V.CMD.VIDEO_COVER)}),body:{version:1,platform:void 0,coverName:void 0,requestSnapshotUrl:void 0},keyMap:{request:{version:"version",platform:"platform",coverName:"cover_name",requestSnapshotUrl:"snapshot_url"},response:{error_code:"errorCode",error_msg:"errorInfo",download_url:"snapshotUrl"}}}}(t)),this._configMap.set(xo,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.IM_CONFIG_MANAGER,".").concat(V.CMD.FETCH_COMMERCIAL_CONFIG)}),body:{SDKAppID:0},keyMap:{request:{SDKAppID:"uint32_sdkappid"},response:{int32_error_code:"errorCode",str_error_message:"errorMessage",str_purchase_bits:"purchaseBits",uint32_expired_time:"expiredTime"}}}}(e)),this._configMap.set(Go,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.IM_CONFIG_MANAGER,".").concat(V.CMD.PUSHED_COMMERCIAL_CONFIG)}),body:{},keyMap:{response:{int32_error_code:"errorCode",str_error_message:"errorMessage",str_purchase_bits:"purchaseBits",uint32_expired_time:"expiredTime"}}}}(e)),this._configMap.set(Lo,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.IM_CONFIG_MANAGER,".").concat(V.CMD.FETCH_CLOUD_CONTROL_CONFIG)}),body:{SDKAppID:0,version:0},keyMap:{request:{SDKAppID:"uint32_sdkappid",version:"uint64_version"},response:{int32_error_code:"errorCode",str_error_message:"errorMessage",str_json_config:"cloudControlConfig",uint32_expired_time:"expiredTime",uint32_sdkappid:"SDKAppID",uint64_version:"version"}}}}(e)),this._configMap.set(Ro,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.IM_CONFIG_MANAGER,".").concat(V.CMD.PUSHED_CLOUD_CONTROL_CONFIG)}),body:{},keyMap:{response:{int32_error_code:"errorCode",str_error_message:"errorMessage",str_json_config:"cloudControlConfig",uint32_expired_time:"expiredTime",uint32_sdkappid:"SDKAppID",uint64_version:"version"}}}}(e)),this._configMap.set($o,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.OVERLOAD_PUSH,".").concat(V.CMD.OVERLOAD_NOTIFY)}),body:{},keyMap:{response:{OverLoadServCmd:"overloadCommand",DelaySecs:"waitingTime"}}}}(e)),this._configMap.set(In,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.OPEN_IM,".").concat(V.CMD.GET_MESSAGES)}),body:{cookie:"",syncFlag:0,needAbstract:1,isOnlineSync:0},keyMap:{request:{fromAccount:"From_Account",toAccount:"To_Account",from:"From_Account",to:"To_Account",time:"MsgTimeStamp",sequence:"MsgSeq",random:"MsgRandom",elements:"MsgBody"},response:{MsgList:"messageList",SyncFlag:"syncFlag",To_Account:"to",From_Account:"from",ClientSeq:"clientSequence",MsgSeq:"sequence",NoticeSeq:"noticeSequence",NotifySeq:"notifySequence",MsgRandom:"random",MsgTimeStamp:"time",MsgContent:"content",ToGroupId:"groupID",MsgKey:"messageKey",GroupTips:"groupTips",MsgBody:"elements",MsgType:"type",C2CRemainingUnreadCount:"C2CRemainingUnreadList",C2CPairUnreadCount:"C2CPairUnreadList"}}}}(e)),this._configMap.set(bn,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.OPEN_IM,".").concat(V.CMD.BIG_DATA_HALLWAY_AUTH_KEY)}),body:{}}}(e)),this._configMap.set(Tn,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.OPEN_IM,".").concat(V.CMD.SEND_MESSAGE)}),body:{fromAccount:"",toAccount:"",msgSeq:0,msgRandom:0,msgBody:[],cloudCustomData:void 0,nick:"",avatar:"",msgLifeTime:void 0,offlinePushInfo:{pushFlag:0,title:"",desc:"",ext:"",apnsInfo:{badgeMode:0},androidInfo:{OPPOChannelID:""}},messageControlInfo:void 0,clientTime:void 0},keyMap:{request:{fromAccount:"From_Account",toAccount:"To_Account",msgTimeStamp:"MsgTimeStamp",msgSeq:"MsgSeq",msgRandom:"MsgRandom",msgBody:"MsgBody",count:"MaxCnt",lastMessageTime:"LastMsgTime",messageKey:"MsgKey",peerAccount:"Peer_Account",data:"Data",description:"Desc",extension:"Ext",type:"MsgType",content:"MsgContent",sizeType:"Type",uuid:"UUID",url:"",imageUrl:"URL",fileUrl:"Url",remoteAudioUrl:"Url",remoteVideoUrl:"VideoUrl",thumbUUID:"ThumbUUID",videoUUID:"VideoUUID",videoUrl:"",downloadFlag:"Download_Flag",nick:"From_AccountNick",avatar:"From_AccountHeadurl",from:"From_Account",time:"MsgTimeStamp",messageRandom:"MsgRandom",messageSequence:"MsgSeq",elements:"MsgBody",clientSequence:"ClientSeq",payload:"MsgContent",messageList:"MsgList",messageNumber:"MsgNum",abstractList:"AbstractList",messageBody:"MsgBody"}}}}(e)),this._configMap.set(kn,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.GROUP,".").concat(V.CMD.SEND_GROUP_MESSAGE)}),body:{fromAccount:"",groupID:"",random:0,clientSequence:0,priority:"",msgBody:[],cloudCustomData:void 0,onlineOnlyFlag:0,offlinePushInfo:{pushFlag:0,title:"",desc:"",ext:"",apnsInfo:{badgeMode:0},androidInfo:{OPPOChannelID:""}},groupAtInfo:[],messageControlInfo:void 0,clientTime:void 0},keyMap:{request:{to:"GroupId",extension:"Ext",data:"Data",description:"Desc",random:"Random",sequence:"ReqMsgSeq",count:"ReqMsgNumber",type:"MsgType",priority:"MsgPriority",content:"MsgContent",elements:"MsgBody",sizeType:"Type",uuid:"UUID",url:"",imageUrl:"URL",fileUrl:"Url",remoteAudioUrl:"Url",remoteVideoUrl:"VideoUrl",thumbUUID:"ThumbUUID",videoUUID:"VideoUUID",videoUrl:"",downloadFlag:"Download_Flag",clientSequence:"ClientSeq",from:"From_Account",time:"MsgTimeStamp",messageRandom:"MsgRandom",messageSequence:"MsgSeq",payload:"MsgContent",messageList:"MsgList",messageNumber:"MsgNum",abstractList:"AbstractList",messageBody:"MsgBody"},response:{MsgTime:"time",MsgSeq:"sequence"}}}}(e)),this._configMap.set(On,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.OPEN_IM,".").concat(V.CMD.REVOKE_C2C_MESSAGE)}),body:{msgInfo:{fromAccount:"",toAccount:"",msgTimeStamp:0,msgSeq:0,msgRandom:0}},keyMap:{request:{msgInfo:"MsgInfo",msgTimeStamp:"MsgTimeStamp",msgSeq:"MsgSeq",msgRandom:"MsgRandom"}}}}(e)),this._configMap.set(no,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.GROUP,".").concat(V.CMD.REVOKE_GROUP_MESSAGE)}),body:{groupID:"",msgSeqList:void 0},keyMap:{request:{msgSeqList:"MsgSeqList",msgSeq:"MsgSeq"}}}}(e)),this._configMap.set(xn,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.OPEN_IM,".").concat(V.CMD.GET_C2C_ROAM_MESSAGES)}),body:{peerAccount:"",count:15,lastMessageTime:0,messageKey:"",withRecalledMessage:1},keyMap:{request:{messageKey:"MsgKey",peerAccount:"Peer_Account",count:"MaxCnt",lastMessageTime:"LastMsgTime",withRecalledMessage:"WithRecalledMsg"},response:{LastMsgTime:"lastMessageTime"}}}}(e)),this._configMap.set(io,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.GROUP,".").concat(V.CMD.GET_GROUP_ROAM_MESSAGES)}),body:{withRecalledMsg:1,groupID:"",count:15,sequence:""},keyMap:{request:{sequence:"ReqMsgSeq",count:"ReqMsgNumber",withRecalledMessage:"WithRecalledMsg"},response:{Random:"random",MsgTime:"time",MsgSeq:"sequence",ReqMsgSeq:"sequence",RspMsgList:"messageList",IsPlaceMsg:"isPlaceMessage",IsSystemMsg:"isSystemMessage",ToGroupId:"to",EnumFrom_AccountType:"fromAccountType",EnumTo_AccountType:"toAccountType",GroupCode:"groupCode",MsgPriority:"priority",MsgBody:"elements",MsgType:"type",MsgContent:"content",IsFinished:"complete",Download_Flag:"downloadFlag",ClientSeq:"clientSequence",ThumbUUID:"thumbUUID",VideoUUID:"videoUUID"}}}}(e)),this._configMap.set(Pn,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.OPEN_IM,".").concat(V.CMD.SET_C2C_MESSAGE_READ)}),body:{C2CMsgReaded:void 0},keyMap:{request:{lastMessageTime:"LastedMsgTime"}}}}(e)),this._configMap.set(Ln,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.OPEN_IM,".").concat(V.CMD.SET_C2C_PEER_MUTE_NOTIFICATIONS)}),body:{userIDList:void 0,muteFlag:0},keyMap:{request:{userIDList:"Peer_Account",muteFlag:"Mute_Notifications"}}}}(e)),this._configMap.set(Rn,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.OPEN_IM,".").concat(V.CMD.GET_C2C_PEER_MUTE_NOTIFICATIONS)}),body:{updateSequence:0},keyMap:{response:{MuteNotificationsList:"muteFlagList"}}}}(e)),this._configMap.set(oo,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.GROUP,".").concat(V.CMD.SET_GROUP_MESSAGE_READ)}),body:{groupID:void 0,messageReadSeq:void 0},keyMap:{request:{messageReadSeq:"MsgReadedSeq"}}}}(e)),this._configMap.set(ao,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.OPEN_IM,".").concat(V.CMD.SET_ALL_MESSAGE_READ)}),body:{readAllC2CMessage:0,groupMessageReadInfoList:[]},keyMap:{request:{readAllC2CMessage:"C2CReadAllMsg",groupMessageReadInfoList:"GroupReadInfo",messageSequence:"MsgSeq"},response:{C2CReadAllMsg:"readAllC2CMessage",GroupReadInfoArray:"groupMessageReadInfoList"}}}}(e)),this._configMap.set($n,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.OPEN_IM,".").concat(V.CMD.DELETE_C2C_MESSAGE)}),body:{fromAccount:"",to:"",keyList:void 0},keyMap:{request:{keyList:"MsgKeyList"}}}}(e)),this._configMap.set(fo,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.GROUP,".").concat(V.CMD.DELETE_GROUP_MESSAGE)}),body:{groupID:"",deleter:"",keyList:void 0},keyMap:{request:{deleter:"Deleter_Account",keyList:"Seqs"}}}}(e)),this._configMap.set(Gn,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.OPEN_IM,".").concat(V.CMD.GET_PEER_READ_TIME)}),body:{userIDList:void 0},keyMap:{request:{userIDList:"To_Account"},response:{ReadTime:"peerReadTimeList"}}}}(e)),this._configMap.set(Fn,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.RECENT_CONTACT,".").concat(V.CMD.GET_CONVERSATION_LIST)}),body:{fromAccount:void 0,count:0},keyMap:{request:{},response:{SessionItem:"conversations",ToAccount:"groupID",To_Account:"userID",UnreadMsgCount:"unreadCount",MsgGroupReadedSeq:"messageReadSeq",C2cPeerReadTime:"c2cPeerReadTime"}}}}(e)),this._configMap.set(Un,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.RECENT_CONTACT,".").concat(V.CMD.PAGING_GET_CONVERSATION_LIST)}),body:{fromAccount:void 0,timeStamp:void 0,startIndex:void 0,pinnedTimeStamp:void 0,pinnedStartIndex:void 0,orderType:void 0,messageAssistFlag:4,assistFlag:15},keyMap:{request:{messageAssistFlag:"MsgAssistFlags",assistFlag:"AssistFlags",pinnedTimeStamp:"TopTimeStamp",pinnedStartIndex:"TopStartIndex"},response:{SessionItem:"conversations",ToAccount:"groupID",To_Account:"userID",UnreadMsgCount:"unreadCount",MsgGroupReadedSeq:"messageReadSeq",C2cPeerReadTime:"c2cPeerReadTime",LastMsgFlags:"lastMessageFlag",TopFlags:"isPinned",TopTimeStamp:"pinnedTimeStamp",TopStartIndex:"pinnedStartIndex"}}}}(e)),this._configMap.set(Bn,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.RECENT_CONTACT,".").concat(V.CMD.DELETE_CONVERSATION)}),body:{fromAccount:"",toAccount:void 0,type:1,toGroupID:void 0,clearHistoryMessage:1},keyMap:{request:{toGroupID:"ToGroupid",clearHistoryMessage:"ClearRamble"}}}}(e)),this._configMap.set(jn,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.RECENT_CONTACT,".").concat(V.CMD.PIN_CONVERSATION)}),body:{fromAccount:"",operationType:1,itemList:void 0},keyMap:{request:{itemList:"RecentContactItem"}}}}(e)),this._configMap.set(qn,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.OPEN_IM,".").concat(V.CMD.DELETE_GROUP_AT_TIPS)}),body:{messageListToDelete:void 0},keyMap:{request:{messageListToDelete:"DelMsgList",messageSeq:"MsgSeq",messageRandom:"MsgRandom"}}}}(e)),this._configMap.set(Sn,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.PROFILE,".").concat(V.CMD.PORTRAIT_GET)}),body:{fromAccount:"",userItem:[]},keyMap:{request:{toAccount:"To_Account",standardSequence:"StandardSequence",customSequence:"CustomSequence"}}}}(e)),this._configMap.set(Dn,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.PROFILE,".").concat(V.CMD.PORTRAIT_SET)}),body:{fromAccount:"",profileItem:[{tag:xe.NICK,value:""},{tag:xe.GENDER,value:""},{tag:xe.ALLOWTYPE,value:""},{tag:xe.AVATAR,value:""}]},keyMap:{request:{toAccount:"To_Account",standardSequence:"StandardSequence",customSequence:"CustomSequence"}}}}(e)),this._configMap.set(En,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.FRIEND,".").concat(V.CMD.GET_BLACKLIST)}),body:{fromAccount:"",startIndex:0,maxLimited:30,lastSequence:0},keyMap:{response:{CurruentSequence:"currentSequence"}}}}(e)),this._configMap.set(An,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.FRIEND,".").concat(V.CMD.ADD_BLACKLIST)}),body:{fromAccount:"",toAccount:[]}}}(e)),this._configMap.set(Nn,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.FRIEND,".").concat(V.CMD.DELETE_BLACKLIST)}),body:{fromAccount:"",toAccount:[]}}}(e)),this._configMap.set(Hn,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.GROUP,".").concat(V.CMD.GET_JOINED_GROUPS)}),body:{memberAccount:"",limit:void 0,offset:void 0,groupType:void 0,responseFilter:{groupBaseInfoFilter:void 0,selfInfoFilter:void 0}},keyMap:{request:{memberAccount:"Member_Account"},response:{GroupIdList:"groups",MsgFlag:"messageRemindType",NoUnreadSeqList:"excludedUnreadSequenceList",MsgSeq:"readedSequence"}}}}(e)),this._configMap.set(Vn,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.GROUP,".").concat(V.CMD.GET_GROUP_INFO)}),body:{groupIDList:void 0,responseFilter:{groupBaseInfoFilter:["Type","Name","Introduction","Notification","FaceUrl","Owner_Account","CreateTime","InfoSeq","LastInfoTime","LastMsgTime","MemberNum","MaxMemberNum","ApplyJoinOption","NextMsgSeq","ShutUpAllMember"],groupCustomFieldFilter:void 0,memberInfoFilter:void 0,memberCustomFieldFilter:void 0}},keyMap:{request:{groupIDList:"GroupIdList",groupCustomField:"AppDefinedData",memberCustomField:"AppMemberDefinedData",groupCustomFieldFilter:"AppDefinedDataFilter_Group",memberCustomFieldFilter:"AppDefinedDataFilter_GroupMember"},response:{GroupIdList:"groups",MsgFlag:"messageRemindType",AppDefinedData:"groupCustomField",AppMemberDefinedData:"memberCustomField",AppDefinedDataFilter_Group:"groupCustomFieldFilter",AppDefinedDataFilter_GroupMember:"memberCustomFieldFilter",InfoSeq:"infoSequence",MemberList:"members",GroupInfo:"groups",ShutUpUntil:"muteUntil",ShutUpAllMember:"muteAllMembers",ApplyJoinOption:"joinOption"}}}}(e)),this._configMap.set(Kn,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.GROUP,".").concat(V.CMD.CREATE_GROUP)}),body:{type:void 0,name:void 0,groupID:void 0,ownerID:void 0,introduction:void 0,notification:void 0,maxMemberNum:void 0,joinOption:void 0,memberList:void 0,groupCustomField:void 0,memberCustomField:void 0,webPushFlag:1,avatar:"FaceUrl"},keyMap:{request:{ownerID:"Owner_Account",userID:"Member_Account",avatar:"FaceUrl",maxMemberNum:"MaxMemberCount",joinOption:"ApplyJoinOption",groupCustomField:"AppDefinedData",memberCustomField:"AppMemberDefinedData"},response:{HugeGroupFlag:"avChatRoomFlag",OverJoinedGroupLimit_Account:"overLimitUserIDList"}}}}(e)),this._configMap.set(zn,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.GROUP,".").concat(V.CMD.DESTROY_GROUP)}),body:{groupID:void 0}}}(e)),this._configMap.set(Wn,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.GROUP,".").concat(V.CMD.MODIFY_GROUP_INFO)}),body:{groupID:void 0,name:void 0,introduction:void 0,notification:void 0,avatar:void 0,maxMemberNum:void 0,joinOption:void 0,groupCustomField:void 0,muteAllMembers:void 0},keyMap:{request:{maxMemberNum:"MaxMemberCount",groupCustomField:"AppDefinedData",muteAllMembers:"ShutUpAllMember",joinOption:"ApplyJoinOption",avatar:"FaceUrl"},response:{AppDefinedData:"groupCustomField",ShutUpAllMember:"muteAllMembers",ApplyJoinOption:"joinOption"}}}}(e)),this._configMap.set(Yn,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.GROUP,".").concat(V.CMD.APPLY_JOIN_GROUP)}),body:{groupID:void 0,applyMessage:void 0,userDefinedField:void 0,webPushFlag:1,historyMessageFlag:void 0},keyMap:{request:{applyMessage:"ApplyMsg",historyMessageFlag:"HugeGroupHistoryMsgFlag"},response:{HugeGroupFlag:"avChatRoomFlag",AVChatRoomKey:"avChatRoomKey",RspMsgList:"messageList",ToGroupId:"to"}}}}(e)),this._configMap.set(Jn,function(e){return e.a2,e.tinyid,{head:u({},m(e,["a2","tinyid"]),{servcmd:"".concat(V.NAME.BIG_GROUP_NO_AUTH,".").concat(V.CMD.APPLY_JOIN_GROUP)}),body:{groupID:void 0,applyMessage:void 0,userDefinedField:void 0,webPushFlag:1},keyMap:{request:{applyMessage:"ApplyMsg"},response:{HugeGroupFlag:"avChatRoomFlag"}}}}(e)),this._configMap.set(Xn,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.GROUP,".").concat(V.CMD.QUIT_GROUP)}),body:{groupID:void 0}}}(e)),this._configMap.set(Qn,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.GROUP,".").concat(V.CMD.SEARCH_GROUP_BY_ID)}),body:{groupIDList:void 0,responseFilter:{groupBasePublicInfoFilter:["Type","Name","Introduction","Notification","FaceUrl","CreateTime","Owner_Account","LastInfoTime","LastMsgTime","NextMsgSeq","MemberNum","MaxMemberNum","ApplyJoinOption"]}},keyMap:{response:{ApplyJoinOption:"joinOption"}}}}(e)),this._configMap.set(Zn,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.GROUP,".").concat(V.CMD.CHANGE_GROUP_OWNER)}),body:{groupID:void 0,newOwnerID:void 0},keyMap:{request:{newOwnerID:"NewOwner_Account"}}}}(e)),this._configMap.set(eo,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.GROUP,".").concat(V.CMD.HANDLE_APPLY_JOIN_GROUP)}),body:{groupID:void 0,applicant:void 0,handleAction:void 0,handleMessage:void 0,authentication:void 0,messageKey:void 0,userDefinedField:void 0},keyMap:{request:{applicant:"Applicant_Account",handleAction:"HandleMsg",handleMessage:"ApprovalMsg",messageKey:"MsgKey"}}}}(e)),this._configMap.set(to,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.GROUP,".").concat(V.CMD.HANDLE_GROUP_INVITATION)}),body:{groupID:void 0,inviter:void 0,handleAction:void 0,handleMessage:void 0,authentication:void 0,messageKey:void 0,userDefinedField:void 0},keyMap:{request:{inviter:"Inviter_Account",handleAction:"HandleMsg",handleMessage:"ApprovalMsg",messageKey:"MsgKey"}}}}(e)),this._configMap.set(so,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.GROUP,".").concat(V.CMD.GET_GROUP_APPLICATION)}),body:{startTime:void 0,limit:void 0,handleAccount:void 0},keyMap:{request:{handleAccount:"Handle_Account"}}}}(e)),this._configMap.set(ro,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.OPEN_IM,".").concat(V.CMD.DELETE_GROUP_SYSTEM_MESSAGE)}),body:{messageListToDelete:void 0},keyMap:{request:{messageListToDelete:"DelMsgList",messageSeq:"MsgSeq",messageRandom:"MsgRandom"}}}}(e)),this._configMap.set(co,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.BIG_GROUP_LONG_POLLING,".").concat(V.CMD.AVCHATROOM_LONG_POLL)}),body:{USP:1,startSeq:1,holdTime:90,key:void 0},keyMap:{request:{USP:"USP"},response:{ToGroupId:"groupID"}}}}(e)),this._configMap.set(uo,function(e){return e.a2,e.tinyid,{head:u({},m(e,["a2","tinyid"]),{servcmd:"".concat(V.NAME.BIG_GROUP_LONG_POLLING_NO_AUTH,".").concat(V.CMD.AVCHATROOM_LONG_POLL)}),body:{USP:1,startSeq:1,holdTime:90,key:void 0},keyMap:{request:{USP:"USP"},response:{ToGroupId:"groupID"}}}}(e)),this._configMap.set(lo,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.GROUP,".").concat(V.CMD.GET_ONLINE_MEMBER_NUM)}),body:{groupID:void 0}}}(e)),this._configMap.set(po,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.GROUP,".").concat(V.CMD.SET_GROUP_ATTRIBUTES)}),body:{groupID:void 0,groupAttributeList:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:["RaceConflict"]},keyMap:{request:{key:"key",value:"value"}}}}(e)),this._configMap.set(go,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.GROUP,".").concat(V.CMD.MODIFY_GROUP_ATTRIBUTES)}),body:{groupID:void 0,groupAttributeList:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:["RaceConflict"]},keyMap:{request:{key:"key",value:"value"}}}}(e)),this._configMap.set(ho,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.GROUP,".").concat(V.CMD.DELETE_GROUP_ATTRIBUTES)}),body:{groupID:void 0,groupAttributeList:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:["RaceConflict"]},keyMap:{request:{key:"key"}}}}(e)),this._configMap.set(mo,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.GROUP,".").concat(V.CMD.CLEAR_GROUP_ATTRIBUTES)}),body:{groupID:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:["RaceConflict"]}}}(e)),this._configMap.set(_o,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.GROUP_ATTR,".").concat(V.CMD.GET_GROUP_ATTRIBUTES)}),body:{groupID:void 0,avChatRoomKey:void 0,groupType:1},keyMap:{request:{avChatRoomKey:"Key",groupType:"GroupType"}}}}(e)),this._configMap.set(vo,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.GROUP,".").concat(V.CMD.GET_GROUP_MEMBER_LIST)}),body:{groupID:void 0,limit:0,offset:void 0,next:void 0,memberRoleFilter:void 0,memberInfoFilter:["Role","NameCard","ShutUpUntil","JoinTime"],memberCustomFieldFilter:void 0},keyMap:{request:{memberCustomFieldFilter:"AppDefinedDataFilter_GroupMember"},response:{AppMemberDefinedData:"memberCustomField",AppDefinedDataFilter_GroupMember:"memberCustomFieldFilter",MemberList:"members",ShutUpUntil:"muteUntil"}}}}(e)),this._configMap.set(yo,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.GROUP,".").concat(V.CMD.GET_GROUP_MEMBER_INFO)}),body:{groupID:void 0,userIDList:void 0,memberInfoFilter:void 0,memberCustomFieldFilter:void 0},keyMap:{request:{userIDList:"Member_List_Account",memberCustomFieldFilter:"AppDefinedDataFilter_GroupMember"},response:{MemberList:"members",ShutUpUntil:"muteUntil",AppDefinedDataFilter_GroupMember:"memberCustomFieldFilter",AppMemberDefinedData:"memberCustomField"}}}}(e)),this._configMap.set(Mo,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.GROUP,".").concat(V.CMD.ADD_GROUP_MEMBER)}),body:{groupID:void 0,silence:void 0,userIDList:void 0},keyMap:{request:{userID:"Member_Account",userIDList:"MemberList"},response:{MemberList:"members"}}}}(e)),this._configMap.set(Co,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.GROUP,".").concat(V.CMD.DELETE_GROUP_MEMBER)}),body:{groupID:void 0,userIDList:void 0,reason:void 0},keyMap:{request:{userIDList:"MemberToDel_Account"}}}}(e)),this._configMap.set(wo,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.GROUP,".").concat(V.CMD.MODIFY_GROUP_MEMBER_INFO)}),body:{groupID:void 0,userID:void 0,messageRemindType:void 0,nameCard:void 0,role:void 0,memberCustomField:void 0,muteTime:void 0},keyMap:{request:{userID:"Member_Account",memberCustomField:"AppMemberDefinedData",muteTime:"ShutUpTime",messageRemindType:"MsgFlag"}}}}(e)),this._configMap.set(ko,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.IM_OPEN_STAT,".").concat(V.CMD.TIM_WEB_REPORT_V2)}),body:{header:{},event:[],quality:[]},keyMap:{request:{SDKType:"sdk_type",SDKVersion:"sdk_version",deviceType:"device_type",platform:"platform",instanceID:"instance_id",traceID:"trace_id",SDKAppID:"sdk_app_id",userID:"user_id",tinyID:"tiny_id",extension:"extension",timestamp:"timestamp",networkType:"network_type",eventType:"event_type",code:"error_code",message:"error_message",moreMessage:"more_message",duplicate:"duplicate",costTime:"cost_time",level:"level",qualityType:"quality_type",reportIndex:"report_index",wholePeriod:"whole_period",totalCount:"total_count",rttCount:"success_count_business",successRateOfRequest:"percent_business",countLessThan1Second:"success_count_business",percentOfCountLessThan1Second:"percent_business",countLessThan3Second:"success_count_platform",percentOfCountLessThan3Second:"percent_platform",successCountOfBusiness:"success_count_business",successRateOfBusiness:"percent_business",successCountOfPlatform:"success_count_platform",successRateOfPlatform:"percent_platform",successCountOfMessageReceived:"success_count_business",successRateOfMessageReceived:"percent_business",avgRTT:"average_value",avgDelay:"average_value",avgValue:"average_value",framework:"framework"}}}}(n)),this._configMap.set(So,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.HEARTBEAT,".").concat(V.CMD.ALIVE)}),body:{}}}(e)),this._configMap.set(Do,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.IM_OPEN_PUSH,".").concat(V.CMD.MESSAGE_PUSH)}),body:{},keyMap:{response:{C2cMsgArray:"C2CMessageArray",GroupMsgArray:"groupMessageArray",GroupTips:"groupTips",C2cNotifyMsgArray:"C2CNotifyMessageArray",ClientSeq:"clientSequence",MsgPriority:"priority",NoticeSeq:"noticeSequence",MsgContent:"content",MsgType:"type",MsgBody:"elements",ToGroupId:"to",Desc:"description",Ext:"extension",IsSyncMsg:"isSyncMessage",Flag:"needSync",NeedAck:"needAck",PendencyAdd_Account:"userID",ProfileImNick:"nick",PendencyType:"applicationType",C2CReadAllMsg:"readAllC2CMessage"}}}}(e)),this._configMap.set(Eo,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.IM_OPEN_PUSH,".").concat(V.CMD.MULTI_MESSAGE_PUSH)}),body:{},keyMap:{response:{GroupMsgArray:"groupMessageArray",GroupTips:"groupTips",ClientSeq:"clientSequence",MsgPriority:"priority",NoticeSeq:"noticeSequence",MsgContent:"content",MsgType:"type",MsgBody:"elements",ToGroupId:"to",Desc:"description",Ext:"extension",IsSyncMsg:"isSyncMessage",Flag:"needSync",NeedAck:"needAck",PendencyType:"applicationType"}}}}(e)),this._configMap.set(Ao,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.OPEN_IM,".").concat(V.CMD.MESSAGE_PUSH_ACK)}),body:{sessionData:void 0},keyMap:{request:{sessionData:"SessionData"}}}}(e)),this._configMap.set(No,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.IM_OPEN_STATUS,".").concat(V.CMD.STATUS_FORCEOFFLINE)}),body:{},keyMap:{response:{C2cNotifyMsgArray:"C2CNotifyMessageArray",NoticeSeq:"noticeSequence",KickoutMsgNotify:"kickoutMsgNotify",NewInstInfo:"newInstanceInfo"}}}}(e)),this._configMap.set(Po,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.IM_LONG_MESSAGE,".").concat(V.CMD.DOWNLOAD_MERGER_MESSAGE)}),body:{downloadKey:""},keyMap:{response:{Data:"data",Desc:"description",Ext:"extension",Download_Flag:"downloadFlag",ThumbUUID:"thumbUUID",VideoUUID:"videoUUID"}}}}(e)),this._configMap.set(Oo,function(e){return{head:u({},e,{servcmd:"".concat(V.NAME.IM_LONG_MESSAGE,".").concat(V.CMD.UPLOAD_MERGER_MESSAGE)}),body:{messageList:[]},keyMap:{request:{fromAccount:"From_Account",toAccount:"To_Account",msgTimeStamp:"MsgTimeStamp",msgSeq:"MsgSeq",msgRandom:"MsgRandom",msgBody:"MsgBody",type:"MsgType",content:"MsgContent",data:"Data",description:"Desc",extension:"Ext",sizeType:"Type",uuid:"UUID",url:"",imageUrl:"URL",fileUrl:"Url",remoteAudioUrl:"Url",remoteVideoUrl:"VideoUrl",thumbUUID:"ThumbUUID",videoUUID:"VideoUUID",videoUrl:"",downloadFlag:"Download_Flag",from:"From_Account",time:"MsgTimeStamp",messageRandom:"MsgRandom",messageSequence:"MsgSeq",elements:"MsgBody",clientSequence:"ClientSeq",payload:"MsgContent",messageList:"MsgList",messageNumber:"MsgNum",abstractList:"AbstractList",messageBody:"MsgBody"}}}}(e))}},{key:"has",value:function(e){return this._configMap.has(e)}},{key:"get",value:function(e){return this._configMap.get(e)}},{key:"update",value:function(){this._fillConfigMap()}},{key:"getKeyMap",value:function(e){return this.has(e)?this.get(e).keyMap||{}:(Le.warn("".concat(this._className,".getKeyMap unknown protocolName:").concat(e)),{})}},{key:"getProtocolData",value:function(e){var t=e.protocolName,n=e.requestData,o=this.get(t),a=null;if(n){var i=this._simpleDeepCopy(o),s=this._updateService(n,i),r=s.body,c=Object.create(null);for(var u in r)if(Object.prototype.hasOwnProperty.call(r,u)){if(c[u]=r[u],void 0===n[u])continue;c[u]=n[u]}s.body=c,a=this._getUplinkData(s)}else a=this._getUplinkData(o);return a}},{key:"_getUplinkData",value:function(e){var t=this._requestDataCleaner(e),n=Dt(t.head),o=Ic(t.body,this._getRequestKeyMap(n));return t.body=o,t}},{key:"_updateService",value:function(e,t){var n=Dt(t.head);if(t.head.servcmd.includes(V.NAME.GROUP)){var o=e.type,a=e.groupID,i=void 0===a?void 0:a,s=e.groupIDList,r=void 0===s?[]:s;Ye(i)&&(i=r[0]||""),vt({type:o,groupID:i})&&(t.head.servcmd="".concat(V.NAME.GROUP_COMMUNITY,".").concat(n))}return t}},{key:"_getRequestKeyMap",value:function(e){var t=this.getKeyMap(e);return u({},Mc.request,{},t.request)}},{key:"_requestDataCleaner",value:function(t){var n=Array.isArray(t)?[]:Object.create(null);for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&et(o)&&null!==t[o]&&void 0!==t[o]&&("object"!==e(t[o])?n[o]=t[o]:n[o]=this._requestDataCleaner.bind(this)(t[o]));return n}},{key:"_simpleDeepCopy",value:function(e){for(var t,n=Object.keys(e),o={},a=0,i=n.length;a<i;a++)t=n[a],We(e[t])?o[t]=Array.from(e[t]):Ke(e[t])?o[t]=this._simpleDeepCopy(e[t]):o[t]=e[t];return o}}]),t}(),$c=[Ao],Uc=function(){function e(t){a(this,e),this._sessionModule=t,this._className="DownlinkHandler",this._eventHandlerMap=new Map,this._eventHandlerMap.set("C2CMessageArray",this._c2cMessageArrayHandler.bind(this)),this._eventHandlerMap.set("groupMessageArray",this._groupMessageArrayHandler.bind(this)),this._eventHandlerMap.set("groupTips",this._groupTipsHandler.bind(this)),this._eventHandlerMap.set("C2CNotifyMessageArray",this._C2CNotifyMessageArrayHandler.bind(this)),this._eventHandlerMap.set("profileModify",this._profileHandler.bind(this)),this._eventHandlerMap.set("friendListMod",this._relationChainHandler.bind(this)),this._eventHandlerMap.set("recentContactMod",this._recentContactHandler.bind(this)),this._eventHandlerMap.set("readAllC2CMessage",this._allMessageReadHandler.bind(this)),this._keys=C(this._eventHandlerMap.keys())}return s(e,[{key:"_c2cMessageArrayHandler",value:function(e){var t=this._sessionModule.getModule(Jt);t&&(e.dataList.forEach((function(e){if(1===e.isSyncMessage){var t=e.from;e.from=e.to,e.to=t}})),1===e.needSync&&this._sessionModule.getModule(un).startOnlineSync(),t.onNewC2CMessage({dataList:e.dataList,isInstantMessage:!0}))}},{key:"_groupMessageArrayHandler",value:function(e){var t=this._sessionModule.getModule(Xt);t&&t.onNewGroupMessage({event:e.event,dataList:e.dataList,isInstantMessage:!0})}},{key:"_groupTipsHandler",value:function(e){var t=this._sessionModule.getModule(Xt);if(t){var n=e.event,o=e.dataList,a=e.isInstantMessage,i=void 0===a||a,s=e.isSyncingEnded;switch(n){case 4:case 6:t.onNewGroupTips({event:n,dataList:o});break;case 5:o.forEach((function(e){We(e.elements.revokedInfos)?t.onGroupMessageRevoked({dataList:o}):We(e.elements.groupMessageReadNotice)?t.onGroupMessageReadNotice({dataList:o}):t.onNewGroupSystemNotice({dataList:o,isInstantMessage:i,isSyncingEnded:s})}));break;case 12:this._sessionModule.getModule(en).onNewGroupAtTips({dataList:o});break;default:Le.log("".concat(this._className,"._groupTipsHandler unknown event:").concat(n," dataList:"),o)}}}},{key:"_C2CNotifyMessageArrayHandler",value:function(e){var t=this,n=e.dataList;if(We(n)){var o=this._sessionModule.getModule(Jt);n.forEach((function(e){if(ze(e))if(e.hasOwnProperty("kickoutMsgNotify")){var a=e.kickoutMsgNotify,i=a.kickType,s=a.newInstanceInfo,r=void 0===s?{}:s;1===i?t._sessionModule.onMultipleAccountKickedOut(r):2===i&&t._sessionModule.onMultipleDeviceKickedOut(r)}else e.hasOwnProperty("c2cMessageRevokedNotify")?o&&o.onC2CMessageRevoked({dataList:n}):e.hasOwnProperty("c2cMessageReadReceipt")?o&&o.onC2CMessageReadReceipt({dataList:n}):e.hasOwnProperty("c2cMessageReadNotice")?o&&o.onC2CMessageReadNotice({dataList:n}):e.hasOwnProperty("muteNotificationsSync")&&t._sessionModule.getModule(en).onC2CMessageRemindTypeSynced({dataList:n})}))}}},{key:"_profileHandler",value:function(e){this._sessionModule.getModule(Yt).onProfileModified({dataList:e.dataList});var t=this._sessionModule.getModule(Qt);t&&t.onFriendProfileModified({dataList:e.dataList})}},{key:"_relationChainHandler",value:function(e){this._sessionModule.getModule(Yt).onRelationChainModified({dataList:e.dataList});var t=this._sessionModule.getModule(Qt);t&&t.onRelationChainModified({dataList:e.dataList})}},{key:"_recentContactHandler",value:function(e){var t=e.dataList;if(We(t)){var n=this._sessionModule.getModule(en);n&&t.forEach((function(e){var t=e.pushType,o=e.recentContactTopItem,a=e.recentContactDeleteItem;1===t?n.onConversationDeleted(a.recentContactList):2===t?n.onConversationPinned(o.recentContactList):3===t&&n.onConversationUnpinned(o.recentContactList)}))}}},{key:"_allMessageReadHandler",value:function(e){var t=e.dataList,n=this._sessionModule.getModule(en);n&&n.onPushedAllMessageRead(t)}},{key:"onMessage",value:function(e){var t=this,n=e.body;if(this._filterMessageFromIMOpenPush(e)){var o=n.eventArray,a=n.isInstantMessage,i=n.isSyncingEnded,s=n.needSync;if(We(o))for(var r=null,c=null,u=0,l=0,d=o.length;l<d;l++){u=(r=o[l]).event;var f=Object.keys(r).find((function(e){return-1!==t._keys.indexOf(e)}));f?(c=14!==u?r[f]:{readAllC2CMessage:r[f],groupMessageReadInfoList:r.groupMessageReadNotice||[]},this._eventHandlerMap.get(f)({event:u,dataList:c,isInstantMessage:a,isSyncingEnded:i,needSync:s})):Le.log("".concat(this._className,".onMessage unknown eventItem:").concat(r))}}}},{key:"_filterMessageFromIMOpenPush",value:function(e){var t=e.head,n=e.body,o=t.servcmd,a=!1;if(Ye(o)||(a=o.includes(V.NAME.IM_CONFIG_MANAGER)||o.includes(V.NAME.OVERLOAD_PUSH)||o.includes(V.NAME.STAT_SERVICE)),!a)return!0;if(o.includes(V.CMD.PUSHED_CLOUD_CONTROL_CONFIG))this._sessionModule.getModule(pn).onPushedCloudControlConfig(n);else if(o.includes(V.CMD.PUSHED_COMMERCIAL_CONFIG))this._sessionModule.getModule(_n).onPushedConfig(n);else if(o.includes(V.CMD.OVERLOAD_NOTIFY))this._sessionModule.onPushedServerOverload(n);else if(o.includes(V.CMD.KICK_OTHER)){var i=Date.now();this._sessionModule.reLoginOnKickOther();var s=new gi(Ci),r=this._sessionModule.getModule(zt).getLastWsHelloTs(),c=i-r;s.setMessage("last wshello time:".concat(r," diff:").concat(c,"ms")).setNetworkType(this._sessionModule.getNetworkType()).end()}return!1}}]),e}(),Fc=[{cmd:V.CMD.GET_GROUP_INFO,interval:1,count:20},{cmd:V.CMD.SET_GROUP_ATTRIBUTES,interval:5,count:10},{cmd:V.CMD.MODIFY_GROUP_ATTRIBUTES,interval:5,count:10},{cmd:V.CMD.DELETE_GROUP_ATTRIBUTES,interval:5,count:10},{cmd:V.CMD.CLEAR_GROUP_ATTRIBUTES,interval:5,count:10},{cmd:V.CMD.GET_GROUP_ATTRIBUTES,interval:5,count:20},{cmd:V.CMD.SET_ALL_MESSAGE_READ,interval:1,count:1}],Bc=function(e){l(n,e);var t=y(n);function n(e){var o;return a(this,n),(o=t.call(this,e))._className="SessionModule",o._platform=o.getPlatform(),o._protocolHandler=new Gc(_(o)),o._messageDispatcher=new Uc(_(o)),o._commandFrequencyLimitMap=new Map,o._commandRequestInfoMap=new Map,o._serverOverloadInfoMap=new Map,o._init(),o.getInnerEmitterInstance().on(yr,o._onCloudConfigUpdated,_(o)),o}return s(n,[{key:"_init",value:function(){this._updateCommandFrequencyLimitMap(Fc)}},{key:"_onCloudConfigUpdated",value:function(){var e=this.getCloudConfig("cmd_frequency_limit");Ye(e)||(e=JSON.parse(e),this._updateCommandFrequencyLimitMap(e))}},{key:"_updateCommandFrequencyLimitMap",value:function(e){var t=this;e.forEach((function(e){t._commandFrequencyLimitMap.set(e.cmd,{interval:e.interval,count:e.count})}))}},{key:"updateProtocolConfig",value:function(){this._protocolHandler.update()}},{key:"request",value:function(e){Le.debug("".concat(this._className,".request options:"),e);var t=e.protocolName,n=e.tjgID;if(!this._protocolHandler.has(t))return Le.warn("".concat(this._className,".request unknown protocol:").concat(t)),hr({code:Uo.CANNOT_FIND_PROTOCOL,message:Ya});var o=this.getProtocolData(e),a=o.head.servcmd;if(this._isFrequencyOverLimit(a))return hr({code:Uo.OVER_FREQUENCY_LIMIT,message:Qa});if(this._isServerOverload(a))return hr({code:Uo.OPEN_SERVICE_OVERLOAD_ERROR,message:Za});Pt(n)||(o.head.tjgID=n);var i=this.getModule(dn);return $c.includes(t)?i.simplySend(o):i.send(o)}},{key:"getKeyMap",value:function(e){return this._protocolHandler.getKeyMap(e)}},{key:"genCommonHead",value:function(){var e=this.getModule(tn);return{ver:"v4",platform:this._platform,websdkappid:$,websdkversion:G,a2:e.getA2Key()||void 0,tinyid:e.getTinyID()||void 0,status_instid:e.getStatusInstanceID(),sdkappid:e.getSDKAppID(),contenttype:e.getContentType(),reqtime:0,identifier:e.getA2Key()?void 0:e.getUserID(),usersig:e.getA2Key()?void 0:e.getUserSig(),sdkability:51,tjgID:""}}},{key:"genCosSpecifiedHead",value:function(){var e=this.getModule(tn);return{ver:"v4",platform:this._platform,websdkappid:$,websdkversion:G,sdkappid:e.getSDKAppID(),contenttype:e.getContentType(),reqtime:0,identifier:e.getUserID(),usersig:e.getUserSig(),status_instid:e.getStatusInstanceID(),sdkability:51}}},{key:"genSSOReportHead",value:function(){var e=this.getModule(tn);return{ver:"v4",platform:this._platform,websdkappid:$,websdkversion:G,sdkappid:e.getSDKAppID(),contenttype:"",reqtime:0,identifier:"",usersig:"",status_instid:e.getStatusInstanceID(),sdkability:51}}},{key:"getProtocolData",value:function(e){return this._protocolHandler.getProtocolData(e)}},{key:"onErrorCodeNotZero",value:function(e){var t=e.errorCode;if(t===Uo.HELLO_ANSWER_KICKED_OUT){var n=e.kickType,o=e.newInstanceInfo,a=void 0===o?{}:o;1===n?this.onMultipleAccountKickedOut(a):2===n&&this.onMultipleDeviceKickedOut(a)}t!==Uo.MESSAGE_A2KEY_EXPIRED&&t!==Uo.ACCOUNT_A2KEY_EXPIRED||(this._onUserSigExpired(),this.getModule(dn).reConnect())}},{key:"onMessage",value:function(e){var t=e.body,n=t.needAck,o=void 0===n?0:n,a=t.sessionData;1===o&&this._sendACK(a),this._messageDispatcher.onMessage(e)}},{key:"onReconnected",value:function(){this._reLoginOnReconnected()}},{key:"reLoginOnKickOther",value:function(){Le.log("".concat(this._className,".reLoginOnKickOther")),this._reLogin()}},{key:"_reLoginOnReconnected",value:function(){Le.log("".concat(this._className,"._reLoginOnReconnected")),this._reLogin()}},{key:"_reLogin",value:function(){var e=this;this.isLoggedIn()&&this.request({protocolName:yn}).then((function(t){var n=t.data.instanceID;e.getModule(tn).setStatusInstanceID(n),Le.log("".concat(e._className,"._reLogin ok. start to sync unread messages")),e.getModule(un).startSyncOnReconnected(),e.getModule(hn).startPull(),e.getModule(Xt).updateLocalMainSequenceOnReconnected()}))}},{key:"onMultipleAccountKickedOut",value:function(e){this.getModule(zt).onMultipleAccountKickedOut(e)}},{key:"onMultipleDeviceKickedOut",value:function(e){this.getModule(zt).onMultipleDeviceKickedOut(e)}},{key:"_onUserSigExpired",value:function(){this.getModule(zt).onUserSigExpired()}},{key:"_sendACK",value:function(e){this.request({protocolName:Ao,requestData:{sessionData:e}})}},{key:"_isFrequencyOverLimit",value:function(e){var t=e.split(".")[1];if(!this._commandFrequencyLimitMap.has(t))return!1;if(!this._commandRequestInfoMap.has(t))return this._commandRequestInfoMap.set(t,{startTime:Date.now(),requestCount:1}),!1;var n=this._commandFrequencyLimitMap.get(t),o=n.count,a=n.interval,i=this._commandRequestInfoMap.get(t),s=i.startTime,r=i.requestCount;if(Date.now()-s>1e3*a)return this._commandRequestInfoMap.set(t,{startTime:Date.now(),requestCount:1}),!1;r+=1,this._commandRequestInfoMap.set(t,{startTime:s,requestCount:r});var c=!1;return r>o&&(c=!0),c}},{key:"_isServerOverload",value:function(e){if(!this._serverOverloadInfoMap.has(e))return!1;var t=this._serverOverloadInfoMap.get(e),n=t.overloadTime,o=t.waitingTime,a=!1;return Date.now()-n<=1e3*o?a=!0:(this._serverOverloadInfoMap.delete(e),a=!1),a}},{key:"onPushedServerOverload",value:function(e){var t=e.overloadCommand,n=e.waitingTime;this._serverOverloadInfoMap.set(t,{overloadTime:Date.now(),waitingTime:n}),Le.warn("".concat(this._className,".onPushedServerOverload waitingTime:").concat(n,"s"))}},{key:"reset",value:function(){Le.log("".concat(this._className,".reset")),this._updateCommandFrequencyLimitMap(Fc),this._commandRequestInfoMap.clear(),this._serverOverloadInfoMap.clear()}}]),n}(vn),jc=function(e){l(n,e);var t=y(n);function n(e){var o;return a(this,n),(o=t.call(this,e))._className="MessageLossDetectionModule",o._maybeLostSequencesMap=new Map,o}return s(n,[{key:"onMessageMaybeLost",value:function(e,t,n){this._maybeLostSequencesMap.has(e)||this._maybeLostSequencesMap.set(e,[]);for(var o=this._maybeLostSequencesMap.get(e),a=0;a<n;a++)o.push(t+a);Le.debug("".concat(this._className,".onMessageMaybeLost. maybeLostSequences:").concat(o))}},{key:"detectMessageLoss",value:function(e,t){var n=this._maybeLostSequencesMap.get(e);if(!Pt(n)&&!Pt(t)){var o=t.filter((function(e){return-1!==n.indexOf(e)}));if(Le.debug("".concat(this._className,".detectMessageLoss. matchedSequences:").concat(o)),n.length===o.length)Le.info("".concat(this._className,".detectMessageLoss no message loss. conversationID:").concat(e));else{var a,i=n.filter((function(e){return-1===o.indexOf(e)})),s=i.length;s<=5?a=e+"-"+i.join("-"):(i.sort((function(e,t){return e-t})),a=e+" start:"+i[0]+" end:"+i[s-1]+" count:"+s),new gi(Es).setMessage(a).setNetworkType(this.getNetworkType()).setLevel("warning").end(),Le.warn("".concat(this._className,".detectMessageLoss message loss detected. conversationID:").concat(e," lostSequences:").concat(i))}n.length=0}}},{key:"reset",value:function(){Le.log("".concat(this._className,".reset")),this._maybeLostSequencesMap.clear()}}]),n}(vn),qc=function(e){l(n,e);var t=y(n);function n(e){var o;return a(this,n),(o=t.call(this,e))._className="CloudControlModule",o._cloudConfig=new Map,o._expiredTime=0,o._version=0,o._isFetching=!1,o}return s(n,[{key:"getCloudConfig",value:function(e){return Ye(e)?this._cloudConfig:this._cloudConfig.has(e)?this._cloudConfig.get(e):void 0}},{key:"_canFetchConfig",value:function(){return this.isLoggedIn()&&!this._isFetching&&Date.now()>=this._expiredTime}},{key:"fetchConfig",value:function(){var e=this,t=this._canFetchConfig();if(Le.log("".concat(this._className,".fetchConfig canFetchConfig:").concat(t)),t){var n=new gi(Gs),o=this.getModule(tn).getSDKAppID();this._isFetching=!0,this.request({protocolName:Lo,requestData:{SDKAppID:o,version:this._version}}).then((function(t){e._isFetching=!1,n.setMessage("version:".concat(e._version," newVersion:").concat(t.data.version," config:").concat(t.data.cloudControlConfig)).setNetworkType(e.getNetworkType()).end(),Le.log("".concat(e._className,".fetchConfig ok")),e._parseCloudControlConfig(t.data)})).catch((function(t){e._isFetching=!1,e.probeNetwork().then((function(e){var o=M(e,2),a=o[0],i=o[1];n.setError(t,a,i).end()})),Le.log("".concat(e._className,".fetchConfig failed. error:"),t),e._setExpiredTimeOnResponseError(12e4)}))}}},{key:"onPushedCloudControlConfig",value:function(e){Le.log("".concat(this._className,".onPushedCloudControlConfig")),new gi($s).setNetworkType(this.getNetworkType()).setMessage("newVersion:".concat(e.version," config:").concat(e.cloudControlConfig)).end(),this._parseCloudControlConfig(e)}},{key:"onCheckTimer",value:function(e){this._canFetchConfig()&&this.fetchConfig()}},{key:"_parseCloudControlConfig",value:function(e){var t=this,n="".concat(this._className,"._parseCloudControlConfig"),o=e.errorCode,a=e.errorMessage,i=e.cloudControlConfig,s=e.version,r=e.expiredTime;if(0===o){if(this._version!==s){var c=null;try{c=JSON.parse(i)}catch(f){Le.error("".concat(n," JSON parse error:").concat(i))}c&&(this._cloudConfig.clear(),Object.keys(c).forEach((function(e){t._cloudConfig.set(e,c[e])})),this._version=s,this.emitInnerEvent(yr))}this._expiredTime=Date.now()+1e3*r}else Ye(o)?(Le.log("".concat(n," failed. Invalid message format:"),e),this._setExpiredTimeOnResponseError(36e5)):(Le.error("".concat(n," errorCode:").concat(o," errorMessage:").concat(a)),this._setExpiredTimeOnResponseError(12e4))}},{key:"_setExpiredTimeOnResponseError",value:function(e){this._expiredTime=Date.now()+e}},{key:"reset",value:function(){Le.log("".concat(this._className,".reset")),this._cloudConfig.clear(),this._expiredTime=0,this._version=0,this._isFetching=!1}}]),n}(vn),Hc=function(e){l(n,e);var t=y(n);function n(e){var o;return a(this,n),(o=t.call(this,e))._className="PullGroupMessageModule",o._remoteLastMessageSequenceMap=new Map,o.PULL_LIMIT_COUNT=15,o}return s(n,[{key:"startPull",value:function(){var e=this,t=this._getNeedPullConversationList();this._getRemoteLastMessageSequenceList().then((function(){var n=e.getModule(en);t.forEach((function(t){var o=t.conversationID,a=o.replace(E.CONV_GROUP,""),i=n.getGroupLocalLastMessageSequence(o),s=e._remoteLastMessageSequenceMap.get(a)||0,r=s-i;Le.log("".concat(e._className,".startPull groupID:").concat(a," localLastMessageSequence:").concat(i," ")+"remoteLastMessageSequence:".concat(s," diff:").concat(r)),i>0&&r>=1&&r<300&&e._pullMissingMessage({groupID:a,localLastMessageSequence:i,remoteLastMessageSequence:s,diff:r})}))}))}},{key:"_getNeedPullConversationList",value:function(){return this.getModule(en).getLocalConversationList().filter((function(e){return e.type===E.CONV_GROUP&&e.groupProfile.type!==E.GRP_AVCHATROOM}))}},{key:"_getRemoteLastMessageSequenceList",value:function(){var e=this;return this.getModule(Xt).getGroupList().then((function(t){for(var n=t.data.groupList,o=void 0===n?[]:n,a=0;a<o.length;a++){var i=o[a],s=i.groupID,r=i.nextMessageSeq;if(i.type!==E.GRP_AVCHATROOM){var c=r-1;e._remoteLastMessageSequenceMap.set(s,c)}}}))}},{key:"_pullMissingMessage",value:function(e){var t=this,n=e.localLastMessageSequence,o=e.remoteLastMessageSequence,a=e.diff;e.count=a>this.PULL_LIMIT_COUNT?this.PULL_LIMIT_COUNT:a,e.sequence=a>this.PULL_LIMIT_COUNT?n+this.PULL_LIMIT_COUNT:n+a,this._getGroupMissingMessage(e).then((function(i){i.length>0&&(i[0].sequence+1<=o&&(e.localLastMessageSequence=n+t.PULL_LIMIT_COUNT,e.diff=a-t.PULL_LIMIT_COUNT,t._pullMissingMessage(e)),t.getModule(Xt).onNewGroupMessage({dataList:i,isInstantMessage:!1}))}))}},{key:"_getGroupMissingMessage",value:function(e){var t=this,n=new gi(ds);return this.request({protocolName:io,requestData:{groupID:e.groupID,count:e.count,sequence:e.sequence}}).then((function(o){var a=o.data.messageList,i=void 0===a?[]:a;return n.setNetworkType(t.getNetworkType()).setMessage("groupID:".concat(e.groupID," count:").concat(e.count," sequence:").concat(e.sequence," messageList length:").concat(i.length)).end(),i})).catch((function(e){t.probeNetwork().then((function(t){var o=M(t,2),a=o[0],i=o[1];n.setError(e,a,i).end()}))}))}},{key:"reset",value:function(){Le.log("".concat(this._className,".reset")),this._remoteLastMessageSequenceMap.clear()}}]),n}(vn),Vc=function(){function e(){a(this,e),this._className="AvgE2EDelay",this._e2eDelayArray=[]}return s(e,[{key:"addMessageDelay",value:function(e){var t=Ae()-e;t>=0&&this._e2eDelayArray.push(t)}},{key:"_calcAvg",value:function(e,t){if(0===t)return 0;var n=0;return e.forEach((function(e){n+=e})),Et(n/t,1)}},{key:"_calcCountWithLimit",value:function(e){var t=e.e2eDelayArray,n=e.min,o=e.max;return t.filter((function(e){return n<=e&&e<o})).length}},{key:"_calcPercent",value:function(e,t){var n=Et(e/t*100,2);return n>100&&(n=100),n}},{key:"_checkE2EDelayException",value:function(e,t){var n=e.filter((function(e){return e>t}));if(n.length>0){var o=n.length,a=Math.min.apply(Math,C(n)),i=Math.max.apply(Math,C(n)),s=this._calcAvg(n,o),r=Et(o/e.length*100,2);r>50&&new gi(qi).setMessage("message e2e delay exception. count:".concat(o," min:").concat(a," max:").concat(i," avg:").concat(s," percent:").concat(r)).setLevel("warning").end()}}},{key:"getStatResult",value:function(){var e=this._e2eDelayArray.length;if(0===e)return null;var t=C(this._e2eDelayArray),n=this._calcCountWithLimit({e2eDelayArray:t,min:0,max:1}),o=this._calcCountWithLimit({e2eDelayArray:t,min:1,max:3}),a=this._calcPercent(n,e),i=this._calcPercent(o,e),s=this._calcAvg(t,e);return this._checkE2EDelayException(t,3),t.length=0,this.reset(),{totalCount:e,countLessThan1Second:n,percentOfCountLessThan1Second:a,countLessThan3Second:o,percentOfCountLessThan3Second:i,avgDelay:s}}},{key:"reset",value:function(){this._e2eDelayArray.length=0}}]),e}(),Kc=function(){function e(){a(this,e),this._className="AvgRTT",this._requestCount=0,this._rttArray=[]}return s(e,[{key:"addRequestCount",value:function(){this._requestCount+=1}},{key:"addRTT",value:function(e){this._rttArray.push(e)}},{key:"_calcTotalCount",value:function(){return this._requestCount}},{key:"_calcRTTCount",value:function(e){return e.length}},{key:"_calcSuccessRateOfRequest",value:function(e,t){if(0===t)return 0;var n=Et(e/t*100,2);return n>100&&(n=100),n}},{key:"_calcAvg",value:function(e,t){if(0===t)return 0;var n=0;return e.forEach((function(e){n+=e})),parseInt(n/t)}},{key:"_calcMax",value:function(){return Math.max.apply(Math,C(this._rttArray))}},{key:"_calcMin",value:function(){return Math.min.apply(Math,C(this._rttArray))}},{key:"getStatResult",value:function(){var e=this._calcTotalCount(),t=C(this._rttArray);if(0===e)return null;var n=this._calcRTTCount(t),o=this._calcSuccessRateOfRequest(n,e),a=this._calcAvg(t,n);return Le.log("".concat(this._className,".getStatResult max:").concat(this._calcMax()," min:").concat(this._calcMin()," avg:").concat(a)),this.reset(),{totalCount:e,rttCount:n,successRateOfRequest:o,avgRTT:a}}},{key:"reset",value:function(){this._requestCount=0,this._rttArray.length=0}}]),e}(),zc=function(){function e(){a(this,e),this._map=new Map}return s(e,[{key:"initMap",value:function(e){var t=this;e.forEach((function(e){t._map.set(e,{totalCount:0,successCount:0,failedCountOfUserSide:0,costArray:[],fileSizeArray:[]})}))}},{key:"addTotalCount",value:function(e){return!(Ye(e)||!this._map.has(e))&&(this._map.get(e).totalCount+=1,!0)}},{key:"addSuccessCount",value:function(e){return!(Ye(e)||!this._map.has(e))&&(this._map.get(e).successCount+=1,!0)}},{key:"addFailedCountOfUserSide",value:function(e){return!(Ye(e)||!this._map.has(e))&&(this._map.get(e).failedCountOfUserSide+=1,!0)}},{key:"addCost",value:function(e,t){return!(Ye(e)||!this._map.has(e))&&(this._map.get(e).costArray.push(t),!0)}},{key:"addFileSize",value:function(e,t){return!(Ye(e)||!this._map.has(e))&&(this._map.get(e).fileSizeArray.push(t),!0)}},{key:"_calcSuccessRateOfBusiness",value:function(e){if(Ye(e)||!this._map.has(e))return-1;var t=this._map.get(e),n=Et(t.successCount/t.totalCount*100,2);return n>100&&(n=100),n}},{key:"_calcSuccessRateOfPlatform",value:function(e){if(Ye(e)||!this._map.has(e))return-1;var t=this._map.get(e),n=this._calcSuccessCountOfPlatform(e)/t.totalCount*100;return(n=Et(n,2))>100&&(n=100),n}},{key:"_calcTotalCount",value:function(e){return Ye(e)||!this._map.has(e)?-1:this._map.get(e).totalCount}},{key:"_calcSuccessCountOfBusiness",value:function(e){return Ye(e)||!this._map.has(e)?-1:this._map.get(e).successCount}},{key:"_calcSuccessCountOfPlatform",value:function(e){if(Ye(e)||!this._map.has(e))return-1;var t=this._map.get(e);return t.successCount+t.failedCountOfUserSide}},{key:"_calcAvg",value:function(e){return Ye(e)||!this._map.has(e)?-1:e===si?this._calcAvgSpeed(e):this._calcAvgCost(e)}},{key:"_calcAvgCost",value:function(e){var t=this._map.get(e).costArray.length;if(0===t)return 0;var n=0;return this._map.get(e).costArray.forEach((function(e){n+=e})),parseInt(n/t)}},{key:"_calcAvgSpeed",value:function(e){var t=0,n=0;return this._map.get(e).costArray.forEach((function(e){t+=e})),this._map.get(e).fileSizeArray.forEach((function(e){n+=e})),parseInt(1e3*n/t)}},{key:"getStatResult",value:function(e){var t=this._calcTotalCount(e);if(0===t)return null;var n=this._calcSuccessCountOfBusiness(e),o=this._calcSuccessRateOfBusiness(e),a=this._calcSuccessCountOfPlatform(e),i=this._calcSuccessRateOfPlatform(e),s=this._calcAvg(e);return this.reset(e),{totalCount:t,successCountOfBusiness:n,successRateOfBusiness:o,successCountOfPlatform:a,successRateOfPlatform:i,avgValue:s}}},{key:"reset",value:function(e){Ye(e)?this._map.clear():this._map.set(e,{totalCount:0,successCount:0,failedCountOfUserSide:0,costArray:[],fileSizeArray:[]})}}]),e}(),Wc=function(){function e(){a(this,e),this._lastMap=new Map,this._currentMap=new Map}return s(e,[{key:"initMap",value:function(e){var t=this;e.forEach((function(e){t._lastMap.set(e,new Map),t._currentMap.set(e,new Map)}))}},{key:"addMessageSequence",value:function(e){var t=e.key,n=e.message;if(Ye(t)||!this._lastMap.has(t)||!this._currentMap.has(t))return!1;var o=n.conversationID,a=n.sequence,i=o.replace(E.CONV_GROUP,"");if(0===this._lastMap.get(t).size)this._addCurrentMap(e);else if(this._lastMap.get(t).has(i)){var s=this._lastMap.get(t).get(i),r=s.length-1;a>s[0]&&a<s[r]?(s.push(a),s.sort(),this._lastMap.get(t).set(i,s)):this._addCurrentMap(e)}else this._addCurrentMap(e);return!0}},{key:"_addCurrentMap",value:function(e){var t=e.key,n=e.message,o=n.conversationID,a=n.sequence,i=o.replace(E.CONV_GROUP,"");this._currentMap.get(t).has(i)||this._currentMap.get(t).set(i,[]),this._currentMap.get(t).get(i).push(a)}},{key:"_copyData",value:function(e){if(!Ye(e)){this._lastMap.set(e,new Map);var t,n=this._lastMap.get(e),o=S(this._currentMap.get(e));try{for(o.s();!(t=o.n()).done;){var a=M(t.value,2),i=a[0],s=a[1];n.set(i,s)}}catch(l){o.e(l)}finally{o.f()}n=null,this._currentMap.set(e,new Map)}}},{key:"getStatResult",value:function(e){if(Ye(this._currentMap.get(e))||Ye(this._lastMap.get(e)))return null;if(0===this._lastMap.get(e).size)return this._copyData(e),null;var t=0,n=0;if(this._lastMap.get(e).forEach((function(e,o){var a=C(e.values()),i=a.length,s=a[i-1]-a[0]+1;t+=s,n+=i})),0===t)return null;var o=Et(n/t*100,2);return o>100&&(o=100),this._copyData(e),{totalCount:t,successCountOfMessageReceived:n,successRateOfMessageReceived:o}}},{key:"reset",value:function(){this._currentMap.clear(),this._lastMap.clear()}}]),e}(),Yc=function(e){l(n,e);var t=y(n);function n(e){var o;a(this,n),(o=t.call(this,e))._className="QualityStatModule",o.TAG="im-ssolog-quality-stat",o.reportIndex=0,o.wholePeriod=!1,o._qualityItems=[ei,ti,ni,oi,ai,ii,si,ri,ci,ui],o._messageSentItems=[ni,oi,ai,ii,si],o._messageReceivedItems=[ri,ci,ui],o.REPORT_INTERVAL=120,o.REPORT_SDKAPPID_BLACKLIST=[],o.REPORT_TINYID_WHITELIST=[],o._statInfoArr=[],o._avgRTT=new Kc,o._avgE2EDelay=new Vc,o._rateMessageSent=new zc,o._rateMessageReceived=new Wc;var i=o.getInnerEmitterInstance();return i.on(vr,o._onLoginSuccess,_(o)),i.on(yr,o._onCloudConfigUpdated,_(o)),o}return s(n,[{key:"_onLoginSuccess",value:function(){var e=this;this._rateMessageSent.initMap(this._messageSentItems),this._rateMessageReceived.initMap(this._messageReceivedItems);var t=this.getModule(nn),n=t.getItem(this.TAG,!1);!Pt(n)&&Xe(n.forEach)&&(Le.log("".concat(this._className,"._onLoginSuccess.get quality stat log in storage, nums=").concat(n.length)),n.forEach((function(t){e._statInfoArr.push(t)})),t.removeItem(this.TAG,!1))}},{key:"_onCloudConfigUpdated",value:function(){var e=this.getCloudConfig("q_rpt_interval"),t=this.getCloudConfig("q_rpt_sdkappid_bl"),n=this.getCloudConfig("q_rpt_tinyid_wl");Ye(e)||(this.REPORT_INTERVAL=Number(e)),Ye(t)||(this.REPORT_SDKAPPID_BLACKLIST=t.split(",").map((function(e){return Number(e)}))),Ye(n)||(this.REPORT_TINYID_WHITELIST=n.split(","))}},{key:"onCheckTimer",value:function(e){this.isLoggedIn()&&e%this.REPORT_INTERVAL==0&&(this.wholePeriod=!0,this._report())}},{key:"addRequestCount",value:function(){this._avgRTT.addRequestCount()}},{key:"addRTT",value:function(e){this._avgRTT.addRTT(e)}},{key:"addMessageDelay",value:function(e){this._avgE2EDelay.addMessageDelay(e)}},{key:"addTotalCount",value:function(e){this._rateMessageSent.addTotalCount(e)||Le.warn("".concat(this._className,".addTotalCount invalid key:"),e)}},{key:"addSuccessCount",value:function(e){this._rateMessageSent.addSuccessCount(e)||Le.warn("".concat(this._className,".addSuccessCount invalid key:"),e)}},{key:"addFailedCountOfUserSide",value:function(e){this._rateMessageSent.addFailedCountOfUserSide(e)||Le.warn("".concat(this._className,".addFailedCountOfUserSide invalid key:"),e)}},{key:"addCost",value:function(e,t){this._rateMessageSent.addCost(e,t)||Le.warn("".concat(this._className,".addCost invalid key or cost:"),e,t)}},{key:"addFileSize",value:function(e,t){this._rateMessageSent.addFileSize(e,t)||Le.warn("".concat(this._className,".addFileSize invalid key or size:"),e,t)}},{key:"addMessageSequence",value:function(e){this._rateMessageReceived.addMessageSequence(e)||Le.warn("".concat(this._className,".addMessageSequence invalid key:"),e.key)}},{key:"_getQualityItem",value:function(e){var t={},n=fi[this.getNetworkType()];Ye(n)&&(n=8);var o={qualityType:li[e],timestamp:De(),networkType:n,extension:""};switch(e){case ei:t=this._avgRTT.getStatResult();break;case ti:t=this._avgE2EDelay.getStatResult();break;case ni:case oi:case ai:case ii:case si:t=this._rateMessageSent.getStatResult(e);break;case ri:case ci:case ui:t=this._rateMessageReceived.getStatResult(e)}return null===t?null:u({},o,{},t)}},{key:"_report",value:function(e){var t=this,n=[],o=null;Ye(e)?this._qualityItems.forEach((function(e){null!==(o=t._getQualityItem(e))&&(o.reportIndex=t.reportIndex,o.wholePeriod=t.wholePeriod,n.push(o))})):null!==(o=this._getQualityItem(e))&&(o.reportIndex=this.reportIndex,o.wholePeriod=this.wholePeriod,n.push(o)),Le.debug("".concat(this._className,"._report"),n),this._statInfoArr.length>0&&(n=n.concat(this._statInfoArr),this._statInfoArr=[]);var a=this.getModule(tn),i=a.getSDKAppID(),s=a.getTinyID();At(this.REPORT_SDKAPPID_BLACKLIST,i)&&!Nt(this.REPORT_TINYID_WHITELIST,s)&&(n=[]),n.length>0&&this._doReport(n)}},{key:"_doReport",value:function(e){var t=this,n={header:sc(this),quality:e};this.request({protocolName:ko,requestData:u({},n)}).then((function(){t.reportIndex++,t.wholePeriod=!1})).catch((function(n){Le.warn("".concat(t._className,"._doReport, online:").concat(t.getNetworkType()," error:"),n),t._statInfoArr=t._statInfoArr.concat(e),t._flushAtOnce()}))}},{key:"_flushAtOnce",value:function(){var e=this.getModule(nn),t=e.getItem(this.TAG,!1),n=this._statInfoArr;if(Pt(t))Le.log("".concat(this._className,"._flushAtOnce count:").concat(n.length)),e.setItem(this.TAG,n,!0,!1);else{var o=n.concat(t);o.length>10&&(o=o.slice(0,10)),Le.log("".concat(this.className,"._flushAtOnce count:").concat(o.length)),e.setItem(this.TAG,o,!0,!1)}this._statInfoArr=[]}},{key:"reset",value:function(){Le.log("".concat(this._className,".reset")),this._report(),this.reportIndex=0,this.wholePeriod=!1,this.REPORT_SDKAPPID_BLACKLIST=[],this.REPORT_TINYID_WHITELIST=[],this._avgRTT.reset(),this._avgE2EDelay.reset(),this._rateMessageSent.reset(),this._rateMessageReceived.reset()}}]),n}(vn),Jc=function(e){l(n,e);var t=y(n);function n(e){var o;return a(this,n),(o=t.call(this,e))._className="WorkerTimerModule",o._isWorkerEnabled=!0,o._workerTimer=null,o._init(),o.getInnerEmitterInstance().on(yr,o._onCloudConfigUpdated,_(o)),o}return s(n,[{key:"isWorkerEnabled",value:function(){return this._isWorkerEnabled&&Ce}},{key:"startWorkerTimer",value:function(){Le.log("".concat(this._className,".startWorkerTimer")),this._workerTimer&&this._workerTimer.postMessage("start")}},{key:"stopWorkerTimer",value:function(){Le.log("".concat(this._className,".stopWorkerTimer")),this._workerTimer&&this._workerTimer.postMessage("stop")}},{key:"_init",value:function(){if(Ce){var e=URL.createObjectURL(new Blob(['let interval = -1;onmessage = function(event) {  if (event.data === "start") {    if (interval > 0) {      clearInterval(interval);    }    interval = setInterval(() => {      postMessage("");    }, 1000)  } else if (event.data === "stop") {    clearInterval(interval);    interval = -1;  }};'],{type:"application/javascript; charset=utf-8"}));this._workerTimer=new Worker(e);var t=this;this._workerTimer.onmessage=function(){t._moduleManager.onCheckTimer()}}}},{key:"_onCloudConfigUpdated",value:function(){var e=this.getCloudConfig("enable_worker");Le.log("".concat(this._className,"._onCloudConfigUpdated enableWorker:").concat(e)),"1"===e?!this._isWorkerEnabled&&Ce&&(this._isWorkerEnabled=!0,this.startWorkerTimer(),this._moduleManager.onWorkerTimerEnabled()):this._isWorkerEnabled&&Ce&&(this._isWorkerEnabled=!1,this.stopWorkerTimer(),this._moduleManager.onWorkerTimerDisabled())}},{key:"terminate",value:function(){Le.log("".concat(this._className,".terminate")),this._workerTimer&&(this._workerTimer.terminate(),this._workerTimer=null)}},{key:"reset",value:function(){Le.log("".concat(this._className,".reset"))}}]),n}(vn),Xc=function(){function e(){a(this,e),this._className="PurchasedFeatureHandler",this._purchasedFeatureMap=new Map}return s(e,[{key:"isValidPurchaseBits",value:function(e){return e&&"string"==typeof e&&e.length>=1&&e.length<=64&&/[01]{1,64}/.test(e)}},{key:"parsePurchaseBits",value:function(e){var t="".concat(this._className,".parsePurchaseBits");if(this.isValidPurchaseBits(e)){this._purchasedFeatureMap.clear();for(var n=Object.values(K),o=null,a=e.length-1,i=0;a>=0;a--,i++)o=i<32?new L(0,Math.pow(2,i)).toString():new L(Math.pow(2,i-32),0).toString(),-1!==n.indexOf(o)&&("1"===e[a]?this._purchasedFeatureMap.set(o,!0):this._purchasedFeatureMap.set(o,!1))}else Le.warn("".concat(t," invalid purchase bits:").concat(e))}},{key:"hasPurchasedFeature",value:function(e){return!!this._purchasedFeatureMap.get(e)}},{key:"clear",value:function(){this._purchasedFeatureMap.clear()}}]),e}(),Qc=function(e){l(n,e);var t=y(n);function n(e){var o;return a(this,n),(o=t.call(this,e))._className="CommercialConfigModule",o._expiredTime=0,o._isFetching=!1,o._purchasedFeatureHandler=new Xc,o}return s(n,[{key:"_canFetch",value:function(){return this.isLoggedIn()?!this._isFetching&&Date.now()>=this._expiredTime:(this._expiredTime=Date.now()+2e3,!1)}},{key:"onCheckTimer",value:function(e){this._canFetch()&&this.fetchConfig()}},{key:"fetchConfig",value:function(){var e=this,t=this._canFetch(),n="".concat(this._className,".fetchConfig");if(Le.log("".concat(n," canFetch:").concat(t)),t){var o=new gi(Us);o.setNetworkType(this.getNetworkType());var a=this.getModule(tn).getSDKAppID();this._isFetching=!0,this.request({protocolName:xo,requestData:{SDKAppID:a}}).then((function(t){o.setMessage("purchaseBits:".concat(t.data.purchaseBits)).end(),Le.log("".concat(n," ok.")),e._parseConfig(t.data),e._isFetching=!1})).catch((function(t){e.probeNetwork().then((function(e){var n=M(e,2),a=n[0],i=n[1];o.setError(t,a,i).end()})),e._isFetching=!1}))}}},{key:"onPushedConfig",value:function(e){var t="".concat(this._className,".onPushedConfig");Le.log("".concat(t)),new gi(Fs).setNetworkType(this.getNetworkType()).setMessage("purchaseBits:".concat(e.purchaseBits)).end(),this._parseConfig(e)}},{key:"_parseConfig",value:function(e){var t="".concat(this._className,"._parseConfig"),n=e.errorCode,o=e.errorMessage,a=e.purchaseBits,i=e.expiredTime;0===n?(this._purchasedFeatureHandler.parsePurchaseBits(a),this._expiredTime=Date.now()+1e3*i):Ye(n)?(Le.log("".concat(t," failed. Invalid message format:"),e),this._setExpiredTimeOnResponseError(36e5)):(Le.error("".concat(t," errorCode:").concat(n," errorMessage:").concat(o)),this._setExpiredTimeOnResponseError(12e4))}},{key:"_setExpiredTimeOnResponseError",value:function(e){this._expiredTime=Date.now()+e}},{key:"hasPurchasedFeature",value:function(e){return this._purchasedFeatureHandler.hasPurchasedFeature(e)}},{key:"reset",value:function(){Le.log("".concat(this._className,".reset")),this._expiredTime=0,this._isFetching=!1,this._purchasedFeatureHandler.clear()}}]),n}(vn),Zc=function(){function e(t){a(this,e);var n=new gi(hi);this._className="ModuleManager",this._isReady=!1,this._startLoginTs=0,this._moduleMap=new Map,this._innerEmitter=null,this._outerEmitter=null,this._checkCount=0,this._checkTimer=-1,this._moduleMap.set(tn,new tc(this,t)),this._moduleMap.set(_n,new Qc(this)),this._moduleMap.set(pn,new qc(this)),this._moduleMap.set(gn,new Jc(this)),this._moduleMap.set(mn,new Yc(this)),this._moduleMap.set(dn,new xc(this)),this._moduleMap.set(ln,new Bc(this)),this._moduleMap.set(zt,new nc(this)),this._moduleMap.set(Wt,new _c(this)),this._moduleMap.set(Yt,new ec(this)),this._moduleMap.set(Jt,new mr(this)),this._moduleMap.set(en,new Gr(this)),this._moduleMap.set(Xt,new Wr(this)),this._moduleMap.set(Zt,new Jr(this)),this._moduleMap.set(nn,new ac(this)),this._moduleMap.set(on,new rc(this)),this._moduleMap.set(an,new lc(this)),this._moduleMap.set(sn,new fc(this)),this._moduleMap.set(rn,new pc(this)),this._moduleMap.set(cn,new vc(this)),this._moduleMap.set(un,new yc(this)),this._moduleMap.set(fn,new jc(this)),this._moduleMap.set(hn,new Hc(this)),this._eventThrottleMap=new Map;var o=t.instanceID,i=t.oversea,s=t.SDKAppID,r="instanceID:".concat(o," SDKAppID:").concat(s," host:").concat(Tt()," oversea:").concat(i," inBrowser:").concat(ae," inMiniApp:").concat(oe)+" workerAvailable:".concat(Ce," UserAgent:").concat(re);gi.bindEventStatModule(this._moduleMap.get(on)),n.setMessage("".concat(r," ").concat(function(){var e="";if(oe)try{var t=ie.getSystemInfoSync(),n=t.model,o=t.version,a=t.system,i=t.platform,s=t.SDKVersion;e="model:".concat(n," version:").concat(o," system:").concat(a," platform:").concat(i," SDKVersion:").concat(s)}catch(r){e=""}return e}())).end(),Le.info("SDK ".concat(r)),this._readyList=void 0,this._ssoLogForReady=null,this._initReadyList()}return s(e,[{key:"_startTimer",value:function(){var e=this._moduleMap.get(gn),t=e.isWorkerEnabled();Le.log("".concat(this._className,".startTimer isWorkerEnabled:").concat(t," seed:").concat(this._checkTimer)),t?e.startWorkerTimer():this._startMainThreadTimer()}},{key:"_startMainThreadTimer",value:function(){Le.log("".concat(this._className,"._startMainThreadTimer")),this._checkTimer<0&&(this._checkTimer=setInterval(this.onCheckTimer.bind(this),1e3))}},{key:"stopTimer",value:function(){var e=this._moduleMap.get(gn),t=e.isWorkerEnabled();Le.log("".concat(this._className,".stopTimer isWorkerEnabled:").concat(t," seed:").concat(this._checkTimer)),t?e.stopWorkerTimer():this._stopMainThreadTimer()}},{key:"_stopMainThreadTimer",value:function(){Le.log("".concat(this._className,"._stopMainThreadTimer")),this._checkTimer>0&&(clearInterval(this._checkTimer),this._checkTimer=-1,this._checkCount=0)}},{key:"_stopMainThreadSocket",value:function(){Le.log("".concat(this._className,"._stopMainThreadSocket"));var e=this._moduleMap.get(dn);e.setIsWorkerEnabled(!0),e.reConnect()}},{key:"_startMainThreadSocket",value:function(){Le.log("".concat(this._className,"._startMainThreadSocket"));var e=this._moduleMap.get(dn);e.setIsWorkerEnabled(!1),e.reConnect()}},{key:"onWorkerTimerEnabled",value:function(){Le.log("".concat(this._className,".onWorkerTimerEnabled, disable main thread timer and socket")),this._stopMainThreadTimer(),this._stopMainThreadSocket()}},{key:"onWorkerTimerDisabled",value:function(){Le.log("".concat(this._className,".onWorkerTimerDisabled, enable main thread timer and socket")),this._startMainThreadTimer(),this._startMainThreadSocket()}},{key:"onCheckTimer",value:function(){this._checkCount+=1;var e,t=S(this._moduleMap);try{for(t.s();!(e=t.n()).done;){var n=M(e.value,2)[1];n.onCheckTimer&&n.onCheckTimer(this._checkCount)}}catch(s){t.e(s)}finally{t.f()}}},{key:"_initReadyList",value:function(){var e=this;this._readyList=[this._moduleMap.get(zt),this._moduleMap.get(en)],this._readyList.forEach((function(t){t.ready((function(){return e._onModuleReady()}))}))}},{key:"_onModuleReady",value:function(){var e=!0;if(this._readyList.forEach((function(t){t.isReady()||(e=!1)})),e&&!this._isReady){this._isReady=!0,this._outerEmitter.emit(D.SDK_READY);var t=Date.now()-this._startLoginTs;Le.warn("SDK is ready. cost ".concat(t," ms")),this._startLoginTs=Date.now();var n=this._moduleMap.get(an).getNetworkType(),o=this._ssoLogForReady.getStartTs()+Se;this._ssoLogForReady.setNetworkType(n).setMessage(t).start(o).end()}}},{key:"login",value:function(){0===this._startLoginTs&&(Ee(),this._startLoginTs=Date.now(),this._startTimer(),this._moduleMap.get(an).start(),this._ssoLogForReady=new gi(mi))}},{key:"onLoginFailed",value:function(){this._startLoginTs=0}},{key:"getOuterEmitterInstance",value:function(){return null===this._outerEmitter&&(this._outerEmitter=new dc,pr(this._outerEmitter),this._outerEmitter._emit=this._outerEmitter.emit,this._outerEmitter.emit=function(e,t){var n=this;if(e===D.CONVERSATION_LIST_UPDATED||e===D.FRIEND_LIST_UPDATED||e===D.GROUP_LIST_UPDATED)if(this._eventThrottleMap.has(e)){var o=Date.now(),a=this._eventThrottleMap.get(e);o-a.last<500?(a.timeoutID&&clearTimeout(a.timeoutID),a.timeoutID=setTimeout((function(){a.last=o,n._outerEmitter._emit.apply(n._outerEmitter,[e,{name:e,data:n._getEventData(e)}])}),500)):(a.last=o,this._outerEmitter._emit.apply(this._outerEmitter,[e,{name:e,data:this._getEventData(e)}]))}else this._eventThrottleMap.set(e,{last:Date.now(),timeoutID:-1}),this._outerEmitter._emit.apply(this._outerEmitter,[e,{name:e,data:this._getEventData(e)}]);else this._outerEmitter._emit.apply(this._outerEmitter,[e,{name:e,data:arguments[1]}])}.bind(this)),this._outerEmitter}},{key:"_getEventData",value:function(e){return e===D.CONVERSATION_LIST_UPDATED?this._moduleMap.get(en).getLocalConversationList():e===D.FRIEND_LIST_UPDATED?this._moduleMap.get(Qt).getLocalFriendList(!1):e===D.GROUP_LIST_UPDATED?this._moduleMap.get(Xt).getLocalGroupList():void 0}},{key:"getInnerEmitterInstance",value:function(){return null===this._innerEmitter&&(this._innerEmitter=new dc,this._innerEmitter._emit=this._innerEmitter.emit,this._innerEmitter.emit=function(e,t){var n;ze(arguments[1])&&arguments[1].data?(Le.warn("inner eventData has data property, please check!"),n=[e,{name:arguments[0],data:arguments[1].data}]):n=[e,{name:arguments[0],data:arguments[1]}],this._innerEmitter._emit.apply(this._innerEmitter,n)}.bind(this)),this._innerEmitter}},{key:"hasModule",value:function(e){return this._moduleMap.has(e)}},{key:"getModule",value:function(e){return this._moduleMap.get(e)}},{key:"isReady",value:function(){return this._isReady}},{key:"onError",value:function(e){Le.warn("Oops! code:".concat(e.code," message:").concat(e.message)),new gi(Bs).setMessage("code:".concat(e.code," message:").concat(e.message)).setNetworkType(this.getModule(an).getNetworkType()).setLevel("error").end(),this.getOuterEmitterInstance().emit(D.ERROR,e)}},{key:"reset",value:function(){Le.log("".concat(this._className,".reset")),Ee();var e,t=S(this._moduleMap);try{for(t.s();!(e=t.n()).done;){var n=M(e.value,2)[1];n.reset&&n.reset()}}catch(u){t.e(u)}finally{t.f()}this._startLoginTs=0,this._initReadyList(),this._isReady=!1,this.stopTimer(),this._outerEmitter.emit(D.SDK_NOT_READY);var o,a=S(this._eventThrottleMap);try{for(a.s();!(o=a.n()).done;){var i=M(o.value,2)[1];i.timeoutID&&clearTimeout(i.timeoutID)}}catch(u){a.e(u)}finally{a.f()}this._eventThrottleMap.clear()}}]),e}(),eu=function(){function e(){a(this,e),this._funcMap=new Map}return s(e,[{key:"defense",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if("string"!=typeof e)return null;if(0===e.length)return null;if("function"!=typeof t)return null;if(this._funcMap.has(e)&&this._funcMap.get(e).has(t))return this._funcMap.get(e).get(t);this._funcMap.has(e)||this._funcMap.set(e,new Map);var o=null;return this._funcMap.get(e).has(t)?o=this._funcMap.get(e).get(t):(o=this._pack(e,t,n),this._funcMap.get(e).set(t,o)),o}},{key:"defenseOnce",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return"function"!=typeof t?null:this._pack(e,t,n)}},{key:"find",value:function(e,t){return"string"!=typeof e||0===e.length||"function"!=typeof t?null:this._funcMap.has(e)?this._funcMap.get(e).has(t)?this._funcMap.get(e).get(t):(Le.log("SafetyCallback.find: \u627e\u4e0d\u5230 func \u2014\u2014 ".concat(e,"/").concat(""!==t.name?t.name:"[anonymous]")),null):(Le.log("SafetyCallback.find: \u627e\u4e0d\u5230 eventName-".concat(e," \u5bf9\u5e94\u7684 func")),null)}},{key:"delete",value:function(e,t){return"function"==typeof t&&!!this._funcMap.has(e)&&!!this._funcMap.get(e).has(t)&&(this._funcMap.get(e).delete(t),0===this._funcMap.get(e).size&&this._funcMap.delete(e),!0)}},{key:"_pack",value:function(e,t,n){return function(){try{t.apply(n,Array.from(arguments))}catch(u){var o=Object.values(D).indexOf(e);if(-1!==o){var a=Object.keys(D)[o];Le.warn("\u63a5\u5165\u4fa7\u4e8b\u4ef6 TIM.EVENT.".concat(a," \u5bf9\u5e94\u7684\u56de\u8c03\u51fd\u6570\u903b\u8f91\u5b58\u5728\u95ee\u9898\uff0c\u8bf7\u68c0\u67e5\uff01"),u)}var i=new gi(xs);i.setMessage("eventName:".concat(e)).setMoreMessage(u.message).end()}}}}]),e}(),tu=function(){function e(t){a(this,e);var n={SDKAppID:t.SDKAppID,unlimitedAVChatRoom:t.unlimitedAVChatRoom||!1,scene:t.scene||"",oversea:t.oversea||!1,instanceID:bt(),devMode:t.devMode||!1,proxyServer:t.proxyServer||void 0};this._moduleManager=new Zc(n),this._safetyCallbackFactory=new eu}return s(e,[{key:"isReady",value:function(){return this._moduleManager.isReady()}},{key:"onError",value:function(e){this._moduleManager.onError(e)}},{key:"login",value:function(e){return this._moduleManager.login(),this._moduleManager.getModule(zt).login(e)}},{key:"logout",value:function(){var e=this;return this._moduleManager.getModule(zt).logout().then((function(t){return e._moduleManager.reset(),t}))}},{key:"destroy",value:function(){var e=this;return this.logout().finally((function(){e._moduleManager.stopTimer(),e._moduleManager.getModule(gn).terminate(),e._moduleManager.getModule(dn).dealloc();var t=e._moduleManager.getOuterEmitterInstance(),n=e._moduleManager.getModule(tn);t.emit(D.SDK_DESTROY,{SDKAppID:n.getSDKAppID()})}))}},{key:"on",value:function(e,t,n){e===D.GROUP_SYSTEM_NOTICE_RECEIVED&&Le.warn("\uff01\uff01\uff01TIM.EVENT.GROUP_SYSTEM_NOTICE_RECEIVED v2.6.0\u8d77\u5f03\u7528\uff0c\u4e3a\u4e86\u66f4\u597d\u7684\u4f53\u9a8c\uff0c\u8bf7\u5728 TIM.EVENT.MESSAGE_RECEIVED \u4e8b\u4ef6\u56de\u8c03\u5185\u63a5\u6536\u5904\u7406\u7fa4\u7cfb\u7edf\u901a\u77e5\uff0c\u8be6\u7ec6\u8bf7\u53c2\u8003\uff1ahttps://web.sdk.qcloud.com/im/doc/zh-cn/Message.html#.GroupSystemNoticePayload"),Le.debug("on","eventName:".concat(e)),this._moduleManager.getOuterEmitterInstance().on(e,this._safetyCallbackFactory.defense(e,t,n),n)}},{key:"once",value:function(e,t,n){Le.debug("once","eventName:".concat(e)),this._moduleManager.getOuterEmitterInstance().once(e,this._safetyCallbackFactory.defenseOnce(e,t,n),n||this)}},{key:"off",value:function(e,t,n,o){Le.debug("off","eventName:".concat(e));var a=this._safetyCallbackFactory.find(e,t);null!==a&&(this._moduleManager.getOuterEmitterInstance().off(e,a,n,o),this._safetyCallbackFactory.delete(e,t))}},{key:"registerPlugin",value:function(e){this._moduleManager.getModule(cn).registerPlugin(e)}},{key:"setLogLevel",value:function(e){e<=0&&(o("log",[""," ________  ______  __       __  __       __  ________  _______","|        \\|      \\|  \\     /  \\|  \\  _  |  \\|        \\|       \\"," \\$$$$$$$$ \\$$$$$$| $$\\   /  $$| $$ / \\ | $$| $$$$$$$$| $$$$$$$\\","   | $$     | $$  | $$$\\ /  $$$| $$/  $\\| $$| $$__    | $$__/ $$","   | $$     | $$  | $$$$\\  $$$$| $$  $$$\\ $$| $$  \\   | $$    $$","   | $$     | $$  | $$\\$$ $$ $$| $$ $$\\$$\\$$| $$$$$   | $$$$$$$\\","   | $$    _| $$_ | $$ \\$$$| $$| $$$$  \\$$$$| $$_____ | $$__/ $$","   | $$   |   $$ \\| $$  \\$ | $$| $$$    \\$$$| $$     \\| $$    $$","    \\$$    \\$$$$$$ \\$$      \\$$ \\$$      \\$$ \\$$$$$$$$ \\$$$$$$$","",""].join("\n")," at node_modules/tim-wx-sdk/tim-wx.js:1"),o("log","%cIM \u667a\u80fd\u5ba2\u670d\uff0c\u968f\u65f6\u968f\u5730\u89e3\u51b3\u60a8\u7684\u95ee\u9898 \u2192_\u2192 https://cloud.tencent.com/act/event/smarty-service?from=im-doc","color:#006eff"," at node_modules/tim-wx-sdk/tim-wx.js:1"),o("log","%c\u4ecev2.11.2\u8d77\uff0cSDK \u652f\u6301\u4e86 WebSocket\uff0c\u5c0f\u7a0b\u5e8f\u9700\u8981\u6dfb\u52a0\u53d7\u4fe1\u57df\u540d\uff01\u5347\u7ea7\u6307\u5f15: https://web.sdk.qcloud.com/im/doc/zh-cn/tutorial-02-upgradeguideline.html","color:#ff0000"," at node_modules/tim-wx-sdk/tim-wx.js:1"),o("log",["","\u53c2\u8003\u4ee5\u4e0b\u6587\u6863\uff0c\u4f1a\u66f4\u5feb\u89e3\u51b3\u95ee\u9898\u54e6\uff01(#^.^#)\n","SDK \u66f4\u65b0\u65e5\u5fd7: https://cloud.tencent.com/document/product/269/38492\n","SDK \u63a5\u53e3\u6587\u6863: https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html\n","\u5e38\u89c1\u95ee\u9898: https://web.sdk.qcloud.com/im/doc/zh-cn/tutorial-01-faq.html\n","\u53cd\u9988\u95ee\u9898\uff1f\u6233\u6211\u63d0 issue: https://github.com/tencentyun/TIMSDK/issues\n","\u5982\u679c\u60a8\u9700\u8981\u5728\u751f\u4ea7\u73af\u5883\u5173\u95ed\u4e0a\u9762\u7684\u65e5\u5fd7\uff0c\u8bf7 tim.setLogLevel(1)\n"].join("\n")," at node_modules/tim-wx-sdk/tim-wx.js:1")),Le.setLevel(e)}},{key:"createTextMessage",value:function(e){return this._moduleManager.getModule(Wt).createTextMessage(e)}},{key:"createTextAtMessage",value:function(e){return this._moduleManager.getModule(Wt).createTextMessage(e)}},{key:"createImageMessage",value:function(e){return this._moduleManager.getModule(Wt).createImageMessage(e)}},{key:"createAudioMessage",value:function(e){return this._moduleManager.getModule(Wt).createAudioMessage(e)}},{key:"createVideoMessage",value:function(e){return this._moduleManager.getModule(Wt).createVideoMessage(e)}},{key:"createCustomMessage",value:function(e){return this._moduleManager.getModule(Wt).createCustomMessage(e)}},{key:"createFaceMessage",value:function(e){return this._moduleManager.getModule(Wt).createFaceMessage(e)}},{key:"createFileMessage",value:function(e){return this._moduleManager.getModule(Wt).createFileMessage(e)}},{key:"createLocationMessage",value:function(e){return this._moduleManager.getModule(Wt).createLocationMessage(e)}},{key:"createMergerMessage",value:function(e){return this._moduleManager.getModule(Wt).createMergerMessage(e)}},{key:"downloadMergerMessage",value:function(e){return e.type!==E.MSG_MERGER?hr(new dr({code:Uo.MESSAGE_MERGER_TYPE_INVALID,message:ma})):Pt(e.payload.downloadKey)?hr(new dr({code:Uo.MESSAGE_MERGER_KEY_INVALID,message:_a})):this._moduleManager.getModule(Wt).downloadMergerMessage(e).catch((function(e){return hr(new dr({code:Uo.MESSAGE_MERGER_DOWNLOAD_FAIL,message:va}))}))}},{key:"createForwardMessage",value:function(e){return this._moduleManager.getModule(Wt).createForwardMessage(e)}},{key:"sendMessage",value:function(e,t){return e instanceof ar?this._moduleManager.getModule(Wt).sendMessageInstance(e,t):hr(new dr({code:Uo.MESSAGE_SEND_NEED_MESSAGE_INSTANCE,message:Jo}))}},{key:"callExperimentalAPI",value:function(e,t){return"handleGroupInvitation"===e?this._moduleManager.getModule(Xt).handleGroupInvitation(t):hr(new dr({code:Uo.INVALID_OPERATION,message:Wa}))}},{key:"revokeMessage",value:function(e){return this._moduleManager.getModule(Wt).revokeMessage(e)}},{key:"resendMessage",value:function(e){return this._moduleManager.getModule(Wt).resendMessage(e)}},{key:"deleteMessage",value:function(e){return this._moduleManager.getModule(Wt).deleteMessage(e)}},{key:"getMessageList",value:function(e){return this._moduleManager.getModule(en).getMessageList(e)}},{key:"setMessageRead",value:function(e){return this._moduleManager.getModule(en).setMessageRead(e)}},{key:"getConversationList",value:function(e){return this._moduleManager.getModule(en).getConversationList(e)}},{key:"getConversationProfile",value:function(e){return this._moduleManager.getModule(en).getConversationProfile(e)}},{key:"deleteConversation",value:function(e){return this._moduleManager.getModule(en).deleteConversation(e)}},{key:"pinConversation",value:function(e){return this._moduleManager.getModule(en).pinConversation(e)}},{key:"setAllMessageRead",value:function(e){return this._moduleManager.getModule(en).setAllMessageRead(e)}},{key:"setMessageRemindType",value:function(e){return this._moduleManager.getModule(en).setMessageRemindType(e)}},{key:"getMyProfile",value:function(){return this._moduleManager.getModule(Yt).getMyProfile()}},{key:"getUserProfile",value:function(e){return this._moduleManager.getModule(Yt).getUserProfile(e)}},{key:"updateMyProfile",value:function(e){return this._moduleManager.getModule(Yt).updateMyProfile(e)}},{key:"getBlacklist",value:function(){return this._moduleManager.getModule(Yt).getLocalBlacklist()}},{key:"addToBlacklist",value:function(e){return this._moduleManager.getModule(Yt).addBlacklist(e)}},{key:"removeFromBlacklist",value:function(e){return this._moduleManager.getModule(Yt).deleteBlacklist(e)}},{key:"getFriendList",value:function(){var e=this._moduleManager.getModule(Qt);return e?e.getLocalFriendList():hr({code:Uo.CANNOT_FIND_MODULE,message:Ja})}},{key:"addFriend",value:function(e){var t=this._moduleManager.getModule(Qt);return t?t.addFriend(e):hr({code:Uo.CANNOT_FIND_MODULE,message:Ja})}},{key:"deleteFriend",value:function(e){var t=this._moduleManager.getModule(Qt);return t?t.deleteFriend(e):hr({code:Uo.CANNOT_FIND_MODULE,message:Ja})}},{key:"checkFriend",value:function(e){var t=this._moduleManager.getModule(Qt);return t?t.checkFriend(e):hr({code:Uo.CANNOT_FIND_MODULE,message:Ja})}},{key:"getFriendProfile",value:function(e){var t=this._moduleManager.getModule(Qt);return t?t.getFriendProfile(e):hr({code:Uo.CANNOT_FIND_MODULE,message:Ja})}},{key:"updateFriend",value:function(e){var t=this._moduleManager.getModule(Qt);return t?t.updateFriend(e):hr({code:Uo.CANNOT_FIND_MODULE,message:Ja})}},{key:"getFriendApplicationList",value:function(){var e=this._moduleManager.getModule(Qt);return e?e.getLocalFriendApplicationList():hr({code:Uo.CANNOT_FIND_MODULE,message:Ja})}},{key:"acceptFriendApplication",value:function(e){var t=this._moduleManager.getModule(Qt);return t?t.acceptFriendApplication(e):hr({code:Uo.CANNOT_FIND_MODULE,message:Ja})}},{key:"refuseFriendApplication",value:function(e){var t=this._moduleManager.getModule(Qt);return t?t.refuseFriendApplication(e):hr({code:Uo.CANNOT_FIND_MODULE,message:Ja})}},{key:"deleteFriendApplication",value:function(e){var t=this._moduleManager.getModule(Qt);return t?t.deleteFriendApplication(e):hr({code:Uo.CANNOT_FIND_MODULE,message:Ja})}},{key:"setFriendApplicationRead",value:function(){var e=this._moduleManager.getModule(Qt);return e?e.setFriendApplicationRead():hr({code:Uo.CANNOT_FIND_MODULE,message:Ja})}},{key:"getFriendGroupList",value:function(){var e=this._moduleManager.getModule(Qt);return e?e.getLocalFriendGroupList():hr({code:Uo.CANNOT_FIND_MODULE,message:Ja})}},{key:"createFriendGroup",value:function(e){var t=this._moduleManager.getModule(Qt);return t?t.createFriendGroup(e):hr({code:Uo.CANNOT_FIND_MODULE,message:Ja})}},{key:"deleteFriendGroup",value:function(e){var t=this._moduleManager.getModule(Qt);return t?t.deleteFriendGroup(e):hr({code:Uo.CANNOT_FIND_MODULE,message:Ja})}},{key:"addToFriendGroup",value:function(e){var t=this._moduleManager.getModule(Qt);return t?t.addToFriendGroup(e):hr({code:Uo.CANNOT_FIND_MODULE,message:Ja})}},{key:"removeFromFriendGroup",value:function(e){var t=this._moduleManager.getModule(Qt);return t?t.removeFromFriendGroup(e):hr({code:Uo.CANNOT_FIND_MODULE,message:Ja})}},{key:"renameFriendGroup",value:function(e){var t=this._moduleManager.getModule(Qt);return t?t.renameFriendGroup(e):hr({code:Uo.CANNOT_FIND_MODULE,message:Ja})}},{key:"getGroupList",value:function(e){return this._moduleManager.getModule(Xt).getGroupList(e)}},{key:"getGroupProfile",value:function(e){return this._moduleManager.getModule(Xt).getGroupProfile(e)}},{key:"createGroup",value:function(e){return this._moduleManager.getModule(Xt).createGroup(e)}},{key:"dismissGroup",value:function(e){return this._moduleManager.getModule(Xt).dismissGroup(e)}},{key:"updateGroupProfile",value:function(e){return this._moduleManager.getModule(Xt).updateGroupProfile(e)}},{key:"joinGroup",value:function(e){return this._moduleManager.getModule(Xt).joinGroup(e)}},{key:"quitGroup",value:function(e){return this._moduleManager.getModule(Xt).quitGroup(e)}},{key:"searchGroupByID",value:function(e){return this._moduleManager.getModule(Xt).searchGroupByID(e)}},{key:"getGroupOnlineMemberCount",value:function(e){return this._moduleManager.getModule(Xt).getGroupOnlineMemberCount(e)}},{key:"changeGroupOwner",value:function(e){return this._moduleManager.getModule(Xt).changeGroupOwner(e)}},{key:"handleGroupApplication",value:function(e){return this._moduleManager.getModule(Xt).handleGroupApplication(e)}},{key:"initGroupAttributes",value:function(e){return this._moduleManager.getModule(Xt).initGroupAttributes(e)}},{key:"setGroupAttributes",value:function(e){return this._moduleManager.getModule(Xt).setGroupAttributes(e)}},{key:"deleteGroupAttributes",value:function(e){return this._moduleManager.getModule(Xt).deleteGroupAttributes(e)}},{key:"getGroupAttributes",value:function(e){return this._moduleManager.getModule(Xt).getGroupAttributes(e)}},{key:"getGroupMemberList",value:function(e){return this._moduleManager.getModule(Zt).getGroupMemberList(e)}},{key:"getGroupMemberProfile",value:function(e){return this._moduleManager.getModule(Zt).getGroupMemberProfile(e)}},{key:"addGroupMember",value:function(e){return this._moduleManager.getModule(Zt).addGroupMember(e)}},{key:"deleteGroupMember",value:function(e){return this._moduleManager.getModule(Zt).deleteGroupMember(e)}},{key:"setGroupMemberMuteTime",value:function(e){return this._moduleManager.getModule(Zt).setGroupMemberMuteTime(e)}},{key:"setGroupMemberRole",value:function(e){return this._moduleManager.getModule(Zt).setGroupMemberRole(e)}},{key:"setGroupMemberNameCard",value:function(e){return this._moduleManager.getModule(Zt).setGroupMemberNameCard(e)}},{key:"setGroupMemberCustomField",value:function(e){return this._moduleManager.getModule(Zt).setGroupMemberCustomField(e)}}]),e}(),nu={login:"login",logout:"logout",destroy:"destroy",on:"on",off:"off",ready:"ready",setLogLevel:"setLogLevel",joinGroup:"joinGroup",quitGroup:"quitGroup",registerPlugin:"registerPlugin",getGroupOnlineMemberCount:"getGroupOnlineMemberCount"};function ou(e,t){if(e.isReady()||void 0!==nu[t])return!0;var n=new dr({code:Uo.SDK_IS_NOT_READY,message:"".concat(t," ").concat(Xa,"\uff0c\u8bf7\u53c2\u8003 https://web.sdk.qcloud.com/im/doc/zh-cn/module-EVENT.html#.SDK_READY")});return e.onError(n),!1}var au={},iu={create:function(e){var t=0;if(He(e.SDKAppID))t=e.SDKAppID;else if(Le.warn("TIM.create SDKAppID \u7684\u7c7b\u578b\u5e94\u8be5\u4e3a Number\uff0c\u8bf7\u4fee\u6539\uff01"),t=parseInt(e.SDKAppID),isNaN(t))return Le.error("TIM.create failed. \u89e3\u6790 SDKAppID \u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u4f20\u53c2\uff01"),null;if(t&&au[t])return au[t];Le.log("TIM.create");var n=new tu(u({},e,{SDKAppID:t}));n.on(D.SDK_DESTROY,(function(e){au[e.data.SDKAppID]=null,delete au[e.data.SDKAppID]}));var o=function(e){var t=Object.create(null);return Object.keys(Kt).forEach((function(n){if(e[n]){var o=Kt[n],a=new A;t[o]=function(){var t=Array.from(arguments);return a.use((function(t,o){return ou(e,n)?o():hr(new dr({code:Uo.SDK_IS_NOT_READY,message:"".concat(n," ").concat(Xa,"\u3002")}))})).use((function(e,t){if(!0===Lt(e,Vt[n],o))return t()})).use((function(t,o){return e[n].apply(e,t)})),a.run(t)}}})),t}(n);return au[t]=o,Le.log("TIM.create ok"),o}};return iu.TYPES=E,iu.EVENT=D,iu.VERSION="2.17.1",Le.log("TIM.VERSION: ".concat(iu.VERSION)),iu}))}).call(this,n("c8ba"),n("fe07")["default"],n("0de9")["default"])},"06a5":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={name:"gui-action-sheet",props:{width:{type:Number,default:680},height:{type:Number,default:500},borderRadius:{type:String,default:"10rpx"},title:{type:String,default:""},titleColor:{type:String,default:"#2B2E3D"},items:{type:Array,default:function(){return[]}},listColor:{type:String,default:"#008AFF"},listLineHeight:{type:String,default:"95rpx"},listFontSize:{type:String,default:"28rpx"},isCancelBtn:{type:Boolean,default:!0},cancelBtnName:{type:String,default:"\u53d6\u6d88"},cancelBtnColor:{type:String,default:"rgba(69, 90, 100, 0.6)"},canCloseByShade:{type:Boolean,default:!1}},methods:{open:function(){this.$refs.guipopupforacsheet.open()},close:function(){this.$refs.guipopupforacsheet.close()},stopfun:function(e){return e.stopPropagation(),null},cancel:function(){this.$emit("cancel"),this.close()},selected:function(e){this.$emit("selected",e.currentTarget.dataset.index),this.close()}}};t.default=o},"0730":function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",[n("view",{staticClass:e._$s(1,"sc","TUI-fileMessage"),attrs:{_i:1}},[n("view",{staticClass:e._$s(2,"sc","fileMessage"),attrs:{_i:2}},[n("view",{staticClass:e._$s(3,"sc","fileMessage-box"),attrs:{_i:3}},[n("image",{staticClass:e._$s(4,"sc","file-icon"),attrs:{_i:4}}),n("label",{staticClass:e._$s(5,"sc","file-title"),attrs:{_i:5},on:{click:e.download}},[e._v(e._$s(5,"t0-0",e._s(e.filePayload.fileName)))])])])]),e._$s(6,"i",e.Show)?n("view",{staticClass:e._$s(6,"sc","pop"),attrs:{_i:6}},[n("view",{staticClass:e._$s(7,"sc","text-box"),attrs:{_i:7}},[n("text",{staticClass:e._$s(8,"sc","download-confirm"),attrs:{_i:8},on:{click:function(t){return t.stopPropagation(),e.downloadConfirm(t)}}})]),n("view",{staticClass:e._$s(9,"sc","text-box"),attrs:{_i:9}},[n("text",{staticClass:e._$s(10,"sc","abandon"),attrs:{_i:10},on:{click:e.cancel}})])]):e._e()])},i=[]},"081e":function(e,t,n){"use strict";n.r(t);var o=n("5757"),a=n("b085");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},"0860":function(e,t,n){"use strict";n.r(t);var o=n("fb03"),a=n("517f");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},"0912":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={data:function(){return{code:"",password:"",password2:"",phoneno:"",vcodeBtnName:"\u53d1\u9001\u9a8c\u8bc1\u7801",countNum:120,countDownTimer:null}},methods:{actiontoBack:function(){uni.navigateBack({})},actionToForgetPasswordPage:function(){uni.navigateTo({url:"forgetPasswordPage"})},checkParams:function(){var e=/^[1][0-9]{10}$/;if(!e.test(this.phoneno))return uni.showToast({title:"\u8bf7\u6b63\u786e\u586b\u5199\u624b\u673a\u53f7\u7801",icon:"none"}),!1;e=/^[a-zA-Z0-9]{8,20}$/;return e.test(this.password)?this.password==this.password2||(uni.showToast({title:"2\u6b21\u5bc6\u7801\u8f93\u5165\u4e0d\u4e00\u81f4",icon:"none"}),!1):(uni.showToast({title:"\u8bf7\u586b\u5199\u81f3\u5c118\u4f4d\u767b\u5f55\u5bc6\u7801",icon:"none"}),!1)},getVCode:function(){var e=this;if(this.checkParams()&&("\u53d1\u9001\u9a8c\u8bc1\u7801"==this.vcodeBtnName||"\u91cd\u65b0\u53d1\u9001"==this.vcodeBtnName)){this.vcodeBtnName="\u53d1\u9001\u4e2d...";var t={mobile:this.phoneno};uni.PYRequest.sendResetCode(t,(function(t){uni.showToast({title:"\u77ed\u4fe1\u9a8c\u8bc1\u7801\u5df2\u53d1\u9001\uff0c\u8bf7\u6ce8\u610f\u67e5\u6536",icon:"none"}),e.countNum=60,e.countDownTimer=setInterval((function(){e.countDown()}),1e3)}),(function(t){clearInterval(e.countDownTimer),e.vcodeBtnName="\u91cd\u65b0\u53d1\u9001"}),(function(e){}))}},countDown:function(){if(this.countNum<1)return clearInterval(this.countDownTimer),void(this.vcodeBtnName="\u91cd\u65b0\u53d1\u9001");this.countNum--,this.vcodeBtnName=this.countNum+"\u79d2\u91cd\u53d1"},submit:function(e){if(this.checkParams()){var t={mobile:this.phoneno,password:this.password,code:this.code};uni.PYRequest.resetPassword(t,(function(e){setTimeout((function(){uni.redirectTo({url:"/pages/loginPage/loginPassword"})}),2e3)}),(function(e){}),(function(e){}))}}}};t.default=o},"09ee":function(e,t,n){"use strict";n.r(t);var o=n("35e6"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"09fb":function(e,t){e.exports="/uni_modules/uni-upgrade-center-app/images/bg_top.png"},"0b09":function(e,t,n){"use strict";n.r(t);var o=n("8f42"),a=n("7633");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,"e8311da8",null,!1,o["a"],s);t["default"]=c.exports},"0b6a":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=f(n("eed5")),a=f(n("98b7")),i=f(n("faab")),s=f(n("030f")),r=f(n("2485")),c=f(n("9bbb")),u=f(n("688f")),l=f(n("afa9")),d=f(n("31ef"));function f(e){return e&&e.__esModule?e:{default:e}}function p(e){return _(e)||m(e)||h(e)||g()}function g(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(e,t){if(e){if("string"===typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function m(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _(e){if(Array.isArray(e))return v(e)}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var y={data:function(){return{avatar:"",userID:"",messageList:[],scrollView:"",scrollTop:0,triggered:!0,nextReqMessageID:"",isCompleted:!1}},components:{TUITextMessage:o.default,TUIImageMessage:a.default,TUIVideoMessage:i.default,TUIAudioMessage:s.default,TUICustomMessage:r.default,TUITipMessage:c.default,TUISystemMessage:u.default,TUIFaceMessage:l.default,TUIFileMessage:d.default},props:{conversation:{type:Object,default:function(){}}},watch:{conversation:{handler:function(e){var t=this;e.conversationID&&this.setData({conversation:e},(function(){t.getMessageList(e)}))},immediate:!0,deep:!0}},mounted:function(){var e=this;uni.$TUIKit.getMyProfile().then((function(t){e.avatar=t.data.avatar,e.userID=t.data.userID})),uni.$TUIKit.on(uni.$TUIKitEvent.MESSAGE_RECEIVED,this.$onMessageReceived,this),uni.$TUIKit.on(uni.$TUIKitEvent.MESSAGE_READ_BY_PEER,this.$onMessageReadByPeer,this)},destroyed:function(){uni.$TUIKit.off(uni.$TUIKitEvent.MESSAGE_RECEIVED,this.$onMessageReceived)},methods:{refresh:function(){var e=this;this.isCompleted?this.setData({isCompleted:!0,triggered:!1}):(this.getMessageList(this.conversation),setTimeout((function(){e.setData({triggered:!1})}),2e3))},getMessageList:function(e){var t=this;this.isCompleted||uni.$TUIKit.getMessageList({conversationID:e.conversationID,nextReqMessageID:this.nextReqMessageID,count:15}).then((function(e){var n=e.data.messageList;t.nextReqMessageID=e.data.nextReqMessageID,t.isCompleted=e.data.isCompleted,t.messageList=[].concat(p(n),p(t.messageList)),t.$handleMessageRender(t.messageList,n)}))},updateMessageList:function(e){this.messageList=[].concat(p(this.messageList),[e]),this.scrollToButtom()},$onMessageReadByPeer:function(){this.setData({messageList:this.messageList})},scrollToButtom:function(){var e=this,t=uni.createSelectorQuery().in(this),n=t.select("#message-scroll");n.boundingClientRect((function(t){e.$nextTick((function(){e.scrollTop=t.height}))})).exec()},$onMessageReceived:function(e){var t=this,n=e,o=[];n.data.forEach((function(e){e.conversationID===t.conversation.conversationID&&o.push(Object.assign(e))})),this.messageList=this.messageList.concat(o),this.scrollToButtom()},$handleMessageRender:function(e){var t=this;e.length>0&&(this.setData({messageList:e},(function(){})),this.$nextTick((function(){t.scrollTop=9999})))}}};t.default=y},"0d4f":function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",{staticClass:e._$s(0,"sc","TUI-ImageMessage"),attrs:{_i:0},on:{click:e.previewImage}},[n("image",{class:e._$s(1,"c","image-message "+(e.isMine?"my-image":"")),attrs:{src:e._$s(1,"a-src",e.renderDom[0].src),_i:1}})])},i=[]},"0de9":function(e,t,n){"use strict";function o(e){var t=Object.prototype.toString.call(e);return t.substring(8,t.length-1)}function a(){return"string"===typeof __channelId__&&__channelId__}function i(e,t){switch(o(t)){case"Function":return"function() { [native code] }";default:return t}}function s(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];console[e].apply(console,n)}function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var s=t.shift();if(a())return t.push(t.pop().replace("at ","uni-app:///")),console[s].apply(console,t);var r=t.map((function(e){var t=Object.prototype.toString.call(e).toLowerCase();if("[object object]"===t||"[object array]"===t)try{e="---BEGIN:JSON---"+JSON.stringify(e,i)+"---END:JSON---"}catch(a){e=t}else if(null===e)e="---NULL---";else if(void 0===e)e="---UNDEFINED---";else{var n=o(e).toUpperCase();e="NUMBER"===n||"BOOLEAN"===n?"---BEGIN:"+n+"---"+e+"---END:"+n+"---":String(e)}return e})),c="";if(r.length>1){var u=r.pop();c=r.join("---COMMA---"),0===u.indexOf(" at ")?c+=u:c+="---COMMA---"+u}else c=r[0];console[s](c)}n.r(t),n.d(t,"log",(function(){return s})),n.d(t,"default",(function(){return r}))},"0e90":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var o={guiPopup:n("f719").default},a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("gui-popup",{ref:"guipopupformodal",attrs:{width:e.width,canCloseByShade:e.canCloseByShade,zIndex:e.zIndex,_i:0},on:{close:e.eClose}},[n("view",{staticClass:e._$s(1,"sc","gui-relative"),style:e._$s(1,"s",e.bodyStyle),attrs:{_i:1},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.stopfun(t)}}},[n("view",[e._$s(3,"i",e.isTitle)?n("text",{staticClass:e._$s(3,"sc","gui-block-text gui-text-center"),style:e._$s(3,"s",e.titleStyle),attrs:{_i:3}},[e._v(e._$s(3,"t0-0",e._s(e.title)))]):e._e()]),n("view",[e._t("content",null,{_i:5})],2),n("view",[e._t("btns",null,{_i:7})],2),e._$s(8,"i",e.isCloseBtn)?n("text",{staticClass:e._$s(8,"sc","gui-popup-close gui-block-text gui-absolute-rt gui-icons"),style:e._$s(8,"s",e.closeBtnStyle),attrs:{_i:8},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.close(t)}}}):e._e()])])},i=[]},"104c":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={name:"gui-page-loading",props:{},data:function(){return{isLoading:!1,BindingXObjs:[null,null,null],AnimateObjs:[null,null,null],animateTimer:800,intervalID:null}},watch:{},methods:{stopfun:function(e){return e.stopPropagation(),null},open:function(){this.isLoading=!0},close:function(){var e=this;setTimeout((function(){e.isLoading=!1}),100)},getRefs:function(e,t,n){var o=this;if(t>=30)return null;var a=this.$refs[e];a?n(a):(t++,setTimeout((function(){o.getRefs(e,t,n)}),50))}}};t.default=o},"10ed":function(e,t){e.exports="/static/img/wallet/scan.png"},"115d":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={id:"2852637",name:"uniui\u56fe\u6807\u5e93",font_family:"uniicons",css_prefix_text:"uniui-",description:"",glyphs:[{icon_id:"25027049",name:"yanse",font_class:"color",unicode:"e6cf",unicode_decimal:59087},{icon_id:"25027048",name:"wallet",font_class:"wallet",unicode:"e6b1",unicode_decimal:59057},{icon_id:"25015720",name:"settings-filled",font_class:"settings-filled",unicode:"e6ce",unicode_decimal:59086},{icon_id:"25015434",name:"shimingrenzheng-filled",font_class:"auth-filled",unicode:"e6cc",unicode_decimal:59084},{icon_id:"24934246",name:"shop-filled",font_class:"shop-filled",unicode:"e6cd",unicode_decimal:59085},{icon_id:"24934159",name:"staff-filled-01",font_class:"staff-filled",unicode:"e6cb",unicode_decimal:59083},{icon_id:"24932461",name:"VIP-filled",font_class:"vip-filled",unicode:"e6c6",unicode_decimal:59078},{icon_id:"24932462",name:"plus_circle_fill",font_class:"plus-filled",unicode:"e6c7",unicode_decimal:59079},{icon_id:"24932463",name:"folder_add-filled",font_class:"folder-add-filled",unicode:"e6c8",unicode_decimal:59080},{icon_id:"24932464",name:"yanse-filled",font_class:"color-filled",unicode:"e6c9",unicode_decimal:59081},{icon_id:"24932465",name:"tune-filled",font_class:"tune-filled",unicode:"e6ca",unicode_decimal:59082},{icon_id:"24932455",name:"a-rilidaka-filled",font_class:"calendar-filled",unicode:"e6c0",unicode_decimal:59072},{icon_id:"24932456",name:"notification-filled",font_class:"notification-filled",unicode:"e6c1",unicode_decimal:59073},{icon_id:"24932457",name:"wallet-filled",font_class:"wallet-filled",unicode:"e6c2",unicode_decimal:59074},{icon_id:"24932458",name:"paihangbang-filled",font_class:"medal-filled",unicode:"e6c3",unicode_decimal:59075},{icon_id:"24932459",name:"gift-filled",font_class:"gift-filled",unicode:"e6c4",unicode_decimal:59076},{icon_id:"24932460",name:"fire-filled",font_class:"fire-filled",unicode:"e6c5",unicode_decimal:59077},{icon_id:"24928001",name:"refreshempty",font_class:"refreshempty",unicode:"e6bf",unicode_decimal:59071},{icon_id:"24926853",name:"location-ellipse",font_class:"location-filled",unicode:"e6af",unicode_decimal:59055},{icon_id:"24926735",name:"person-filled",font_class:"person-filled",unicode:"e69d",unicode_decimal:59037},{icon_id:"24926703",name:"personadd-filled",font_class:"personadd-filled",unicode:"e698",unicode_decimal:59032},{icon_id:"24923351",name:"back",font_class:"back",unicode:"e6b9",unicode_decimal:59065},{icon_id:"24923352",name:"forward",font_class:"forward",unicode:"e6ba",unicode_decimal:59066},{icon_id:"24923353",name:"arrowthinright",font_class:"arrow-right",unicode:"e6bb",unicode_decimal:59067},{icon_id:"24923353",name:"arrowthinright",font_class:"arrowthinright",unicode:"e6bb",unicode_decimal:59067},{icon_id:"24923354",name:"arrowthinleft",font_class:"arrow-left",unicode:"e6bc",unicode_decimal:59068},{icon_id:"24923354",name:"arrowthinleft",font_class:"arrowthinleft",unicode:"e6bc",unicode_decimal:59068},{icon_id:"24923355",name:"arrowthinup",font_class:"arrow-up",unicode:"e6bd",unicode_decimal:59069},{icon_id:"24923355",name:"arrowthinup",font_class:"arrowthinup",unicode:"e6bd",unicode_decimal:59069},{icon_id:"24923356",name:"arrowthindown",font_class:"arrow-down",unicode:"e6be",unicode_decimal:59070},{icon_id:"24923356",name:"arrowthindown",font_class:"arrowthindown",unicode:"e6be",unicode_decimal:59070},{icon_id:"24923349",name:"arrowdown",font_class:"bottom",unicode:"e6b8",unicode_decimal:59064},{icon_id:"24923349",name:"arrowdown",font_class:"arrowdown",unicode:"e6b8",unicode_decimal:59064},{icon_id:"24923346",name:"arrowright",font_class:"right",unicode:"e6b5",unicode_decimal:59061},{icon_id:"24923346",name:"arrowright",font_class:"arrowright",unicode:"e6b5",unicode_decimal:59061},{icon_id:"24923347",name:"arrowup",font_class:"top",unicode:"e6b6",unicode_decimal:59062},{icon_id:"24923347",name:"arrowup",font_class:"arrowup",unicode:"e6b6",unicode_decimal:59062},{icon_id:"24923348",name:"arrowleft",font_class:"left",unicode:"e6b7",unicode_decimal:59063},{icon_id:"24923348",name:"arrowleft",font_class:"arrowleft",unicode:"e6b7",unicode_decimal:59063},{icon_id:"24923334",name:"eye",font_class:"eye",unicode:"e651",unicode_decimal:58961},{icon_id:"24923335",name:"eye-filled",font_class:"eye-filled",unicode:"e66a",unicode_decimal:58986},{icon_id:"24923336",name:"eye-slash",font_class:"eye-slash",unicode:"e6b3",unicode_decimal:59059},{icon_id:"24923337",name:"eye-slash-filled",font_class:"eye-slash-filled",unicode:"e6b4",unicode_decimal:59060},{icon_id:"24923305",name:"info-filled",font_class:"info-filled",unicode:"e649",unicode_decimal:58953},{icon_id:"24923299",name:"reload-01",font_class:"reload",unicode:"e6b2",unicode_decimal:59058},{icon_id:"24923195",name:"mic_slash_fill",font_class:"micoff-filled",unicode:"e6b0",unicode_decimal:59056},{icon_id:"24923165",name:"map-pin-ellipse",font_class:"map-pin-ellipse",unicode:"e6ac",unicode_decimal:59052},{icon_id:"24923166",name:"map-pin",font_class:"map-pin",unicode:"e6ad",unicode_decimal:59053},{icon_id:"24923167",name:"location",font_class:"location",unicode:"e6ae",unicode_decimal:59054},{icon_id:"24923064",name:"starhalf",font_class:"starhalf",unicode:"e683",unicode_decimal:59011},{icon_id:"24923065",name:"star",font_class:"star",unicode:"e688",unicode_decimal:59016},{icon_id:"24923066",name:"star-filled",font_class:"star-filled",unicode:"e68f",unicode_decimal:59023},{icon_id:"24899646",name:"a-rilidaka",font_class:"calendar",unicode:"e6a0",unicode_decimal:59040},{icon_id:"24899647",name:"fire",font_class:"fire",unicode:"e6a1",unicode_decimal:59041},{icon_id:"24899648",name:"paihangbang",font_class:"medal",unicode:"e6a2",unicode_decimal:59042},{icon_id:"24899649",name:"font",font_class:"font",unicode:"e6a3",unicode_decimal:59043},{icon_id:"24899650",name:"gift",font_class:"gift",unicode:"e6a4",unicode_decimal:59044},{icon_id:"24899651",name:"link",font_class:"link",unicode:"e6a5",unicode_decimal:59045},{icon_id:"24899652",name:"notification",font_class:"notification",unicode:"e6a6",unicode_decimal:59046},{icon_id:"24899653",name:"staff",font_class:"staff",unicode:"e6a7",unicode_decimal:59047},{icon_id:"24899654",name:"VIP",font_class:"vip",unicode:"e6a8",unicode_decimal:59048},{icon_id:"24899655",name:"folder_add",font_class:"folder-add",unicode:"e6a9",unicode_decimal:59049},{icon_id:"24899656",name:"tune",font_class:"tune",unicode:"e6aa",unicode_decimal:59050},{icon_id:"24899657",name:"shimingrenzheng",font_class:"auth",unicode:"e6ab",unicode_decimal:59051},{icon_id:"24899565",name:"person",font_class:"person",unicode:"e699",unicode_decimal:59033},{icon_id:"24899566",name:"email-filled",font_class:"email-filled",unicode:"e69a",unicode_decimal:59034},{icon_id:"24899567",name:"phone-filled",font_class:"phone-filled",unicode:"e69b",unicode_decimal:59035},{icon_id:"24899568",name:"phone",font_class:"phone",unicode:"e69c",unicode_decimal:59036},{icon_id:"24899570",name:"email",font_class:"email",unicode:"e69e",unicode_decimal:59038},{icon_id:"24899571",name:"personadd",font_class:"personadd",unicode:"e69f",unicode_decimal:59039},{icon_id:"24899558",name:"chatboxes-filled",font_class:"chatboxes-filled",unicode:"e692",unicode_decimal:59026},{icon_id:"24899559",name:"contact",font_class:"contact",unicode:"e693",unicode_decimal:59027},{icon_id:"24899560",name:"chatbubble-filled",font_class:"chatbubble-filled",unicode:"e694",unicode_decimal:59028},{icon_id:"24899561",name:"contact-filled",font_class:"contact-filled",unicode:"e695",unicode_decimal:59029},{icon_id:"24899562",name:"chatboxes",font_class:"chatboxes",unicode:"e696",unicode_decimal:59030},{icon_id:"24899563",name:"chatbubble",font_class:"chatbubble",unicode:"e697",unicode_decimal:59031},{icon_id:"24881290",name:"upload-filled",font_class:"upload-filled",unicode:"e68e",unicode_decimal:59022},{icon_id:"24881292",name:"upload",font_class:"upload",unicode:"e690",unicode_decimal:59024},{icon_id:"24881293",name:"weixin",font_class:"weixin",unicode:"e691",unicode_decimal:59025},{icon_id:"24881274",name:"compose",font_class:"compose",unicode:"e67f",unicode_decimal:59007},{icon_id:"24881275",name:"qq",font_class:"qq",unicode:"e680",unicode_decimal:59008},{icon_id:"24881276",name:"download-filled",font_class:"download-filled",unicode:"e681",unicode_decimal:59009},{icon_id:"24881277",name:"pengyouquan",font_class:"pyq",unicode:"e682",unicode_decimal:59010},{icon_id:"24881279",name:"sound",font_class:"sound",unicode:"e684",unicode_decimal:59012},{icon_id:"24881280",name:"trash-filled",font_class:"trash-filled",unicode:"e685",unicode_decimal:59013},{icon_id:"24881281",name:"sound-filled",font_class:"sound-filled",unicode:"e686",unicode_decimal:59014},{icon_id:"24881282",name:"trash",font_class:"trash",unicode:"e687",unicode_decimal:59015},{icon_id:"24881284",name:"videocam-filled",font_class:"videocam-filled",unicode:"e689",unicode_decimal:59017},{icon_id:"24881285",name:"spinner-cycle",font_class:"spinner-cycle",unicode:"e68a",unicode_decimal:59018},{icon_id:"24881286",name:"weibo",font_class:"weibo",unicode:"e68b",unicode_decimal:59019},{icon_id:"24881288",name:"videocam",font_class:"videocam",unicode:"e68c",unicode_decimal:59020},{icon_id:"24881289",name:"download",font_class:"download",unicode:"e68d",unicode_decimal:59021},{icon_id:"24879601",name:"help",font_class:"help",unicode:"e679",unicode_decimal:59001},{icon_id:"24879602",name:"navigate-filled",font_class:"navigate-filled",unicode:"e67a",unicode_decimal:59002},{icon_id:"24879603",name:"plusempty",font_class:"plusempty",unicode:"e67b",unicode_decimal:59003},{icon_id:"24879604",name:"smallcircle",font_class:"smallcircle",unicode:"e67c",unicode_decimal:59004},{icon_id:"24879605",name:"minus-filled",font_class:"minus-filled",unicode:"e67d",unicode_decimal:59005},{icon_id:"24879606",name:"micoff",font_class:"micoff",unicode:"e67e",unicode_decimal:59006},{icon_id:"24879588",name:"closeempty",font_class:"closeempty",unicode:"e66c",unicode_decimal:58988},{icon_id:"24879589",name:"clear",font_class:"clear",unicode:"e66d",unicode_decimal:58989},{icon_id:"24879590",name:"navigate",font_class:"navigate",unicode:"e66e",unicode_decimal:58990},{icon_id:"24879591",name:"minus",font_class:"minus",unicode:"e66f",unicode_decimal:58991},{icon_id:"24879592",name:"image",font_class:"image",unicode:"e670",unicode_decimal:58992},{icon_id:"24879593",name:"mic",font_class:"mic",unicode:"e671",unicode_decimal:58993},{icon_id:"24879594",name:"paperplane",font_class:"paperplane",unicode:"e672",unicode_decimal:58994},{icon_id:"24879595",name:"close",font_class:"close",unicode:"e673",unicode_decimal:58995},{icon_id:"24879596",name:"help-filled",font_class:"help-filled",unicode:"e674",unicode_decimal:58996},{icon_id:"24879597",name:"plus-filled",font_class:"paperplane-filled",unicode:"e675",unicode_decimal:58997},{icon_id:"24879598",name:"plus",font_class:"plus",unicode:"e676",unicode_decimal:58998},{icon_id:"24879599",name:"mic-filled",font_class:"mic-filled",unicode:"e677",unicode_decimal:58999},{icon_id:"24879600",name:"image-filled",font_class:"image-filled",unicode:"e678",unicode_decimal:59e3},{icon_id:"24855900",name:"locked-filled",font_class:"locked-filled",unicode:"e668",unicode_decimal:58984},{icon_id:"24855901",name:"info",font_class:"info",unicode:"e669",unicode_decimal:58985},{icon_id:"24855903",name:"locked",font_class:"locked",unicode:"e66b",unicode_decimal:58987},{icon_id:"24855884",name:"camera-filled",font_class:"camera-filled",unicode:"e658",unicode_decimal:58968},{icon_id:"24855885",name:"chat-filled",font_class:"chat-filled",unicode:"e659",unicode_decimal:58969},{icon_id:"24855886",name:"camera",font_class:"camera",unicode:"e65a",unicode_decimal:58970},{icon_id:"24855887",name:"circle",font_class:"circle",unicode:"e65b",unicode_decimal:58971},{icon_id:"24855888",name:"checkmarkempty",font_class:"checkmarkempty",unicode:"e65c",unicode_decimal:58972},{icon_id:"24855889",name:"chat",font_class:"chat",unicode:"e65d",unicode_decimal:58973},{icon_id:"24855890",name:"circle-filled",font_class:"circle-filled",unicode:"e65e",unicode_decimal:58974},{icon_id:"24855891",name:"flag",font_class:"flag",unicode:"e65f",unicode_decimal:58975},{icon_id:"24855892",name:"flag-filled",font_class:"flag-filled",unicode:"e660",unicode_decimal:58976},{icon_id:"24855893",name:"gear-filled",font_class:"gear-filled",unicode:"e661",unicode_decimal:58977},{icon_id:"24855894",name:"home",font_class:"home",unicode:"e662",unicode_decimal:58978},{icon_id:"24855895",name:"home-filled",font_class:"home-filled",unicode:"e663",unicode_decimal:58979},{icon_id:"24855896",name:"gear",font_class:"gear",unicode:"e664",unicode_decimal:58980},{icon_id:"24855897",name:"smallcircle-filled",font_class:"smallcircle-filled",unicode:"e665",unicode_decimal:58981},{icon_id:"24855898",name:"map-filled",font_class:"map-filled",unicode:"e666",unicode_decimal:58982},{icon_id:"24855899",name:"map",font_class:"map",unicode:"e667",unicode_decimal:58983},{icon_id:"24855825",name:"refresh-filled",font_class:"refresh-filled",unicode:"e656",unicode_decimal:58966},{icon_id:"24855826",name:"refresh",font_class:"refresh",unicode:"e657",unicode_decimal:58967},{icon_id:"24855808",name:"cloud-upload",font_class:"cloud-upload",unicode:"e645",unicode_decimal:58949},{icon_id:"24855809",name:"cloud-download-filled",font_class:"cloud-download-filled",unicode:"e646",unicode_decimal:58950},{icon_id:"24855810",name:"cloud-download",font_class:"cloud-download",unicode:"e647",unicode_decimal:58951},{icon_id:"24855811",name:"cloud-upload-filled",font_class:"cloud-upload-filled",unicode:"e648",unicode_decimal:58952},{icon_id:"24855813",name:"redo",font_class:"redo",unicode:"e64a",unicode_decimal:58954},{icon_id:"24855814",name:"images-filled",font_class:"images-filled",unicode:"e64b",unicode_decimal:58955},{icon_id:"24855815",name:"undo-filled",font_class:"undo-filled",unicode:"e64c",unicode_decimal:58956},{icon_id:"24855816",name:"more",font_class:"more",unicode:"e64d",unicode_decimal:58957},{icon_id:"24855817",name:"more-filled",font_class:"more-filled",unicode:"e64e",unicode_decimal:58958},{icon_id:"24855818",name:"undo",font_class:"undo",unicode:"e64f",unicode_decimal:58959},{icon_id:"24855819",name:"images",font_class:"images",unicode:"e650",unicode_decimal:58960},{icon_id:"24855821",name:"paperclip",font_class:"paperclip",unicode:"e652",unicode_decimal:58962},{icon_id:"24855822",name:"settings",font_class:"settings",unicode:"e653",unicode_decimal:58963},{icon_id:"24855823",name:"search",font_class:"search",unicode:"e654",unicode_decimal:58964},{icon_id:"24855824",name:"redo-filled",font_class:"redo-filled",unicode:"e655",unicode_decimal:58965},{icon_id:"24841702",name:"list",font_class:"list",unicode:"e644",unicode_decimal:58948},{icon_id:"24841489",name:"mail-open-filled",font_class:"mail-open-filled",unicode:"e63a",unicode_decimal:58938},{icon_id:"24841491",name:"hand-thumbsdown-filled",font_class:"hand-down-filled",unicode:"e63c",unicode_decimal:58940},{icon_id:"24841492",name:"hand-thumbsdown",font_class:"hand-down",unicode:"e63d",unicode_decimal:58941},{icon_id:"24841493",name:"hand-thumbsup-filled",font_class:"hand-up-filled",unicode:"e63e",unicode_decimal:58942},{icon_id:"24841494",name:"hand-thumbsup",font_class:"hand-up",unicode:"e63f",unicode_decimal:58943},{icon_id:"24841496",name:"heart-filled",font_class:"heart-filled",unicode:"e641",unicode_decimal:58945},{icon_id:"24841498",name:"mail-open",font_class:"mail-open",unicode:"e643",unicode_decimal:58947},{icon_id:"24841488",name:"heart",font_class:"heart",unicode:"e639",unicode_decimal:58937},{icon_id:"24839963",name:"loop",font_class:"loop",unicode:"e633",unicode_decimal:58931},{icon_id:"24839866",name:"pulldown",font_class:"pulldown",unicode:"e632",unicode_decimal:58930},{icon_id:"24813798",name:"scan",font_class:"scan",unicode:"e62a",unicode_decimal:58922},{icon_id:"24813786",name:"bars",font_class:"bars",unicode:"e627",unicode_decimal:58919},{icon_id:"24813788",name:"cart-filled",font_class:"cart-filled",unicode:"e629",unicode_decimal:58921},{icon_id:"24813790",name:"checkbox",font_class:"checkbox",unicode:"e62b",unicode_decimal:58923},{icon_id:"24813791",name:"checkbox-filled",font_class:"checkbox-filled",unicode:"e62c",unicode_decimal:58924},{icon_id:"24813794",name:"shop",font_class:"shop",unicode:"e62f",unicode_decimal:58927},{icon_id:"24813795",name:"headphones",font_class:"headphones",unicode:"e630",unicode_decimal:58928},{icon_id:"24813796",name:"cart",font_class:"cart",unicode:"e631",unicode_decimal:58929}]};t.default=o},1250:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("c6f9"),a=n("eb08"),i={data:function(){return{messageTime:"",renderDom:""}},components:{},props:{message:{type:Object}},watch:{message:{handler:function(e){this.setData({messageTime:(0,a.caculateTimeago)(1e3*e.time),renderDom:(0,o.parseGroupSystemNotice)(e)})},immediate:!0,deep:!0}},methods:{handleClick:function(){var e=this;uni.showActionSheet({itemList:["\u540c\u610f","\u62d2\u7edd"],success:function(t){var n={handleAction:"Agree",handleMessage:"\u6b22\u8fce\u8fdb\u7fa4",message:e.message};1===t.tapIndex&&(n.handleAction="Reject",n.handleMessage="\u62d2\u7edd\u7533\u8bf7"),uni.$TUIKit.handleGroupApplication(n).then((function(){uni.showToast({title:"Agree"===n.handleAction?"\u5df2\u540c\u610f\u7533\u8bf7":"\u5df2\u62d2\u7edd\u7533\u8bf7"})})).catch((function(e){uni.showToast({title:e.message||"\u5904\u7406\u5931\u8d25",icon:"none"})}))}})}}};t.default=i},"13de":function(e,t,n){"use strict";n.r(t);var o=n("d52a"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"13e0":function(e,t,n){"use strict";n.r(t);var o=n("f245"),a=n("2eb1");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},"13e8":function(e,t,n){"use strict";n.r(t);var o=n("4c4f"),a=n("4dc2");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},1406:function(e,t,n){"use strict";n.r(t);var o=n("ca30"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},1518:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("view",{staticClass:e._$s(0,"sc","flex-column-center"),attrs:{_i:0}},[o("image",{staticClass:e._$s(1,"sc","welcome1"),attrs:{src:e._$s(1,"a-src",n("8ec0")),_i:1}}),o("image",{staticClass:e._$s(2,"sc","welcome2"),attrs:{src:e._$s(2,"a-src",n("e30e")),_i:2}}),o("view",{staticClass:e._$s(3,"sc","notice"),attrs:{_i:3}}),o("view",{staticClass:e._$s(4,"sc","btn"),attrs:{_i:4},on:{click:e.actionToLoginPage}})])},i=[]},"156a":function(e,t,n){"use strict";n.r(t);var o=n("3d86"),a=n("d269");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},1607:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("text",{staticClass:e._$s(0,"sc","uni-icons"),class:e._$s(0,"c",["uniui-"+e.type,e.customPrefix,e.customPrefix?e.type:""]),style:e._$s(0,"s",{color:e.color,"font-size":e.iconSize}),attrs:{_i:0},on:{click:e._onClick}})},i=[]},1692:function(e,t,n){"use strict";n.r(t);var o=n("61ac"),a=n("003a");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},1759:function(e,t,n){"use strict";n.r(t);var o=n("e3db"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"17c9":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var o={guiPopup:n("f719").default,guiIphoneBottom:n("9c96").default,guiModal:n("ee5c").default},a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("view",{staticClass:e._$s(0,"sc","flex-column-center"),attrs:{_i:0}},[o("view",{staticClass:e._$s(1,"sc","content-bg"),attrs:{_i:1}},[o("view",{staticClass:e._$s(2,"sc","notice"),attrs:{_i:2}},[e._v(e._$s(2,"t0-0",e._s(e.opay.freeUsable)))]),o("view",{staticClass:e._$s(3,"sc","num-input-bg flex-row-center"),attrs:{_i:3}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.minMoney,expression:"minMoney"}],attrs:{_i:4},domProps:{value:e._$s(4,"v-model",e.minMoney)},on:{input:function(t){t.target.composing||(e.minMoney=t.target.value)}}})]),o("view",{staticClass:e._$s(5,"sc","num-input-bg flex-row-center"),attrs:{_i:5}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.sellNum,expression:"sellNum"}],attrs:{_i:6},domProps:{value:e._$s(6,"v-model",e.sellNum)},on:{input:function(t){t.target.composing||(e.sellNum=t.target.value)}}})]),o("image",{staticClass:e._$s(7,"sc","link-img"),attrs:{src:e._$s(7,"a-src",n("c4c0")),_i:7}}),o("view",{staticClass:e._$s(8,"sc","money"),attrs:{_i:8}},[e._v(e._$s(8,"t0-0",e._s(""===e.sellNum?"\u91d1\u989d(CNY)":e.sellNumStr)))])]),o("view",{staticClass:e._$s(9,"sc","content-bg-2 flex-row-between"),attrs:{_i:9}},[e._$s(10,"i",0==e.selectedPayment.length)?o("view",{staticClass:e._$s(10,"sc","buy-type normal"),attrs:{_i:10},on:{click:e.payTypeOpen}}):e._l(e._$s(11,"f",{forItems:e.selectedPayment}),(function(t,n,a,i){return o("view",{key:e._$s(11,"f",{forIndex:a,key:"11-"+i}),staticClass:e._$s("11-"+i,"sc","buy-type"),attrs:{_i:"11-"+i},on:{click:e.payTypeOpen}},[e._$s("12-"+i,"i","\u94f6\u884c\u5361"==t)?o("view",{staticClass:e._$s("12-"+i,"sc","yhk"),attrs:{_i:"12-"+i}},[e._v(e._$s("12-"+i,"t0-0",e._s(t)))]):e._e(),e._$s("13-"+i,"i","\u652f\u4ed8\u5b9d"==t)?o("view",{staticClass:e._$s("13-"+i,"sc","zfb"),attrs:{_i:"13-"+i}},[e._v(e._$s("13-"+i,"t0-0",e._s(t)))]):e._e(),e._$s("14-"+i,"i","\u5fae\u4fe1"==t)?o("view",{staticClass:e._$s("14-"+i,"sc","wx"),attrs:{_i:"14-"+i}},[e._v(e._$s("14-"+i,"t0-0",e._s(t)))]):e._e()])}))],2),o("view",{staticClass:e._$s(15,"sc","submitBtn"),attrs:{_i:15},on:{click:e.createPreOrder}}),o("gui-popup",{ref:"guipopup3",attrs:{position:"bottom",_i:16}},[o("view",{staticClass:e._$s(17,"sc","gui-relative gui-box-shadow gui-img-in gui-bg-white gui-bg"),attrs:{_i:17}},[o("checkbox-group",{staticClass:e._$s(18,"sc","gui-flex gui-columns"),attrs:{_i:18},on:{change:e.checkboxChange}},[e._l(e._$s(19,"f",{forItems:e.payment}),(function(t,n,a,i){return o("label",{key:e._$s(19,"f",{forIndex:a,key:t.name}),staticClass:e._$s("19-"+i,"sc","gui-check-item flex-row-between"),attrs:{_i:"19-"+i}},[o("text",{staticClass:e._$s("20-"+i,"sc","gui-text gui-primary-color"),attrs:{_i:"20-"+i}},[e._v(e._$s("20-"+i,"t0-0",e._s(t.name)))]),o("checkbox",{attrs:{value:e._$s("21-"+i,"a-value",t.name),checked:e._$s("21-"+i,"a-checked",t.checked),_i:"21-"+i}})])})),o("view",{staticClass:e._$s(22,"sc","choose-pay-type-btn"),attrs:{_i:22},on:{click:function(t){return e.payTypeClose()}}})],2),o("gui-iphone-bottom",{attrs:{_i:23}})],1)]),o("gui-modal",{ref:"guimodal1",attrs:{title:"\u8bf7\u8f93\u5165\u652f\u4ed8\u5bc6\u7801",_i:24}},[o("view",{staticClass:e._$s(25,"sc","gui-padding gui-bg-gray"),attrs:{_i:25},slot:"content"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.payPassword,expression:"payPassword"}],staticClass:e._$s(26,"sc","gui-form-input paypassword"),attrs:{_i:26},domProps:{value:e._$s(26,"v-model",e.payPassword)},on:{input:function(t){t.target.composing||(e.payPassword=t.target.value)}}})]),o("view",{staticClass:e._$s(27,"sc","gui-flex gui-rows gui-space-between"),attrs:{_i:27},slot:"btns"},[o("view",{staticClass:e._$s(28,"sc","modal-btns gui-flex1"),attrs:{_i:28}},[o("text",{staticClass:e._$s(29,"sc","modal-btns gui-color-gray"),attrs:{_i:29},on:{click:e.close1}})]),o("view",{staticClass:e._$s(30,"sc","modal-btns gui-flex1"),attrs:{_i:30}},[o("text",{staticClass:e._$s(31,"sc","modal-btns gui-color-blue"),attrs:{_i:31},on:{click:e.confirm1}})])])])],1)},i=[]},1817:function(e,t,n){"use strict";n.r(t);var o=n("c9d0"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},1819:function(e,t,n){"use strict";n.r(t);var o=n("61ba"),a=n("8fce");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,"51abcde4",null,!1,o["a"],s);t["default"]=c.exports},"1a70":function(e,t,n){"use strict";n.r(t);var o=n("6e6d"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"1b8d":function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",{staticClass:e._$s(0,"sc","container"),attrs:{_i:0}},[n("view",{staticClass:e._$s(1,"sc","tui-chatroom-navigatorbar"),attrs:{_i:1}},[n("view",{staticClass:e._$s(2,"sc","tui-chatroom-navigatorbar-back"),attrs:{_i:2},on:{click:e.goBack}}),n("view",{staticClass:e._$s(3,"sc","conversation-title"),attrs:{_i:3}},[e._v(e._$s(3,"t0-0",e._s(e.conversationName)))])]),n("view",{staticClass:e._$s(4,"sc","group-profile"),attrs:{_i:4}},[e._$s(5,"i",e.isShow)?n("TUI-group-profile",{attrs:{id:"groip-profile",conversation:e.conversation,_i:5}}):e._e()],1),n("view",{staticClass:e._$s(6,"sc","message-list"),attrs:{_i:6},on:{click:e.triggerClose}},[n("TUI-message-list",{ref:"messageList",attrs:{id:"message-list",conversation:e.conversation,_i:7}})],1),e._$s(8,"i",e.videoPlay)?n("view",{staticClass:e._$s(8,"sc","container-box"),attrs:{_i:8},on:{click:function(t){return t.stopPropagation(),e.stopVideoHander(t)}}},[e._$s(9,"i",e.videoPlay)?n("video",{staticClass:e._$s(9,"sc","video-message"),attrs:{src:e._$s(9,"a-src",e.videoMessage.payload.videoUrl),poster:e._$s(9,"a-poster",e.videoMessage.payload.thumbUrl),_i:9}}):e._e()]):e._e(),e._$s(10,"i",e.showChat)?n("view",{staticClass:e._$s(10,"sc","message-input"),attrs:{_i:10}},[n("TUI-message-input",{ref:"messageInput",attrs:{id:"message-input",conversation:e.conversation,_i:11},on:{sendMessage:e.sendMessage}})],1):e._e()])},i=[]},"1bfc":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("a34a"));function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return l(e)||u(e,t)||r(e,t)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e,t){if(e){if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function u(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],o=!0,a=!1,i=void 0;try{for(var s,r=e[Symbol.iterator]();!(o=(s=r.next()).done);o=!0)if(n.push(s.value),t&&n.length===t)break}catch(c){a=!0,i=c}finally{try{o||null==r["return"]||r["return"]()}finally{if(a)throw i}}return n}}function l(e){if(Array.isArray(e))return e}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t,n,o,a,i,s){try{var r=e[i](s),c=r.value}catch(u){return void n(u)}r.done?t(c):Promise.resolve(c).then(o,a)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function s(e){g(i,o,a,s,r,"next",e)}function r(e){g(i,o,a,s,r,"throw",e)}s(void 0)}))}}var m="__localFilePath__",_=null,v={data:function(){return{installForBeforeFilePath:"",installed:!1,installing:!1,downloadSuccess:!1,downloading:!1,downLoadPercent:0,downloadedSize:0,packageFileSize:0,tempFilePath:"",title:"\u66f4\u65b0\u65e5\u5fd7",contents:"",is_mandatory:!0,subTitle:"\u53d1\u73b0\u65b0\u7248\u672c",downLoadBtnTextiOS:"\u7acb\u5373\u66f4\u65b0",downLoadBtnText:"\u7acb\u5373\u4e0b\u8f7d\u66f4\u65b0",downLoadingText:"\u5b89\u88c5\u5305\u4e0b\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u540e"}},onLoad:function(t){var n=t.local_storage_key;if(!n)return e("error","local_storage_key\u4e3a\u7a7a\uff0c\u8bf7\u68c0\u67e5\u540e\u91cd\u8bd5"," at uni_modules/uni-upgrade-center-app/pages/upgrade-popup.vue:104"),void uni.navigateBack();var o=uni.getStorageSync(n);if(!o)return e("error","\u5b89\u88c5\u5305\u4fe1\u606f\u4e3a\u7a7a\uff0c\u8bf7\u68c0\u67e5\u540e\u91cd\u8bd5"," at uni_modules/uni-upgrade-center-app/pages/upgrade-popup.vue:111"),void uni.navigateBack();var a=["platform","url","wgt"];for(var i in o)if(-1!==a.indexOf(i)&&!o[i])return e("error","\u53c2\u6570 ".concat(i," \u5fc5\u586b\uff0c\u8bf7\u68c0\u67e5\u540e\u91cd\u8bd5")," at uni_modules/uni-upgrade-center-app/pages/upgrade-popup.vue:119"),void uni.navigateBack();Object.assign(this,o),this.checkLocalStoragePackage()},onBackPress:function(){if(this.is_mandatory)return!0;_&&_.abort()},computed:{isWGT:function(){return"true"===this.wgt},isiOS:function(){return!0}},methods:{checkLocalStoragePackage:function(){var e=uni.getStorageSync(m);if(e){e.version;var t=e.savedFilePath,n=e.installed;n?this.deleteSavedFile(t):(this.downloadSuccess=!0,this.installForBeforeFilePath=t,this.tempFilePath=t)}},closeUpdate:function(){var e=this;return h(o.default.mark((function t(){return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.downloading){t.next=5;break}if(!e.is_mandatory){t.next=3;break}return t.abrupt("return",uni.showToast({title:"\u4e0b\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u540e\u2026\u2026",icon:"none",duration:500}));case 3:return uni.showModal({title:"\u662f\u5426\u53d6\u6d88\u4e0b\u8f7d\uff1f",cancelText:"\u5426",confirmText:"\u662f",success:function(e){e.confirm&&(_&&_.abort(),uni.navigateBack())}}),t.abrupt("return");case 5:if(!e.downloadSuccess||!e.tempFilePath){t.next=10;break}return t.next=8,e.saveFile(e.tempFilePath,e.version);case 8:return uni.navigateBack(),t.abrupt("return");case 10:uni.navigateBack();case 11:case"end":return t.stop()}}),t)})))()},downloadPackage:function(){var e=this;this.downloading=!0,_=uni.downloadFile({url:this.url,success:function(t){200==t.statusCode&&(e.downloadSuccess=!0,e.tempFilePath=t.tempFilePath,e.is_mandatory&&e.installPackage())},complete:function(){e.downloading=!1,e.downLoadPercent=0,e.downloadedSize=0,e.packageFileSize=0,_=null}}),_.onProgressUpdate((function(t){e.downLoadPercent=t.progress,e.downloadedSize=(t.totalBytesWritten/Math.pow(1024,2)).toFixed(2),e.packageFileSize=(t.totalBytesExpectedToWrite/Math.pow(1024,2)).toFixed(2)}))},installPackage:function(){var e=this;this.isWGT&&(this.installing=!0),plus.runtime.install(this.tempFilePath,{force:!1},function(){var t=h(o.default.mark((function t(n){var a;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.installing=!1,e.installed=!0,e.isWGT?e.is_mandatory&&(uni.showLoading({icon:"none",title:"\u5b89\u88c5\u6210\u529f\uff0c\u6b63\u5728\u91cd\u542f\u2026\u2026"}),setTimeout((function(){uni.hideLoading(),e.restart()}),1e3)):(a=uni.getStorageSync(m),uni.setStorageSync(m,f(f({},a),{},{installed:!0})));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),function(){var t=h(o.default.mark((function t(n){return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.installForBeforeFilePath){t.next=4;break}return t.next=3,e.deleteSavedFile(e.installForBeforeFilePath);case 3:e.installForBeforeFilePath="";case 4:e.installing=!1,e.installed=!1,uni.showModal({title:"\u66f4\u65b0\u5931\u8d25".concat(e.isWGT?"":"\uff0cAPK\u6587\u4ef6\u4e0d\u5b58\u5728","\uff0c\u8bf7\u91cd\u65b0\u4e0b\u8f7d"),content:n.message,showCancel:!1});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.isWGT||uni.navigateBack()},restart:function(){this.installed=!1,plus.runtime.restart()},saveFile:function(e,t){return h(o.default.mark((function n(){var a,s,r,c;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,uni.saveFile({tempFilePath:e});case 2:if(a=n.sent,s=i(a,2),r=s[0],c=s[1],!r){n.next=8;break}return n.abrupt("return");case 8:uni.setStorageSync(m,{version:t,savedFilePath:c.savedFilePath});case 9:case"end":return n.stop()}}),n)})))()},deleteSavedFile:function(e){return uni.removeStorageSync(m),uni.removeSavedFile({filePath:e})},jumpToAppStore:function(){plus.runtime.openURL(this.url)}}};t.default=v}).call(this,n("0de9")["default"])},"1c2f":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n("1692")),a=r(n("ee8e")),i=r(n("760f")),s=r(n("9f0d"));function r(e){return e&&e.__esModule?e:{default:e}}var c={data:function(){return{firstSendMessage:!0,inputText:"",extensionArea:!1,sendMessageBtn:!1,displayFlag:"",isAudio:!1,bottomVal:0,startPoint:0,popupToggle:!1,isRecording:!1,canSend:!0,text:"\u6309\u4f4f\u8bf4\u8bdd",title:" ",notShow:!1,isShow:!0,recordTime:0,recordTimer:null,commonFunction:[],displayServiceEvaluation:!1,displayCommonWords:!1,displayOrderList:!1}},components:{TUIEmoji:o.default,TUICommonWords:a.default,TUIOrderList:i.default,TUIServiceEvaluation:s.default},props:{conversation:{type:Object,default:function(){}}},watch:{conversation:{handler:function(e){},immediate:!0,deep:!0}},beforeMount:function(){var e=this;this.recorderManager=uni.getRecorderManager(),this.recorderManager.onStop((function(t){clearInterval(e.recordTimer);var n={duration:t.duration?t.duration:1e3*e.recordTime,tempFilePath:t.tempFilePath,fileSize:t.fileSize?t.fileSize:48*e.recordTime/8*1024};if(uni.hideLoading(),e.canSend)if(n.duration<1e3)uni.showToast({title:"\u5f55\u97f3\u65f6\u95f4\u592a\u77ed",icon:"none"});else{var o=uni.$TUIKit.createAudioMessage({to:e.getToAccount(),conversationType:e.conversation.type,payload:{file:n}});e.$sendTIMMessage(o)}e.setData({startPoint:0,popupToggle:!1,isRecording:!1,canSend:!0,title:" ",text:"\u6309\u4f4f\u8bf4\u8bdd"})}))},methods:{switchAudio:function(){this.setData({isAudio:!this.isAudio,text:"\u6309\u4f4f\u8bf4\u8bdd"})},handleLongPress:function(e){var t=this;this.recorderManager.start({duration:6e4,sampleRate:44100,numberOfChannels:1,encodeBitRate:192e3,format:"aac"}),this.setData({startPoint:e.touches[0],title:"\u6b63\u5728\u5f55\u97f3",notShow:!0,isShow:!1,isRecording:!0,popupToggle:!0,recordTime:0}),this.recordTimer=setInterval((function(){t.recordTime++}),1e3)},handleTouchMove:function(e){this.isRecording&&(this.startPoint.clientY-e.touches[e.touches.length-1].clientY>100?this.setData({text:"\u62ac\u8d77\u505c\u6b62",title:"\u677e\u5f00\u624b\u6307\uff0c\u53d6\u6d88\u53d1\u9001",canSend:!1}):this.startPoint.clientY-e.touches[e.touches.length-1].clientY>20?this.setData({text:"\u62ac\u8d77\u505c\u6b62",title:"\u4e0a\u5212\u53ef\u53d6\u6d88",canSend:!0}):this.setData({text:"\u62ac\u8d77\u505c\u6b62",title:"\u6b63\u5728\u5f55\u97f3",canSend:!0}))},handleTouchEnd:function(){this.setData({isRecording:!1,popupToggle:!1}),uni.hideLoading(),this.recorderManager.stop()},handleEmoji:function(){var e="emoji";"emoji"===this.displayFlag&&(e=""),this.setData({displayFlag:e})},handleExtensions:function(){var e="extension";"extension"===this.displayFlag&&(e=""),this.setData({displayFlag:e})},error:function(t){e("log",t.detail," at components/tui-chat/message-input/index.vue:307")},handleSendPicture:function(){this.sendImageMessage("camera")},handleSendImage:function(){this.sendImageMessage("album")},sendImageMessage:function(e){var t=this;uni.chooseImage({sourceType:[e],count:1,success:function(e){if(e){var n=uni.$TUIKit.createImageMessage({to:t.getToAccount(),conversationType:t.conversation.type,payload:{file:e},onProgress:function(e){n.percent=e}});t.$sendTIMMessage(n)}}})},handleShootVideo:function(){this.sendVideoMessage("camera")},handleSendVideo:function(){this.sendVideoMessage("album")},sendVideoMessage:function(e){var t=this;uni.chooseVideo({sourceType:[e],maxDuration:60,camera:"back",success:function(e){if(e){var n=uni.$TUIKit.createVideoMessage({to:t.getToAccount(),conversationType:t.conversation.type,payload:{file:e},onProgress:function(e){n.percent=e}});t.$sendTIMMessage(n)}}})},handleCommonFunctions:function(e){switch(e.target.dataset.function.key){case"0":this.setData({displayCommonWords:!0});break;case"1":this.setData({displayOrderList:!0});break;case"2":this.setData({displayServiceEvaluation:!0});break;default:break}},handleSendOrder:function(){this.setData({displayOrderList:!0})},appendMessage:function(e){this.setData({inputText:this.inputText+e.detail.message,sendMessageBtn:!0})},getToAccount:function(){if(!this.conversation||!this.conversation.conversationID)return"";switch(this.conversation.type){case"C2C":return this.conversation.conversationID.replace("C2C","");case"GROUP":return this.conversation.conversationID.replace("GROUP","");default:return this.conversation.conversationID}},handleCalling:function(t){if("GROUP"!==this.conversation.type){var n=this.conversation.userProfile.userID;"undefined"===typeof uni.$TUICalling?(logger.error("\u8bf7\u4f7f\u7528\u771f\u673a\u8fd0\u884c\u5e76\u4e14\u81ea\u5b9a\u4e49\u57fa\u5ea7\u8c03\u8bd5\uff0c\u53ef\u80fd\u5f71\u54cd\u97f3\u89c6\u9891\u529f\u80fd\uff5e \u63d2\u4ef6\u5730\u5740\uff1ahttps://ext.dcloud.net.cn/plugin?id=7097 , \u8c03\u8bd5\u5730\u5740\uff1ahttps://nativesupport.dcloud.net.cn/NativePlugin/use/use"),uni.showToast({title:"\u8bf7\u4f7f\u7528\u771f\u673a\u8fd0\u884c\u5e76\u4e14\u81ea\u5b9a\u4e49\u57fa\u5ea7\u8c03\u8bd5\uff0c\u53ef\u80fd\u5f71\u54cd\u97f3\u89c6\u9891\u529f\u80fd\uff5e ",icon:"none",duration:3e3})):uni.$TUICalling.call({userID:n,type:t},(function(t){e("log",JSON.stringify(t)," at components/tui-chat/message-input/index.vue:454")}))}else uni.showToast({title:"\u7fa4\u804a\u6682\u4e0d\u652f\u6301",icon:"none"})},sendTextMessage:function(e,t){var n=this.getToAccount(),o=t?e:this.inputText,a=uni.$TUIKit.createTextMessage({to:n,conversationType:this.conversation.type,payload:{text:o}});this.setData({inputText:"",sendMessageBtn:!1}),this.$sendTIMMessage(a)},onInputValueChange:function(e){e.detail.value?this.setData({sendMessageBtn:!0}):this.setData({sendMessageBtn:!1})},$handleSendTextMessage:function(e){this.sendTextMessage(e.detail.message,!0),this.setData({displayCommonWords:!1})},$handleSendCustomMessage:function(e){var t=uni.$TUIKit.createCustomMessage({to:this.getToAccount(),conversationType:this.conversation.type,payload:e.detail.payload});this.$sendTIMMessage(t),this.setData({displayOrderList:!1})},$handleCloseCards:function(e){switch(e.detail.key){case"0":this.setData({displayCommonWords:!1});break;case"1":this.setData({displayOrderList:!1});break;case"2":this.setData({displayServiceEvaluation:!1});break;default:break}},$sendTIMMessage:function(e){var t=this,n=getApp().globalData.SDKAppID;this.$emit("sendMessage",{detail:{message:e}}),uni.$TUIKit.sendMessage(e).then((function(e){t.firstSendMessage&&uni.$aegis.reportEvent({name:"sendMessage",ext1:"sendMessage-success",ext2:"uniTuikitExternal",ext3:"".concat(n)}),t.firstSendMessage=!1})).catch((function(e){uni.$aegis.reportEvent({name:"sendMessage",ext1:"sendMessage-failed#error: ".concat(e),ext2:"uniTuikitExternal",ext3:"".concat(n)})})),this.setData({displayFlag:""})},handleClose:function(){this.setData({displayFlag:""})},handleServiceEvaluation:function(){this.setData({displayServiceEvaluation:!0})},inputBindFocus:function(){},inputBindBlur:function(){}}};t.default=c}).call(this,n("0de9")["default"])},"1dc2":function(e,t,n){"use strict";n.r(t);var o=n("6095"),a=n("f681");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},"1e6b":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{userID:"",newgroup:{},groupmemberprofile:{},groupmemberavatar:[],groupmembernick:[],hidden:!0,notShow:!0,isShow:!1,showMore:!1,addShow:!1,popupToggle:!1,quitpopupToggle:!1,addpopupToggle:!1}},components:{},props:{conversation:{type:Object}},watch:{conversation:{handler:function(e){e.type,this.setData({conversation:e})},immediate:!0,deep:!0}},beforeMount:function(){},methods:{showMoreHandler:function(){var e=this;uni.$TUIKit.getGroupMemberList({groupID:this.conversation.groupProfile.groupID,count:50,offset:0}).then((function(t){"Private"===e.conversation.groupProfile.type&&e.setData({addShow:!0}),t.data.memberList.length>3&&e.setData({showMore:!0}),e.setData({groupmemberprofile:t.data.memberList,hidden:!e.hidden,notShow:!e.notShow,isShow:!e.isShow})}))},showless:function(){this.setData({isShow:!1,notShow:!0,hidden:!0})},showMoreMember:function(){this.setData({popupToggle:!0})},close:function(){this.setData({popupToggle:!1,addpopupToggle:!1,quitpopupToggle:!1})},quitGroup:function(){this.setData({quitpopupToggle:!0,popupToggle:!1})},quitgroupConfirm:function(){uni.$TUIKit.quitGroup(this.conversation.groupProfile.groupID).then((function(t){e("log",t.data.groupID," at components/tui-group/group-profile/index.vue:188"),uni.navigateBack({delta:1})})).catch((function(t){uni.showToast({title:"\u8be5\u7fa4\u4e0d\u5141\u8bb8\u7fa4\u4e3b\u4e3b\u52a8\u9000\u51fa",icon:"none"}),e("warn","quitGroup error:",t," at components/tui-group/group-profile/index.vue:199")}))},quitgroupAbandon:function(){e("log",22222," at components/tui-group/group-profile/index.vue:204"),this.setData({quitpopupToggle:!1})},addMember:function(){this.setData({addpopupToggle:!0})},binduserIDInput:function(e){var t=e.detail.value;this.setData({userID:t})},submit:function(){var t=this;e("log",this.userID," at components/tui-group/group-profile/index.vue:224"),uni.$TUIKit.addGroupMember({groupID:this.conversation.groupProfile.groupID,userIDList:[this.userID]}).then((function(e){e.data.successUserIDList.length>0&&(uni.showToast({title:"\u6dfb\u52a0\u6210\u529f",duration:800}),t.userID="",t.addMemberModalVisible=!1,t.setData({addpopupToggle:!1})),e.data.existedUserIDList.length>0&&uni.showToast({title:"\u8be5\u7528\u6237\u5df2\u5728\u7fa4\u4e2d",duration:800,icon:"none"})})).catch((function(t){e("warn","addGroupMember error:",t," at components/tui-group/group-profile/index.vue:252"),uni.showToast({title:"\u6dfb\u52a0\u5931\u8d25\uff0c\u8bf7\u786e\u4fdd\u8be5\u7528\u6237\u5b58\u5728",duration:800,icon:"none"})}))},handleEditToggle:function(){e("log","\u5360\u4f4d\uff1a\u51fd\u6570 handleEditToggle \u672a\u58f0\u660e"," at components/tui-group/group-profile/index.vue:263")},getgroupProfile:function(){e("log","\u5360\u4f4d\uff1a\u51fd\u6570 getgroupProfile \u672a\u58f0\u660e"," at components/tui-group/group-profile/index.vue:267")}}};t.default=n}).call(this,n("0de9")["default"])},2043:function(e,t,n){"use strict";n.r(t);var o=n("98cc"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},2108:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",{staticClass:e._$s(0,"sc","flex-column-center"),attrs:{_i:0}},[n("view",{staticClass:e._$s(1,"sc","email-text flex-row-between flex-row-center"),attrs:{_i:1}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.newEmail,expression:"newEmail"}],attrs:{_i:2},domProps:{value:e._$s(2,"v-model",e.newEmail)},on:{input:function(t){t.target.composing||(e.newEmail=t.target.value)}}})]),n("view",{staticClass:e._$s(3,"sc","email-text flex-row-between flex-row-center"),attrs:{_i:3}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{_i:4},domProps:{value:e._$s(4,"v-model",e.password)},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),n("view",{staticClass:e._$s(5,"sc","email-text flex-row-between flex-row-center"),attrs:{_i:5}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.mailcode,expression:"mailcode"}],attrs:{_i:6},domProps:{value:e._$s(6,"v-model",e.mailcode)},on:{input:function(t){t.target.composing||(e.mailcode=t.target.value)}}}),n("view",{staticClass:e._$s(7,"sc","sendcode"),attrs:{_i:7},on:{click:function(t){return e.sendcode()}}},[e._v(e._$s(7,"t0-0",e._s(e.vcodeBtnName)))])]),n("view",{staticClass:e._$s(8,"sc","flex-row-center"),attrs:{_i:8}},[n("view",{staticClass:e._$s(9,"sc","submitBtn"),attrs:{_i:9},on:{click:function(t){return e.confirmChange()}}})])])},i=[]},"21f0":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{isApp:!1,verifyBtnName:"\u8eab\u4efd\u8ba4\u8bc1",opay:{},userId:uni.graceJS.getStorage("userId"),picture:"http://cdn.duitang.com/uploads/item/201410/20/20141020162058_UrMNe.jpeg"}},created:function(){this.isApp=!0},onShow:function(){var e=uni.graceJS.getStorage("token");0==e?uni.redirectTo({url:"../loginPage/loginPassword"}):this.requestData()},methods:{checkLevel:function(){var e=uni.graceJS.getStorage("level");return!(void 0==e||e<1)||(uni.showToast({title:"\u8bf7\u5148\u5b8c\u6210\u8eab\u4efd\u8ba4\u8bc1",icon:"none",duration:2e3}),!1)},updateLevel:function(e){uni.setStorageSync("level",e),-2==e?this.verifyBtnName="\u8eab\u4efd\u8ba4\u8bc1\u5931\u8d25,\u8bf7\u91cd\u65b0\u8f93\u5165":-1==e?this.verifyBtnName="\u6b63\u5728\u5ba1\u6838\u4e2d":0==e?this.verifyBtnName="\u8eab\u4efd\u8ba4\u8bc1":e>0&&(this.verifyBtnName="\u5df2\u8ba4\u8bc1")},requestData:function(){var e=this,t={};uni.PYRequest.allAssets(t,(function(t){t.data.length>0?e.opay=t.data[0]:e.opay={freeUsable:0,usable:0,frozen:0,freeFrozen:0},e.updateLevel(t.level)}),(function(e){}),(function(e){}))},actionToMyBankCardPage:function(){this.checkLevel()&&uni.navigateTo({url:"../myBankCardPage/myBankCardPage"})},actionToCert:function(){var e=this;uni.graceJS.getStorage("level")>0||uni.PYRequest.userInfo({},(function(t){var n=t.data.certLevel;-1!=n?(e.updateLevel(n),-2!=n&&0!=n||uni.navigateTo({url:"./userCert/cert"})):uni.showToast({icon:"none",title:"\u6b63\u5728\u5ba1\u6838\u4e2d,\u8bf7\u8010\u5fc3\u7b49\u5f85"})}),(function(e){}),(function(e){}))},actionToRecord:function(){this.checkLevel()&&uni.navigateTo({url:"./userRecord/userRecord"})},actionToScan:function(){uni.scanCode({scanType:["qrCode"],success:function(t){e("log","\u6761\u7801\u7c7b\u578b\uff1a"+t.scanType," at pages/walletPage/walletPage.vue:227"),e("log","\u6761\u7801\u5185\u5bb9\uff1a"+t.result," at pages/walletPage/walletPage.vue:228"),uni.PYRequest.post(t.result,{},!1,(function(t){var n=JSON.stringify(t);e("log","\u6761\u7801\u5185\u5bb92\uff1a"+n," at pages/walletPage/walletPage.vue:231"),uni.navigateTo({url:"securityVerificationPage/securityVerificationPage?orderInfo="+n})}),(function(e){}),(function(e){}))}})},actionToUserInfo:function(){uni.navigateTo({url:"userInfoPage/userInfoPage"})},actionToBuy:function(){this.checkLevel()&&(uni.graceJS.setStorage({tabIndex:1}),uni.switchTab({url:"../createOrderPage/createOrderPage"}))},actionToSell:function(){this.checkLevel()&&(uni.graceJS.setStorage({tabIndex:2}),uni.switchTab({url:"../createOrderPage/createOrderPage"}))},logout:function(){uni.graceJS.removeStorage("token"),uni.redirectTo({url:"../loginPage/loginPassword"})},kefuMain:function(e){},loginOut:function(){kefuModule.LoginOut({},(function(e){uni.showToast({icon:"none",title:JSON.stringify(e)})}))},navigateToKefu:function(){uni.PYRequest.queryCSInfo({},(function(t){e("log",t," at pages/walletPage/walletPage.vue:364"),uni.$TUIKit.login({userID:t.userId,userSig:t.sig}).then((function(){setTimeout((function(){var e="../TUI-Chat/chat?conversationID="+t.cs;uni.navigateTo({url:e})}),1e3)})).catch((function(e){}))}),(function(e){uni.showToast({icon:"none",title:"\u8fde\u63a5\u5728\u7ebf\u5ba2\u670d\u7cfb\u7edf\u5931\u8d25,\u8bf7\u7a0d\u5019\u91cd\u8bd5"})}),(function(e){}))}}};t.default=n}).call(this,n("0de9")["default"])},2263:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var o={guiPage:n("af38").default,goodsDetailSwitchComponents:n("346b").default},a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("gui-page",{ref:"guipage",attrs:{apiLoadingStatus:e.apiLoadingStatus,refresh:!0,isLoading:e.isLoading,loadmore:e.loadmore,fullPage:!0,footerSets:{height:100,zIndex:100,bg:"linear-gradient(to bottom, #F8F8F8, #F8F8F8)"},_i:0},on:{reload:e.reload,loadmorefun:e.getdata}},[o("goodsDetailSwitchComponents",{attrs:{slot:"gFixedTop",dataList:e.navItems,_i:1},on:{changeNav:e.changeNav},slot:"gFixedTop"}),o("view",{staticClass:e._$s(2,"sc","flex-column-center"),attrs:{_i:2},slot:"gBody"},[e._$s(3,"i",0==e.selectedIndex)?o("view",{staticClass:e._$s(3,"sc","content-bg"),attrs:{_i:3}},e._l(e._$s(4,"f",{forItems:e.messageList}),(function(t,a,i,s){return o("view",{key:e._$s(4,"f",{forIndex:i,key:"4-"+s}),attrs:{_i:"4-"+s},on:{click:function(n){return e.actionToMessageDetailPage(t)}}},[o("view",{staticClass:e._$s("5-"+s,"sc","message-info-bg flex-row"),attrs:{_i:"5-"+s}},[e._$s("6-"+s,"i","0"==t.isRead)?o("image",{staticClass:e._$s("6-"+s,"sc","message-icon"),attrs:{src:e._$s("6-"+s,"a-src",n("a1b3")),_i:"6-"+s}}):e._e(),o("view",{staticClass:e._$s("7-"+s,"sc","flex-column message-info-cintent"),attrs:{_i:"7-"+s}},[o("text",{staticClass:e._$s("8-"+s,"sc","message-info-title"),attrs:{_i:"8-"+s}},[e._v(e._$s("8-"+s,"t0-0",e._s(t.head)))]),o("text",{staticClass:e._$s("9-"+s,"sc","message-info-content"),attrs:{_i:"9-"+s}},[e._v(e._$s("9-"+s,"t0-0",e._s(t.info)))]),o("text",{staticClass:e._$s("10-"+s,"sc","message-info-time"),attrs:{_i:"10-"+s}},[e._v(e._$s("10-"+s,"t0-0",e._s(t.createTime)))])]),o("image",{staticClass:e._$s("11-"+s,"sc","message-right"),attrs:{src:e._$s("11-"+s,"a-src",n("7de3")),_i:"11-"+s}})]),o("view",{staticClass:e._$s("12-"+s,"sc","message-line"),attrs:{_i:"12-"+s}})])})),0):e._e(),e._$s(13,"i",1==e.selectedIndex)?o("view",[o("view",{staticClass:e._$s(14,"sc","gg-bg"),attrs:{_i:14}},[o("image",{staticClass:e._$s(15,"sc","gg-message-icon"),attrs:{src:e._$s(15,"a-src",n("a1b3")),_i:15}}),o("view",{staticClass:e._$s(16,"sc","gg-title text-one-line"),attrs:{_i:16}}),o("view",{staticClass:e._$s(17,"sc","gg-time"),attrs:{_i:17}})])]):e._e()])],1)},i=[]},"22c0":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("eb08"),a={data:function(){return{}},components:{},props:{message:{type:Object,default:function(){}},isMine:{type:Boolean,default:!0}},watch:{message:{handler:function(e){this.setData({message:e,renderDom:this.parseCustom(e)})},immediate:!0,deep:!0}},methods:{extractCallingInfoFromMessage:function(e){var t=JSON.parse(e.payload.data);if(1!==t.businessID)return"";var n=JSON.parse(t.data);switch(t.actionType){case 1:return n.call_end>=0&&!t.groupID?"\u901a\u8bdd\u65f6\u957f\uff1a".concat((0,o.formateTime)(n.call_end)):t.groupID?"\u7ed3\u675f\u7fa4\u804a":n.data&&"switchToAudio"===n.data.cmd?"\u5207\u6362\u8bed\u97f3\u901a\u8bdd":n.data&&"switchToVideo"===n.data.cmd?"\u5207\u6362\u89c6\u9891\u901a\u8bdd":"\u53d1\u8d77\u901a\u8bdd";case 2:return"\u53d6\u6d88\u901a\u8bdd";case 3:return n.data&&"switchToAudio"===n.data.cmd?"\u5207\u6362\u8bed\u97f3\u901a\u8bdd":n.data&&"switchToVideo"===n.data.cmd?"\u5207\u6362\u89c6\u9891\u901a\u8bdd":"\u5df2\u63a5\u542c";case 4:return"\u62d2\u7edd\u901a\u8bdd";case 5:return n.data&&"switchToAudio"===n.data.cmd?"\u5207\u6362\u8bed\u97f3\u901a\u8bdd":n.data&&"switchToVideo"===n.data.cmd?"\u5207\u6362\u89c6\u9891\u901a\u8bdd":"\u65e0\u5e94\u7b54";default:return""}},parseCustom:function(e){if("order"===e.payload.data){var t=JSON.parse(e.payload.extension),n=[{type:"order",name:"custom",title:t.title||"",imageUrl:t.imageUrl||"",price:t.price||0,description:e.payload.description}];return n}if("consultion"===e.payload.data){var o=JSON.parse(e.payload.extension),a=[{type:"consultion",title:o.title||"",item:o.item||0,description:o.description}];return a}if("evaluation"===e.payload.data){var i=JSON.parse(e.payload.extension),s=[{type:"evaluation",title:e.payload.description,score:i.score,description:i.comment}];return s}if("group_create"===e.payload.data){var r=[{type:"group_create",text:e.payload.extension}];return r}var c=JSON.parse(e.payload.data);if(1===c.businessID){if("GROUP"===e.conversationType){5===e.payload.data.actionType&&(e.nick=e.payload.data.inviteeList?e.payload.data.inviteeList.join(","):e.from);var u=this.extractCallingInfoFromMessage(e),l="".concat(u),d=[{type:"groupCalling",text:l,userIDList:[]}];return d}if("C2C"===e.conversationType){var f=this.extractCallingInfoFromMessage(e),p=[{type:"c2cCalling",text:f}];return p}}if("group_create"===e.payload.data){var g=[{type:"group_create",text:e.payload.extension}];return g}return[{type:"notSupport",text:"[\u81ea\u5b9a\u4e49\u6d88\u606f]"}]}}};t.default=a},2390:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={data:function(){return{renderDom:[],percent:0,faceUrl:"https://web.sdk.qcloud.com/im/assets/face-elem/"}},components:{},props:{message:{type:Object},isMine:{type:Boolean,default:!0}},watch:{message:{handler:function(e){this.setData({renderDom:this.parseFace(e)})},immediate:!0,deep:!0}},methods:{parseFace:function(e){var t={src:"".concat(this.faceUrl+e.payload.data,"@2x.png")};return t},previewImage:function(){uni.previewImage({current:this.renderDom[0].src,urls:[this.renderDom[0].src]})}}};t.default=o},2485:function(e,t,n){"use strict";n.r(t);var o=n("5694"),a=n("6ed5");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},2594:function(e,t){e.exports="/static/img/bankCard/wx.png"},"25d3":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var o={basePageComponents:n("0860").default,goodsDetailSwitchComponents:n("346b").default,coBuyComponent:n("9bf6").default,coSellComponent:n("b56a").default},a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basePageComponents",{ref:"basePage",attrs:{loadmore:!1,apiLoadingStatus:!1,isLoading:!1,canRefresh:!1,_i:0}},[n("goodsDetailSwitchComponents",{attrs:{slot:"fixedTop",dataList:e.navItems,currentIndex:e.selectedIndex,_i:1},on:{changeNav:e.changeNav},slot:"fixedTop"}),n("view",{slot:"body"},[n("view",{directives:[{name:"show",rawName:"v-show",value:e._$s(3,"v-show",0==e.selectedIndex),expression:"_$s(3,'v-show',selectedIndex == 0)"}],attrs:{_i:3}},[n("coBuyComponent",{attrs:{opay:e.opay,payment:e.payment1,_i:4},on:{updatData:e.requestData}})],1),n("view",{directives:[{name:"show",rawName:"v-show",value:e._$s(5,"v-show",1==e.selectedIndex),expression:"_$s(5,'v-show',selectedIndex == 1)"}],attrs:{_i:5}},[n("coSellComponent",{attrs:{opay:e.opay,payment:e.payment2,_i:6},on:{updatData:e.requestData}})],1)])],1)},i=[]},"25e2":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s(n("6035")),a=s(n("df2b")),i=s(n("714f"));function s(e){return e&&e.__esModule?e:{default:e}}getApp();var r={components:{TUIMessageList:o.default,TUIMessageInput:a.default,TUIGroupProfile:i.default},props:{},data:function(){return{conversationName:"",conversation:{},messageList:[],isShow:!1,showChat:!0,conversationID:"",videoPlay:!1,videoMessage:{},config:{sdkAppID:"",userID:"",userSig:"",type:1,tim:null}}},created:function(){var e=this;uni.$on("videoPlayerHandler",(function(t){e.videoPlay=t.isPlay,e.videoMessage=t.message}))},onLoad:function(t){var n=this,o=t.conversationID;this.setData({conversationID:o}),uni.$TUIKit.setMessageRead({conversationID:o}).then((function(){})),uni.$TUIKit.getConversationProfile(o).then((function(t){if(e("log",t," at pages/TUI-Chat/chat.vue:84"),0==t.code){var o=t.data.conversation;n.conversation=o,n.setData({conversationName:n.getConversationName(o),isShow:"GROUP"===o.type})}else n.conversationName="\u5f53\u524d\u6ca1\u6709\u5ba2\u670d\u5728\u7ebf"}))},mounted:function(){},onUnload:function(){},methods:{stopVideoHander:function(){this.videoPlay=!1},getConversationName:function(e){return"@TIM#SYSTEM"===e.type?(this.setData({showChat:!1}),"\u7cfb\u7edf\u901a\u77e5"):"C2C"===e.type?e.remark||e.userProfile.nick||e.userProfile.userID:"GROUP"===e.type?e.groupProfile.name||e.groupProfile.groupID:void 0},sendMessage:function(e){this.$refs.messageList.updateMessageList(e.detail.message)},triggerClose:function(){this.showChat&&this.$refs.messageInput.handleClose()},goBack:function(){uni.navigateBack({delta:1})}}};t.default=r}).call(this,n("0de9")["default"])},2626:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{payment:[],name:""}},onShow:function(){this.getpayment()},methods:{open:function(){this.$refs.guimodal1.open()},close:function(){this.$refs.guimodal1.close()},actionTo:function(e){"alipay"==e?this.actionToAddzfb():"wechat"==e?this.actionToAddwx():"bank"==e&&this.actionToAddBankCard()},actionToAddBankCard:function(){this.$refs.guimodal1.close(),uni.navigateTo({url:"./addBankCard?name="+this.name})},actionToAddzfb:function(){this.$refs.guimodal1.close(),uni.navigateTo({url:"addAlipayPage?type=\u652f\u4ed8\u5b9d"})},actionToAddwx:function(){this.$refs.guimodal1.close(),uni.navigateTo({url:"addAlipayPage?type=\u5fae\u4fe1"})},getpayment:function(){var t=this;uni.PYRequest.getpayment({edit:!0},(function(n){t.payment=n.data,t.name=n.name,e("log",n," at pages/myBankCardPage/myBankCardPage.vue:127")}),(function(e){}),(function(e){}))}}};t.default=n}).call(this,n("0de9")["default"])},2773:function(e,t,n){"use strict";n.r(t);var o=n("3a40"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"27d8":function(e,t){e.exports="/static/static/images/audio-msg.png"},2931:function(e,t,n){"use strict";n.r(t);var o=n("b62c"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"29dc":function(e,t,n){"use strict";n.r(t);var o=n("5606"),a=n("1817");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},"2a6e":function(e){e.exports=JSON.parse('{"uni-countdown.day":"\u5929","uni-countdown.h":"\u6642","uni-countdown.m":"\u5206","uni-countdown.s":"\u79d2"}')},"2b78":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{selectedIndex:0,apiLoadingStatus:!1,pageLoading:!1,buttonName:"\u8ddf\u4ed6\u4e70",navItems:[{id:0,name:"\u6211\u8981\u4e70"},{id:1,name:"\u6211\u8981\u5356"}],dataList:[]}},onLoad:function(){},onShow:function(){this.orderQueryPreOrder()},methods:{changeNav:function(t){e("log",t," at pages/tradPage/tradPage.vue:50"),this.selectedIndex=t,this.$data.buttonName=0==t?"\u8ddf\u4ed6\u4e70":"\u6211\u8981\u5356",this.orderQueryPreOrder()},reload:function(){this.apiLoadingStatus=!1,this.pageLoading=!1,this.$refs.basePage.endReload(),this.orderQueryPreOrder()},loadmorefun:function(){this.pageLoading=!1,this.apiLoadingStatus=!1,this.$refs.basePage.endReload(),this.$refs.basePage.nomore()},orderQueryPreOrder:function(){var e=this,t="buy";1==this.selectedIndex&&(t="sell");var n={side:t,amount:"0"};uni.PYRequest.orderQueryPreOrder(n,(function(t){e.dataList=t.data}),(function(e){}),(function(t){e.pageLoading=!1,e.apiLoadingStatus=!1,e.$refs.basePage.endReload()}))}}};t.default=n}).call(this,n("0de9")["default"])},"2bbf":function(e,t){},"2dcd":function(e,t,n){"use strict";n.r(t);var o=n("73c5"),a=n("5041");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,"50d65238",null,!1,o["a"],s);t["default"]=c.exports},"2e44":function(e,t,n){"use strict";n.r(t);var o=n("6e39"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"2eb1":function(e,t,n){"use strict";n.r(t);var o=n("c432"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"2f1a":function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",{staticClass:e._$s(0,"sc","flex-column-center"),attrs:{_i:0}},[n("view",{staticClass:e._$s(1,"sc","money"),attrs:{_i:1}},[e._v(e._$s(1,"t0-0",e._s(e.orderInfo.amount))+e._$s(1,"t0-1",e._s(e.orderInfo.amount)))]),n("view",{staticClass:e._$s(2,"sc","notice"),attrs:{_i:2}}),n("view",{staticClass:e._$s(3,"sc","notice2"),attrs:{_i:3}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.payPassword,expression:"payPassword"}],staticClass:e._$s(4,"sc","password"),attrs:{_i:4},domProps:{value:e._$s(4,"v-model",e.payPassword)},on:{input:function(t){t.target.composing||(e.payPassword=t.target.value)}}}),n("view",{staticClass:e._$s(5,"sc","line"),attrs:{_i:5}}),n("view",{staticClass:e._$s(6,"sc","submit"),attrs:{_i:6},on:{click:function(t){return e.conformPay()}}})])},i=[]},"30c3":function(e,t,n){(function(t,n){function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(t,n){e.exports=n()}(0,(function(){return function(e){function t(o){if(n[o])return n[o].exports;var a=n[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="D:\\code\\cos-wx-sdk-v5-master\\demo\\lib",t(t.s=5)}([function(e,n,o){"use strict";function a(e){return encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function i(e){return d(e,(function(e){return"object"==typeof e?i(e):e}))}function s(e,t){return l(t,(function(n,o){e[o]=t[o]})),e}function r(e){return e instanceof Array}function c(e,t){for(var n=!1,o=0;o<e.length;o++)if(t===e[o]){n=!0;break}return n}function u(e){return r(e)?e:[e]}function l(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)}function d(e,t){var n=r(e)?[]:{};for(var o in e)e.hasOwnProperty(o)&&(n[o]=t(e[o],o));return n}function f(e,t){var n=r(e),o=n?[]:{};for(var a in e)e.hasOwnProperty(a)&&t(e[a],a)&&(n?o.push(e[a]):o[a]=e[a]);return o}var p=o(8),g=o(6),h=o(10),m=o(7),_=o(1),v=function(e){e=e||{};var n=e.SecretId,o=e.SecretKey,s=e.KeyTime,r=(e.method||e.Method||"get").toLowerCase(),c=i(e.Query||e.params||{}),u=i(e.Headers||e.headers||{}),l=e.Pathname||"/"+(e.Key||"");if(!n)return t("error","missing param SecretId"," at node_modules/cos-wx-sdk-v5/demo/lib/cos-wx-sdk-v5.js:1");if(!o)return t("error","missing param SecretKey"," at node_modules/cos-wx-sdk-v5/demo/lib/cos-wx-sdk-v5.js:1");var d=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t.sort((function(e,t){return e=e.toLowerCase(),t=t.toLowerCase(),e===t?0:e>t?1:-1}))},f=function(e){var t,n,o,i=[],s=d(e);for(t=0;t<s.length;t++)n=s[t],o=void 0===e[n]||null===e[n]?"":""+e[n],n=n.toLowerCase(),n=a(n),o=a(o)||"",i.push(n+"="+o);return i.join("&")},p=Math.round(A(e.SystemClockOffset)/1e3)-1,h=p,m=e.Expires||e.expires;h+=void 0===m?900:1*m||0;var _=n,v=s||p+";"+h,y=s||p+";"+h,M=d(u).join(";").toLowerCase(),C=d(c).join(";").toLowerCase(),w=g.HmacSHA1(y,o).toString(),I=[r,l,f(c),f(u),""].join("\n"),b=["sha1",v,g.SHA1(I).toString(),""].join("\n");return["q-sign-algorithm=sha1","q-ak="+_,"q-sign-time="+v,"q-key-time="+y,"q-header-list="+M,"q-url-param-list="+C,"q-signature="+g.HmacSHA1(b,w).toString()].join("&")},y=function(){},M=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&void 0!==e[n]&&null!==e[n]&&(t[n]=e[n]);return t},C=function(e,n){var o,a=new FileReader;FileReader.prototype.readAsBinaryString?(o=FileReader.prototype.readAsBinaryString,a.onload=function(){n(this.result)}):FileReader.prototype.readAsArrayBuffer?o=function(e){var t="",o=new FileReader;o.onload=function(e){for(var a=new Uint8Array(o.result),i=a.byteLength,s=0;s<i;s++)t+=String.fromCharCode(a[s]);n(t)},o.readAsArrayBuffer(e)}:t("error","FileReader not support readAsBinaryString"," at node_modules/cos-wx-sdk-v5/demo/lib/cos-wx-sdk-v5.js:1"),o.call(a,e)},w=function(e,t){C(e,(function(e){var n=p(e,!0);t(null,n)}))},I=function(e){var t,n,o,a="";for(t=0,n=e.length/2;t<n;t++)o=parseInt(e[2*t]+e[2*t+1],16),a+=String.fromCharCode(o);return _.btoa(a)},b=function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},T=function(e,t){var n=t.Bucket,o=t.Region,a=t.Key;if(e.indexOf("Bucket")>-1||"deleteMultipleObject"===e||"multipartList"===e||"listObjectVersions"===e){if(!n)return"Bucket";if(!o)return"Region"}else if(e.indexOf("Object")>-1||e.indexOf("multipart")>-1||"sliceUploadFile"===e||"abortUploadTask"===e){if(!n)return"Bucket";if(!o)return"Region";if(!a)return"Key"}return!1},k=function(e,t){if(t=s({},t),"getAuth"!==e&&"getV4Auth"!==e&&"getObjectUrl"!==e){var n=t.Headers||{};if(t&&"object"==typeof t){!function(){for(var e in t)t.hasOwnProperty(e)&&e.indexOf("x-cos-")>-1&&(n[e]=t[e])}();var o={"x-cos-mfa":"MFA","Content-MD5":"ContentMD5","Content-Length":"ContentLength","Content-Type":"ContentType",Expect:"Expect",Expires:"Expires","Cache-Control":"CacheControl","Content-Disposition":"ContentDisposition","Content-Encoding":"ContentEncoding",Range:"Range","If-Modified-Since":"IfModifiedSince","If-Unmodified-Since":"IfUnmodifiedSince","If-Match":"IfMatch","If-None-Match":"IfNoneMatch","x-cos-copy-source":"CopySource","x-cos-copy-source-Range":"CopySourceRange","x-cos-metadata-directive":"MetadataDirective","x-cos-copy-source-If-Modified-Since":"CopySourceIfModifiedSince","x-cos-copy-source-If-Unmodified-Since":"CopySourceIfUnmodifiedSince","x-cos-copy-source-If-Match":"CopySourceIfMatch","x-cos-copy-source-If-None-Match":"CopySourceIfNoneMatch","x-cos-acl":"ACL","x-cos-grant-read":"GrantRead","x-cos-grant-write":"GrantWrite","x-cos-grant-full-control":"GrantFullControl","x-cos-grant-read-acp":"GrantReadAcp","x-cos-grant-write-acp":"GrantWriteAcp","x-cos-storage-class":"StorageClass","x-cos-server-side-encryption-customer-algorithm":"SSECustomerAlgorithm","x-cos-server-side-encryption-customer-key":"SSECustomerKey","x-cos-server-side-encryption-customer-key-MD5":"SSECustomerKeyMD5","x-cos-server-side-encryption":"ServerSideEncryption","x-cos-server-side-encryption-cos-kms-key-id":"SSEKMSKeyId","x-cos-server-side-encryption-context":"SSEContext"};N.each(o,(function(e,o){void 0!==t[e]&&(n[o]=t[e])})),t.Headers=M(n)}}return t},S=function(e,n){return function(o,a){"function"==typeof o&&(a=o,o={}),o=k(e,o);var i=function(e){return e&&e.headers&&(e.headers["x-cos-version-id"]&&(e.VersionId=e.headers["x-cos-version-id"]),e.headers["x-cos-delete-marker"]&&(e.DeleteMarker=e.headers["x-cos-delete-marker"])),e},s=function(e,t){a&&a(i(e),i(t))};if("getService"!==e&&"abortUploadTask"!==e){var r;if(r=T(e,o))return void s({error:"missing param "+r});if(o.Region){if(o.Region.indexOf("cos.")>-1)return void s({error:'param Region should not be start with "cos."'});if(!/^([a-z\d-]+)$/.test(o.Region))return void s({error:"Region format error."});this.options.CompatibilityMode||-1!==o.Region.indexOf("-")||"yfb"===o.Region||"default"===o.Region||t("warn","warning: param Region format error, find help here: https://cloud.tencent.com/document/product/436/6224"," at node_modules/cos-wx-sdk-v5/demo/lib/cos-wx-sdk-v5.js:1")}if(o.Bucket){if(!/^([a-z\d-]+)-(\d+)$/.test(o.Bucket))if(o.AppId)o.Bucket=o.Bucket+"-"+o.AppId;else{if(!this.options.AppId)return void s({error:'Bucket should format as "test-1250000000".'});o.Bucket=o.Bucket+"-"+this.options.AppId}o.AppId&&(t("warn",'warning: AppId has been deprecated, Please put it at the end of parameter Bucket(E.g Bucket:"test-1250000000" ).'," at node_modules/cos-wx-sdk-v5/demo/lib/cos-wx-sdk-v5.js:1"),delete o.AppId)}}var c=n.call(this,o,s);if("getAuth"===e||"getObjectUrl"===e)return c}},D=function(e,t){function n(){clearTimeout(a),a=0,o=Date.now();var n,i=Math.max(0,Math.round((r-s)/((o-c)/1e3)*100)/100);n=0===r&&0===e?1:Math.round(r/e*100)/100||0,c=o,s=r;try{t({loaded:r,total:e,speed:i,percent:n})}catch(e){}}if(!t||"function"!=typeof t)return y;var o,a,i=this,s=0,r=0,c=Date.now();return function(t,o){if(t&&(r=t.loaded,e=t.total),Date.now()-c>i.options.ProgressInterval||o)n();else{if(a)return;a=setTimeout(n,i.options.ProgressInterval)}}},E=function(e,t,n){var o;"string"==typeof t.Body&&(t.Body=new Blob([t.Body],{type:"text/plain"})),t.Body&&(t.Body instanceof Blob||"[object File]"===t.Body.toString()||"[object Blob]"===t.Body.toString())?(o=t.Body.size,t.ContentLength=o,n(null,o)):n({error:"params body format error, Only allow File|Blob|String."})},A=function(e){return Date.now()+(e||0)},N={noop:y,formatParams:k,apiWrapper:S,xml2json:h,json2xml:m,md5:p,clearKey:M,getFileMd5:w,binaryBase64:I,extend:s,isArray:r,isInArray:c,makeArray:u,each:l,map:d,filter:f,clone:i,uuid:b,camSafeUrlEncode:a,throttleOnProgress:D,getFileSize:E,getSkewTime:A,getAuth:v,isBrowser:!0,fileSlice:function(e,t,n){return e.slice?e.slice(t,n):e.mozSlice?e.mozSlice(t,n):e.webkitSlice?e.webkitSlice(t,n):void 0},getFileUUID:function(e,t){return e.name&&e.size&&e.lastModifiedDate&&t?N.md5([e.name,e.size,e.lastModifiedDate,t].join("::")):null},getBodyMd5:function(e,t,n){n=n||y,e&&"string"==typeof t?n(N.md5(t,!0)):n()}};e.exports=N},function(e,t){var n=function(e){e=e||{};var t,n=e.Base64,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=function(e){for(var t={},n=0,o=e.length;n<o;n++)t[e.charAt(n)]=n;return t}(o),i=String.fromCharCode,s=function(e){if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?i(192|t>>>6)+i(128|63&t):i(224|t>>>12&15)+i(128|t>>>6&63)+i(128|63&t)}t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return i(240|t>>>18&7)+i(128|t>>>12&63)+i(128|t>>>6&63)+i(128|63&t)},r=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,c=function(e){return e.replace(r,s)},u=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[o.charAt(n>>>18),o.charAt(n>>>12&63),t>=2?"=":o.charAt(n>>>6&63),t>=1?"=":o.charAt(63&n)].join("")},l=e.btoa?function(t){return e.btoa(t)}:function(e){return e.replace(/[\s\S]{1,3}/g,u)},d=t?function(e){return(e.constructor===t.constructor?e:new t(e)).toString("base64")}:function(e){return l(c(e))},f=function(e,t){return t?d(String(e)).replace(/[+\/]/g,(function(e){return"+"==e?"-":"_"})).replace(/=/g,""):d(String(e))},p=function(e){return f(e,!0)},g=new RegExp(["[\xc0-\xdf][\x80-\xbf]","[\xe0-\xef][\x80-\xbf]{2}","[\xf0-\xf7][\x80-\xbf]{3}"].join("|"),"g"),h=function(e){switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),n=t-65536;return i(55296+(n>>>10))+i(56320+(1023&n));case 3:return i((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return i((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},m=function(e){return e.replace(g,h)},_=function(e){var t=e.length,n=t%4,o=(t>0?a[e.charAt(0)]<<18:0)|(t>1?a[e.charAt(1)]<<12:0)|(t>2?a[e.charAt(2)]<<6:0)|(t>3?a[e.charAt(3)]:0),s=[i(o>>>16),i(o>>>8&255),i(255&o)];return s.length-=[0,0,2,1][n],s.join("")},v=e.atob?function(t){return e.atob(t)}:function(e){return e.replace(/[\s\S]{1,4}/g,_)},y=t?function(e){return(e.constructor===t.constructor?e:new t(e,"base64")).toString()}:function(e){return m(v(e))},M=function(e){return y(String(e).replace(/[-_]/g,(function(e){return"-"==e?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,""))};return{VERSION:"2.1.9",atob:v,btoa:l,fromBase64:M,toBase64:f,utob:c,encode:f,encodeURI:p,btou:m,decode:M,noConflict:function(){var t=e.Base64;return e.Base64=n,t}}}();e.exports=n},function(e,n){function o(e,t){for(var n in e)t[n]=e[n]}function a(e,n){function a(){}var i=e.prototype;if(Object.create){var s=Object.create(n.prototype);i.__proto__=s}i instanceof n||(a.prototype=n.prototype,a=new a,o(i,a),e.prototype=i=a),i.constructor!=e&&("function"!=typeof e&&t("error","unknow Class:"+e," at node_modules/cos-wx-sdk-v5/demo/lib/cos-wx-sdk-v5.js:1"),i.constructor=e)}function i(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,ie[e]),this.message=ie[e],Error.captureStackTrace&&Error.captureStackTrace(this,i);return n.code=e,t&&(this.message=this.message+": "+t),n}function s(){}function r(e,t){this._node=e,this._refresh=t,c(this)}function c(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var n=e._refresh(e._node);j(e,"length",n.length),o(n,e),e._inc=t}}function u(){}function l(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function d(e,t,n,o){if(o?t[l(t,o)]=n:t[t.length++]=n,e){n.ownerElement=e;var a=e.ownerDocument;a&&(o&&y(a,e,o),v(a,e,n))}}function f(e,t,n){var o=l(t,n);if(!(o>=0))throw i(re,new Error(e.tagName+"@"+n));for(var a=t.length-1;o<a;)t[o]=t[++o];if(t.length=a,e){var s=e.ownerDocument;s&&(y(s,e,n),n.ownerElement=null)}}function p(e){if(this._features={},e)for(var t in e)this._features=e[t]}function g(){}function h(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function m(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(m(e,t))return!0}while(e=e.nextSibling)}function _(){}function v(e,t,n){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&(t._nsMap[n.prefix?n.localName:""]=n.value)}function y(e,t,n,o){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&delete t._nsMap[n.prefix?n.localName:""]}function M(e,t,n){if(e&&e._inc){e._inc++;var o=t.childNodes;if(n)o[o.length++]=n;else{for(var a=t.firstChild,i=0;a;)o[i++]=a,a=a.nextSibling;o.length=i}}}function C(e,t){var n=t.previousSibling,o=t.nextSibling;return n?n.nextSibling=o:e.firstChild=o,o?o.previousSibling=n:e.lastChild=n,M(e.ownerDocument,e),t}function w(e,t,n){var o=t.parentNode;if(o&&o.removeChild(t),t.nodeType===ne){var a=t.firstChild;if(null==a)return t;var i=t.lastChild}else a=i=t;var s=n?n.previousSibling:e.lastChild;a.previousSibling=s,i.nextSibling=n,s?s.nextSibling=a:e.firstChild=a,null==n?e.lastChild=i:n.previousSibling=i;do{a.parentNode=e}while(a!==i&&(a=a.nextSibling));return M(e.ownerDocument||e,e),t.nodeType==ne&&(t.firstChild=t.lastChild=null),t}function I(e,t){var n=t.parentNode;if(n){var o=e.lastChild;n.removeChild(t);o=e.lastChild}o=e.lastChild;return t.parentNode=e,t.previousSibling=o,t.nextSibling=null,o?o.nextSibling=t:e.firstChild=t,e.lastChild=t,M(e.ownerDocument,e,t),t}function b(){this._nsMap={}}function T(){}function k(){}function S(){}function D(){}function E(){}function A(){}function N(){}function O(){}function P(){}function L(){}function R(){}function x(){}function G(e,t){var n=[],o=9==this.nodeType?this.documentElement:this,a=o.prefix,i=o.namespaceURI;if(i&&null==a){a=o.lookupPrefix(i);if(null==a)var s=[{namespace:i,prefix:null}]}return U(this,n,e,t,s),n.join("")}function $(e,t,n){var o=e.prefix||"",a=e.namespaceURI;if(!o&&!a)return!1;if("xml"===o&&"http://www.w3.org/XML/1998/namespace"===a||"http://www.w3.org/2000/xmlns/"==a)return!1;for(var i=n.length;i--;){var s=n[i];if(s.prefix==o)return s.namespace!=a}return!0}function U(e,t,n,o,a){if(o){if(!(e=o(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case K:a||(a=[]);var i=(a.length,e.attributes),s=i.length,r=e.firstChild,c=e.tagName;n=H===e.namespaceURI||n,t.push("<",c);for(var u=0;u<s;u++){var l=i.item(u);"xmlns"==l.prefix?a.push({prefix:l.localName,namespace:l.value}):"xmlns"==l.nodeName&&a.push({prefix:"",namespace:l.value})}for(u=0;u<s;u++){l=i.item(u);if($(l,n,a)){var d=l.prefix||"",f=l.namespaceURI,p=d?" xmlns:"+d:" xmlns";t.push(p,'="',f,'"'),a.push({prefix:d,namespace:f})}U(l,t,n,o,a)}if($(e,n,a)){d=e.prefix||"",f=e.namespaceURI,p=d?" xmlns:"+d:" xmlns";t.push(p,'="',f,'"'),a.push({prefix:d,namespace:f})}if(r||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(c)){if(t.push(">"),n&&/^script$/i.test(c))for(;r;)r.data?t.push(r.data):U(r,t,n,o,a),r=r.nextSibling;else for(;r;)U(r,t,n,o,a),r=r.nextSibling;t.push("</",c,">")}else t.push("/>");return;case ee:case ne:for(r=e.firstChild;r;)U(r,t,n,o,a),r=r.nextSibling;return;case z:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,h),'"');case W:return t.push(e.data.replace(/[<&]/g,h));case Y:return t.push("<![CDATA[",e.data,"]]>");case Z:return t.push("\x3c!--",e.data,"--\x3e");case te:var g=e.publicId,m=e.systemId;if(t.push("<!DOCTYPE ",e.name),g)t.push(' PUBLIC "',g),m&&"."!=m&&t.push('" "',m),t.push('">');else if(m&&"."!=m)t.push(' SYSTEM "',m,'">');else{var _=e.internalSubset;_&&t.push(" [",_,"]"),t.push(">")}return;case Q:return t.push("<?",e.target," ",e.data,"?>");case J:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function F(e,t,n){var o;switch(t.nodeType){case K:o=t.cloneNode(!1),o.ownerDocument=e;case ne:break;case z:n=!0}if(o||(o=t.cloneNode(!1)),o.ownerDocument=e,o.parentNode=null,n)for(var a=t.firstChild;a;)o.appendChild(F(e,a,n)),a=a.nextSibling;return o}function B(e,t,n){var o=new t.constructor;for(var a in t){var i=t[a];"object"!=typeof i&&i!=o[a]&&(o[a]=i)}switch(t.childNodes&&(o.childNodes=new s),o.ownerDocument=e,o.nodeType){case K:var r=t.attributes,c=o.attributes=new u,l=r.length;c._ownerElement=o;for(var d=0;d<l;d++)o.setAttributeNode(B(e,r.item(d),!0));break;case z:n=!0}if(n)for(var f=t.firstChild;f;)o.appendChild(B(e,f,n)),f=f.nextSibling;return o}function j(e,t,n){e[t]=n}function q(e){switch(e.nodeType){case K:case ne:var t=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&t.push(q(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}}var H="http://www.w3.org/1999/xhtml",V={},K=V.ELEMENT_NODE=1,z=V.ATTRIBUTE_NODE=2,W=V.TEXT_NODE=3,Y=V.CDATA_SECTION_NODE=4,J=V.ENTITY_REFERENCE_NODE=5,X=V.ENTITY_NODE=6,Q=V.PROCESSING_INSTRUCTION_NODE=7,Z=V.COMMENT_NODE=8,ee=V.DOCUMENT_NODE=9,te=V.DOCUMENT_TYPE_NODE=10,ne=V.DOCUMENT_FRAGMENT_NODE=11,oe=V.NOTATION_NODE=12,ae={},ie={},se=(ae.INDEX_SIZE_ERR=(ie[1]="Index size error",1),ae.DOMSTRING_SIZE_ERR=(ie[2]="DOMString size error",2),ae.HIERARCHY_REQUEST_ERR=(ie[3]="Hierarchy request error",3)),re=(ae.WRONG_DOCUMENT_ERR=(ie[4]="Wrong document",4),ae.INVALID_CHARACTER_ERR=(ie[5]="Invalid character",5),ae.NO_DATA_ALLOWED_ERR=(ie[6]="No data allowed",6),ae.NO_MODIFICATION_ALLOWED_ERR=(ie[7]="No modification allowed",7),ae.NOT_FOUND_ERR=(ie[8]="Not found",8)),ce=(ae.NOT_SUPPORTED_ERR=(ie[9]="Not supported",9),ae.INUSE_ATTRIBUTE_ERR=(ie[10]="Attribute in use",10));ae.INVALID_STATE_ERR=(ie[11]="Invalid state",11),ae.SYNTAX_ERR=(ie[12]="Syntax error",12),ae.INVALID_MODIFICATION_ERR=(ie[13]="Invalid modification",13),ae.NAMESPACE_ERR=(ie[14]="Invalid namespace",14),ae.INVALID_ACCESS_ERR=(ie[15]="Invalid access",15),i.prototype=Error.prototype,o(ae,i),s.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var n=[],o=0;o<this.length;o++)U(this[o],n,e,t);return n.join("")}},r.prototype.item=function(e){return c(this),this[e]},a(r,s),u.prototype={length:0,item:s.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new i(ce);var n=this.getNamedItem(e.nodeName);return d(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new i(ce);return t=this.getNamedItemNS(e.namespaceURI,e.localName),d(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return f(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return f(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var o=this[n];if(o.localName==t&&o.namespaceURI==e)return o}return null}},p.prototype={hasFeature:function(e,t){var n=this._features[e.toLowerCase()];return!(!n||t&&!(t in n))},createDocument:function(e,t,n){var o=new _;if(o.implementation=this,o.childNodes=new s,o.doctype=n,n&&o.appendChild(n),t){var a=o.createElementNS(e,t);o.appendChild(a)}return o},createDocumentType:function(e,t,n){var o=new A;return o.name=e,o.nodeName=e,o.publicId=t,o.systemId=n,o}},g.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return w(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return C(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return B(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==W&&e.nodeType==W?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var o in n)if(n[o]==e)return o;t=t.nodeType==z?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&e in n)return n[e];t=t.nodeType==z?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},o(V,g),o(V,g.prototype),_.prototype={nodeName:"#document",nodeType:ee,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==ne){for(var n=e.firstChild;n;){var o=n.nextSibling;this.insertBefore(n,t),n=o}return e}return null==this.documentElement&&e.nodeType==K&&(this.documentElement=e),w(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),C(this,e)},importNode:function(e,t){return F(this,e,t)},getElementById:function(e){var t=null;return m(this.documentElement,(function(n){if(n.nodeType==K&&n.getAttribute("id")==e)return t=n,!0})),t},createElement:function(e){var t=new b;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new s,(t.attributes=new u)._ownerElement=t,t},createDocumentFragment:function(){var e=new L;return e.ownerDocument=this,e.childNodes=new s,e},createTextNode:function(e){var t=new S;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new D;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new E;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new R;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new T;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new P;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new b,o=t.split(":"),a=n.attributes=new u;return n.childNodes=new s,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==o.length?(n.prefix=o[0],n.localName=o[1]):n.localName=t,a._ownerElement=n,n},createAttributeNS:function(e,t){var n=new T,o=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==o.length?(n.prefix=o[0],n.localName=o[1]):n.localName=t,n}},a(_,g),b.prototype={nodeType:K,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===ne?this.insertBefore(e,null):I(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var o=this.ownerDocument.createAttributeNS(e,t);o.value=o.nodeValue=""+n,this.setAttributeNode(o)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new r(this,(function(t){var n=[];return m(t,(function(o){o===t||o.nodeType!=K||"*"!==e&&o.tagName!=e||n.push(o)})),n}))},getElementsByTagNameNS:function(e,t){return new r(this,(function(n){var o=[];return m(n,(function(a){a===n||a.nodeType!==K||"*"!==e&&a.namespaceURI!==e||"*"!==t&&a.localName!=t||o.push(a)})),o}))}},_.prototype.getElementsByTagName=b.prototype.getElementsByTagName,_.prototype.getElementsByTagNameNS=b.prototype.getElementsByTagNameNS,a(b,g),T.prototype.nodeType=z,a(T,g),k.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(ie[se])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){n=this.data.substring(0,e)+n+this.data.substring(e+t),this.nodeValue=this.data=n,this.length=n.length}},a(k,g),S.prototype={nodeName:"#text",nodeType:W,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var o=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(o,this.nextSibling),o}},a(S,k),D.prototype={nodeName:"#comment",nodeType:Z},a(D,k),E.prototype={nodeName:"#cdata-section",nodeType:Y},a(E,k),A.prototype.nodeType=te,a(A,g),N.prototype.nodeType=oe,a(N,g),O.prototype.nodeType=X,a(O,g),P.prototype.nodeType=J,a(P,g),L.prototype.nodeName="#document-fragment",L.prototype.nodeType=ne,a(L,g),R.prototype.nodeType=Q,a(R,g),x.prototype.serializeToString=function(e,t,n){return G.call(e,t,n)},g.prototype.toString=G;try{Object.defineProperty&&(Object.defineProperty(r.prototype,"length",{get:function(){return c(this),this.$$length}}),Object.defineProperty(g.prototype,"textContent",{get:function(){return q(this)},set:function(e){switch(this.nodeType){case K:case ne:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),j=function(e,t,n){e["$$"+t]=n})}catch(e){}n.DOMImplementation=p,n.XMLSerializer=x},function(e,t){var n=function(e){var t={},n=function(e){return!t[e]&&(t[e]=[]),t[e]};e.on=function(e,t){n(e).push(t)},e.off=function(e,t){for(var o=n(e),a=o.length-1;a>=0;a--)t===o[a]&&o.splice(a,1)},e.emit=function(e,t){for(var o=n(e).map((function(e){return e})),a=0;a<o.length;a++)o[a](t)}},o=function(){n(this)};e.exports.init=n,e.exports.EventProxy=o},function(e,n,a){"use strict";var i,s=a(0),r=a(3),c=a(16),u=a(15),l=a(13),d=(i={SecretId:"",SecretKey:"",XCosSecurityToken:"",ChunkRetryTimes:2,FileParallelLimit:3,ChunkParallelLimit:3},o(i,"ChunkRetryTimes",3),o(i,"ChunkSize",1048576),o(i,"SliceSize",1048576),o(i,"CopyChunkParallelLimit",20),o(i,"CopyChunkSize",10485760),o(i,"CopySliceSize",10485760),o(i,"MaxPartNumber",1e4),o(i,"ProgressInterval",1e3),o(i,"UploadQueueSize",1e4),o(i,"Domain",""),o(i,"ServiceDomain",""),o(i,"Protocol",""),o(i,"CompatibilityMode",!1),o(i,"ForcePathStyle",!1),o(i,"CorrectClockSkew",!0),o(i,"SystemClockOffset",0),i),f=function(e){this.options=s.extend(s.clone(d),e||{}),this.options.FileParallelLimit=Math.max(1,this.options.FileParallelLimit),this.options.ChunkParallelLimit=Math.max(1,this.options.ChunkParallelLimit),this.options.ChunkRetryTimes=Math.max(0,this.options.ChunkRetryTimes),this.options.ChunkSize=Math.max(1048576,this.options.ChunkSize),this.options.CopyChunkParallelLimit=Math.max(1,this.options.CopyChunkParallelLimit),this.options.CopyChunkSize=Math.max(1048576,this.options.CopyChunkSize),this.options.CopySliceSize=Math.max(0,this.options.CopySliceSize),this.options.MaxPartNumber=Math.max(1024,Math.min(1e4,this.options.MaxPartNumber)),this.options.Timeout=Math.max(0,this.options.Timeout),this.options.AppId&&t("warn",'warning: AppId has been deprecated, Please put it at the end of parameter Bucket(E.g: "test-1250000000").'," at node_modules/cos-wx-sdk-v5/demo/lib/cos-wx-sdk-v5.js:1"),r.init(this),c.init(this)};u.init(f,c),l.init(f,c),f.getAuthorization=s.getAuth,f.version="0.7.11",e.exports=f},function(e,t,n){var o=n(4);e.exports=o},function(e,t){var n=n||function(e,t){var n={},o=n.lib={},a=function(){},i=o.Base={extend:function(e){a.prototype=this;var t=new a;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=o.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,o=this.sigBytes;if(e=e.sigBytes,this.clamp(),o%4)for(var a=0;a<e;a++)t[o+a>>>2]|=(n[a>>>2]>>>24-a%4*8&255)<<24-(o+a)%4*8;else if(65535<n.length)for(a=0;a<e;a+=4)t[o+a>>>2]=n[a>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],o=0;o<t;o+=4)n.push(4294967296*e.random()|0);return new s.init(n,t)}}),r=n.enc={},c=r.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],o=0;o<e;o++){var a=t[o>>>2]>>>24-o%4*8&255;n.push((a>>>4).toString(16)),n.push((15&a).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],o=0;o<t;o+=2)n[o>>>3]|=parseInt(e.substr(o,2),16)<<24-o%8*4;return new s.init(n,t/2)}},u=r.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],o=0;o<e;o++)n.push(String.fromCharCode(t[o>>>2]>>>24-o%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],o=0;o<t;o++)n[o>>>2]|=(255&e.charCodeAt(o))<<24-o%4*8;return new s.init(n,t)}},l=r.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},d=o.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,o=n.words,a=n.sigBytes,i=this.blockSize,r=a/(4*i);r=t?e.ceil(r):e.max((0|r)-this._minBufferSize,0);if(t=r*i,a=e.min(4*t,a),t){for(var c=0;c<t;c+=i)this._doProcessBlock(o,c);c=o.splice(0,t),n.sigBytes-=a}return new s.init(c,a)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});o.Hasher=d.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new f.HMAC.init(e,n).finalize(t)}}});var f=n.algo={};return n}(Math);!function(){var e=n,t=e.lib,o=t.WordArray,a=t.Hasher,i=[];t=e.algo.SHA1=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,o=n[0],a=n[1],s=n[2],r=n[3],c=n[4],u=0;80>u;u++){if(16>u)i[u]=0|e[t+u];else{var l=i[u-3]^i[u-8]^i[u-14]^i[u-16];i[u]=l<<1|l>>>31}l=(o<<5|o>>>27)+c+i[u],l=20>u?l+(1518500249+(a&s|~a&r)):40>u?l+(1859775393+(a^s^r)):60>u?l+((a&s|a&r|s&r)-1894007588):l+((a^s^r)-899497514),c=r,r=s,s=a<<30|a>>>2,a=o,o=l}n[0]=n[0]+o|0,n[1]=n[1]+a|0,n[2]=n[2]+s|0,n[3]=n[3]+r|0,n[4]=n[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,o=8*e.sigBytes;return t[o>>>5]|=128<<24-o%32,t[14+(o+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(o+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=a._createHelper(t),e.HmacSHA1=a._createHmacHelper(t)}(),function(){var e=n,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,n){e=this._hasher=new e.init,"string"==typeof n&&(n=t.parse(n));var o=e.blockSize,a=4*o;n.sigBytes>a&&(n=e.finalize(n)),n.clamp();for(var i=this._oKey=n.clone(),s=this._iKey=n.clone(),r=i.words,c=s.words,u=0;u<o;u++)r[u]^=1549556828,c[u]^=909522486;i.sigBytes=s.sigBytes=a,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),function(){var e=n,t=e.lib,o=t.WordArray,a=e.enc;a.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,o=this._map;e.clamp();for(var a=[],i=0;i<n;i+=3)for(var s=t[i>>>2]>>>24-i%4*8&255,r=t[i+1>>>2]>>>24-(i+1)%4*8&255,c=t[i+2>>>2]>>>24-(i+2)%4*8&255,u=s<<16|r<<8|c,l=0;l<4&&i+.75*l<n;l++)a.push(o.charAt(u>>>6*(3-l)&63));var d=o.charAt(64);if(d)for(;a.length%4;)a.push(d);return a.join("")},parse:function(e){var t=e.length,n=this._map,a=n.charAt(64);if(a){var i=e.indexOf(a);-1!=i&&(t=i)}for(var s=[],r=0,c=0;c<t;c++)if(c%4){var u=n.indexOf(e.charAt(c-1))<<c%4*2,l=n.indexOf(e.charAt(c))>>>6-c%4*2;s[r>>>2]|=(u|l)<<24-r%4*8,r++}return o.create(s,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e.exports=n},function(e,t){function n(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(a,"")}var o=new RegExp("^([^a-zA-Z_\xc0-\xd6\xd8-\xf6\xf8-\xff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fff\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd])|^((x|X)(m|M)(l|L))|([^a-zA-Z_\xc0-\xd6\xd8-\xf6\xf8-\xff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fff\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd-.0-9\xb7\u0300-\u036f\u203f\u2040])","g"),a=/[^\x09\x0A\x0D\x20-\xFF\x85\xA0-\uD7FF\uE000-\uFDCF\uFDE0-\uFFFD]/gm,i=function(e){var t=[];if(e instanceof Object)for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},s=function(e,t){var a=function(e,n,a,i,s){var r=void 0!==t.indent?t.indent:"\t",c=t.prettyPrint?"\n"+new Array(i).join(r):"";t.removeIllegalNameCharacters&&(e=e.replace(o,"_"));var u=[c,"<",e,a||""];return n&&n.length>0?(u.push(">"),u.push(n),s&&u.push(c),u.push("</"),u.push(e),u.push(">")):u.push("/>"),u.join("")};return function e(o,s,r){var c=typeof o;switch((Array.isArray?Array.isArray(o):o instanceof Array)?c="array":o instanceof Date&&(c="date"),c){case"array":var u=[];return o.map((function(t){u.push(e(t,1,r+1))})),t.prettyPrint&&u.push("\n"),u.join("");case"date":return o.toJSON?o.toJSON():o+"";case"object":var l=[];for(var d in o)if(o[d]instanceof Array)for(var f in o[d])l.push(a(d,e(o[d][f],0,r+1),null,r+1,i(o[d][f]).length));else l.push(a(d,e(o[d],0,r+1),null,r+1));return t.prettyPrint&&l.length>0&&l.push("\n"),l.join("");case"function":return o();default:return t.escape?n(o):""+o}}(e,0,0)},r=function(e){var t=['<?xml version="1.0" encoding="UTF-8"'];return e&&t.push(' standalone="yes"'),t.push("?>"),t.join("")},c=function(e,t){if(t||(t={xmlHeader:{standalone:!0},prettyPrint:!0,indent:"  "}),"string"==typeof e)try{e=JSON.parse(e.toString())}catch(e){return!1}var n="",o="";return t&&("object"==typeof t?(t.xmlHeader&&(n=r(!!t.xmlHeader.standalone)),void 0!==t.docType&&(o="<!DOCTYPE "+t.docType+">")):n=r()),t=t||{},[n,t.prettyPrint&&o?"\n":"",o,s(e,t)].join("").replace(/\n{2,}/g,"\n").replace(/\s+$/g,"")};e.exports=c},function(e,t){var n=function(e){function t(e,t){return e<<t|e>>>32-t}function n(e,t){var n,o,a,i,s;return a=2147483648&e,i=2147483648&t,n=1073741824&e,o=1073741824&t,s=(1073741823&e)+(1073741823&t),n&o?2147483648^s^a^i:n|o?1073741824&s?3221225472^s^a^i:1073741824^s^a^i:s^a^i}function o(e,t,n){return e&t|~e&n}function a(e,t,n){return e&n|t&~n}function i(e,t,n){return e^t^n}function s(e,t,n){return t^(e|~n)}function r(e,a,i,s,r,c,u){return e=n(e,n(n(o(a,i,s),r),u)),n(t(e,c),a)}function c(e,o,i,s,r,c,u){return e=n(e,n(n(a(o,i,s),r),u)),n(t(e,c),o)}function u(e,o,a,s,r,c,u){return e=n(e,n(n(i(o,a,s),r),u)),n(t(e,c),o)}function l(e,o,a,i,r,c,u){return e=n(e,n(n(s(o,a,i),r),u)),n(t(e,c),o)}function d(e){var t,n,o="",a="";for(n=0;n<=3;n++)t=e>>>8*n&255,a="0"+t.toString(16),o+=a.substr(a.length-2,2);return o}var f,p,g,h,m,_,v,y,M,C=Array();for(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var o=e.charCodeAt(n);o<128?t+=String.fromCharCode(o):o>127&&o<2048?(t+=String.fromCharCode(o>>6|192),t+=String.fromCharCode(63&o|128)):(t+=String.fromCharCode(o>>12|224),t+=String.fromCharCode(o>>6&63|128),t+=String.fromCharCode(63&o|128))}return t}(e),C=function(e){for(var t,n=e.length,o=n+8,a=(o-o%64)/64,i=16*(a+1),s=Array(i-1),r=0,c=0;c<n;)t=(c-c%4)/4,r=c%4*8,s[t]=s[t]|e.charCodeAt(c)<<r,c++;return t=(c-c%4)/4,r=c%4*8,s[t]=s[t]|128<<r,s[i-2]=n<<3,s[i-1]=n>>>29,s}(e),_=1732584193,v=4023233417,y=2562383102,M=271733878,f=0;f<C.length;f+=16)p=_,g=v,h=y,m=M,_=r(_,v,y,M,C[f+0],7,3614090360),M=r(M,_,v,y,C[f+1],12,3905402710),y=r(y,M,_,v,C[f+2],17,606105819),v=r(v,y,M,_,C[f+3],22,3250441966),_=r(_,v,y,M,C[f+4],7,4118548399),M=r(M,_,v,y,C[f+5],12,1200080426),y=r(y,M,_,v,C[f+6],17,2821735955),v=r(v,y,M,_,C[f+7],22,4249261313),_=r(_,v,y,M,C[f+8],7,1770035416),M=r(M,_,v,y,C[f+9],12,2336552879),y=r(y,M,_,v,C[f+10],17,4294925233),v=r(v,y,M,_,C[f+11],22,2304563134),_=r(_,v,y,M,C[f+12],7,1804603682),M=r(M,_,v,y,C[f+13],12,4254626195),y=r(y,M,_,v,C[f+14],17,2792965006),v=r(v,y,M,_,C[f+15],22,1236535329),_=c(_,v,y,M,C[f+1],5,4129170786),M=c(M,_,v,y,C[f+6],9,3225465664),y=c(y,M,_,v,C[f+11],14,643717713),v=c(v,y,M,_,C[f+0],20,3921069994),_=c(_,v,y,M,C[f+5],5,3593408605),M=c(M,_,v,y,C[f+10],9,38016083),y=c(y,M,_,v,C[f+15],14,3634488961),v=c(v,y,M,_,C[f+4],20,3889429448),_=c(_,v,y,M,C[f+9],5,568446438),M=c(M,_,v,y,C[f+14],9,3275163606),y=c(y,M,_,v,C[f+3],14,4107603335),v=c(v,y,M,_,C[f+8],20,1163531501),_=c(_,v,y,M,C[f+13],5,2850285829),M=c(M,_,v,y,C[f+2],9,4243563512),y=c(y,M,_,v,C[f+7],14,1735328473),v=c(v,y,M,_,C[f+12],20,2368359562),_=u(_,v,y,M,C[f+5],4,4294588738),M=u(M,_,v,y,C[f+8],11,2272392833),y=u(y,M,_,v,C[f+11],16,1839030562),v=u(v,y,M,_,C[f+14],23,4259657740),_=u(_,v,y,M,C[f+1],4,2763975236),M=u(M,_,v,y,C[f+4],11,1272893353),y=u(y,M,_,v,C[f+7],16,4139469664),v=u(v,y,M,_,C[f+10],23,3200236656),_=u(_,v,y,M,C[f+13],4,681279174),M=u(M,_,v,y,C[f+0],11,3936430074),y=u(y,M,_,v,C[f+3],16,3572445317),v=u(v,y,M,_,C[f+6],23,76029189),_=u(_,v,y,M,C[f+9],4,3654602809),M=u(M,_,v,y,C[f+12],11,3873151461),y=u(y,M,_,v,C[f+15],16,530742520),v=u(v,y,M,_,C[f+2],23,3299628645),_=l(_,v,y,M,C[f+0],6,4096336452),M=l(M,_,v,y,C[f+7],10,1126891415),y=l(y,M,_,v,C[f+14],15,2878612391),v=l(v,y,M,_,C[f+5],21,4237533241),_=l(_,v,y,M,C[f+12],6,1700485571),M=l(M,_,v,y,C[f+3],10,2399980690),y=l(y,M,_,v,C[f+10],15,4293915773),v=l(v,y,M,_,C[f+1],21,2240044497),_=l(_,v,y,M,C[f+8],6,1873313359),M=l(M,_,v,y,C[f+15],10,4264355552),y=l(y,M,_,v,C[f+6],15,2734768916),v=l(v,y,M,_,C[f+13],21,1309151649),_=l(_,v,y,M,C[f+4],6,4149444226),M=l(M,_,v,y,C[f+11],10,3174756917),y=l(y,M,_,v,C[f+2],15,718787259),v=l(v,y,M,_,C[f+9],21,3951481745),_=n(_,p),v=n(v,g),y=n(y,h),M=n(M,m);return(d(_)+d(v)+d(y)+d(M)).toLowerCase()};e.exports=n},function(e,t){var o=function(e){var t,n,o,a=[],i=Object.keys(e);for(t=0;t<i.length;t++)n=i[t],o=e[n]||"",a.push(n+"="+encodeURIComponent(o));return a.join("&")},a=function(e,t){var a,i=e.filePath,s=e.headers||{},r=e.url,c=e.method,u=e.onProgress,l=function(e,n){t(e,{statusCode:n.statusCode,headers:n.header},n.data)};if(i){var d,f=r.match(/^(https?:\/\/[^\/]+\/)([^\/]*\/?)(.*)$/);e.pathStyle?(d=decodeURIComponent(f[3]||""),r=f[1]+f[2]):(d=decodeURIComponent(f[2]+f[3]||""),r=f[1]);var p={key:d,success_action_status:200,Signature:s.Authorization},g=["Cache-Control","Content-Type","Content-Disposition","Content-Encoding","Expires","x-cos-storage-class","x-cos-security-token"];for(var h in e.headers)e.headers.hasOwnProperty(h)&&(h.indexOf("x-cos-meta-")>-1||g.indexOf(h)>-1)&&(p[h]=e.headers[h]);s["x-cos-acl"]&&(p.acl=s["x-cos-acl"]),!p["Content-Type"]&&(p["Content-Type"]="");var m={};a=n.uploadFile({url:r,method:c,name:"file",filePath:i,formData:p,success:function(e){!e.header&&(e.header=m),l(null,e)},fail:function(e){l(e.errMsg,e)}}),a.onHeadersReceived&&a.onHeadersReceived((function(e){m=e.header})),a.onProgressUpdate((function(e){u({loaded:e.totalBytesSent,total:e.totalBytesExpectedToSend,progress:e.progress/100})}))}else{var _=e.qs&&o(e.qs)||"";_&&(r+=(r.indexOf("?")>-1?"&":"?")+_),s["Content-Length"]&&delete s["Content-Length"],n.request({url:r,method:c,header:s,dataType:"text",data:e.body,success:function(e){l(null,e)},fail:function(e){l(e.errMsg,e)}})}return a};e.exports=a},function(e,t,n){var o=n(11).DOMParser,a=function(e){"use strict";function t(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!=t||(t=e.nodeName),t}function n(e){return e.prefix}function a(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function i(e,t,n,o){for(var a=0;a<e.length;a++){var i=e[a];if("string"==typeof i){if(i==o)break}else if(i instanceof RegExp){if(i.test(o))break}else if("function"==typeof i&&i(t,n,o))break}return a!=e.length}function s(t,n,o){switch(e.arrayAccessForm){case"property":t[n]instanceof Array?t[n+"_asArray"]=t[n]:t[n+"_asArray"]=[t[n]]}!(t[n]instanceof Array)&&e.arrayAccessFormPaths.length>0&&i(e.arrayAccessFormPaths,t,n,o)&&(t[n]=[t[n]])}function r(e){var t=e.split(/[-T:+Z]/g),n=new Date(t[0],t[1]-1,t[2]),o=t[5].split(".");if(n.setHours(t[3],t[4],o[0]),o.length>1&&n.setMilliseconds(o[1]),t[6]&&t[7]){var a=60*t[6]+Number(t[7]);a=0+("-"==(/\d\d-\d\d:\d\d$/.test(e)?"-":"+")?-1*a:a),n.setMinutes(n.getMinutes()-a-n.getTimezoneOffset())}else-1!==e.indexOf("Z",e.length-1)&&(n=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())));return n}function c(t,n,o){if(e.datetimeAccessFormPaths.length>0){var a=o.split(".#")[0];return i(e.datetimeAccessFormPaths,t,n,a)?r(t):t}return t}function u(t,n,o,a){return!(n==I.ELEMENT_NODE&&e.xmlElementsFilter.length>0)||i(e.xmlElementsFilter,t,o,a)}function l(o,a){if(o.nodeType==I.DOCUMENT_NODE){for(var i=new Object,r=o.childNodes,d=0;d<r.length;d++){var f=r.item(d);if(f.nodeType==I.ELEMENT_NODE){var p=t(f);i[p]=l(f,p)}}return i}if(o.nodeType==I.ELEMENT_NODE){i=new Object;i.__cnt=0;for(r=o.childNodes,d=0;d<r.length;d++){f=r.item(d),p=t(f);if(f.nodeType!=I.COMMENT_NODE){var g=a+"."+p;u(i,f.nodeType,p,g)&&(i.__cnt++,null==i[p]?(i[p]=l(f,g),s(i,p,g)):(null!=i[p]&&(i[p]instanceof Array||(i[p]=[i[p]],s(i,p,g))),i[p][i[p].length]=l(f,g)))}}for(var h=0;h<o.attributes.length;h++){var m=o.attributes.item(h);i.__cnt++,i[e.attributePrefix+m.name]=m.value}var _=n(o);return null!=_&&""!=_&&(i.__cnt++,i.__prefix=_),null!=i["#text"]&&(i.__text=i["#text"],i.__text instanceof Array&&(i.__text=i.__text.join("\n")),e.stripWhitespaces&&(i.__text=i.__text.trim()),delete i["#text"],"property"==e.arrayAccessForm&&delete i["#text_asArray"],i.__text=c(i.__text,p,a+"."+p)),null!=i["#cdata-section"]&&(i.__cdata=i["#cdata-section"],delete i["#cdata-section"],"property"==e.arrayAccessForm&&delete i["#cdata-section_asArray"]),0==i.__cnt&&"text"==e.emptyNodeForm?i="":1==i.__cnt&&null!=i.__text?i=i.__text:1!=i.__cnt||null==i.__cdata||e.keepCData?i.__cnt>1&&null!=i.__text&&e.skipEmptyTextNodesForObj&&(e.stripWhitespaces&&""==i.__text||""==i.__text.trim())&&delete i.__text:i=i.__cdata,delete i.__cnt,!e.enableToStringFunc||null==i.__text&&null==i.__cdata||(i.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),i}if(o.nodeType==I.TEXT_NODE||o.nodeType==I.CDATA_SECTION_NODE)return o.nodeValue}function d(t,n,o,i){var s="<"+(null!=t&&null!=t.__prefix?t.__prefix+":":"")+n;if(null!=o)for(var r=0;r<o.length;r++){var c=o[r],u=t[c];e.escapeMode&&(u=a(u)),s+=" "+c.substr(e.attributePrefix.length)+"=",e.useDoubleQuotes?s+='"'+u+'"':s+="'"+u+"'"}return s+(i?"/>":">")}function f(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function p(e,t){return-1!==e.indexOf(t,e.length-t.length)}function g(t,n){return!!("property"==e.arrayAccessForm&&p(n.toString(),"_asArray")||0==n.toString().indexOf(e.attributePrefix)||0==n.toString().indexOf("__")||t[n]instanceof Function)}function h(e){var t=0;if(e instanceof Object)for(var n in e)g(e,n)||t++;return t}function m(t,n,o){return 0==e.jsonPropertiesFilter.length||""==o||i(e.jsonPropertiesFilter,t,n,o)}function _(t){var n=[];if(t instanceof Object)for(var o in t)-1==o.toString().indexOf("__")&&0==o.toString().indexOf(e.attributePrefix)&&n.push(o);return n}function v(t){var n="";return null!=t.__cdata&&(n+="<![CDATA["+t.__cdata+"]]>"),null!=t.__text&&(e.escapeMode?n+=a(t.__text):n+=t.__text),n}function y(t){var n="";return t instanceof Object?n+=v(t):null!=t&&(e.escapeMode?n+=a(t):n+=t),n}function M(e,t){return""===e?t:e+"."+t}function C(e,t,n,o){var a="";if(0==e.length)a+=d(e,t,n,!0);else for(var i=0;i<e.length;i++)a+=d(e[i],t,_(e[i]),!1),a+=w(e[i],M(o,t)),a+=f(e[i],t);return a}function w(e,t){var n="";if(h(e)>0)for(var o in e)if(!g(e,o)&&(""==t||m(e,o,M(t,o)))){var a=e[o],i=_(a);if(null==a||void 0==a)n+=d(a,o,i,!0);else if(a instanceof Object)if(a instanceof Array)n+=C(a,o,i,t);else if(a instanceof Date)n+=d(a,o,i,!1),n+=a.toISOString(),n+=f(a,o);else{var s=h(a);s>0||null!=a.__text||null!=a.__cdata?(n+=d(a,o,i,!1),n+=w(a,M(t,o)),n+=f(a,o)):n+=d(a,o,i,!0)}else n+=d(a,o,i,!1),n+=y(a),n+=f(a,o)}return n+y(e)}e=e||{},function(){void 0===e.escapeMode&&(e.escapeMode=!0),e.attributePrefix=e.attributePrefix||"_",e.arrayAccessForm=e.arrayAccessForm||"none",e.emptyNodeForm=e.emptyNodeForm||"text",void 0===e.enableToStringFunc&&(e.enableToStringFunc=!0),e.arrayAccessFormPaths=e.arrayAccessFormPaths||[],void 0===e.skipEmptyTextNodesForObj&&(e.skipEmptyTextNodesForObj=!0),void 0===e.stripWhitespaces&&(e.stripWhitespaces=!0),e.datetimeAccessFormPaths=e.datetimeAccessFormPaths||[],void 0===e.useDoubleQuotes&&(e.useDoubleQuotes=!1),e.xmlElementsFilter=e.xmlElementsFilter||[],e.jsonPropertiesFilter=e.jsonPropertiesFilter||[],void 0===e.keepCData&&(e.keepCData=!1)}();var I={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.parseXmlString=function(e){if(void 0===e)return null;var t;if(o){var n=new o,a=null;try{a=n.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI}catch(e){a=null}try{t=n.parseFromString(e,"text/xml"),null!=a&&t.getElementsByTagNameNS(a,"parsererror").length>0&&(t=null)}catch(e){t=null}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e);return t},this.asArray=function(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?r(e):e},this.xml2json=function(e){return l(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);return null!=t?this.xml2json(t):null},this.json2xml_str=function(e){return w(e,"")},this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)},this.getVersion=function(){return"1.2.0"}},i=function(e){if(!e)return null;var t=new o,n=t.parseFromString(e,"text/xml"),i=new a,s=i.xml2json(n);return s.html&&s.getElementsByTagName("parsererror").length?null:s};e.exports=i},function(e,n,o){function a(e){this.options=e||{locator:{}}}function i(e,t,n){function o(t){var o=e[t];!o&&i&&(o=2==e.length?function(n){e(t,n)}:e),a[t]=o&&function(e){o("[xmldom "+t+"]\t"+e+c(n))}||function(){}}if(!e){if(t instanceof s)return t;e=t}var a={},i=e instanceof Function;return n=n||{},o("warning"),o("error"),o("fatalError"),a}function s(){this.cdata=!1}function r(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function c(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function u(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function l(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}a.prototype.parseFromString=function(e,t){var n=this.options,o=new d,a=n.domBuilder||new s,r=n.errorHandler,c=n.locator,u=n.xmlns||{},l={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return c&&a.setDocumentLocator(c),o.errorHandler=i(r,a,c),o.domBuilder=n.domBuilder||a,/\/x?html?$/.test(t)&&(l.nbsp="\xa0",l.copy="\xa9",u[""]="http://www.w3.org/1999/xhtml"),u.xml=u.xml||"http://www.w3.org/XML/1998/namespace",e?o.parse(e,u,l):o.errorHandler.error("invalid doc source"),a.doc},s.prototype={startDocument:function(){this.doc=(new f).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,n,o){var a=this.doc,i=a.createElementNS(e,n||t),s=o.length;l(this,i),this.currentElement=i,this.locator&&r(this.locator,i);for(var c=0;c<s;c++){e=o.getURI(c);var u=o.getValue(c),d=(n=o.getQName(c),a.createAttributeNS(e,n));this.locator&&r(o.getLocator(c),d),d.value=d.nodeValue=u,i.setAttributeNode(d)}},endElement:function(e,t,n){var o=this.currentElement;o.tagName,this.currentElement=o.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var n=this.doc.createProcessingInstruction(e,t);this.locator&&r(this.locator,n),l(this,n)},ignorableWhitespace:function(e,t,n){},characters:function(e,t,n){if(e=u.apply(this,arguments)){if(this.cdata)var o=this.doc.createCDATASection(e);else o=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(o):/^\s*$/.test(e)&&this.doc.appendChild(o),this.locator&&r(this.locator,o)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,n){e=u.apply(this,arguments);var o=this.doc.createComment(e);this.locator&&r(this.locator,o),l(this,o)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var o=this.doc.implementation;if(o&&o.createDocumentType){var a=o.createDocumentType(e,t,n);this.locator&&r(this.locator,a),l(this,a)}},warning:function(e){t("warn","[xmldom warning]\t"+e,c(this.locator)," at node_modules/cos-wx-sdk-v5/demo/lib/cos-wx-sdk-v5.js:1")},error:function(e){t("error","[xmldom error]\t"+e,c(this.locator)," at node_modules/cos-wx-sdk-v5/demo/lib/cos-wx-sdk-v5.js:1")},fatalError:function(e){throw t("error","[xmldom fatalError]\t"+e,c(this.locator)," at node_modules/cos-wx-sdk-v5/demo/lib/cos-wx-sdk-v5.js:1"),e}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(e){s.prototype[e]=function(){return null}}));var d=o(12).XMLReader,f=n.DOMImplementation=o(2).DOMImplementation;n.XMLSerializer=o(2).XMLSerializer,n.DOMParser=a},function(e,t){function n(){}function o(e,t,n,o,u){function p(e){if(e>65535){e-=65536;var t=55296+(e>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}function g(e){var t=e.slice(1,-1);return t in n?n[t]:"#"===t.charAt(0)?p(parseInt(t.substr(1).replace("x","0x"))):(u.error("entity not found:"+e),e)}function h(t){if(t>I){var n=e.substring(I,t).replace(/&#?\w+;/g,g);M&&m(I),o.characters(n,0,t-I),I=t}}function m(t,n){for(;t>=v&&(n=y.exec(e));)_=n.index,v=_+n[0].length,M.lineNumber++;M.columnNumber=t-_+1}for(var _=0,v=0,y=/.*(?:\r\n?|\n)|.*$/g,M=o.locator,C=[{currentNSMap:t}],w={},I=0;;){try{var b=e.indexOf("<",I);if(b<0){if(!e.substr(I).match(/^\s*$/)){var T=o.doc,k=T.createTextNode(e.substr(I));T.appendChild(k),o.currentElement=k}return}switch(b>I&&h(b),e.charAt(b+1)){case"/":var S=e.indexOf(">",b+3),D=e.substring(b+2,S),E=C.pop();S<0?(D=e.substring(b+2).replace(/[\s<].*/,""),u.error("end tag name: "+D+" is not complete:"+E.tagName),S=b+1+D.length):D.match(/\s</)&&(D=D.replace(/[\s<].*/,""),u.error("end tag name: "+D+" maybe not complete"),S=b+1+D.length);var A=E.localNSMap,N=E.tagName==D;if(N||E.tagName&&E.tagName.toLowerCase()==D.toLowerCase()){if(o.endElement(E.uri,E.localName,D),A)for(var O in A)o.endPrefixMapping(O);N||u.fatalError("end tag name: "+D+" is not match the current start tagName:"+E.tagName)}else C.push(E);S++;break;case"?":M&&m(b),S=d(e,b,o);break;case"!":M&&m(b),S=l(e,b,o,u);break;default:M&&m(b);var P=new f,L=C[C.length-1].currentNSMap,R=(S=i(e,b,P,L,g,u),P.length);if(!P.closed&&c(e,S,P.tagName,w)&&(P.closed=!0,n.nbsp||u.warning("unclosed xml attribute")),M&&R){for(var x=a(M,{}),G=0;G<R;G++){var $=P[G];m($.offset),$.locator=a(M,{})}o.locator=x,s(P,o,L)&&C.push(P),o.locator=M}else s(P,o,L)&&C.push(P);"http://www.w3.org/1999/xhtml"!==P.uri||P.closed?S++:S=r(e,S,P.tagName,g,o)}}catch(e){u.error("element parse error: "+e),S=-1}S>I?I=S:h(Math.max(b,I)+1)}}function a(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function i(e,t,n,o,a,i){for(var s,r=++t,c=v;;){var u=e.charAt(r);switch(u){case"=":if(c===y)s=e.slice(t,r),c=C;else{if(c!==M)throw new Error("attribute equal must after attrName");c=C}break;case"'":case'"':if(c===C||c===y){if(c===y&&(i.warning('attribute value must after "="'),s=e.slice(t,r)),t=r+1,!((r=e.indexOf(u,t))>0))throw new Error("attribute value no end '"+u+"' match");l=e.slice(t,r).replace(/&#?\w+;/g,a),n.add(s,l,t-1),c=I}else{if(c!=w)throw new Error('attribute value must after "="');l=e.slice(t,r).replace(/&#?\w+;/g,a),n.add(s,l,t),i.warning('attribute "'+s+'" missed start quot('+u+")!!"),t=r+1,c=I}break;case"/":switch(c){case v:n.setTagName(e.slice(t,r));case I:case b:case T:c=T,n.closed=!0;case w:case y:case M:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return i.error("unexpected end of input"),c==v&&n.setTagName(e.slice(t,r)),r;case">":switch(c){case v:n.setTagName(e.slice(t,r));case I:case b:case T:break;case w:case y:l=e.slice(t,r),"/"===l.slice(-1)&&(n.closed=!0,l=l.slice(0,-1));case M:c===M&&(l=s),c==w?(i.warning('attribute "'+l+'" missed quot(")!!'),n.add(s,l.replace(/&#?\w+;/g,a),t)):("http://www.w3.org/1999/xhtml"===o[""]&&l.match(/^(?:disabled|checked|selected)$/i)||i.warning('attribute "'+l+'" missed value!! "'+l+'" instead!!'),n.add(l,l,t));break;case C:throw new Error("attribute value missed!!")}return r;case"\x80":u=" ";default:if(u<=" ")switch(c){case v:n.setTagName(e.slice(t,r)),c=b;break;case y:s=e.slice(t,r),c=M;break;case w:var l=e.slice(t,r).replace(/&#?\w+;/g,a);i.warning('attribute "'+l+'" missed quot(")!!'),n.add(s,l,t);case I:c=b}else switch(c){case M:n.tagName,"http://www.w3.org/1999/xhtml"===o[""]&&s.match(/^(?:disabled|checked|selected)$/i)||i.warning('attribute "'+s+'" missed value!! "'+s+'" instead2!!'),n.add(s,s,t),t=r,c=y;break;case I:i.warning('attribute space is required"'+s+'"!!');case b:c=y,t=r;break;case C:c=w,t=r;break;case T:throw new Error("elements closed character '/' and '>' must be connected to")}}r++}}function s(e,t,n){for(var o=e.tagName,a=null,i=e.length;i--;){var s=e[i],r=s.qName,c=s.value,l=r.indexOf(":");if(l>0)var d=s.prefix=r.slice(0,l),f=r.slice(l+1),p="xmlns"===d&&f;else f=r,d=null,p="xmlns"===r&&"";s.localName=f,!1!==p&&(null==a&&(a={},u(n,n={})),n[p]=a[p]=c,s.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(p,c))}for(i=e.length;i--;){s=e[i];d=s.prefix;d&&("xml"===d&&(s.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==d&&(s.uri=n[d||""]))}l=o.indexOf(":");l>0?(d=e.prefix=o.slice(0,l),f=e.localName=o.slice(l+1)):(d=null,f=e.localName=o);var g=e.uri=n[d||""];if(t.startElement(g,f,o,e),!e.closed)return e.currentNSMap=n,e.localNSMap=a,!0;if(t.endElement(g,f,o),a)for(d in a)t.endPrefixMapping(d)}function r(e,t,n,o,a){if(/^(?:script|textarea)$/i.test(n)){var i=e.indexOf("</"+n+">",t),s=e.substring(t+1,i);if(/[&<]/.test(s))return/^script$/i.test(n)?(a.characters(s,0,s.length),i):(s=s.replace(/&#?\w+;/g,o),a.characters(s,0,s.length),i)}return t+1}function c(e,t,n,o){var a=o[n];return null==a&&(a=e.lastIndexOf("</"+n+">"),a<t&&(a=e.lastIndexOf("</"+n)),o[n]=a),a<t}function u(e,t){for(var n in e)t[n]=e[n]}function l(e,t,n,o){switch(e.charAt(t+2)){case"-":if("-"===e.charAt(t+3)){var a=e.indexOf("--\x3e",t+4);return a>t?(n.comment(e,t+4,a-t-4),a+3):(o.error("Unclosed comment"),-1)}return-1;default:if("CDATA["==e.substr(t+3,6)){a=e.indexOf("]]>",t+9);return n.startCDATA(),n.characters(e,t+9,a-t-9),n.endCDATA(),a+3}var i=g(e,t),s=i.length;if(s>1&&/!doctype/i.test(i[0][0])){var r=i[1][0],c=s>3&&/^public$/i.test(i[2][0])&&i[3][0],u=s>4&&i[4][0],l=i[s-1];return n.startDTD(r,c&&c.replace(/^(['"])(.*?)\1$/,"$2"),u&&u.replace(/^(['"])(.*?)\1$/,"$2")),n.endDTD(),l.index+l[0].length}}return-1}function d(e,t,n){var o=e.indexOf("?>",t);if(o){var a=e.substring(t,o).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return a?(a[0].length,n.processingInstruction(a[1],a[2]),o+2):-1}return-1}function f(e){}function p(e,t){return e.__proto__=t,e}function g(e,t){var n,o=[],a=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(a.lastIndex=t,a.exec(e);n=a.exec(e);)if(o.push(n),n[1])return o}var h=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,m=new RegExp("[\\-\\.0-9"+h.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),_=new RegExp("^"+h.source+m.source+"*(?::"+h.source+m.source+"*)?$"),v=0,y=1,M=2,C=3,w=4,I=5,b=6,T=7;n.prototype={parse:function(e,t,n){var a=this.domBuilder;a.startDocument(),u(t,t={}),o(e,t,n,a,this.errorHandler),a.endDocument()}},f.prototype={setTagName:function(e){if(!_.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,n){if(!_.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},p({},p.prototype)instanceof p||(p=function(e,t){function n(){}for(t in n.prototype=t,n=new n,e)n[t]=e[t];return n}),t.XMLReader=n},function(e,t,n){function o(e,t){var n=e.Bucket,o=e.Region,s=e.Key,r=e.UploadId,c=e.Level||"task",l=e.AsyncLimit,d=this,f=new u;if(f.on("error",(function(e){return t(e)})),f.on("get_abort_array",(function(i){a.call(d,{Bucket:n,Region:o,Key:s,Headers:e.Headers,AsyncLimit:l,AbortArray:i},(function(e,n){if(e)return t(e);t(null,n)}))})),"bucket"===c)i.call(d,{Bucket:n,Region:o},(function(e,n){if(e)return t(e);f.emit("get_abort_array",n.UploadList||[])}));else if("file"===c){if(!s)return t({error:"abort_upload_task_no_key"});i.call(d,{Bucket:n,Region:o,Key:s},(function(e,n){if(e)return t(e);f.emit("get_abort_array",n.UploadList||[])}))}else{if("task"!==c)return t({error:"abort_unknown_level"});if(!r)return t({error:"abort_upload_task_no_id"});if(!s)return t({error:"abort_upload_task_no_key"});f.emit("get_abort_array",[{Key:s,UploadId:r}])}}function a(e,t){var n=e.Bucket,o=e.Region,a=e.Key,i=e.AbortArray,s=e.AsyncLimit||1,r=this,u=0,l=new Array(i.length);c.eachLimit(i,s,(function(t,i){var s=u;if(a&&a!==t.Key)return l[s]={error:{KeyNotMatch:!0}},void i(null);var c=t.UploadId||t.UploadID;r.multipartAbort({Bucket:n,Region:o,Key:t.Key,Headers:e.Headers,UploadId:c},(function(e,a){var r={Bucket:n,Region:o,Key:t.Key,UploadId:c};l[s]={error:e,task:r},i(null)})),u++}),(function(e){if(e)return t(e);for(var n=[],o=[],a=0,i=l.length;a<i;a++){var s=l[a];s.task&&(s.error?o.push(s.task):n.push(s.task))}return t(null,{successList:n,errorList:o})}))}function i(e,t){var n=this,o=[],a={Bucket:e.Bucket,Region:e.Region,Prefix:e.Key},i=function e(){n.multipartList(a,(function(n,i){if(n)return t(n);o.push.apply(o,i.Upload||[]),"true"==i.IsTruncated?(a.KeyMarker=i.NextKeyMarker,a.UploadIdMarker=i.NextUploadIdMarker,e()):t(null,{UploadList:o})}))};i()}function s(e,t){var n=new u,o=this,a=e.Bucket,i=e.Region,s=e.Key,d=e.CopySource,f=d.match(/^([^.]+-\d+)\.cos(v6)?\.([^.]+)\.[^\/]+\/(.+)$/);if(f){var p=f[1],g=f[3],h=decodeURIComponent(f[4]),m=void 0===e.SliceSize?o.options.CopySliceSize:e.SliceSize;m=Math.max(0,Math.min(m,5368709120));var _,v,y=e.ChunkSize||this.options.CopyChunkSize,M=this.options.CopyChunkParallelLimit,C=0;n.on("copy_slice_complete",(function(e){o.multipartComplete({Bucket:a,Region:i,Key:s,UploadId:e.UploadId,Parts:e.PartList},(function(e,n){if(e)return v(null,!0),t(e);v({loaded:_,total:_},!0),t(null,n)}))})),n.on("get_copy_data_finish",(function(e){c.eachLimit(e.PartList,M,(function(t,n){var c=t.PartNumber,u=t.CopySourceRange,l=t.end-t.start,f=0;r.call(o,{Bucket:a,Region:i,Key:s,CopySource:d,UploadId:e.UploadId,PartNumber:c,CopySourceRange:u,onProgress:function(e){C+=e.loaded-f,f=e.loaded,v({loaded:C,total:_})}},(function(e,o){if(e)return n(e);v({loaded:C,total:_}),C+=l-f,t.ETag=o.ETag,n(e||null,o)}))}),(function(o){if(o)return v(null,!0),t(o);n.emit("copy_slice_complete",e)}))})),n.on("get_file_size_finish",(function(r){var c;!function(){for(var t=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,5120],n=1048576,a=0;a<t.length&&(n=1024*t[a]*1024,!(_/n<=o.options.MaxPartNumber));a++);e.ChunkSize=y=Math.max(y,n);for(var i=Math.ceil(_/y),s=[],r=1;r<=i;r++){var c=(r-1)*y,u=r*y<_?r*y-1:_-1,l={PartNumber:r,start:c,end:u,CopySourceRange:"bytes="+c+"-"+u};s.push(l)}e.PartList=s}(),c="Replaced"===e.Headers["x-cos-metadata-directive"]?e.Headers:r,c["x-cos-storage-class"]=e.Headers["x-cos-storage-class"]||r["x-cos-storage-class"],c=l.clearKey(c),o.multipartInit({Bucket:a,Region:i,Key:s,Headers:c},(function(o,a){if(o)return t(o);e.UploadId=a.UploadId,n.emit("get_copy_data_finish",e)}))})),o.headObject({Bucket:p,Region:g,Key:h},(function(a,i){if(a)t(a.statusCode&&404===a.statusCode?{ErrorStatus:h+" Not Exist"}:a);else if(void 0!==(_=e.FileSize=i.headers["content-length"])&&_)if(v=l.throttleOnProgress.call(o,_,e.onProgress),_<=m)e.Headers["x-cos-metadata-directive"]||(e.Headers["x-cos-metadata-directive"]="Copy"),o.putObjectCopy(e,(function(e,n){if(e)return v(null,!0),t(e);v({loaded:_,total:_},!0),t(e,n)}));else{var s=i.headers,r={"Cache-Control":s["cache-control"],"Content-Disposition":s["content-disposition"],"Content-Encoding":s["content-encoding"],"Content-Type":s["content-type"],Expires:s.expires,"x-cos-storage-class":s["x-cos-storage-class"]};l.each(s,(function(e,t){0===t.indexOf("x-cos-meta-")&&t.length>"x-cos-meta-".length&&(r[t]=e)})),n.emit("get_file_size_finish",r)}else t({error:'get Content-Length error, please add "Content-Length" to CORS ExposeHeader setting.'})}))}else t({error:"CopySource format error"})}function r(e,t){var n=e.TaskId,o=e.Bucket,a=e.Region,i=e.Key,s=e.CopySource,r=e.UploadId,u=1*e.PartNumber,l=e.CopySourceRange,d=this.options.ChunkRetryTimes+1,f=this;c.retry(d,(function(t){f.uploadPartCopy({TaskId:n,Bucket:o,Region:a,Key:i,CopySource:s,UploadId:r,PartNumber:u,CopySourceRange:l,onProgress:e.onProgress},(function(e,n){t(e||null,n)}))}),(function(e,n){return t(e,n)}))}var c=n(14),u=n(3).EventProxy,l=n(0),d={abortUploadTask:o,sliceCopyFile:s};e.exports.init=function(e,t){l.each(d,(function(t,n){e.prototype[n]=l.apiWrapper(n,t)}))}},function(e,t){var n=function(e,t,n,o){if(o=o||function(){},!e.length||t<=0)return o();var a=0,i=0,s=0;!function r(){if(a>=e.length)return o();for(;s<t&&i<e.length;)i+=1,s+=1,n(e[i-1],(function(t){t?(o(t),o=function(){}):(a+=1,s-=1,a>=e.length?o():r())}))}()},o=function(e,t,n){var o=function o(a){t((function(t,i){t&&a<e?o(a+1):n(t,i)}))};e<1?n():o(1)},a={eachLimit:n,retry:o};e.exports=a},function(e,n,o){"use strict";function a(e,t){"function"==typeof e&&(t=e,e={});var n=this.options.ServiceDomain,o=e.AppId||this.options.appId,a=e.Region;n?(n=n.replace(/\{\{AppId\}\}/gi,o||"").replace(/\{\{Region\}\}/gi,a||"").replace(/\{\{.*?\}\}/gi,""),/^[a-zA-Z]+:\/\//.test(n)||(n="https://"+n),"/"===n.slice(-1)&&(n=n.slice(0,-1))):n=a?"https://cos."+a+".myqcloud.com":"https://service.cos.myqcloud.com",te.call(this,{Action:"name/cos:GetService",url:n+"/",method:"GET"},(function(e,n){if(e)return t(e);var o=n&&n.ListAllMyBucketsResult&&n.ListAllMyBucketsResult.Buckets&&n.ListAllMyBucketsResult.Buckets.Bucket||[];o=ie.isArray(o)?o:[o];var a=n&&n.ListAllMyBucketsResult&&n.ListAllMyBucketsResult.Owner||{};t(null,{Buckets:o,Owner:a,statusCode:n.statusCode,headers:n.headers})}))}function i(e,t){te.call(this,{Action:"name/cos:HeadBucket",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,method:"HEAD"},(function(e,n){t(e,n)}))}function s(e,t){var n={};n.prefix=e.Prefix||"",n.delimiter=e.Delimiter,n.marker=e.Marker,n["max-keys"]=e.MaxKeys,n["encoding-type"]=e.EncodingType,te.call(this,{Action:"name/cos:GetBucket",ResourceKey:n.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:n},(function(e,n){if(e)return t(e);var o=n.ListBucketResult||{},a=o.Contents||[],i=o.CommonPrefixes||[];a=ie.isArray(a)?a:[a],i=ie.isArray(i)?i:[i];var s=ie.clone(o);ie.extend(s,{Contents:a,CommonPrefixes:i,statusCode:n.statusCode,headers:n.headers}),t(null,s)}))}function r(e,t){var n=this,o={};o["x-cos-acl"]=e.ACL,o["x-cos-grant-read"]=e.GrantRead,o["x-cos-grant-write"]=e.GrantWrite,o["x-cos-grant-read-acp"]=e.GrantReadAcp,o["x-cos-grant-write-acp"]=e.GrantWriteAcp,o["x-cos-grant-full-control"]=e.GrantFullControl,te.call(this,{Action:"name/cos:PutBucket",method:"PUT",Bucket:e.Bucket,Region:e.Region,headers:o},(function(o,a){if(o)return t(o);var i=Q({domain:n.options.Domain,bucket:e.Bucket,region:e.Region,isLocation:!0});t(null,{Location:i,statusCode:a.statusCode,headers:a.headers})}))}function c(e,t){te.call(this,{Action:"name/cos:DeleteBucket",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,method:"DELETE"},(function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})}))}function u(e,t){te.call(this,{Action:"name/cos:GetBucketACL",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"acl"},(function(e,n){if(e)return t(e);var o=n.AccessControlPolicy||{},a=o.Owner||{},i=o.AccessControlList.Grant||[];i=ie.isArray(i)?i:[i];var s=J(o);n.headers&&n.headers["x-cos-acl"]&&(s.ACL=n.headers["x-cos-acl"]),s=ie.extend(s,{Owner:a,Grants:i,statusCode:n.statusCode,headers:n.headers}),t(null,s)}))}function l(e,t){var n=e.Headers,o="";if(e.AccessControlPolicy){var a=ie.clone(e.AccessControlPolicy||{}),i=a.Grants||a.Grant;i=ie.isArray(i)?i:[i],delete a.Grant,delete a.Grants,a.AccessControlList={Grant:i},o=ie.json2xml({AccessControlPolicy:a}),n["Content-Type"]="application/xml",n["Content-MD5"]=ie.binaryBase64(ie.md5(o))}ie.each(n,(function(e,t){0===t.indexOf("x-cos-grant-")&&(n[t]=X(n[t]))})),te.call(this,{Action:"name/cos:PutBucketACL",method:"PUT",Bucket:e.Bucket,Region:e.Region,headers:n,action:"acl",body:o},(function(e,n){if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})}))}function d(e,t){te.call(this,{Action:"name/cos:GetBucketCORS",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"cors"},(function(e,n){if(e)if(404===e.statusCode&&e.error&&"NoSuchCORSConfiguration"===e.error.Code){var o={CORSRules:[],statusCode:e.statusCode};e.headers&&(o.headers=e.headers),t(null,o)}else t(e);else{var a=n.CORSConfiguration||{},i=a.CORSRules||a.CORSRule||[];i=ie.clone(ie.isArray(i)?i:[i]),ie.each(i,(function(e){ie.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],(function(t,n){var o=t+"s",a=e[o]||e[t]||[];delete e[t],e[o]=ie.isArray(a)?a:[a]}))})),t(null,{CORSRules:i,statusCode:n.statusCode,headers:n.headers})}}))}function f(e,t){var n=e.CORSConfiguration||{},o=n.CORSRules||e.CORSRules||[];o=ie.clone(ie.isArray(o)?o:[o]),ie.each(o,(function(e){ie.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],(function(t,n){var o=t+"s",a=e[o]||e[t]||[];delete e[o],e[t]=ie.isArray(a)?a:[a]}))}));var a=ie.json2xml({CORSConfiguration:{CORSRule:o}}),i=e.Headers;i["Content-Type"]="application/xml",i["Content-MD5"]=ie.binaryBase64(ie.md5(a)),te.call(this,{Action:"name/cos:PutBucketCORS",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:a,action:"cors",headers:i},(function(e,n){if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})}))}function p(e,t){te.call(this,{Action:"name/cos:DeleteBucketCORS",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"cors"},(function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode||e.statusCode,headers:n.headers})}))}function g(e,t){var n=e.Policy,o=n;try{"string"==typeof n?n=JSON.parse(o):o=JSON.stringify(n)}catch(e){t({error:"Policy format error"})}var a=e.Headers;a["Content-Type"]="application/json",a["Content-MD5"]=ie.binaryBase64(ie.md5(o)),te.call(this,{Action:"name/cos:PutBucketPolicy",method:"PUT",Bucket:e.Bucket,Region:e.Region,action:"policy",body:ie.isBrowser?o:n,headers:a,json:!0},(function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})}))}function h(e,t){te.call(this,{Action:"name/cos:DeleteBucketPolicy",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"policy"},(function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode||e.statusCode,headers:n.headers})}))}function m(e,t){te.call(this,{Action:"name/cos:GetBucketLocation",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"location"},(function(e,n){if(e)return t(e);t(null,n)}))}function _(e,t){te.call(this,{Action:"name/cos:GetBucketPolicy",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"policy",rawBody:!0},(function(e,n){if(e)return t(e.statusCode&&403===e.statusCode?{ErrorStatus:"Access Denied"}:e.statusCode&&405===e.statusCode?{ErrorStatus:"Method Not Allowed"}:e.statusCode&&404===e.statusCode?{ErrorStatus:"Policy Not Found"}:e);var o={};try{o=JSON.parse(n.body)}catch(e){}t(null,{Policy:o,statusCode:n.statusCode,headers:n.headers})}))}function v(e,t){te.call(this,{Action:"name/cos:GetBucketTagging",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging"},(function(e,n){if(e)if(404!==e.statusCode||!e.error||"Not Found"!==e.error&&"NoSuchTagSet"!==e.error.Code)t(e);else{var o={Tags:[],statusCode:e.statusCode};e.headers&&(o.headers=e.headers),t(null,o)}else{var a=[];try{a=n.Tagging.TagSet.Tag||[]}catch(e){}a=ie.clone(ie.isArray(a)?a:[a]),t(null,{Tags:a,statusCode:n.statusCode,headers:n.headers})}}))}function y(e,t){var n=e.Tagging||{},o=n.TagSet||n.Tags||e.Tags||[];o=ie.clone(ie.isArray(o)?o:[o]);var a=ie.json2xml({Tagging:{TagSet:{Tag:o}}}),i=e.Headers;i["Content-Type"]="application/xml",i["Content-MD5"]=ie.binaryBase64(ie.md5(a)),te.call(this,{Action:"name/cos:PutBucketTagging",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:a,action:"tagging",headers:i},(function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})}))}function M(e,t){te.call(this,{Action:"name/cos:DeleteBucketTagging",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging"},(function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})}))}function C(e,t){var n=e.LifecycleConfiguration||{},o=n.Rules||e.Rules||[];o=ie.clone(o);var a=ie.json2xml({LifecycleConfiguration:{Rule:o}}),i=e.Headers;i["Content-Type"]="application/xml",i["Content-MD5"]=ie.binaryBase64(ie.md5(a)),te.call(this,{Action:"name/cos:PutBucketLifecycle",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:a,action:"lifecycle",headers:i},(function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})}))}function w(e,t){te.call(this,{Action:"name/cos:GetBucketLifecycle",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"lifecycle"},(function(e,n){if(e)if(404===e.statusCode&&e.error&&"NoSuchLifecycleConfiguration"===e.error.Code){var o={Rules:[],statusCode:e.statusCode};e.headers&&(o.headers=e.headers),t(null,o)}else t(e);else{var a=[];try{a=n.LifecycleConfiguration.Rule||[]}catch(e){}a=ie.clone(ie.isArray(a)?a:[a]),t(null,{Rules:a,statusCode:n.statusCode,headers:n.headers})}}))}function I(e,t){te.call(this,{Action:"name/cos:DeleteBucketLifecycle",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"lifecycle"},(function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})}))}function b(e,t){if(e.VersioningConfiguration){var n=e.VersioningConfiguration||{},o=ie.json2xml({VersioningConfiguration:n}),a=e.Headers;a["Content-Type"]="application/xml",a["Content-MD5"]=ie.binaryBase64(ie.md5(o)),te.call(this,{Action:"name/cos:PutBucketVersioning",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:o,action:"versioning",headers:a},(function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})}))}else t({error:"missing param VersioningConfiguration"})}function T(e,t){te.call(this,{Action:"name/cos:GetBucketVersioning",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"versioning"},(function(e,n){e||!n.VersioningConfiguration&&(n.VersioningConfiguration={}),t(e,n)}))}function k(e,t){var n=ie.clone(e.ReplicationConfiguration),o=ie.json2xml({ReplicationConfiguration:n});o=o.replace(/<(\/?)Rules>/gi,"<$1Rule>"),o=o.replace(/<(\/?)Tags>/gi,"<$1Tag>");var a=e.Headers;a["Content-Type"]="application/xml",a["Content-MD5"]=ie.binaryBase64(ie.md5(o)),te.call(this,{Action:"name/cos:PutBucketReplication",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:o,action:"replication",headers:a},(function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})}))}function S(e,t){te.call(this,{Action:"name/cos:GetBucketReplication",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"replication"},(function(e,n){if(e)if(404!==e.statusCode||!e.error||"Not Found"!==e.error&&"ReplicationConfigurationnotFoundError"!==e.error.Code)t(e);else{var o={ReplicationConfiguration:{Rules:[]},statusCode:e.statusCode};e.headers&&(o.headers=e.headers),t(null,o)}else e||!n.ReplicationConfiguration&&(n.ReplicationConfiguration={}),n.ReplicationConfiguration.Rule&&(n.ReplicationConfiguration.Rules=n.ReplicationConfiguration.Rule,delete n.ReplicationConfiguration.Rule),t(e,n)}))}function D(e,t){te.call(this,{Action:"name/cos:DeleteBucketReplication",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"replication"},(function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})}))}function E(e,t){te.call(this,{Action:"name/cos:HeadObject",method:"HEAD",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,headers:e.Headers},(function(n,o){if(n){var a=n.statusCode;return e.Headers["If-Modified-Since"]&&a&&304===a?t(null,{NotModified:!0,statusCode:a}):t(n)}if(o.headers){var i=o.headers;o.ETag=i.etag||i.Etag||i.ETag||""}t(null,o)}))}function A(e,t){var n={};n.prefix=e.Prefix||"",n.delimiter=e.Delimiter,n["key-marker"]=e.KeyMarker,n["version-id-marker"]=e.VersionIdMarker,n["max-keys"]=e.MaxKeys,n["encoding-type"]=e.EncodingType,te.call(this,{Action:"name/cos:GetBucketObjectVersions",ResourceKey:n.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:n,action:"versions"},(function(e,n){if(e)return t(e);var o=n.ListVersionsResult||{},a=o.DeleteMarker||[];a=ie.isArray(a)?a:[a];var i=o.Version||[];i=ie.isArray(i)?i:[i];var s=ie.clone(o);delete s.DeleteMarker,delete s.Version,ie.extend(s,{DeleteMarkers:a,Versions:i,statusCode:n.statusCode,headers:n.headers}),t(null,s)}))}function N(e,t){var n={};n["response-content-type"]=e.ResponseContentType,n["response-content-language"]=e.ResponseContentLanguage,n["response-expires"]=e.ResponseExpires,n["response-cache-control"]=e.ResponseCacheControl,n["response-content-disposition"]=e.ResponseContentDisposition,n["response-content-encoding"]=e.ResponseContentEncoding,te.call(this,{Action:"name/cos:GetObject",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,headers:e.Headers,qs:n,rawBody:!0},(function(n,o){if(n){var a=n.statusCode;return e.Headers["If-Modified-Since"]&&a&&304===a?t(null,{NotModified:!0}):t(n)}var i={};if(i.Body=o.body,o&&o.headers){var s=o.headers;i.ETag=s.etag||s.Etag||s.ETag||""}ie.extend(i,{statusCode:o.statusCode,headers:o.headers}),t(null,i)}))}function O(e,t){var n=this,o=e.ContentLength,a=ie.throttleOnProgress.call(n,o,e.onProgress);ie.getBodyMd5(n.options.UploadCheckContentMd5,e.Body,(function(i){i&&(e.Headers["Content-MD5"]=ie.binaryBase64(i)),void 0!==e.ContentLength&&(e.Headers["Content-Length"]=e.ContentLength),te.call(n,{Action:"name/cos:PutObject",TaskId:e.TaskId,method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,body:e.Body,onProgress:a},(function(i,s){if(i)return a(null,!0),t(i);if(a({loaded:o,total:o},!0),s&&s.headers){var r=s.headers,c=r.etag||r.Etag||r.ETag||"",u=Q({ForcePathStyle:n.options.ForcePathStyle,protocol:n.options.Protocol,domain:n.options.Domain,bucket:e.Bucket,region:e.Region,object:e.Key});return u=u.substr(u.indexOf("://")+3),t(null,{Location:u,ETag:c,statusCode:s.statusCode,headers:r})}t(null,s)}))}))}function P(e,t){var n=this,o={},a=e.FilePath;if(a){for(var i in o["Cache-Control"]=e.CacheControl,o["Content-Disposition"]=e.ContentDisposition,o["Content-Encoding"]=e.ContentEncoding,o["Content-MD5"]=e.ContentMD5,o["Content-Length"]=e.ContentLength,o["Content-Type"]=e.ContentType,o.Expect=e.Expect,o.Expires=e.Expires,o["x-cos-acl"]=e.ACL,o["x-cos-grant-read"]=e.GrantRead,o["x-cos-grant-write"]=e.GrantWrite,o["x-cos-grant-full-control"]=e.GrantFullControl,o["x-cos-storage-class"]=e.StorageClass,e)i.indexOf("x-cos-meta-")>-1&&(o[i]=e[i]);var s=ie.throttleOnProgress.call(n,o["Content-Length"],e.onProgress);te.call(this,{Action:"name/cos:PostObject",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:o,filePath:a,onProgress:s},(function(o,a){if(s(null,!0),o)return t(o);if(a&&a.headers){var i=a.headers,r=i.etag||i.Etag||i.ETag||"",c=Q({ForcePathStyle:n.options.ForcePathStyle,protocol:n.options.Protocol,domain:n.options.Domain,bucket:e.Bucket,region:e.Region,object:e.Key,isLocation:!0});return t(null,{Location:c,statusCode:a.statusCode,headers:i,ETag:r})}t(null,a)}))}else t({error:"missing param FilePath"})}function L(e,t){te.call(this,{Action:"name/cos:DeleteObject",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,VersionId:e.VersionId},(function(e,n){if(e){var o=e.statusCode;return o&&204===o?t(null,{statusCode:o}):o&&404===o?t(null,{BucketNotFound:!0,statusCode:o}):t(e)}t(null,{statusCode:n.statusCode,headers:n.headers})}))}function R(e,t){te.call(this,{Action:"name/cos:GetObjectACL",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"acl"},(function(e,n){if(e)return t(e);var o=n.AccessControlPolicy||{},a=o.Owner||{},i=o.AccessControlList&&o.AccessControlList.Grant||[];i=ie.isArray(i)?i:[i];var s=J(o);n.headers&&n.headers["x-cos-acl"]&&(s.ACL=n.headers["x-cos-acl"]),s=ie.extend(s,{Owner:a,Grants:i,statusCode:n.statusCode,headers:n.headers}),t(null,s)}))}function x(e,t){var n=e.Headers,o="";if(e.AccessControlPolicy){var a=ie.clone(e.AccessControlPolicy||{}),i=a.Grants||a.Grant;i=ie.isArray(i)?i:[i],delete a.Grant,delete a.Grants,a.AccessControlList={Grant:i},o=ie.json2xml({AccessControlPolicy:a}),n["Content-Type"]="application/xml",n["Content-MD5"]=ie.binaryBase64(ie.md5(o))}ie.each(n,(function(e,t){0===t.indexOf("x-cos-grant-")&&(n[t]=X(n[t]))})),te.call(this,{Action:"name/cos:PutObjectACL",method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:"acl",headers:n,body:o},(function(e,n){if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})}))}function G(e,t){var n=e.Headers;n.Origin=e.Origin,n["Access-Control-Request-Method"]=e.AccessControlRequestMethod,n["Access-Control-Request-Headers"]=e.AccessControlRequestHeaders,te.call(this,{Action:"name/cos:OptionsObject",method:"OPTIONS",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:n},(function(e,n){if(e)return e.statusCode&&403===e.statusCode?t(null,{OptionsForbidden:!0,statusCode:e.statusCode}):t(e);var o=n.headers||{};t(null,{AccessControlAllowOrigin:o["access-control-allow-origin"],AccessControlAllowMethods:o["access-control-allow-methods"],AccessControlAllowHeaders:o["access-control-allow-headers"],AccessControlExposeHeaders:o["access-control-expose-headers"],AccessControlMaxAge:o["access-control-max-age"],statusCode:n.statusCode,headers:n.headers})}))}function $(e,t){var n=e.CopySource||"",o=n.match(/^([^.]+-\d+)\.cos(v6)?\.([^.]+)\.[^\/]+\/(.+)$/);if(o){var a=o[1],i=o[3],s=decodeURIComponent(o[4]);te.call(this,{Scope:[{action:"name/cos:GetObject",bucket:a,region:i,prefix:s},{action:"name/cos:PutObject",bucket:e.Bucket,region:e.Region,prefix:e.Key}],method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,headers:e.Headers},(function(e,n){if(e)return t(e);var o=ie.clone(n.CopyObjectResult||{});ie.extend(o,{statusCode:n.statusCode,headers:n.headers}),t(null,o)}))}else t({error:"CopySource format error"})}function U(e,t){var n=e.CopySource||"",o=n.match(/^([^.]+-\d+)\.cos(v6)?\.([^.]+)\.[^\/]+\/(.+)$/);if(o){var a=o[1],i=o[3],s=decodeURIComponent(o[4]);te.call(this,{Scope:[{action:"name/cos:GetObject",bucket:a,region:i,prefix:s},{action:"name/cos:PutObject",bucket:e.Bucket,region:e.Region,prefix:e.Key}],method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,qs:{partNumber:e.PartNumber,uploadId:e.UploadId},headers:e.Headers},(function(e,n){if(e)return t(e);var o=ie.clone(n.CopyPartResult||{});ie.extend(o,{statusCode:n.statusCode,headers:n.headers}),t(null,o)}))}else t({error:"CopySource format error"})}function F(e,t){var n=e.Objects||[],o=e.Quiet;n=ie.isArray(n)?n:[n];var a=ie.json2xml({Delete:{Object:n,Quiet:o||!1}}),i=e.Headers;i["Content-Type"]="application/xml",i["Content-MD5"]=ie.binaryBase64(ie.md5(a));var s=ie.map(n,(function(t){return{action:"name/cos:DeleteObject",bucket:e.Bucket,region:e.Region,prefix:t.Key}}));te.call(this,{Scope:s,method:"POST",Bucket:e.Bucket,Region:e.Region,body:a,action:"delete",headers:i},(function(e,n){if(e)return t(e);var o=n.DeleteResult||{},a=o.Deleted||[],i=o.Error||[];a=ie.isArray(a)?a:[a],i=ie.isArray(i)?i:[i];var s=ie.clone(o);ie.extend(s,{Error:i,Deleted:a,statusCode:n.statusCode,headers:n.headers}),t(null,s)}))}function B(e,t){var n=e.Headers;if(e.RestoreRequest){var o=e.RestoreRequest||{},a=ie.json2xml({RestoreRequest:o});n["Content-Type"]="application/xml",n["Content-MD5"]=ie.binaryBase64(ie.md5(a)),te.call(this,{Action:"name/cos:RestoreObject",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,body:a,action:"restore",headers:n},(function(e,n){t(e,n)}))}else t({error:"missing param RestoreRequest"})}function j(e,t){te.call(this,{Action:"name/cos:InitiateMultipartUpload",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:"uploads",headers:e.Headers},(function(e,n){return e?t(e):(n=ie.clone(n||{}))&&n.InitiateMultipartUploadResult?t(null,ie.extend(n.InitiateMultipartUploadResult,{statusCode:n.statusCode,headers:n.headers})):void t(null,n)}))}function q(e,t){var n=this;ie.getFileSize("multipartUpload",e,(function(){ie.getBodyMd5(n.options.UploadCheckContentMd5,e.Body,(function(o){o&&(e.Headers["Content-MD5"]=ie.binaryBase64(o)),te.call(n,{Action:"name/cos:UploadPart",TaskId:e.TaskId,method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,qs:{partNumber:e.PartNumber,uploadId:e.UploadId},headers:e.Headers,onProgress:e.onProgress,body:e.Body||null},(function(e,n){if(e)return t(e);if(n&&n.headers){var o=n.headers;n.ETag=o.etag||o.Etag||o.ETag||""}t(null,n)}))}))}))}function H(e,t){for(var n=this,o=e.UploadId,a=e.Parts,i=0,s=a.length;i<s;i++)0!==a[i].ETag.indexOf('"')&&(a[i].ETag='"'+a[i].ETag+'"');var r=ie.json2xml({CompleteMultipartUpload:{Part:a}}),c=e.Headers;c["Content-Type"]="application/xml",c["Content-MD5"]=ie.binaryBase64(ie.md5(r)),te.call(this,{Action:"name/cos:CompleteMultipartUpload",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,qs:{uploadId:o},body:r,headers:c},(function(o,a){if(o)return t(o);var i=Q({ForcePathStyle:n.options.ForcePathStyle,protocol:n.options.Protocol,domain:n.options.Domain,bucket:e.Bucket,region:e.Region,object:e.Key,isLocation:!0}),s=a.CompleteMultipartUploadResult||{},r=ie.extend(s,{Location:i,statusCode:a.statusCode,headers:a.headers});t(null,r)}))}function V(e,t){var n={};n.delimiter=e.Delimiter,n["encoding-type"]=e.EncodingType,n.prefix=e.Prefix||"",n["max-uploads"]=e.MaxUploads,n["key-marker"]=e.KeyMarker,n["upload-id-marker"]=e.UploadIdMarker,n=ie.clearKey(n),te.call(this,{Action:"name/cos:ListMultipartUploads",ResourceKey:n.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:n,action:"uploads"},(function(e,n){if(e)return t(e);if(n&&n.ListMultipartUploadsResult){var o=n.ListMultipartUploadsResult.Upload||[],a=n.ListMultipartUploadsResult.CommonPrefixes||[];a=ie.isArray(a)?a:[a],o=ie.isArray(o)?o:[o],n.ListMultipartUploadsResult.Upload=o,n.ListMultipartUploadsResult.CommonPrefixes=a}var i=ie.clone(n.ListMultipartUploadsResult||{});ie.extend(i,{statusCode:n.statusCode,headers:n.headers}),t(null,i)}))}function K(e,t){var n={};n.uploadId=e.UploadId,n["encoding-type"]=e.EncodingType,n["max-parts"]=e.MaxParts,n["part-number-marker"]=e.PartNumberMarker,te.call(this,{Action:"name/cos:ListParts",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:n},(function(e,n){if(e)return t(e);var o=n.ListPartsResult||{},a=o.Part||[];a=ie.isArray(a)?a:[a],o.Part=a;var i=ie.clone(o);ie.extend(i,{statusCode:n.statusCode,headers:n.headers}),t(null,i)}))}function z(e,t){var n={};n.uploadId=e.UploadId,te.call(this,{Action:"name/cos:AbortMultipartUpload",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:n},(function(e,n){if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})}))}function W(e){var t=this;return ie.getAuth({SecretId:e.SecretId||this.options.SecretId||"",SecretKey:e.SecretKey||this.options.SecretKey||"",Method:e.Method,Key:e.Key,Query:e.Query,Headers:e.Headers,Expires:e.Expires,SystemClockOffset:t.options.SystemClockOffset})}function Y(e,t){var n=this,o=Q({ForcePathStyle:n.options.ForcePathStyle,protocol:e.Protocol||n.options.Protocol,domain:n.options.Domain,bucket:e.Bucket,region:e.Region,object:e.Key});if(void 0!==e.Sign&&!e.Sign)return t(null,{Url:o}),o;var a=Z.call(this,{Action:"PUT"===(e.Method||"").toUpperCase()?"name/cos:PutObject":"name/cos:GetObject",Bucket:e.Bucket||"",Region:e.Region||"",Method:e.Method||"get",Key:e.Key,Expires:e.Expires},(function(e,n){if(t){if(e)return void t(e);var a=o;a+="?"+(n.Authorization.indexOf("q-signature")>-1?n.Authorization:"sign="+encodeURIComponent(n.Authorization)),n.XCosSecurityToken&&(a+="&x-cos-security-token="+n.XCosSecurityToken),n.ClientIP&&(a+="&clientIP="+n.ClientIP),n.ClientUA&&(a+="&clientUA="+n.ClientUA),n.Token&&(a+="&token="+n.Token),setTimeout((function(){t(null,{Url:a})}))}}));return a?o+"?"+a.Authorization+(a.XCosSecurityToken?"&x-cos-security-token="+a.XCosSecurityToken:""):o}function J(e){var t={GrantFullControl:[],GrantWrite:[],GrantRead:[],GrantReadAcp:[],GrantWriteAcp:[],ACL:""},n={FULL_CONTROL:"GrantFullControl",WRITE:"GrantWrite",READ:"GrantRead",READ_ACP:"GrantReadAcp",WRITE_ACP:"GrantWriteAcp"},o=e.AccessControlList.Grant;o&&(o=ie.isArray(o)?o:[o]);var a={READ:0,WRITE:0,FULL_CONTROL:0};return o.length&&ie.each(o,(function(o){"qcs::cam::anyone:anyone"===o.Grantee.ID||"http://cam.qcloud.com/groups/global/AllUsers"===o.Grantee.URI?a[o.Permission]=1:o.Grantee.ID!==e.Owner.ID&&t[n[o.Permission]].push('id="'+o.Grantee.ID+'"')})),a.FULL_CONTROL||a.WRITE&&a.READ?t.ACL="public-read-write":a.READ?t.ACL="public-read":t.ACL="private",ie.each(n,(function(e){t[e]=X(t[e].join(","))})),t}function X(e){var t,n,o=e.split(","),a={};for(t=0;t<o.length;)n=o[t].trim(),a[n]?o.splice(t,1):(a[n]=!0,o[t]=n,t++);return o.join(",")}function Q(e){var t=e.bucket,n=t.substr(0,t.lastIndexOf("-")),o=t.substr(t.lastIndexOf("-")+1),a=e.domain,i=e.region,s=e.object;a||(a=["cn-south","cn-south-2","cn-north","cn-east","cn-southwest","sg"].indexOf(i)>-1?"{Region}.myqcloud.com":"cos.{Region}.myqcloud.com",e.ForcePathStyle||(a="{Bucket}."+a)),a=a.replace(/\{\{AppId\}\}/gi,o).replace(/\{\{Bucket\}\}/gi,n).replace(/\{\{Region\}\}/gi,i).replace(/\{\{.*?\}\}/gi,""),a=a.replace(/\{AppId\}/gi,o).replace(/\{BucketName\}/gi,n).replace(/\{Bucket\}/gi,t).replace(/\{Region\}/gi,i).replace(/\{.*?\}/gi,""),/^[a-zA-Z]+:\/\//.test(a)||(a="https://"+a),"/"===a.slice(-1)&&(a=a.slice(0,-1));var r=a;return e.ForcePathStyle&&(r+="/"+t),r+="/",s&&(r+=ie.camSafeUrlEncode(s).replace(/%2F/g,"/")),e.isLocation&&(r=r.replace(/^https?:\/\//,"")),r}function Z(e,t){var n=ie.clone(e.Headers);delete n["Content-Type"],delete n["Cache-Control"],ie.each(n,(function(e,t){""===e&&delete n[t]}));var o=function(e){var n=!1,o=e.Authorization;if(o)if(o.indexOf(" ")>-1)n=!1;else if(o.indexOf("q-sign-algorithm=")>-1&&o.indexOf("q-ak=")>-1&&o.indexOf("q-sign-time=")>-1&&o.indexOf("q-key-time=")>-1&&o.indexOf("q-url-param-list=")>-1)n=!0;else try{o=ae.atob(o),o.indexOf("a=")>-1&&o.indexOf("k=")>-1&&o.indexOf("t=")>-1&&o.indexOf("r=")>-1&&o.indexOf("b=")>-1&&(n=!0)}catch(e){}n?t&&t(null,e):t&&t("authorization error")},a=this,i=e.Bucket||"",s=e.Region||"",r="name/cos:PostObject"!==e.Action&&e.Key?e.Key:"";a.options.ForcePathStyle&&i&&(r=i+"/"+r);var c="/"+r,u={},l=e.Scope;if(!l){var d=e.Action||"",f=e.ResourceKey||e.Key||"";l=e.Scope||[{action:d,bucket:i,region:s,prefix:f}]}var p=ie.md5(JSON.stringify(l));a._StsCache=a._StsCache||[],function(){var e,t;for(e=a._StsCache.length-1;e>=0;e--){t=a._StsCache[e];var n=Math.round(ie.getSkewTime(a.options.SystemClockOffset)/1e3)+30;if(t.StartTime&&n<t.StartTime||n>=t.ExpiredTime)a._StsCache.splice(e,1);else if(!t.ScopeLimit||t.ScopeLimit&&t.ScopeKey===p){u=t;break}}}();var g=function(){var t=u.StartTime&&u.ExpiredTime?u.StartTime+";"+u.ExpiredTime:"",i=ie.getAuth({SecretId:u.TmpSecretId,SecretKey:u.TmpSecretKey,Method:e.Method,Pathname:c,Query:e.Query,Headers:n,Expires:e.Expires,SystemClockOffset:a.options.SystemClockOffset,KeyTime:t}),s={Authorization:i,XCosSecurityToken:u.XCosSecurityToken||"",Token:u.Token||"",ClientIP:u.ClientIP||"",ClientUA:u.ClientUA||""};o(s)};if(u.ExpiredTime&&u.ExpiredTime-ie.getSkewTime(a.options.SystemClockOffset)/1e3>60)g();else if(a.options.getAuthorization)a.options.getAuthorization.call(a,{Bucket:i,Region:s,Method:e.Method,Key:r,Pathname:c,Query:e.Query,Headers:n,Scope:l},(function(e){"string"==typeof e&&(e={Authorization:e}),e.TmpSecretId&&e.TmpSecretKey&&e.XCosSecurityToken&&e.ExpiredTime?(u=e||{},u.Scope=l,u.ScopeKey=p,a._StsCache.push(u),g()):o(e)}));else{if(!a.options.getSTS)return function(){var t=ie.getAuth({SecretId:e.SecretId||a.options.SecretId,SecretKey:e.SecretKey||a.options.SecretKey,Method:e.Method,Pathname:c,Query:e.Query,Headers:n,Expires:e.Expires,SystemClockOffset:a.options.SystemClockOffset}),i={Authorization:t,XCosSecurityToken:a.options.XCosSecurityToken};return o(i),i}();a.options.getSTS.call(a,{Bucket:i,Region:s},(function(e){u=e||{},u.Scope=l,u.ScopeKey=p,u.TmpSecretId=u.SecretId,u.TmpSecretKey=u.SecretKey,a._StsCache.push(u),g()}))}return""}function ee(e){var n=!1,o=!1,a=e.headers&&(e.headers.date||e.headers.Date)||"";try{var i=e.error.Code,s=e.error.Message;("RequestTimeTooSkewed"===i||"AccessDenied"===i&&"Request has expired"===s)&&(o=!0)}catch(e){}if(e)if(o&&a){var r=Date.parse(a);this.options.CorrectClockSkew&&Math.abs(ie.getSkewTime(this.options.SystemClockOffset)-r)>=3e4&&(t("error","error: Local time is too skewed."," at node_modules/cos-wx-sdk-v5/demo/lib/cos-wx-sdk-v5.js:1"),this.options.SystemClockOffset=r-Date.now(),n=!0)}else 5===Math.round(e.statusCode/100)&&(n=!0);return n}function te(e,t){var n=this;!e.headers&&(e.headers={}),!e.qs&&(e.qs={}),e.VersionId&&(e.qs.versionId=e.VersionId),e.qs=ie.clearKey(e.qs),e.headers&&(e.headers=ie.clearKey(e.headers)),e.qs&&(e.qs=ie.clearKey(e.qs));var o=ie.clone(e.qs);e.action&&(o[e.action]="");var a=function a(i){var s=n.options.SystemClockOffset;Z.call(n,{Bucket:e.Bucket||"",Region:e.Region||"",Method:e.method,Key:e.Key,Query:o,Headers:e.headers,Action:e.Action,ResourceKey:e.ResourceKey,Scope:e.Scope},(function(o,r){e.AuthData=r,ne.call(n,e,(function(o,r){o&&i<2&&(s!==n.options.SystemClockOffset||ee.call(n,o))?(e.headers&&(delete e.headers.Authorization,delete e.headers.token,delete e.headers.clientIP,delete e.headers.clientUA,delete e.headers["x-cos-security-token"]),a(i+1)):t(o,r)}))}))};a(0)}function ne(e,t){var n=this,o=e.TaskId;if(!o||n._isRunningTask(o)){var a=e.Bucket,i=e.Region,s=e.Key,r=e.method||"GET",c=e.url,u=e.body,l=e.json,d=e.rawBody;c=c||Q({ForcePathStyle:n.options.ForcePathStyle,protocol:n.options.Protocol,domain:n.options.Domain,bucket:a,region:i,object:s}),e.action&&(c=c+"?"+e.action);var f={method:r,url:c,headers:e.headers,qs:e.qs,filePath:e.filePath,body:u,json:l};f.headers.Authorization=e.AuthData.Authorization,e.AuthData.Token&&(f.headers.token=e.AuthData.Token),e.AuthData.ClientIP&&(f.headers.clientIP=e.AuthData.ClientIP),e.AuthData.ClientUA&&(f.headers.clientUA=e.AuthData.ClientUA),e.AuthData.XCosSecurityToken&&(f.headers["x-cos-security-token"]=e.AuthData.XCosSecurityToken),f.headers&&(f.headers=ie.clearKey(f.headers)),f=ie.clearKey(f),e.onProgress&&"function"==typeof e.onProgress&&(f.onProgress=function(t){if(!o||n._isRunningTask(o)){var a=t?t.loaded:0;e.onProgress({loaded:a,total:t.total})}}),n.options.ForcePathStyle&&(f.pathStyle=n.options.ForcePathStyle);var p=oe(f,(function(e,a,i){var s,r=function(e,i){if(o&&n.off("inner-kill-task",g),!s){s=!0;var r={};a&&a.statusCode&&(r.statusCode=a.statusCode),a&&a.headers&&(r.headers=a.headers),e?(e=ie.extend(e||{},r),t(e,null)):(i=ie.extend(i||{},r),t(null,i))}};if(!e){var c;try{c=ie.xml2json(i)||{}}catch(e){c=i||{}}var u=a.statusCode;return 2!==Math.floor(u/100)?void r({error:c.Error||c}):(d&&(c={},c.body=i),c.Error?void r({error:c.Error}):void r(null,c))}r({error:e})})),g=function e(t){t.TaskId===o&&(p&&p.abort&&p.abort(),n.off("inner-kill-task",e))};o&&n.on("inner-kill-task",g)}}var oe=o(9),ae=o(1),ie=o(0),se={getService:a,putBucket:r,getBucket:s,headBucket:i,deleteBucket:c,getBucketAcl:u,putBucketAcl:l,getBucketCors:d,putBucketCors:f,deleteBucketCors:p,getBucketLocation:m,putBucketTagging:y,getBucketTagging:v,deleteBucketTagging:M,getBucketPolicy:_,putBucketPolicy:g,deleteBucketPolicy:h,getBucketLifecycle:w,putBucketLifecycle:C,deleteBucketLifecycle:I,putBucketVersioning:b,getBucketVersioning:T,putBucketReplication:k,getBucketReplication:S,deleteBucketReplication:D,getObject:N,headObject:E,listObjectVersions:A,putObject:O,postObject:P,deleteObject:L,getObjectAcl:R,putObjectAcl:x,optionsObject:G,putObjectCopy:$,deleteMultipleObject:F,restoreObject:B,uploadPartCopy:U,multipartInit:j,multipartUpload:q,multipartComplete:H,multipartList:V,multipartListPart:K,multipartAbort:z,getObjectUrl:Y,getAuth:W};e.exports.init=function(e,t){t.transferToTaskMethod(se,"postObject"),ie.each(se,(function(t,n){e.prototype[n]=ie.apiWrapper(n,t)}))}},function(e,n,o){var a=o(0),i={},s=function(e,t){i[t]=e[t],e[t]=function(e,n){e.SkipTask?i[t].call(this,e,n):this._addTask(t,e,n)}},r=function(e){var n=[],o={},s=0,r=0,c=function(e){var t={id:e.id,Bucket:e.Bucket,Region:e.Region,Key:e.Key,FilePath:e.FilePath,state:e.state,loaded:e.loaded,size:e.size,speed:e.speed,percent:e.percent,hashPercent:e.hashPercent,error:e.error};return e.FilePath&&(t.FilePath=e.FilePath),t},u=function(){e.emit("list-update",{list:a.map(n,c)})},l=function(){var t;if(n.length>e.options.UploadQueueSize)for(t=0;t<n.length&&n.length>e.options.UploadQueueSize&&t<r;t++)n[t]&&"waiting"===n[t].state||(n.splice(t,1),r--)},d=function t(){if(r<n.length&&s<e.options.FileParallelLimit){var o=n[r];if("waiting"===o.state){s++,o.state="checking";var c=a.formatParams(o.api,o.params);i[o.api].call(e,c,(function(n,a){e._isRunningTask(o.id)&&("checking"!==o.state&&"uploading"!==o.state||(o.state=n?"error":"success",n&&(o.error=n),s--,u(),t(e),o.callback&&o.callback(n,a),"success"===o.state&&(o.params&&(delete o.params.Body,delete o.params),delete o.callback)),l())})),u()}r++,t(e)}},f=function(n,a){var i=o[n];if(i){var r=i&&"waiting"===i.state,c=i&&("checking"===i.state||"uploading"===i.state);if("canceled"===a&&"canceled"!==i.state||"paused"===a&&r||"paused"===a&&c){if("paused"===a&&i.params.Body&&"function"==typeof i.params.Body.pipe)return void t("error","stream not support pause"," at node_modules/cos-wx-sdk-v5/demo/lib/cos-wx-sdk-v5.js:1");i.state=a,e.emit("inner-kill-task",{TaskId:n,toState:a}),u(),c&&(s--,d(e)),"canceled"===a&&(i.params&&(delete i.params.Body,delete i.params),delete i.callback)}l()}};e._addTasks=function(t){a.each(t,(function(t){e._addTask(t.api,t.params,t.callback,!0)})),u()},e._addTask=function(t,i,s,r){i=a.formatParams(t,i);var c=a.uuid();i.TaskId=c,i.TaskReady&&i.TaskReady(c);var f={params:i,callback:s,api:t,index:n.length,id:c,Bucket:i.Bucket,Region:i.Region,Key:i.Key,FilePath:i.FilePath||"",state:"waiting",loaded:0,size:0,speed:0,percent:0,hashPercent:0,error:null},p=i.onHashProgress;i.onHashProgress=function(t){e._isRunningTask(f.id)&&(f.hashPercent=t.percent,p&&p(t),u())};var g=i.onProgress;return i.onProgress=function(t){e._isRunningTask(f.id)&&("checking"===f.state&&(f.state="uploading"),f.loaded=t.loaded,f.size=t.total,f.speed=t.speed,f.percent=t.percent,g&&g(t),u())},function(){o[c]=f,n.push(f),f.size=i.FileSize,!r&&u(),d(e),l()}(),c},e._isRunningTask=function(e){var t=o[e];return!(!t||"checking"!==t.state&&"uploading"!==t.state)},e.getTaskList=function(){return a.map(n,c)},e.cancelTask=function(e){f(e,"canceled")},e.pauseTask=function(e){f(e,"paused")},e.restartTask=function(e){var t=o[e];!t||"paused"!==t.state&&"error"!==t.state||(t.state="waiting",u(),r=Math.min(r,t.index),d())}};e.exports.transferToTaskMethod=s,e.exports.init=r}])}))}).call(this,n("0de9")["default"],n("fe07")["default"])},"31ef":function(e,t,n){"use strict";n.r(t);var o=n("0730"),a=n("9ceb");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},3280:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",[n("view",{staticClass:e._$s(1,"sc","TUI-message-input-container"),attrs:{_i:1}},[n("view",{staticClass:e._$s(2,"sc","TUI-commom-function"),attrs:{_i:2}},e._l(e._$s(3,"f",{forItems:e.commonFunction}),(function(t,o,a,i){return n("view",{key:e._$s(3,"f",{forIndex:a,key:o}),staticClass:e._$s("3-"+i,"sc","TUI-commom-function-item"),attrs:{"data-function":e._$s("3-"+i,"a-data-function",t),_i:"3-"+i},on:{click:e.handleCommonFunctions}},[e._v(e._$s("3-"+i,"t0-0",e._s(t.name)))])})),0),n("view",{staticClass:e._$s(4,"sc","TUI-message-input"),attrs:{_i:4}},[e._$s(5,"i",!e.isAudio)?n("view",{staticClass:e._$s(5,"sc","TUI-message-input-main"),attrs:{_i:5}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.inputText,expression:"inputText"}],staticClass:e._$s(6,"sc","TUI-message-input-area"),attrs:{_i:6},domProps:{value:e._$s(6,"v-model",e.inputText)},on:{input:[function(t){t.target.composing||(e.inputText=t.target.value)},e.onInputValueChange],focus:e.inputBindFocus,blur:e.inputBindBlur}})]):n("view",{staticClass:e._$s(7,"sc","TUI-message-input-main"),attrs:{_i:7},on:{longpress:e.handleLongPress,touchmove:e.handleTouchMove,touchend:e.handleTouchEnd}},[n("text",[e._v(e._$s(8,"t0-0",e._s(e.text)))])]),n("view",{staticClass:e._$s(9,"sc","TUI-message-input-functions"),attrs:{_i:9}},[n("image",{staticClass:e._$s(10,"sc","TUI-icon"),attrs:{_i:10},on:{click:e.handleEmoji}}),e._$s(11,"i",!e.sendMessageBtn)?n("view",{attrs:{_i:11},on:{click:e.handleExtensions}},[n("image",{staticClass:e._$s(12,"sc","TUI-icon"),attrs:{_i:12}})]):n("view",{staticClass:e._$s(13,"sc","TUI-sendMessage-btn"),attrs:{_i:13},on:{click:e.sendTextMessage}})])]),e._$s(14,"i","emoji"===e.displayFlag)?n("view",{staticClass:e._$s(14,"sc","TUI-Emoji-area"),attrs:{_i:14}},[n("TUI-Emoji",{attrs:{_i:15},on:{enterEmoji:e.appendMessage}})],1):e._e(),e._$s(16,"i","extension"===e.displayFlag)?n("view",{staticClass:e._$s(16,"sc","TUI-Extensions"),attrs:{_i:16}},[n("view",{staticClass:e._$s(17,"sc","TUI-Extension-slot"),attrs:{_i:17},on:{click:e.handleSendImage}},[n("image",{staticClass:e._$s(18,"sc","TUI-Extension-icon"),attrs:{_i:18}}),n("view",{staticClass:e._$s(19,"sc","TUI-Extension-slot-name"),attrs:{_i:19}})]),n("view",{staticClass:e._$s(20,"sc","TUI-Extension-slot"),attrs:{_i:20},on:{click:e.handleSendVideo}},[n("image",{staticClass:e._$s(21,"sc","TUI-Extension-icon"),attrs:{_i:21}}),n("view",{staticClass:e._$s(22,"sc","TUI-Extension-slot-name"),attrs:{_i:22}})])]):e._e(),n("TUI-Common-Words",{staticClass:e._$s(23,"sc","tui-cards"),attrs:{display:e.displayCommonWords,_i:23},on:{sendMessage:e.$handleSendTextMessage,close:e.$handleCloseCards}}),n("TUI-Order-List",{staticClass:e._$s(24,"sc","tui-cards"),attrs:{display:e.displayOrderList,_i:24},on:{sendCustomMessage:e.$handleSendCustomMessage,close:e.$handleCloseCards}}),n("TUI-Service-Evaluation",{staticClass:e._$s(25,"sc","tui-cards"),attrs:{display:e.displayServiceEvaluation,_i:25},on:{sendCustomMessage:e.$handleSendCustomMessage,close:e.$handleCloseCards}})],1),e._$s(26,"i",e.popupToggle)?n("view",{staticClass:e._$s(26,"sc","record-modal"),attrs:{_i:26},on:{longpress:e.handleLongPress,touchmove:e.handleTouchMove,touchend:e.handleTouchEnd}},[n("view",{staticClass:e._$s(27,"sc","wrapper"),attrs:{_i:27}},[n("view",{staticClass:e._$s(28,"sc","modal-loading"),attrs:{_i:28}})]),n("view",{staticClass:e._$s(29,"sc","modal-title"),attrs:{_i:29}},[e._v(e._$s(29,"t0-0",e._s(e.title)))])]):e._e()])},i=[]},"32fc":function(e,t,n){"use strict";n.r(t);var o=n("33bb"),a=n("752d");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,"7b6dd05b",null,!1,o["a"],s);t["default"]=c.exports},3366:function(e,t,n){"use strict";n.r(t);var o=n("d7dd"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"33bb":function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",{staticClass:e._$s(0,"sc","uni-badge--x"),attrs:{_i:0}},[e._t("default",null,{_i:1}),e._$s(2,"i",e.text)?n("text",{staticClass:e._$s(2,"sc","uni-badge"),class:e._$s(2,"c",e.classNames),style:e._$s(2,"s",[e.badgeWidth,e.positionStyle,e.customStyle,e.dotStyle]),attrs:{_i:2},on:{click:function(t){return e.onClick()}}},[e._v(e._$s(2,"t0-0",e._s(e.displayValue)))]):e._e()],2)},i=[]},"33df":function(e,t,n){"use strict";n.r(t);var o=n("9ce2"),a=n("4c29");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},"346b":function(e,t,n){"use strict";n.r(t);var o=n("ab46"),a=n("cbaa");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},"356e":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={methods:{escape2Html:function(e){if(!e)return e;var t={lt:"<",gt:">",nbsp:" ",amp:"&",quot:'"'};return e.replace(/&(lt|gt|nbsp|amp|quot);/gi,(function(e,n){return t[n]}))},html2Escape:function(e){return e?e.replace(/[<>&"]/g,(function(e){return{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"}[e]})):e},setData:function(e,t){var n=this,o=function(e,t,n){var o=e;return t=t.split("."),t.forEach((function(t){if(null===e[t]||void 0===e[t]){var a=/^[0-9]+$/;e[t]=a.test(n)?[]:{},o=e[t]}else o=e[t]})),o},a=function(e){return"function"==typeof e||!1};Object.keys(e).forEach((function(t){var a,i,s=e[t];t=t.replace(/\]/g,"").replace(/\[/g,".");var r=t.lastIndexOf(".");-1!=r?(i=t.slice(r+1),a=o(n,t.slice(0,r),i)):(i=t,a=n),a.$data&&void 0===a.$data[i]?(Object.defineProperty(a,i,{get:function(){return a.$data[i]},set:function(e){a.$data[i]=e,n.hasOwnProperty("$forceUpdate")&&n.$forceUpdate()},enumerable:!0,configurable:!0}),a[i]=s):n.$set(a,i,s)})),a(t)&&this.$nextTick(t)}}};t.default=o},"35a3":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var o={uniCountdown:n("661d").default},a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("view",[o("view",{staticClass:e._$s(1,"sc","content-bg-img"),attrs:{_i:1}}),o("view",{staticClass:e._$s(2,"sc","order-status"),attrs:{_i:2}},[e._$s(3,"i","buy"==e.orderDetail.side)?o("view",[e._$s(4,"i",0==e.orderDetail.orderState)||e._$s(5,"e",1==e.orderDetail.orderState)||e._$s(6,"e",2==e.orderDetail.orderState)||e._$s(7,"e",3==e.orderDetail.orderState)?o("view"):e._e()]):o("view",[e._$s(9,"i",0==e.orderDetail.orderState)||e._$s(10,"e",1==e.orderDetail.orderState)||e._$s(11,"e",2==e.orderDetail.orderState)||e._$s(12,"e",3==e.orderDetail.orderState)?o("view"):e._e()])]),o("view",{staticClass:e._$s(13,"sc","flex-column-center"),attrs:{_i:13}},[o("view",{staticClass:e._$s(14,"sc","orderinfo-bg"),attrs:{_i:14}},[o("view",{staticClass:e._$s(15,"sc","order-detail-top"),attrs:{_i:15}},[o("view",[o("text",{staticClass:e._$s(17,"sc","order-price"),attrs:{_i:17}},[e._v(e._$s(17,"t0-0",e._s(e.orderDetail.amount)))]),o("text",{staticClass:e._$s(18,"sc","left-s"),attrs:{_i:18}}),e._$s(19,"i",0==e.orderDetail.orderState)?o("view",{staticClass:e._$s(19,"sc","cancelBtn"),attrs:{_i:19}},[o("view",{attrs:{_i:20},on:{click:e.changeOrderStateCancel}})]):e._e()]),e._$s(21,"i","buy"==e.orderDetail.side&&0==e.orderDetail.orderState)?o("view",[o("view",{staticClass:e._$s(22,"sc","flex-row-center"),attrs:{_i:22}},[e._$s(23,"i",e.overTime)?o("uni-countdown",{attrs:{color:"#FA0000","show-day":!1,second:e.overTime,_i:23}}):e._e()],1),o("view")]):e._e(),o("view",{staticClass:e._$s(25,"sc","line"),attrs:{_i:25}})]),o("view",{staticClass:e._$s(26,"sc","order-detail-1"),attrs:{_i:26}},[e._$s(27,"i","wechat"==e.orderDetail.payMode)?o("view",{staticClass:e._$s(27,"sc","order-detail-1-info wx"),attrs:{_i:27}}):e._$s(28,"e","alipay"==e.orderDetail.payMode)?o("view",{staticClass:e._$s(28,"sc","order-detail-1-info zfb"),attrs:{_i:28}}):o("view",{staticClass:e._$s(29,"sc","order-detail-1-info yhk"),attrs:{_i:29}})]),e._$s(30,"i","buy"==e.orderDetail.side)?o("view",{staticClass:e._$s(30,"sc","order-detail-2"),attrs:{_i:30}},[o("view",{staticClass:e._$s(31,"sc","left-s"),attrs:{_i:31}}),o("view",{staticClass:e._$s(32,"sc","order-detail-2-right"),attrs:{_i:32}},[o("text",{staticClass:e._$s(33,"sc","left-s"),attrs:{_i:33}},[e._v(e._$s(33,"t0-0",e._s(e.orderDetail.sellerName)))]),o("image",{staticClass:e._$s(34,"sc","copy-img"),attrs:{src:e._$s(34,"a-src",n("9dd8")),_i:34},on:{click:function(t){return e.copyOrderNumber(e.orderDetail.sellerName)}}})])]):o("view",{staticClass:e._$s(35,"sc","order-detail-2"),attrs:{_i:35}},[o("view",{staticClass:e._$s(36,"sc","left-s"),attrs:{_i:36}}),o("view",{staticClass:e._$s(37,"sc","order-detail-2-right"),attrs:{_i:37}},[o("text",{staticClass:e._$s(38,"sc","left-s"),attrs:{_i:38}},[e._v(e._$s(38,"t0-0",e._s(e.orderDetail.buyerName)))]),o("image",{staticClass:e._$s(39,"sc","copy-img"),attrs:{src:e._$s(39,"a-src",n("9dd8")),_i:39},on:{click:function(t){return e.copyOrderNumber(e.orderDetail.buyerName)}}})])]),e._$s(40,"i","bank"==e.orderDetail.payMode)?o("view",[o("view",{staticClass:e._$s(41,"sc","order-detail-2"),attrs:{_i:41}},[o("view",{staticClass:e._$s(42,"sc","left-s"),attrs:{_i:42}}),o("view",{staticClass:e._$s(43,"sc","order-detail-2-right"),attrs:{_i:43}},[o("text",{staticClass:e._$s(44,"sc","left-s"),attrs:{_i:44}},[e._v(e._$s(44,"t0-0",e._s(e.bankName)))]),o("image",{staticClass:e._$s(45,"sc","copy-img"),attrs:{src:e._$s(45,"a-src",n("9dd8")),_i:45},on:{click:function(t){return e.copyOrderNumber(e.bankName)}}})])]),o("view",{staticClass:e._$s(46,"sc","order-detail-2"),attrs:{_i:46}},[o("view",{staticClass:e._$s(47,"sc","left-s"),attrs:{_i:47}}),o("view",{staticClass:e._$s(48,"sc","order-detail-2-right"),attrs:{_i:48}},[o("text",{staticClass:e._$s(49,"sc","left-s"),attrs:{_i:49}},[e._v(e._$s(49,"t0-0",e._s(e.bankNumber)))]),o("image",{staticClass:e._$s(50,"sc","copy-img"),attrs:{src:e._$s(50,"a-src",n("9dd8")),_i:50},on:{click:function(t){return e.copyOrderNumber(e.bankNumber)}}})])])]):e._e(),o("view",{staticClass:e._$s(51,"sc","order-detail-2"),attrs:{_i:51}},[o("view",{staticClass:e._$s(52,"sc","left-s"),attrs:{_i:52}}),o("view",{staticClass:e._$s(53,"sc","order-detail-2-right"),attrs:{_i:53}},[o("text",{staticClass:e._$s(54,"sc","left-s"),attrs:{_i:54}},[e._v(e._$s(54,"t0-0",e._s(e.orderDetail.id)))]),o("image",{staticClass:e._$s(55,"sc","copy-img"),attrs:{src:e._$s(55,"a-src",n("9dd8")),_i:55},on:{click:function(t){return e.copyOrderNumber(e.orderDetail.id)}}})])]),o("view",{staticClass:e._$s(56,"sc","order-detail-2"),attrs:{_i:56}},[o("view",{staticClass:e._$s(57,"sc","left-s"),attrs:{_i:57}}),o("view",{staticClass:e._$s(58,"sc","order-detail-2-right"),attrs:{_i:58}},[o("text",{staticClass:e._$s(59,"sc","left-s"),attrs:{_i:59}},[e._v(e._$s(59,"t0-0",e._s(e.orderDetail.createTime)))])])])]),e._$s(60,"i","buy"==e.orderDetail.side&&0==e.orderDetail.orderState)?o("view",{staticClass:e._$s(60,"sc","payinfo-bg flex-column"),attrs:{_i:60}},[e._$s(61,"i","bank"!=e.orderDetail.payMode)?o("view",[o("view",{staticClass:e._$s(62,"sc","flex-row-center"),attrs:{_i:62}},[o("image",{staticClass:e._$s(63,"sc","pay-img"),attrs:{src:e._$s(63,"a-src",n("d1cb")),_i:63},on:{click:e.viewPayCode}}),o("view")]),o("text",[e._v(e._$s(65,"t0-0",e._s("wechat"==e.orderDetail.payMode?"\u5fae\u4fe1":"\u652f\u4ed8\u5b9d"))+e._$s(65,"t0-1",e._s("wechat"==e.orderDetail.payMode?"\u5fae\u4fe1":"\u652f\u4ed8\u5b9d")))])]):e._e(),e._$s(66,"i","bank"==e.orderDetail.payMode)?o("view",[o("text")]):e._e(),o("view",{staticClass:e._$s(68,"sc","flex-column-center"),attrs:{_i:68}},[e._$s(69,"i",""==e.imgBase64)?o("view",{staticClass:e._$s(69,"sc","flex-column-center"),attrs:{_i:69}},[o("image",{staticClass:e._$s(70,"sc","pay-zf-img"),attrs:{src:e._$s(70,"a-src",n("4add")),_i:70},on:{click:function(t){return e.chooseImage()}}}),o("text",{staticClass:e._$s(71,"sc","notice"),attrs:{_i:71}})]):o("image",{staticClass:e._$s(72,"sc","pay-zf-img"),attrs:{src:e._$s(72,"a-src",e.payImagePath),_i:72},on:{click:function(t){return e.chooseImage()}}})])]):e._e(),o("view",{staticClass:e._$s(73,"sc","flex-column-center"),attrs:{_i:73}},[e._$s(74,"i","buy"==e.orderDetail.side)?o("view",[e._$s(75,"i",0==e.orderDetail.orderState)?o("view",{staticClass:e._$s(75,"sc","flex-row"),attrs:{_i:75}},[o("view",{staticClass:e._$s(76,"sc","submitBtn2"),attrs:{_i:76},on:{click:e.changeOrderStatePay}})]):e._$s(77,"e",1==e.orderDetail.orderState)?o("view",{staticClass:e._$s(77,"sc","submitBtn notTap"),attrs:{_i:77}}):e._$s(78,"e",2==e.orderDetail.orderState)?o("view",{staticClass:e._$s(78,"sc","submitBtn notTap"),attrs:{_i:78}}):e._$s(79,"e",3==e.orderDetail.orderState)?o("view",{staticClass:e._$s(79,"sc","submitBtn notTap"),attrs:{_i:79}}):e._e()]):o("view",[e._$s(81,"i",0==e.orderDetail.orderState)?o("view",{staticClass:e._$s(81,"sc","submitBtn notTap"),attrs:{_i:81}}):e._$s(82,"e",1==e.orderDetail.orderState)?o("view",{staticClass:e._$s(82,"sc","submitBtn"),attrs:{_i:82},on:{click:e.changeOrderStateFinish}}):e._$s(83,"e",2==e.orderDetail.orderState)?o("view",{staticClass:e._$s(83,"sc","submitBtn notTap"),attrs:{_i:83}}):e._$s(84,"e",3==e.orderDetail.orderState)?o("view",{staticClass:e._$s(84,"sc","submitBtn notTap"),attrs:{_i:84}}):e._e()])])])])},i=[]},"35e6":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{page:0,selectedIndex:0,navItems:[{id:0,name:"\u8fdb\u884c\u4e2d"},{id:1,name:"\u5df2\u5b8c\u6210"}],dataList:[],guaDataList:[]}},onLoad:function(){},onShow:function(){this.reload()},methods:{changeNav:function(t){e("log",t," at pages/orderPage/orderPage.vue:47"),this.selectedIndex=t,this.queryOrder()},reload:function(){this.page=0,this.apiLoadingStatus=!1,this.pageLoading=!1,this.queryOrder(),this.queryMyPreOrder()},loadmorefun:function(){this.pageLoading=!1,this.apiLoadingStatus=!1,this.$refs.basePage.endReload(),this.$refs.basePage.nomore()},queryOrder:function(){var t=this,n="0,1";1==this.selectedIndex&&(n="2,3");var o={orderState:n,page:this.page};e("log",o," at pages/orderPage/orderPage.vue:82"),uni.PYRequest.queryOrder(o,(function(e){t.dataList=e.data}),(function(e){}),(function(e){t.pageLoading=!1,t.apiLoadingStatus=!1,t.$refs.basePage.endReload()}))},queryMyPreOrder:function(){var e=this,t={};uni.PYRequest.queryMyPreOrder(t,(function(t){e.guaDataList=t.data}),(function(e){}),(function(e){}))}}};t.default=n}).call(this,n("0de9")["default"])},3733:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",{staticClass:e._$s(0,"sc","bg flex-column"),attrs:{_i:0}},[n("view",{staticClass:e._$s(1,"sc","flex-row-center"),attrs:{_i:1}},[n("view",{staticClass:e._$s(2,"sc","role-title"),attrs:{_i:2}},[e._v(e._$s(2,"t0-0",e._s("\u6211\u8981\u5356"==e.buttonName?"\u4e70\u5bb6":"\u5356\u5bb6")))]),n("view",{staticClass:e._$s(3,"sc","role-name"),attrs:{_i:3}},[e._v(e._$s(3,"t0-0",e._s(e.order.nickname)))])]),n("view",{staticClass:e._$s(4,"sc","line"),attrs:{_i:4}}),n("view",{staticClass:e._$s(5,"sc","flex-row-between"),attrs:{_i:5}},[n("view",{staticClass:e._$s(6,"sc","flex-column"),attrs:{_i:6}},[n("view",{staticClass:e._$s(7,"sc","price"),attrs:{_i:7}}),n("view",{staticClass:e._$s(8,"sc","number2"),attrs:{_i:8}},[e._v(e._$s(8,"t0-0",e._s(e.order.minMoney))+e._$s(8,"t0-1",e._s(e.order.remainMoney)))])]),n("view",{staticClass:e._$s(9,"sc","flex-column-end"),attrs:{_i:9}},[n("view",{staticClass:e._$s(10,"sc","flex-row"),attrs:{_i:10}},[e._$s(11,"i",1==e.order.wechat)?n("view",{staticClass:e._$s(11,"sc","wx"),attrs:{_i:11}}):e._e(),e._$s(12,"i",1==e.order.alipay)?n("view",{staticClass:e._$s(12,"sc","zfb"),attrs:{_i:12}}):e._e(),e._$s(13,"i",1==e.order.bank)?n("view",{staticClass:e._$s(13,"sc","yhk"),attrs:{_i:13}}):e._e()]),n("view",{staticClass:e._$s(14,"sc","subbtn"),attrs:{_i:14},on:{click:e.actionToBuyPage}},[e._v(e._$s(14,"t0-0",e._s(e.buttonName)))])])])])},i=[]},"373e":function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",[e._$s(1,"i",1===e.message.payload.operationType)?n("view",{staticClass:e._$s(1,"sc","card handle"),attrs:{_i:1}},[n("view",[n("view",{staticClass:e._$s(3,"sc","time"),attrs:{_i:3}},[e._v(e._$s(3,"t0-0",e._s(e.messageTime)))]),e._v(e._$s(2,"t1-0",e._s(e.renderDom)))]),n("view",{staticClass:e._$s(4,"sc","choose"),attrs:{_i:4}},[n("view",{staticClass:e._$s(5,"sc","button"),attrs:{_i:5},on:{click:e.handleClick}})])]):n("view",{staticClass:e._$s(6,"sc","card"),attrs:{_i:6}},[n("view",{staticClass:e._$s(7,"sc","time"),attrs:{_i:7}},[e._v(e._$s(7,"t0-0",e._s(e.messageTime)))]),e._v(e._$s(6,"t1-0",e._s(e.renderDom)))])])},i=[]},"37d6":function(e,t,n){(function(t){e.exports={register:function(e,t,n,o){this.post("register/create",e,!0,t,n,o)},sendCreateCode:function(e,t,n,o){this.post("register/sendCreateCode",e,!1,t,n,o)},sendResetCode:function(e,t,n,o){this.post("register/sendResetCode",e,!1,t,n,o)},resetPassword:function(e,t,n,o){this.post("register/resetPassword",e,!0,t,n,o)},sendEmailCode:function(e,t,n,o){this.post("user/sendEmailCode",e,!1,t,n,o)},sendSmsCode:function(e,t,n,o){this.post("user/sendSmsCode",e,!1,t,n,o)},sendCertSmsCode:function(e,t,n,o){this.post("user/sendCertSmsCode",e,!1,t,n,o)},confirmCert:function(e,t,n,o){this.post("user/confirmCert",e,!0,t,n,o)},confirmChangeEmail:function(e,t,n,o){this.post("user/confirmChangeEmail",e,!0,t,n,o)},confirmChangeMobile:function(e,t,n,o){this.post("user/confirmChangeMobile",e,!0,t,n,o)},changePassword:function(e,t,n,o){this.post("user/changePassword",e,!0,t,n,o)},changePayPassword:function(e,t,n,o){this.post("user/changePayPassword",e,!0,t,n,o)},login:function(e,t,n,o){this.post("register/login",e,!0,t,n,o)},userInfo:function(e,t,n,o){this.post("user/info",e,!1,t,n,o)},allAssets:function(e,t,n,o){this.post("user/allAssets",e,!1,t,n,o)},uploadPayment:function(e,t,n,o){this.post("user/uploadPayment",e,!0,t,n,o)},getpayment:function(e,t,n,o){this.post("user/payment",e,!1,t,n,o)},bankList:function(e,t,n,o){this.post("user/bankList",e,!1,t,n,o)},createPreOrder:function(e,t,n,o){this.post("order/createPreOrder",e,!0,t,n,o)},orderQueryPreOrder:function(e,t,n,o){this.post("order/queryPreOrder",e,!1,t,n,o)},queryMyPreOrder:function(e,t,n,o){this.post("order/queryMyPreOrder",e,!1,t,n,o)},deletePreOrder:function(e,t,n,o){this.post("order/deletePreOrder",e,!0,t,n,o)},orderTrade:function(e,t,n,o){this.post("order/trade",e,!1,t,n,o)},queryOrder:function(e,t,n,o){this.post("order/queryOrder",e,!1,t,n,o)},queryOrderById:function(e,t,n,o){this.post("order/queryOrderById",e,!1,t,n,o)},changeOrderState:function(e,t,n,o){this.post("order/changeOrderState",e,!0,t,n,o)},confirmPay:function(e,t,n,o){this.post("order/confirmPay",e,!0,t,n,o)},checkPayPassword:function(e,t,n,o){this.post("user/checkPayPassword",e,!0,t,n,o)},queryUserRecord:function(e,t,n,o){this.post("user/queryRecord",e,!1,t,n,o)},queryCSInfo:function(e,t,n,o){this.post("chat/getChatVSInfo",e,!1,t,n,o)},get:function(e,n,o,a,i){var s=uni.graceJS.getStorage("token");t("log","ddddddd"+s," at util/request.js:128"),s||(s=""),uni.request({url:getApp().globalData.baseUrl+e,data:n,header:{Authorization:s},method:"GET",success:function(e){t("log",e," at util/request.js:143"),"C0"==e.data.code?o(e.data):"C3"==e.data.code||"T1"==e.data.code?"C3"==e.data.code&&uni.showToast({icon:"none",title:e.data.msg}):uni.showToast({icon:"none",title:e.data.msg})},fail:function(e){t("log",e," at util/request.js:167"),a(e)},complete:function(e){i(e)}})},post:function(e,n,o,a,i,s){var r=uni.graceJS.getStorage("token");r||(r=""),1==o&&uni.showLoading({});var c="";c=e.startsWith("http")?e:getApp().globalData.baseUrl+e,uni.request({url:c,data:n,header:{Authorization:r,"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(e){t("log",e," at util/request.js:203"),0==e.data.code?(1==o&&uni.showToast({icon:"success",title:e.data.msg}),a(e.data)):-2==e.data.code?(uni.showToast({icon:"none",title:e.data.msg}),uni.redirectTo({url:"/pages/loginPage/loginPassword"}),uni.graceJS.removeStorage("token")):uni.showToast({icon:"none",title:e.data.msg})},fail:function(e){t("log",e," at util/request.js:230"),uni.showToast({icon:"none",title:"\u7cfb\u7edf\u9519\u8bef,\u8bf7\u8054\u7cfb\u5ba2\u670d"})},complete:function(e){s(e),uni.hideLoading()}})}}}).call(this,n("0de9")["default"])},"37dc":function(e,t,n){"use strict";(function(e){function n(e,t){return r(e)||s(e,t)||a(e,t)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function s(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],o=!0,a=!1,i=void 0;try{for(var s,r=e[Symbol.iterator]();!(o=(s=r.next()).done);o=!0)if(n.push(s.value),t&&n.length===t)break}catch(c){a=!0,i=c}finally{try{o||null==r["return"]||r["return"]()}finally{if(a)throw i}}return n}}function r(e){if(Array.isArray(e))return e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}Object.defineProperty(t,"__esModule",{value:!0}),t.compileI18nJsonStr=$,t.hasI18nJson=x,t.initVueI18n=P,t.isI18nStr=U,t.normalizeLocale=E,t.parseI18nJson=G,t.resolveLocale=H,t.isString=t.LOCALE_ZH_HANT=t.LOCALE_ZH_HANS=t.LOCALE_FR=t.LOCALE_ES=t.LOCALE_EN=t.I18n=t.Formatter=void 0;var d=Array.isArray,f=function(e){return null!==e&&"object"===typeof e},p=["{","}"],g=function(){function e(){c(this,e),this._caches=Object.create(null)}return l(e,[{key:"interpolate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p;if(!t)return[e];var o=this._caches[e];return o||(o=_(e,n),this._caches[e]=o),v(o,t)}}]),e}();t.Formatter=g;var h=/^(?:\d)+/,m=/^(?:\w)+/;function _(e,t){var o=n(t,2),a=o[0],i=o[1],s=[],r=0,c="";while(r<e.length){var u=e[r++];if(u===a){c&&s.push({type:"text",value:c}),c="";var l="";u=e[r++];while(void 0!==u&&u!==i)l+=u,u=e[r++];var d=u===i,f=h.test(l)?"list":d&&m.test(l)?"named":"unknown";s.push({value:l,type:f})}else c+=u}return c&&s.push({type:"text",value:c}),s}function v(e,t){var n=[],o=0,a=d(t)?"list":f(t)?"named":"unknown";if("unknown"===a)return n;while(o<e.length){var i=e[o];switch(i.type){case"text":n.push(i.value);break;case"list":n.push(t[parseInt(i.value,10)]);break;case"named":"named"===a&&n.push(t[i.value]);break;case"unknown":0;break}o++}return n}var y="zh-Hans";t.LOCALE_ZH_HANS=y;var M="zh-Hant";t.LOCALE_ZH_HANT=M;var C="en";t.LOCALE_EN=C;var w="fr";t.LOCALE_FR=w;var I="es";t.LOCALE_ES=I;var b=Object.prototype.hasOwnProperty,T=function(e,t){return b.call(e,t)},k=new g;function S(e,t){return!!t.find((function(t){return-1!==e.indexOf(t)}))}function D(e,t){return t.find((function(t){return 0===e.indexOf(t)}))}function E(e,t){if(e){if(e=e.trim().replace(/_/g,"-"),t&&t[e])return e;if(e=e.toLowerCase(),0===e.indexOf("zh"))return e.indexOf("-hans")>-1?y:e.indexOf("-hant")>-1||S(e,["-tw","-hk","-mo","-cht"])?M:y;var n=D(e,[C,w,I]);return n||void 0}}var A=function(){function e(t){var n=t.locale,o=t.fallbackLocale,a=t.messages,i=t.watcher,s=t.formater;c(this,e),this.locale=C,this.fallbackLocale=C,this.message={},this.messages={},this.watchers=[],o&&(this.fallbackLocale=o),this.formater=s||k,this.messages=a||{},this.setLocale(n||C),i&&this.watchLocale(i)}return l(e,[{key:"setLocale",value:function(e){var t=this,n=this.locale;this.locale=E(e,this.messages)||this.fallbackLocale,this.messages[this.locale]||(this.messages[this.locale]={}),this.message=this.messages[this.locale],n!==this.locale&&this.watchers.forEach((function(e){e(t.locale,n)}))}},{key:"getLocale",value:function(){return this.locale}},{key:"watchLocale",value:function(e){var t=this,n=this.watchers.push(e)-1;return function(){t.watchers.splice(n,1)}}},{key:"add",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=this.messages[e];o?n?Object.assign(o,t):Object.keys(t).forEach((function(e){T(o,e)||(o[e]=t[e])})):this.messages[e]=t}},{key:"f",value:function(e,t,n){return this.formater.interpolate(e,t,n).join("")}},{key:"t",value:function(e,t,n){var o=this.message;return"string"===typeof t?(t=E(t,this.messages),t&&(o=this.messages[t])):n=t,T(o,e)?this.formater.interpolate(o[e],n).join(""):(console.warn("Cannot translate the value of keypath ".concat(e,". Use the value of keypath as default.")),e)}}]),e}();function N(e,t){e.$watchLocale?e.$watchLocale((function(e){t.setLocale(e)})):e.$watch((function(){return e.$locale}),(function(e){t.setLocale(e)}))}function O(){return"undefined"!==typeof uni&&uni.getLocale?uni.getLocale():"undefined"!==typeof e&&e.getLocale?e.getLocale():C}function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;if("string"!==typeof e){var a=[t,e];e=a[0],t=a[1]}"string"!==typeof e&&(e=O()),"string"!==typeof n&&(n="undefined"!==typeof __uniConfig&&__uniConfig.fallbackLocale||C);var i=new A({locale:e,fallbackLocale:n,messages:t,watcher:o}),s=function(e,t){if("function"!==typeof getApp)s=function(e,t){return i.t(e,t)};else{var n=!1;s=function(e,t){var o=getApp().$vm;return o&&(o.$locale,n||(n=!0,N(o,i))),i.t(e,t)}}return s(e,t)};return{i18n:i,f:function(e,t,n){return i.f(e,t,n)},t:function(e,t){return s(e,t)},add:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return i.add(e,t,n)},watch:function(e){return i.watchLocale(e)},getLocale:function(){return i.getLocale()},setLocale:function(e){return i.setLocale(e)}}}t.I18n=A;var L,R=function(e){return"string"===typeof e};function x(e,t){return L||(L=new g),q(e,(function(e,n){var o=e[n];return R(o)?!!U(o,t)||void 0:x(o,t)}))}function G(e,t,n){return L||(L=new g),q(e,(function(e,o){var a=e[o];R(a)?U(a,n)&&(e[o]=F(a,t,n)):G(a,t,n)})),e}function $(e,t){var n=t.locale,o=t.locales,a=t.delimiters;if(!U(e,a))return e;L||(L=new g);var i=[];Object.keys(o).forEach((function(e){e!==n&&i.push({locale:e,values:o[e]})})),i.unshift({locale:n,values:o[n]});try{return JSON.stringify(j(JSON.parse(e),i,a),null,2)}catch(s){}return e}function U(e,t){return e.indexOf(t[0])>-1}function F(e,t,n){return L.interpolate(e,t,n).join("")}function B(e,t,n,o){var a=e[t];if(R(a)){if(U(a,o)&&(e[t]=F(a,n[0].values,o),n.length>1)){var i=e[t+"Locales"]={};n.forEach((function(e){i[e.locale]=F(a,e.values,o)}))}}else j(a,n,o)}function j(e,t,n){return q(e,(function(e,o){B(e,o,t,n)})),e}function q(e,t){if(d(e)){for(var n=0;n<e.length;n++)if(t(e,n))return!0}else if(f(e))for(var o in e)if(t(e,o))return!0;return!1}function H(e){return function(t){return t?(t=E(t)||t,V(t).find((function(t){return e.indexOf(t)>-1}))):t}}function V(e){var t=[],n=e.split("-");while(n.length)t.push(n.join("-")),n.pop();return t}t.isString=R}).call(this,n("c8ba"))},3842:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("c6f9"),a={data:function(){return{renderDom:[]}},components:{},props:{message:{type:Object},isMine:{type:Boolean,default:!0}},watch:{message:{handler:function(e){this.setData({renderDom:(0,o.parseText)(e)})},immediate:!0,deep:!0}},beforeMount:function(){},destroyed:function(){},methods:{}};t.default=a},"38eb":function(e,t,n){"use strict";n.r(t);var o=n("aeb3"),a=n("8fe4");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},3944:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",{staticClass:e._$s(0,"sc","gui-img-crop"),attrs:{_i:0}},[n("view",{staticClass:e._$s(1,"sc","gui-cropper-wrapper"),style:e._$s(1,"s",{height:e.height+"px",width:e.width+"px"}),attrs:{_i:1}},[n("canvas",{staticClass:e._$s(2,"sc","gui-cropper-bg"),style:e._$s(2,"s",{width:e.width+"px",height:e.height+"px"}),attrs:{id:"bgCropper",_i:2},on:{touchstart:e.touchStart,touchmove:e.touchMove,touchend:e.touchEnd}}),n("canvas",{staticClass:e._$s(3,"sc","gui-cropper-prev"),attrs:{id:"prevCropper",_i:3}})]),n("view",{staticClass:e._$s(4,"sc","gui-flex gui-rows gui-nowrap gui-bg-black"),attrs:{_i:4}},[n("view",{staticClass:e._$s(5,"sc","gui-cropper-btn"),attrs:{_i:5},on:{click:e.selectImg}}),n("view",{staticClass:e._$s(6,"sc","gui-cropper-btn"),attrs:{_i:6},on:{click:e.saveImg}})])])},i=[]},"39e6":function(e,t,n){"use strict";n.r(t);var o=n("2f1a"),a=n("d2d7");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},"3a40":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={data:function(){return{cslogined:0,phoneno:"",password:""}},methods:{navigateToRegistPage:function(){uni.navigateTo({url:"registPage"})},actionToLoginPage:function(){uni.navigateTo({url:"./loginPage"})},actionToForgetPasswordPage:function(){uni.navigateTo({url:"forgetPasswordPage"})},navigateToKefu:function(){uni.PYRequest.queryCSInfo({},(function(e){uni.$TUIKit.login({userID:e.userId,userSig:e.sig}).then((function(){setTimeout((function(){var t="../TUI-Chat/chat?conversationID="+e.cs;uni.navigateTo({url:t})}),1e3)})).catch((function(e){}))}),(function(e){uni.showToast({icon:"none",title:"\u8fde\u63a5\u5728\u7ebf\u5ba2\u670d\u7cfb\u7edf\u5931\u8d25,\u8bf7\u7a0d\u5019\u91cd\u8bd5"})}),(function(e){}))},submit:function(e){var t=/^[1][0-9]{10}$/;if(!t.test(this.phoneno))return uni.showToast({title:"\u8bf7\u6b63\u786e\u586b\u5199\u624b\u673a\u53f7\u7801",icon:"none"}),!1;t=/^[a-zA-Z0-9]{8,20}$/;if(!t.test(this.password))return uni.showToast({title:"\u8bf7\u586b\u5199\u81f3\u5c118\u4f4d\u767b\u5f55\u5bc6\u7801",icon:"none"}),!1;var n={mobile:this.phoneno,password:this.password};uni.PYRequest.login(n,(function(e){var t={token:e.token,userId:e.userId};uni.graceJS.setStorage(t),uni.switchTab({url:"../walletPage/walletPage"})}),(function(e){}),(function(e){}))}}};t.default=o},"3ad3":function(e,t,n){"use strict";n.r(t);var o=n("d378"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"3b0a":function(e,t,n){(function(t,n){
/**
 * we-cropper v1.3.9
 * (c) 2020 dlhandsome
 * @license MIT
 */
(function(t,n){e.exports=n()})(0,(function(){"use strict";var e=void 0,o=["touchstarted","touchmoved","touchended"];function a(e){return e.charAt(0).toUpperCase()+e.slice(1)}function i(e){var t=[],n=arguments.length-1;while(n-- >0)t[n]=arguments[n+1];o.forEach((function(n,o){void 0!==t[o]&&(e[n]=t[o])}))}function s(e,t){Object.defineProperties(e,t)}function r(){return e||(e=uni.getSystemInfoSync()),e}var c={},u=r(),l=u.pixelRatio,d={id:{default:"cropper",get:function(){return c.id},set:function(e){"string"!==typeof e&&t("error","id\uff1a"+e+" is invalid"," at Grace/js/WeCropper.js:56"),c.id=e}},width:{default:750,get:function(){return c.width},set:function(e){"number"!==typeof e&&t("error","width\uff1a"+e+" is invalid"," at Grace/js/WeCropper.js:68"),c.width=e}},height:{default:750,get:function(){return c.height},set:function(e){"number"!==typeof e&&t("error","height\uff1a"+e+" is invalid"," at Grace/js/WeCropper.js:80"),c.height=e}},pixelRatio:{default:l,get:function(){return c.pixelRatio},set:function(e){"number"!==typeof e&&t("error","pixelRatio\uff1a"+e+" is invalid"," at Grace/js/WeCropper.js:92"),c.pixelRatio=e}},scale:{default:2.5,get:function(){return c.scale},set:function(e){"number"!==typeof e&&t("error","scale\uff1a"+e+" is invalid"," at Grace/js/WeCropper.js:104"),c.scale=e}},zoom:{default:5,get:function(){return c.zoom},set:function(e){"number"!==typeof e?t("error","zoom\uff1a"+e+" is invalid"," at Grace/js/WeCropper.js:116"):(e<0||e>10)&&t("error","zoom should be ranged in 0 ~ 10"," at Grace/js/WeCropper.js:118"),c.zoom=e}},src:{default:"",get:function(){return c.src},set:function(e){"string"!==typeof e&&t("error","src\uff1a"+e+" is invalid"," at Grace/js/WeCropper.js:130"),c.src=e}},cut:{default:{},get:function(){return c.cut},set:function(e){"object"!==typeof e&&t("error","cut\uff1a"+e+" is invalid"," at Grace/js/WeCropper.js:142"),c.cut=e}},boundStyle:{default:{},get:function(){return c.boundStyle},set:function(e){"object"!==typeof e&&t("error","boundStyle\uff1a"+e+" is invalid"," at Grace/js/WeCropper.js:154"),c.boundStyle=e}},onReady:{default:null,get:function(){return c.ready},set:function(e){c.ready=e}},onBeforeImageLoad:{default:null,get:function(){return c.beforeImageLoad},set:function(e){c.beforeImageLoad=e}},onImageLoad:{default:null,get:function(){return c.imageLoad},set:function(e){c.imageLoad=e}},onBeforeDraw:{default:null,get:function(){return c.beforeDraw},set:function(e){c.beforeDraw=e}}},f=r(),p=f.windowWidth;function g(){var e=this;e.attachPage=function(){var n=getCurrentPages(),o=n[n.length-1];Object.defineProperty(o,"wecropper",{get:function(){return t("warn","Instance will not be automatically bound to the page after v1.4.0\n\nPlease use a custom instance name instead\n\nExample: \nthis.mycropper = new WeCropper(options)\n\n// ...\nthis.mycropper.getCropperImage()"," at Grace/js/WeCropper.js:211"),e},configurable:!0})},e.createCtx=function(){var n=e.id,o=e.targetId;n?(e.ctx=e.ctx||uni.createCanvasContext(n),e.targetCtx=e.targetCtx||uni.createCanvasContext(o)):t("error","constructor: create canvas context failed, 'id' must be valuable"," at Grace/js/WeCropper.js:233")},e.deviceRadio=p/750}var h="undefined"!==typeof window?window:"undefined"!==typeof n?n:"undefined"!==typeof self?self:{};function m(e,t){return t={exports:{}},e(t,t.exports),t.exports}var _=m((function(e,t){t.isStr=function(e){return"string"===typeof e},t.isNum=function(e){return"number"===typeof e},t.isArr=Array.isArray,t.isUndef=function(e){return void 0===e},t.isTrue=function(e){return!0===e},t.isFalse=function(e){return!1===e},t.isFunc=function(e){return"function"===typeof e},t.isObj=t.isObject=function(e){return null!==e&&"object"===typeof e};var n=Object.prototype.toString;t.isPlainObject=function(e){return"[object Object]"===n.call(e)};var o=Object.prototype.hasOwnProperty;t.hasOwn=function(e,t){return o.call(e,t)},t.noop=function(e,t,n){},t.isValidArrayIndex=function(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}})),v=_.isFunc,y=_.isPlainObject,M=["ready","beforeImageLoad","beforeDraw","imageLoad"];function C(){var e=this;e.on=function(n,o){return M.indexOf(n)>-1?v(o)&&("ready"===n?o(e):e["on"+a(n)]=o):t("error","event: "+n+" is invalid"," at Grace/js/WeCropper.js:348"),e}}function w(e){return function(t){var n=[],o=arguments.length-1;while(o-- >0)n[o]=arguments[o+1];return void 0===t&&(t={}),new Promise((function(o,a){t.success=function(e){o(e)},t.fail=function(e){a(e)},e.apply(void 0,[t].concat(n))}))}}function I(e,t){return void 0===t&&(t=!1),new Promise((function(n){e.draw(t,n)}))}var b=w(uni.getImageInfo),T=w(uni.canvasToTempFilePath),k=m((function(e,t){
/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */
(function(n){var o=t,a=e&&e.exports==o&&e,i="object"==typeof h&&h;i.global!==i&&i.window!==i||(n=i);var s=function(e){this.message=e};s.prototype=new Error,s.prototype.name="InvalidCharacterError";var r=function(e){throw new s(e)},c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=/[\t\n\f\r ]/g,l=function(e){e=String(e).replace(u,"");var t=e.length;t%4==0&&(e=e.replace(/==?$/,""),t=e.length),(t%4==1||/[^+a-zA-Z0-9/]/.test(e))&&r("Invalid character: the string to be decoded is not correctly encoded.");var n,o,a=0,i="",s=-1;while(++s<t)o=c.indexOf(e.charAt(s)),n=a%4?64*n+o:o,a++%4&&(i+=String.fromCharCode(255&n>>(-2*a&6)));return i},d=function(e){e=String(e),/[^\0-\xFF]/.test(e)&&r("The string to be encoded contains characters outside of the Latin1 range.");var t,n,o,a,i=e.length%3,s="",u=-1,l=e.length-i;while(++u<l)t=e.charCodeAt(u)<<16,n=e.charCodeAt(++u)<<8,o=e.charCodeAt(++u),a=t+n+o,s+=c.charAt(a>>18&63)+c.charAt(a>>12&63)+c.charAt(a>>6&63)+c.charAt(63&a);return 2==i?(t=e.charCodeAt(u)<<8,n=e.charCodeAt(++u),a=t+n,s+=c.charAt(a>>10)+c.charAt(a>>4&63)+c.charAt(a<<2&63)+"="):1==i&&(a=e.charCodeAt(u),s+=c.charAt(a>>2)+c.charAt(a<<4&63)+"=="),s},f={encode:d,decode:l,version:"0.1.0"};if(o&&!o.nodeType)if(a)a.exports=f;else for(var p in f)f.hasOwnProperty(p)&&(o[p]=f[p]);else n.base64=f})(h)}));function S(e,t){return"data:"+t+";base64,"+e}function D(e){e=e.toLowerCase().replace(/jpg/i,"jpeg");var t=e.match(/png|jpeg|bmp|gif/)[0];return"image/"+t}function E(e){var t="";if("string"===typeof e)t=e;else for(var n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return k.encode(t)}function A(e,t,n,o,a,i){uni.canvasGetImageData({canvasId:e,x:t,y:n,width:o,height:a,success:function(e){i(e,null)},fail:function(e){i(null,e)}})}function N(e){var t=e.width,n=e.height,o=t*n*3,a=o+54,i=[66,77,255&a,a>>8&255,a>>16&255,a>>24&255,0,0,0,0,54,0,0,0],s=[40,0,0,0,255&t,t>>8&255,t>>16&255,t>>24&255,255&n,n>>8&255,n>>16&255,n>>24&255,1,0,24,0,0,0,0,0,255&o,o>>8&255,o>>16&255,o>>24&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=(4-3*t%4)%4,c=e.data,u="",l=t<<2,d=n,f=String.fromCharCode;do{for(var p=l*(d-1),g="",h=0;h<t;h++){var m=h<<2;g+=f(c[p+m+2])+f(c[p+m+1])+f(c[p+m])}for(var _=0;_<r;_++)g+=String.fromCharCode(0);u+=g}while(--d);var v=E(i.concat(s))+E(u);return v}function O(e,n,o,a,i,s,r){void 0===r&&(r=function(){}),void 0===s&&(s="png"),s=D(s),/bmp/.test(s)?A(e,n,o,a,i,(function(e,t){var n=N(e);v(r)&&r(S(n,"image/"+s),t)})):t("error","\u6682\u4e0d\u652f\u6301\u751f\u6210'"+s+"'\u7c7b\u578b\u7684base64\u56fe\u7247"," at Grace/js/WeCropper.js:732")}var P={convertToImage:O,convertToBMP:function(e,t){void 0===e&&(e={});var n=e.canvasId,o=e.x,a=e.y,i=e.width,s=e.height;return void 0===t&&(t=function(){}),O(n,o,a,i,s,"bmp",t)}};function L(){var e=this,t=e.width,n=e.height,o=e.id,a=e.targetId,i=e.pixelRatio,s=e.cut,r=s.x;void 0===r&&(r=0);var c=s.y;void 0===c&&(c=0);var u=s.width;void 0===u&&(u=t);var l=s.height;void 0===l&&(l=n),e.updateCanvas=function(t){return e.croperTarget&&e.ctx.drawImage(e.croperTarget,e.imgLeft,e.imgTop,e.scaleWidth,e.scaleHeight),v(e.onBeforeDraw)&&e.onBeforeDraw(e.ctx,e),e.setBoundStyle(e.boundStyle),e.ctx.draw(!1,t),e},e.pushOrigin=e.pushOrign=function(t){return e.src=t,v(e.onBeforeImageLoad)&&e.onBeforeImageLoad(e.ctx,e),b({src:t}).then((function(t){var n=t.width/t.height,o=u/l;return e.croperTarget=t.path,n<o?(e.rectX=r,e.baseWidth=u,e.baseHeight=u/n,e.rectY=c-Math.abs((l-e.baseHeight)/2)):(e.rectY=c,e.baseWidth=l*n,e.baseHeight=l,e.rectX=r-Math.abs((u-e.baseWidth)/2)),e.imgLeft=e.rectX,e.imgTop=e.rectY,e.scaleWidth=e.baseWidth,e.scaleHeight=e.baseHeight,e.update(),new Promise((function(t){e.updateCanvas(t)}))})).then((function(){v(e.onImageLoad)&&e.onImageLoad(e.ctx,e)}))},e.removeImage=function(){return e.src="",e.croperTarget="",I(e.ctx)},e.getCropperBase64=function(e){void 0===e&&(e=function(){}),P.convertToBMP({canvasId:o,x:r,y:c,width:u,height:l},e)},e.getCropperImage=function(t,n){var s=t,d={canvasId:o,x:r,y:c,width:u,height:l},f=function(){return Promise.resolve()};return y(s)&&s.original&&(f=function(){return e.targetCtx.drawImage(e.croperTarget,e.imgLeft*i,e.imgTop*i,e.scaleWidth*i,e.scaleHeight*i),d={canvasId:a,x:r*i,y:c*i,width:u*i,height:l*i},I(e.targetCtx)}),f().then((function(){y(s)&&(d=Object.assign({},d,s)),v(s)&&(n=s);var e=d.componentContext?[d,d.componentContext]:[d];return T.apply(null,e)})).then((function(t){var o=t.tempFilePath;return v(n)?n.call(e,o,null):o})).catch((function(t){if(!v(n))throw t;n.call(e,null,t)}))}}var R=function(e,t,n,o,a){var i,s,r;return i=Math.round(a.x-o.x),s=Math.round(a.y-o.y),r=Math.round(Math.sqrt(i*i+s*s)),e+.001*n*(r-t)};function x(){var e=this;e.src&&(e.__oneTouchStart=function(t){e.touchX0=Math.round(t.x),e.touchY0=Math.round(t.y)},e.__oneTouchMove=function(t){var n,o;if(e.touchended)return e.updateCanvas();n=Math.round(t.x-e.touchX0),o=Math.round(t.y-e.touchY0);var a=Math.round(e.rectX+n),i=Math.round(e.rectY+o);e.outsideBound(a,i),e.updateCanvas()},e.__twoTouchStart=function(t,n){var o,a,i;e.touchX1=Math.round(e.rectX+e.scaleWidth/2),e.touchY1=Math.round(e.rectY+e.scaleHeight/2),o=Math.round(n.x-t.x),a=Math.round(n.y-t.y),i=Math.round(Math.sqrt(o*o+a*a)),e.oldDistance=i},e.__twoTouchMove=function(t,n){var o=e.oldScale,a=e.oldDistance,i=e.scale,s=e.zoom;e.newScale=R(o,a,s,t,n),e.newScale<=1&&(e.newScale=1),e.newScale>=i&&(e.newScale=i),e.scaleWidth=Math.round(e.newScale*e.baseWidth),e.scaleHeight=Math.round(e.newScale*e.baseHeight);var r=Math.round(e.touchX1-e.scaleWidth/2),c=Math.round(e.touchY1-e.scaleHeight/2);e.outsideBound(r,c),e.updateCanvas()},e.__xtouchEnd=function(){e.oldScale=e.newScale,e.rectX=e.imgLeft,e.rectY=e.imgTop})}var G={touchStart:function(e){var t=this,n=e.touches,o=n[0],a=n[1];t.src&&(i(t,!0,null,null),t.__oneTouchStart(o),e.touches.length>=2&&t.__twoTouchStart(o,a))},touchMove:function(e){var t=this,n=e.touches,o=n[0],a=n[1];t.src&&(i(t,null,!0),1===e.touches.length&&t.__oneTouchMove(o),e.touches.length>=2&&t.__twoTouchMove(o,a))},touchEnd:function(e){var t=this;t.src&&(i(t,!1,!1,!0),t.__xtouchEnd())}};function $(){var e=this,t=e.width,n=e.height,o=e.cut,a=o.x;void 0===a&&(a=0);var i=o.y;void 0===i&&(i=0);var s=o.width;void 0===s&&(s=t);var r=o.height;void 0===r&&(r=n),e.outsideBound=function(t,n){e.imgLeft=t>=a?a:e.scaleWidth+t-a<=s?a+s-e.scaleWidth:t,e.imgTop=n>=i?i:e.scaleHeight+n-i<=r?i+r-e.scaleHeight:n},e.setBoundStyle=function(o){void 0===o&&(o={});var c=o.color;void 0===c&&(c="#04b00f");var u=o.mask;void 0===u&&(u="rgba(0, 0, 0, 0.3)");var l=o.lineWidth;void 0===l&&(l=1);var d=l/2,f=[{start:{x:a-d,y:i+10-d},step1:{x:a-d,y:i-d},step2:{x:a+10-d,y:i-d}},{start:{x:a-d,y:i+r-10+d},step1:{x:a-d,y:i+r+d},step2:{x:a+10-d,y:i+r+d}},{start:{x:a+s-10+d,y:i-d},step1:{x:a+s+d,y:i-d},step2:{x:a+s+d,y:i+10-d}},{start:{x:a+s+d,y:i+r-10+d},step1:{x:a+s+d,y:i+r+d},step2:{x:a+s-10+d,y:i+r+d}}];e.ctx.beginPath(),e.ctx.setFillStyle(u),e.ctx.fillRect(0,0,a,n),e.ctx.fillRect(a,0,s,i),e.ctx.fillRect(a,i+r,s,n-i-r),e.ctx.fillRect(a+s,0,t-a-s,n),e.ctx.fill(),f.forEach((function(t){e.ctx.beginPath(),e.ctx.setStrokeStyle(c),e.ctx.setLineWidth(l),e.ctx.moveTo(t.start.x,t.start.y),e.ctx.lineTo(t.step1.x,t.step1.y),e.ctx.lineTo(t.step2.x,t.step2.y),e.ctx.stroke()}))}}var U="1.3.9",F=function(e){var t=this,n={};return s(t,d),Object.keys(d).forEach((function(e){n[e]=d[e].default})),Object.assign(t,n,e),t.prepare(),t.attachPage(),t.createCtx(),t.observer(),t.cutt(),t.methods(),t.init(),t.update(),t};return F.prototype.init=function(){var e=this,t=e.src;return e.version=U,"function"===typeof e.onReady&&e.onReady(e.ctx,e),t?e.pushOrign(t):e.updateCanvas(),i(e,!1,!1,!1),e.oldScale=1,e.newScale=1,e},Object.assign(F.prototype,G),F.prototype.prepare=g,F.prototype.observer=C,F.prototype.methods=L,F.prototype.cutt=$,F.prototype.update=x,F}))}).call(this,n("0de9")["default"],n("c8ba"))},"3b7f":function(e,t,n){"use strict";n.r(t);var o=n("423a"),a=n("5ed2");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},"3baa":function(e,t,n){"use strict";n.r(t);var o=n("3944"),a=n("7ccd");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},"3c8f":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={name:"orderListComponent",data:function(){return{}},props:{order:Object},methods:{actionToOrderDetail:function(){uni.navigateTo({url:"../../pages/orderPage/orderDetailPage2?orderId="+this.order.id})}}};t.default=o},"3cee":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var o={uniIcons:n("4b66").default,uniBadge:n("32fc").default},a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",{staticClass:e._$s(0,"sc","uni-list-item"),class:e._$s(0,"c",{"uni-list-item--disabled":e.disabled}),attrs:{"hover-class":e._$s(0,"a-hover-class",!e.clickable&&!e.link||e.disabled||e.showSwitch?"":"uni-list-item--hover"),_i:0},on:{click:e.onClick}},[e._$s(1,"i",!e.isFirstChild)?n("view",{staticClass:e._$s(1,"sc","border--left"),class:e._$s(1,"c",{"uni-list--border":e.border}),attrs:{_i:1}}):e._e(),n("view",{staticClass:e._$s(2,"sc","uni-list-item__container"),class:e._$s(2,"c",{"container--right":e.showArrow||e.link,"flex--direction":"column"===e.direction}),attrs:{_i:2}},[e._t("header",[n("view",{staticClass:e._$s(4,"sc","uni-list-item__header"),attrs:{_i:4}},[e._$s(5,"i",e.thumb)?n("view",{staticClass:e._$s(5,"sc","uni-list-item__icon"),attrs:{_i:5}},[n("image",{staticClass:e._$s(6,"sc","uni-list-item__icon-img"),class:e._$s(6,"c",["uni-list--"+e.thumbSize]),attrs:{src:e._$s(6,"a-src",e.thumb),_i:6}})]):e._$s(7,"e",e.showExtraIcon)?n("view",{staticClass:e._$s(7,"sc","uni-list-item__icon"),attrs:{_i:7}},[n("uni-icons",{attrs:{color:e.extraIcon.color,size:e.extraIcon.size,type:e.extraIcon.type,_i:8}})],1):e._e()])],{_i:3}),e._t("body",[n("view",{staticClass:e._$s(10,"sc","uni-list-item__content"),class:e._$s(10,"c",{"uni-list-item__content--center":e.thumb||e.showExtraIcon||e.showBadge||e.showSwitch}),attrs:{_i:10}},[e._$s(11,"i",e.title)?n("text",{staticClass:e._$s(11,"sc","uni-list-item__content-title"),class:e._$s(11,"c",[0!==e.ellipsis&&e.ellipsis<=2?"uni-ellipsis-"+e.ellipsis:""]),attrs:{_i:11}},[e._v(e._$s(11,"t0-0",e._s(e.title)))]):e._e(),e._$s(12,"i",e.note)?n("text",{staticClass:e._$s(12,"sc","uni-list-item__content-note"),attrs:{_i:12}},[e._v(e._$s(12,"t0-0",e._s(e.note)))]):e._e()])],{_i:9}),e._t("footer",[e._$s(14,"i",e.rightText||e.showBadge||e.showSwitch)?n("view",{staticClass:e._$s(14,"sc","uni-list-item__extra"),class:e._$s(14,"c",{"flex--justify":"column"===e.direction}),attrs:{_i:14}},[e._$s(15,"i",e.rightText)?n("text",{staticClass:e._$s(15,"sc","uni-list-item__extra-text"),attrs:{_i:15}},[e._v(e._$s(15,"t0-0",e._s(e.rightText)))]):e._e(),e._$s(16,"i",e.showBadge)?n("uni-badge",{attrs:{type:e.badgeType,text:e.badgeText,_i:16}}):e._e(),e._$s(17,"i",e.showSwitch)?n("switch",{attrs:{disabled:e._$s(17,"a-disabled",e.disabled),checked:e._$s(17,"a-checked",e.switchChecked),_i:17},on:{change:e.onSwitchChange}}):e._e()],1):e._e()],{_i:13})],2),e._$s(18,"i",e.showArrow||e.link)?n("uni-icons",{staticClass:e._$s(18,"sc","uni-icon-wrapper"),attrs:{size:16,color:"#bbb",type:"arrowright",_i:18}}):e._e()],1)},i=[]},"3d86":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var o={basePageComponents:n("0860").default},a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basePageComponents",{ref:"basePage",attrs:{apiLoadingStatus:e.apiLoadingStatus,isLoading:e.pageLoading,_i:0},on:{reload:e.reload}},[n("view",{slot:"body"},[n("view",{staticClass:e._$s(2,"sc","gui-h4"),attrs:{_i:2}},[e._v(e._$s(2,"t0-0",e._s(e.newsInfo.head)))]),n("view",{staticClass:e._$s(3,"sc","message-info-time"),attrs:{_i:3}},[e._v(e._$s(3,"t0-0",e._s(e.newsInfo.createTime)))]),n("view",{staticClass:e._$s(4,"sc","line"),attrs:{_i:4}}),n("text",{staticClass:e._$s(5,"sc","gui-h5"),attrs:{_i:5}},[e._v(e._$s(5,"t0-0",e._s(e.newsInfo.info)))])])])},i=[]},"423a":function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",{staticClass:e._$s(0,"sc","conent-bg"),attrs:{_i:0},on:{click:e.actionToOrderDetail}},[n("view",{staticClass:e._$s(1,"sc","tag"),attrs:{_i:1}},[e._v(e._$s(1,"t0-0",e._s(e.order.nickname[0])))]),n("view",{staticClass:e._$s(2,"sc","name"),attrs:{_i:2}},[e._v(e._$s(2,"t0-0",e._s(e.order.nickname)))]),n("view",{staticClass:e._$s(3,"sc","time"),attrs:{_i:3}},[e._v(e._$s(3,"t0-0",e._s(e.order.updateTime)))]),n("view",{staticClass:e._$s(4,"sc","line"),attrs:{_i:4}}),e._$s(5,"i","buy"==e.order.side)?n("view",{staticClass:e._$s(5,"sc","buy-color gb"),attrs:{_i:5}}):n("view",{staticClass:e._$s(6,"sc","sell-color gb"),attrs:{_i:6}}),n("view",{staticClass:e._$s(7,"sc","gb-number"),attrs:{_i:7}},[e._v(e._$s(7,"t0-0",e._s(e.order.remainMoney)))]),n("view",{staticClass:e._$s(8,"sc","status"),attrs:{_i:8}})])},i=[]},"42c9":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={name:"gui-refresh",props:{refreshText:{type:Array,default:function(){return["\u7ee7\u7eed\u4e0b\u62c9\u5237\u65b0","\u677e\u5f00\u624b\u6307\u5f00\u59cb\u5237\u65b0","\u6570\u636e\u5237\u65b0\u4e2d","\u6570\u636e\u5df2\u5237\u65b0"]}},refreshBgColor:{type:Array,default:function(){return["#FFFFFF","#FFFFFF","#FFFFFF","#63D2BC"]}},refreshColor:{type:Array,default:function(){return["rgba(69, 90, 100, 0.6)","rgba(69, 90, 100, 0.6)","#63D2BC","#FFFFFF"]}},refreshFontSize:{type:String,default:"26rpx"}},data:function(){return{reScrollTop:0,refreshHeight:0,refreshY:0,refreshStatus:0,refreshTimer:0}},methods:{touchstart:function(e){this.reScrollTop>10||(this.refreshY=e.changedTouches[0].pageY)},touchmove:function(e){if(this.refreshStatus>=1)return null;if(!(this.reScrollTop>10)){var t=e.changedTouches[0].pageY-this.refreshY;t/=2,t>=50&&(t=50,this.refreshStatus=1),t>15&&(this.refreshHeight=t)}},touchend:function(e){if(!(this.reScrollTop>10))return this.refreshStatus<1?this.resetFresh():void(1==this.refreshStatus&&(this.refreshStatus=2,this.$emit("reload")))},scroll:function(e){this.reScrollTop=e.detail.scrollTop},endReload:function(){var e=this;this.refreshStatus=3,setTimeout((function(){e.resetFresh()}),1e3)},resetFresh:function(){return this.refreshHeight=0,this.refreshStatus=0,null},rotate360:function(){var e=this.$refs.loadingIcon;animation.transition(e,{styles:{transform:"rotate(7200deg)"},duration:2e4,timingFunction:"linear",needLayout:!1,delay:0})}}};t.default=o},"430b":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={data:function(){return{user:{}}},onShow:function(){var e=this;this.user={},uni.PYRequest.userInfo({},(function(t){e.user=t.data}),(function(e){}),(function(e){}))},methods:{actionToUserHeaderPage:function(){uni.navigateTo({url:"./userHeaderPage"})},actionToChangeMobile:function(){uni.navigateTo({url:"./changeMobile"})},actionToChangeEmail:function(){this.user.email&&uni.navigateTo({url:"./changeEmail"})},actionToChangePayPassword:function(){uni.navigateTo({url:"./changePayPassword"})},actionToChangePassword:function(){uni.navigateTo({url:"./changePassword"})}}};t.default=o},4384:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",{staticClass:e._$s(0,"sc","tip-message"),attrs:{_i:0}},[n("view",{staticClass:e._$s(1,"sc","text-message"),attrs:{_i:1}},[e._v(e._$s(1,"t0-0",e._s(e.renderDom[0].text)))])])},i=[]},"43ad":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={data:function(){return{oldPassword:"",newPassword:"",newPassword2:""}},methods:{checkParams:function(){var e=/^[0-9]{6}$/;return e.test(this.oldPassword)&&e.test(this.newPassword)?this.newPassword==this.newPassword2||(uni.showToast({title:"2\u6b21\u5bc6\u7801\u8f93\u5165\u4e0d\u4e00\u81f4",icon:"none"}),!1):(uni.showToast({title:"\u8bf7\u586b\u51996\u4f4d\u6570\u5b57\u652f\u4ed8\u5bc6\u7801",icon:"none"}),!1)},confirmChange:function(){if(this.checkParams()){var e={oldPassword:this.oldPassword,newPassword:this.newPassword};uni.PYRequest.changePayPassword(e,(function(e){setTimeout((function(){uni.navigateBack({})}),2e3)}),(function(e){}),(function(e){}))}}}};t.default=o},4412:function(e,t,n){"use strict";n.r(t);var o=n("1518"),a=n("4667");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},4667:function(e,t,n){"use strict";n.r(t);var o=n("9c82"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},4694:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},i=[]},4698:function(e,t,n){"use strict";n.r(t);var o=n("2108"),a=n("3ad3");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},"47ca":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{order:{},sellNum:"",password:"",paymentList:[],selectedPayment:"",type:""}},onLoad:function(e){this.order=JSON.parse(e.orderStr),this.type=e.type},methods:{deleteOrder:function(){var t=this;uni.showModal({title:"\u63d0\u793a",content:"\u786e\u5b9a\u8981\u5220\u9664\u8be5\u6302\u5355\u5417\uff1f",success:function(n){n.confirm?t.deletePreOrder():n.cancel&&e("log","\u7528\u6237\u70b9\u51fb\u53d6\u6d88"," at pages/orderPage/orderGuaDetailPage.vue:85")}})},deletePreOrder:function(){var t={orderId:this.order.id};e("log",t," at pages/orderPage/orderGuaDetailPage.vue:98"),uni.PYRequest.deletePreOrder(t,(function(e){setTimeout((function(){uni.navigateBack({})}),1e3)}),(function(e){}),(function(e){}))}}};t.default=n}).call(this,n("0de9")["default"])},4826:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={name:"gui-iphone-bottom",props:{height:{type:String,default:"50rpx"},isSwitchPage:{type:Boolean,default:!1}},data:function(){return{need:!1}},created:function(){},methods:{setBottom:function(){if(!this.isSwitchPage){var e=uni.getSystemInfoSync();e.model=e.model.replace(" ",""),e.model=e.model.toLowerCase();var t=e.model.indexOf("iphonex");t>5&&(t=-1);var n=e.model.indexOf("iphone1");n>5&&(n=-1),-1==t&&-1==n||(this.need=!0)}}}};t.default=o},4903:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{url:""}},onLoad:function(){var t=uni.graceJS.getStorage("userId");this.url="http://chat.robbi.io/chat.html?userId="+t,e("log",this.url," at pages/kefu/kefu.vue:18")},methods:{}};t.default=n}).call(this,n("0de9")["default"])},4904:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={name:"gui-popup",props:{bgColor:{type:String,default:"rgba(0, 0, 0, 0.7)"},position:{type:String,default:"center"},width:{type:String,default:"580rpx"},canCloseByShade:{type:Boolean,default:!0},zIndex:{type:Number,default:99999},top:{type:Number,default:0},duration:{type:Number,default:280}},data:function(){return{show:!1,out:!1}},methods:{open:function(){this.out=!1,this.show=!0},closebysd:function(){this.canCloseByShade&&this.close()},close:function(){var e=this;this.out=!0,setTimeout((function(){e.show=!1,e.$emit("close")}),350)},stopfun:function(e){return e.stopPropagation(),null}}};t.default=o},4961:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s(n("6672")),a=s(n("abe2")),i=s(n("2a6e"));function s(e){return e&&e.__esModule?e:{default:e}}var r={en:o.default,"zh-Hans":a.default,"zh-Hant":i.default};t.default=r},"4add":function(e,t){e.exports="/static/img/bankCard/add.png"},"4b25":function(e,t,n){"use strict";n.r(t);var o=n("25e2"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"4b66":function(e,t,n){"use strict";n.r(t);var o=n("1607"),a=n("2931");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},"4c29":function(e,t,n){"use strict";n.r(t);var o=n("2626"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"4c4f":function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("web-view",{attrs:{src:e._$s(0,"a-src",e.url),_i:0}})},i=[]},"4c5b":function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e._$s(0,"i",e.show)?n("view",[e._$s(1,"i","center"==e.position)?n("view",{ref:"guipopup",staticClass:e._$s(1,"sc","gui-popup gui-flex gui-columns gui-justify-content-center gui-align-items-center"),class:e._$s(1,"c",[e.out?"gui-fade-out":"gui-fade-in"]),style:e._$s(1,"s",{backgroundColor:e.bgColor,zIndex:e.zIndex,top:e.top+"px",animationDuration:e.duration+"ms"}),attrs:{_i:1},on:{touchmove:function(t){return t.stopPropagation(),t.preventDefault(),e.stopfun(t)},click:function(t){return t.stopPropagation(),e.closebysd(t)}}},[n("view",{ref:"guiPopupCenter",staticClass:e._$s(2,"sc","gui-popup-content gui-popup-center"),class:e._$s(2,"c",[e.out?"gui-scale-out":"gui-scale-in"]),style:e._$s(2,"s",{width:e.width,animationDuration:e.duration+"ms"}),attrs:{_i:2},on:{click:function(t){return t.stopPropagation(),e.stopfun(t)}}},[e._t("default",null,{_i:3})],2)]):e._e(),e._$s(4,"i","top"==e.position)?n("view",{ref:"guipopup",staticClass:e._$s(4,"sc","gui-popup gui-flex gui-columns"),class:e._$s(4,"c",[e.out?"gui-fade-out":"gui-fade-in"]),style:e._$s(4,"s",{backgroundColor:e.bgColor,zIndex:e.zIndex,top:e.top+"px",animationDuration:e.duration+"ms"}),attrs:{_i:4},on:{touchmove:function(t){return t.stopPropagation(),t.preventDefault(),e.stopfun(t)},click:function(t){return t.stopPropagation(),e.closebysd(t)}}},[n("view",{ref:"guiPopupTop",staticClass:e._$s(5,"sc","gui-popup-content gui-popup-top"),class:e._$s(5,"c",[e.out?"gui-top-out":"gui-top-in"]),style:e._$s(5,"s",{animationDuration:e.duration+"ms"}),attrs:{_i:5},on:{click:function(t){return t.stopPropagation(),e.stopfun(t)}}},[e._t("default",null,{_i:6})],2)]):e._e(),e._$s(7,"i","bottom"==e.position)?n("view",{ref:"guipopup",staticClass:e._$s(7,"sc","gui-popup gui-flex gui-columns gui-justify-content-end"),class:e._$s(7,"c",[e.out?"gui-fade-out":"gui-fade-in"]),style:e._$s(7,"s",{backgroundColor:e.bgColor,zIndex:e.zIndex,top:e.top+"px",animationDuration:e.duration+"ms"}),attrs:{_i:7},on:{touchmove:function(t){return t.stopPropagation(),t.preventDefault(),e.stopfun(t)},click:function(t){return t.stopPropagation(),e.closebysd(t)}}},[n("view",{ref:"guiPopupBottom",staticClass:e._$s(8,"sc","gui-popup-content gui-popup-bottom"),class:e._$s(8,"c",[e.out?"gui-bottom-out":"gui-bottom-in"]),style:e._$s(8,"s",{animationDuration:e.duration+"ms"}),attrs:{_i:8},on:{click:function(t){return t.stopPropagation(),e.stopfun(t)}}},[e._t("default",null,{_i:9})],2)]):e._e(),e._$s(10,"i","left"==e.position)?n("view",{ref:"guipopup",staticClass:e._$s(10,"sc","gui-popup gui-flex gui-columns"),class:e._$s(10,"c",[e.out?"gui-fade-out":"gui-fade-in"]),style:e._$s(10,"s",{backgroundColor:e.bgColor,zIndex:e.zIndex,top:e.top+"px",animationDuration:e.duration+"ms"}),attrs:{_i:10},on:{touchmove:function(t){return t.stopPropagation(),t.preventDefault(),e.stopfun(t)},click:function(t){return t.stopPropagation(),e.closebysd(t)}}},[n("view",{ref:"guiPopupLeft",staticClass:e._$s(11,"sc","gui-popup-content gui-flex1 gui-flex gui-columns gui-popup-left"),class:e._$s(11,"c",[e.out?"gui-left-out":"gui-left-in"]),style:e._$s(11,"s",{width:e.width,animationDuration:e.duration+"ms"}),attrs:{_i:11},on:{click:function(t){return t.stopPropagation(),e.stopfun(t)}}},[e._t("default",null,{_i:12})],2)]):e._e(),e._$s(13,"i","right"==e.position)?n("view",{ref:"guipopup",staticClass:e._$s(13,"sc","gui-popup gui-flex gui-columns gui-align-items-end"),class:e._$s(13,"c",[e.out?"gui-fade-out":"gui-fade-in"]),style:e._$s(13,"s",{backgroundColor:e.bgColor,zIndex:e.zIndex,top:e.top+"px",animationDuration:e.duration+"ms"}),attrs:{_i:13},on:{touchmove:function(t){return t.stopPropagation(),t.preventDefault(),e.stopfun(t)},click:function(t){return t.stopPropagation(),e.closebysd(t)}}},[n("view",{ref:"guiPopupRight",staticClass:e._$s(14,"sc","gui-popup-content gui-flex1 gui-flex gui-columns gui-popup-right"),class:e._$s(14,"c",[e.out?"gui-right-out":"gui-right-in"]),style:e._$s(14,"s",{width:e.width,animationDuration:e.duration+"ms"}),attrs:{_i:14},on:{click:function(t){return t.stopPropagation(),e.stopfun(t)}}},[e._t("default",null,{_i:15})],2)]):e._e()]):e._e()},i=[]},"4d92":function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e._$s(0,"i",e.display)?n("view",{staticClass:e._$s(0,"sc","tui-cards-container"),attrs:{_i:0}},[n("view",{staticClass:e._$s(1,"sc","tui-cards-box"),attrs:{_i:1}},[n("view",{staticClass:e._$s(2,"sc","tui-cards-title"),attrs:{_i:2}},[n("view"),n("view",{staticClass:e._$s(4,"sc","tui-cards-close"),attrs:{_i:4},on:{click:e.handleClose}})]),n("view",{staticClass:e._$s(5,"sc","tui-search-bar"),attrs:{_i:5}},[n("image",{staticClass:e._$s(6,"sc","tui-searchcion"),attrs:{_i:6}}),n("input",{staticClass:e._$s(7,"sc","tui-search-bar-input"),attrs:{value:e._$s(7,"a-value",e.words),_i:7},on:{input:e.wordsInput}})]),n("scroll-view",{staticClass:e._$s(8,"sc","tui-order-list"),attrs:{_i:8}},e._l(e._$s(9,"f",{forItems:e.orderMatch}),(function(t,o,a,i){return n("view",{key:e._$s(9,"f",{forIndex:a,key:o}),staticClass:e._$s("9-"+i,"sc","tui-order-item"),attrs:{_i:"9-"+i}},[n("view",{staticClass:e._$s("10-"+i,"sc","order-title"),attrs:{_i:"10-"+i}},[n("view",{staticClass:e._$s("11-"+i,"sc","order-number"),attrs:{_i:"11-"+i}},[e._v(e._$s("11-"+i,"t0-0",e._s(t.orderNum)))]),n("view",{staticClass:e._$s("12-"+i,"sc","order-time"),attrs:{_i:"12-"+i}},[e._v(e._$s("12-"+i,"t0-0",e._s(t.time)))])]),n("view",{staticClass:e._$s("13-"+i,"sc","order-info"),attrs:{_i:"13-"+i}},[n("image",{staticClass:e._$s("14-"+i,"sc","order-image"),attrs:{src:e._$s("14-"+i,"a-src",t.imageUrl),_i:"14-"+i}}),n("view",{staticClass:e._$s("15-"+i,"sc","order-content"),attrs:{_i:"15-"+i}},[n("view",{staticClass:e._$s("16-"+i,"sc","order-content-title"),attrs:{_i:"16-"+i}},[e._v(e._$s("16-"+i,"t0-0",e._s(t.title)))]),n("view",{staticClass:e._$s("17-"+i,"sc","order-content-description"),attrs:{_i:"17-"+i}},[e._v(e._$s("17-"+i,"t0-0",e._s(t.description)))]),n("view",[n("view",{staticClass:e._$s("19-"+i,"sc","order-content-price"),attrs:{_i:"19-"+i}},[e._v(e._$s("19-"+i,"t0-0",e._s(t.price)))]),n("view",{staticClass:e._$s("20-"+i,"sc","btn-send-order"),attrs:{"data-order":e._$s("20-"+i,"a-data-order",t),_i:"20-"+i},on:{click:function(t){return t.stopPropagation(),e.sendMessage(t)}}},[n("text",{staticClass:e._$s("21-"+i,"sc","btn-send-text"),attrs:{_i:"21-"+i}})])])])])])})),0)])]):e._e()},i=[]},"4dc2":function(e,t,n){"use strict";n.r(t);var o=n("4903"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"4fbb":function(e,t,n){"use strict";n.r(t);var o=n("35a3"),a=n("7135");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},5041:function(e,t,n){"use strict";n.r(t);var o=n("104c"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"50e6":function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("scroll-view",{staticClass:e._$s(0,"sc","message-list-container"),attrs:{"scroll-into-view":e._$s(0,"a-scroll-into-view",e.scrollView),"scroll-top":e._$s(0,"a-scroll-top",e.scrollTop),"refresher-triggered":e._$s(0,"a-refresher-triggered",e.triggered),_i:0},on:{refresherrefresh:e.refresh}},[n("view",{attrs:{id:"message-scroll",_i:1}},[e._$s(2,"i",e.isCompleted)?n("view",{staticClass:e._$s(2,"sc","no-message"),attrs:{_i:2}}):e._e(),e._l(e._$s(3,"f",{forItems:e.messageList}),(function(t,o,a,i){return n("view",{key:e._$s(3,"f",{forIndex:a,key:t.ID}),staticClass:e._$s("3-"+i,"sc","t-message"),attrs:{_i:"3-"+i}},[e._$s("4-"+i,"i","@TIM#SYSTEM"!==e.conversation.type)?n("view",{attrs:{id:e._$s("4-"+i,"a-id",t.ID),_i:"4-"+i}},[n("view",{staticClass:e._$s("5-"+i,"sc","t-message-item"),attrs:{_i:"5-"+i}},[e._$s("6-"+i,"i","TIMGroupTipElem"===t.type)?n("TUI-TipMessage",{attrs:{message:t,_i:"6-"+i}}):e._e(),e._$s("7-"+i,"i","TIMGroupTipElem"!==t.type)?n("view",{class:e._$s("7-"+i,"c","out"===t.flow?"t-self-message":"t-recieve-message"),attrs:{_i:"7-"+i}},[e._$s("8-"+i,"i","in"===t.flow)?n("image",{staticClass:e._$s("8-"+i,"sc","t-message-avatar"),attrs:{src:e._$s("8-"+i,"a-src",t.avatar||"https://sdk-web-1252463788.cos.ap-hongkong.myqcloud.com/component/TUIKit/assets/avatar_21.png"),_i:"8-"+i}}):e._e(),e._$s("9-"+i,"i","C2C"===e.conversation.type&&"out"===t.flow)?n("view",{staticClass:e._$s("9-"+i,"sc","read-receipts"),attrs:{_i:"9-"+i}},[(e._$s("10-"+i,"i",t.isPeerRead),n("view"))]):e._e(),n("view",[e._$s("13-"+i,"i","TIMTextElem"===t.type)?n("TUI-TextMessage",{attrs:{message:t,isMine:"out"===t.flow,_i:"13-"+i}}):e._e(),e._$s("14-"+i,"i","TIMImageElem"===t.type)?n("TUI-ImageMessage",{attrs:{message:t,isMine:"out"===t.flow,_i:"14-"+i}}):e._e(),e._$s("15-"+i,"i","TIMVideoFileElem"===t.type)?n("TUI-VideoMessage",{attrs:{message:t,isMine:"out"===t.flow,_i:"15-"+i}}):e._e(),e._$s("16-"+i,"i","TIMSoundElem"===t.type)?n("TUI-AudioMessage",{attrs:{message:t,isMine:"out"===t.flow,_i:"16-"+i}}):e._e(),e._$s("17-"+i,"i","TIMCustomElem"===t.type)?n("TUI-CustomMessage",{attrs:{message:t,isMine:"out"===t.flow,_i:"17-"+i}}):e._e(),e._$s("18-"+i,"i","TIMFaceElem"===t.type)?n("TUI-FaceMessage",{attrs:{message:t,isMine:"out"===t.flow,_i:"18-"+i}}):e._e(),e._$s("19-"+i,"i","TIMFileElem"===t.type)?n("TUI-FileMessage",{attrs:{message:t,isMine:"out"===t.flow,_i:"19-"+i}}):e._e()],1),e._$s("20-"+i,"i","out"===t.flow)?n("image",{staticClass:e._$s("20-"+i,"sc","t-message-avatar"),attrs:{src:e._$s("20-"+i,"a-src",t.avatar||"https://sdk-web-1252463788.cos.ap-hongkong.myqcloud.com/component/TUIKit/assets/avatar_21.png"),_i:"20-"+i}}):e._e()]):e._e()],1)]):n("view",{attrs:{id:e._$s("21-"+i,"a-id",t.ID),"data-value":e._$s("21-"+i,"a-data-value",t.ID),_i:"21-"+i}},[n("TUI-SystemMessage",{attrs:{message:t,_i:"22-"+i}})],1)])}))],2)])},i=[]},"517f":function(e,t,n){"use strict";n.r(t);var o=n("dab5"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},5293:function(e,t){e.exports="/uni_modules/uni-upgrade-center-app/images/app_update_close.png"},"53ed":function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",{directives:[{name:"show",rawName:"v-show",value:e._$s(0,"v-show",e.display),expression:"_$s(0,'v-show',display)"}],staticClass:e._$s(0,"sc","tui-common-words-container"),attrs:{_i:0}},[n("view",{staticClass:e._$s(1,"sc","tui-common-words-box"),attrs:{_i:1}},[n("view",{staticClass:e._$s(2,"sc","tui-common-words-title"),attrs:{_i:2}},[n("view"),n("view",{staticClass:e._$s(4,"sc","tui-common-words-close"),attrs:{_i:4},on:{click:e.handleClose}})]),n("view",{staticClass:e._$s(5,"sc","tui-search-bar"),attrs:{_i:5}},[n("image",{staticClass:e._$s(6,"sc","tui-searchcion"),attrs:{_i:6}}),n("input",{staticClass:e._$s(7,"sc","tui-search-bar-input"),attrs:{value:e._$s(7,"a-value",e.words),_i:7},on:{input:e.wordsInput}})]),n("scroll-view",{staticClass:e._$s(8,"sc","tui-common-words-list"),attrs:{_i:8}},e._l(e._$s(9,"f",{forItems:e.commonWordsMatch}),(function(t,o,a,i){return n("view",{key:e._$s(9,"f",{forIndex:a,key:o}),staticClass:e._$s("9-"+i,"sc","tui-common-words-item"),attrs:{"data-words":e._$s("9-"+i,"a-data-words",t),_i:"9-"+i},on:{click:e.sendMessage}},[e._v(e._$s("9-"+i,"t0-0",e._s(t)))])})),0)])])},i=[]},5606:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e._$s(0,"i",!e.hidden)?n("view",{staticClass:e._$s(0,"sc","gui-load-more gui-flex gui-rows gui-align-items-center gui-justify-content-center"),attrs:{_i:0},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.tapme(t)}}},[e._$s(1,"i",1==e.loadMoreStatus)?n("view",{ref:"loadingiconforloadmore",staticClass:e._$s(1,"sc","gui-load-more-icon"),attrs:{_i:1}},[n("text",{staticClass:e._$s(2,"sc","gui-icons gui-rotate360 gui-block-text"),style:e._$s(2,"s",{fontSize:e.loadMoreFontSize,color:e.loadMoreColor[e.loadMoreStatus]}),attrs:{_i:2}})]):e._e(),n("text",{staticClass:e._$s(3,"sc","gui-block-text"),style:e._$s(3,"s",{fontSize:e.loadMoreFontSize,color:e.loadMoreColor[e.loadMoreStatus]}),attrs:{_i:3}},[e._v(e._$s(3,"t0-0",e._s(e.loadMoreText[e.loadMoreStatus])))])]):e._e()},i=[]},5694:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",[e._$s(1,"i","order"===e.renderDom[0].type)?n("view",{class:e._$s(1,"c","custom-message "+(e.isMine?"my-custom":"")),attrs:{_i:1}},[n("image",{staticClass:e._$s(2,"sc","custom-image"),attrs:{src:e._$s(2,"a-src",e.renderDom[0].imageUrl),_i:2}}),n("view",{staticClass:e._$s(3,"sc","custom-content"),attrs:{_i:3}},[n("view",{staticClass:e._$s(4,"sc","custom-content-title"),attrs:{_i:4}},[e._v(e._$s(4,"t0-0",e._s(e.renderDom[0].title)))]),n("view",{staticClass:e._$s(5,"sc","custom-content-description"),attrs:{_i:5}},[e._v(e._$s(5,"t0-0",e._s(e.renderDom[0].description)))]),n("view",{staticClass:e._$s(6,"sc","custom-content-price"),attrs:{_i:6}},[e._v(e._$s(6,"t0-0",e._s(e.renderDom[0].price)))])])]):e._e(),e._$s(7,"i","consultion"===e.renderDom[0].type)?n("view",{class:e._$s(7,"c","custom-message "+(e.isMine?"my-custom":"")),attrs:{_i:7}},[n("view",{staticClass:e._$s(8,"sc","custom-content"),attrs:{_i:8}},[n("view",{staticClass:e._$s(9,"sc","custom-content-title"),attrs:{_i:9}},[e._v(e._$s(9,"t0-0",e._s(e.renderDom[0].title)))]),e._l(e._$s(10,"f",{forItems:e.renderDom[0].item}),(function(t,o,a,i){return n("view",{key:e._$s(10,"f",{forIndex:a,key:o}),staticClass:e._$s("10-"+i,"sc","custom-content-description"),attrs:{id:e._$s("10-"+i,"a-id",t.key),_i:"10-"+i}},[e._v(e._$s("10-"+i,"t0-0",e._s(t.key)))])})),n("view",{staticClass:e._$s(11,"sc","custom-content-description"),attrs:{_i:11}},[e._v(e._$s(11,"t0-0",e._s(e.renderDom[0].description)))])],2)]):e._e(),e._$s(12,"i","evaluation"===e.renderDom[0].type)?n("view",{class:e._$s(12,"c","custom-message "+(e.isMine?"my-custom":"")),attrs:{_i:12}},[n("view",{staticClass:e._$s(13,"sc","custom-content"),attrs:{_i:13}},[n("view",{staticClass:e._$s(14,"sc","custom-content-title"),attrs:{_i:14}},[e._v(e._$s(14,"t0-0",e._s(e.renderDom[0].title)))]),n("view",{staticClass:e._$s(15,"sc","custom-content-score"),attrs:{_i:15}},e._l(e._$s(16,"f",{forItems:e.renderDom[0].score}),(function(t,o,a,i){return n("image",{key:e._$s(16,"f",{forIndex:a,key:o}),staticClass:e._$s("16-"+i,"sc","score-star"),attrs:{_i:"16-"+i}})})),0),n("view",{staticClass:e._$s(17,"sc","custom-content-description"),attrs:{_i:17}},[e._v(e._$s(17,"t0-0",e._s(e.renderDom[0].description)))])])]):e._e(),e._$s(18,"i","group_create"===e.renderDom[0].type)?n("view",{class:e._$s(18,"c","custom-message "+(e.isMine?"my-custom":"")),attrs:{_i:18}},[n("view",{staticClass:e._$s(19,"sc","custom-content-text"),attrs:{_i:19}},[e._v(e._$s(19,"t0-0",e._s(e.renderDom[0].text)))])]):e._e(),e._$s(20,"i","c2cCalling"===e.renderDom[0].type||"groupCalling"===e.renderDom[0].type)?n("view",{class:e._$s(20,"c","custom-message "+(e.isMine?"my-custom":"")),attrs:{_i:20}},[n("view",{staticClass:e._$s(21,"sc","custom-content-text"),attrs:{_i:21}},[e._v(e._$s(21,"t0-0",e._s(e.renderDom[0].text)))])]):e._e(),e._$s(22,"i","notSupport"===e.renderDom[0].type)?n("view",{staticClass:e._$s(22,"sc","message-body-span text-message"),attrs:{_i:22}},[n("view",{staticClass:e._$s(23,"sc","message-body-span-text"),attrs:{_i:23}},[e._v(e._$s(23,"t0-0",e._s(e.renderDom[0].text)))])]):e._e()])},i=[]},"573e":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var o={uqrcode:n("6d3a").default},a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("view",{staticClass:e._$s(0,"sc","flex-column"),attrs:{_i:0}},[o("view",{staticClass:e._$s(1,"sc","canvasBox"),attrs:{_i:1}}),o("view",{staticClass:e._$s(2,"sc","flex-row type-bg"),attrs:{_i:2}},[e._$s(3,"i","\u5fae\u4fe1"==e.type)?o("image",{staticClass:e._$s(3,"sc","type-img"),attrs:{src:e._$s(3,"a-src",n("2594")),_i:3}}):o("image",{staticClass:e._$s(4,"sc","type-img"),attrs:{src:e._$s(4,"a-src",n("940d")),_i:4}}),o("text",{staticClass:e._$s(5,"sc","type-name"),attrs:{_i:5}},[e._v(e._$s(5,"t0-0",e._s(e.type)))])]),o("view",{staticClass:e._$s(6,"sc","line"),attrs:{_i:6}}),o("view",{staticClass:e._$s(7,"sc","flex-column-center"),attrs:{_i:7}},[e._$s(8,"i",""==e.imageCode||!e.isApp)?o("view",{staticClass:e._$s(8,"sc","flex-column-center"),attrs:{_i:8}},[o("image",{staticClass:e._$s(9,"sc","zfbimg"),attrs:{src:e._$s(9,"a-src",e.imgSrc),_i:9},on:{click:e.chooseImage}}),o("text",{staticClass:e._$s(10,"sc","notice"),attrs:{_i:10},on:{click:e.chooseImage}})]):e._e(),e._$s(11,"i",""!=e.imageCode&&e.isApp)?o("uqrcode",{ref:"uQRCode",attrs:{text:"imageCode",_i:11}}):e._e()],1),o("view",{staticClass:e._$s(12,"sc","submitBtn"),attrs:{_i:12},on:{click:e.uploadPayment}})])},i=[]},5757:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("view",[o("image",{staticClass:e._$s(1,"sc","bg-image"),attrs:{src:e._$s(1,"a-src",n("bc0e")),_i:1}}),o("text",{staticClass:e._$s(2,"sc","zzc-title"),attrs:{_i:2}}),o("text",{staticClass:e._$s(3,"sc","zzc"),attrs:{_i:3}},[e._v(e._$s(3,"t0-0",e._s(e.userId)))]),o("view",{staticClass:e._$s(4,"sc","refresh"),attrs:{_i:4},on:{click:e.requestData}}),e._$s(5,"i",e.isApp)?o("image",{staticClass:e._$s(5,"sc","scan"),attrs:{src:e._$s(5,"a-src",n("10ed")),_i:5},on:{click:e.actionToScan}}):e._e(),o("image",{staticClass:e._$s(6,"sc","kefu"),attrs:{src:e._$s(6,"a-src",n("c361")),_i:6},on:{click:e.navigateToKefu}}),o("view",{staticClass:e._$s(7,"sc","gbBg"),attrs:{_i:7}},[o("text",{staticClass:e._$s(8,"sc","gb-title"),attrs:{_i:8}}),o("text",{staticClass:e._$s(9,"sc","gb"),attrs:{_i:9}},[e._v(e._$s(9,"t0-0",e._s(e.opay.freeUsable+e.opay.freeFrozen+e.opay.usable+e.opay.frozen)))])]),o("view",{staticClass:e._$s(10,"sc","usdtBg"),attrs:{_i:10}},[o("text",{staticClass:e._$s(11,"sc","gb-title"),attrs:{_i:11}}),o("text",{staticClass:e._$s(12,"sc","gb"),attrs:{_i:12}})]),o("view",{staticClass:e._$s(13,"sc","line"),attrs:{_i:13}}),o("view",{staticClass:e._$s(14,"sc","duihuan"),attrs:{_i:14}}),o("view",{staticClass:e._$s(15,"sc","money-bg"),attrs:{_i:15}}),o("view",{staticClass:e._$s(16,"sc","money-title"),attrs:{_i:16}}),o("view",{staticClass:e._$s(17,"sc","money-title"),attrs:{_i:17}},[e._v(e._$s(17,"t0-0",e._s(e.opay.freeUsable)))]),o("view",{staticClass:e._$s(18,"sc","money-title"),attrs:{_i:18}}),o("view",{staticClass:e._$s(19,"sc","money-title"),attrs:{_i:19}},[e._v(e._$s(19,"t0-0",e._s(e.opay.usable)))]),o("view",{staticClass:e._$s(20,"sc","line2"),attrs:{_i:20}}),o("view",{staticClass:e._$s(21,"sc","money-title"),attrs:{_i:21}}),o("view",{staticClass:e._$s(22,"sc","money-title"),attrs:{_i:22}},[e._v(e._$s(22,"t0-0",e._s(e.opay.freeFrozen+e.opay.frozen)))]),o("view",{staticClass:e._$s(23,"sc","line2"),attrs:{_i:23}}),o("view",{staticClass:e._$s(24,"sc","money-btn"),attrs:{_i:24},on:{click:e.actionToBuy}}),o("view",{staticClass:e._$s(25,"sc","money-btn"),attrs:{_i:25},on:{click:e.actionToSell}}),o("view",{staticClass:e._$s(26,"sc","more-bg"),attrs:{_i:26}},[o("scroll-view",{staticClass:e._$s(27,"sc","scroll-Y"),attrs:{_i:27}},[o("view",{staticClass:e._$s(28,"sc","gui-list-items"),attrs:{_i:28},on:{click:e.actionToCert}},[o("image",{staticClass:e._$s(29,"sc","more-icon"),attrs:{src:e._$s(29,"a-src",n("a316")),_i:29}}),o("view",{staticClass:e._$s(30,"sc","gui-list-body gui-border-b"),attrs:{_i:30}},[o("view",{staticClass:e._$s(31,"sc","gui-list-title"),attrs:{_i:31}},[o("text",{staticClass:e._$s(32,"sc","gui-list-title-text gui-list-one-line gui-primary-color"),attrs:{_i:32}},[e._v(e._$s(32,"t0-0",e._s(e.verifyBtnName)))])])]),o("text",{staticClass:e._$s(33,"sc","gui-list-arrow-right gui-icons gui-color-gray-light"),attrs:{_i:33}})]),o("view",{staticClass:e._$s(34,"sc","gui-list-items"),attrs:{_i:34},on:{click:e.actionToMyBankCardPage}},[o("image",{staticClass:e._$s(35,"sc","more-icon"),attrs:{src:e._$s(35,"a-src",n("cb93")),_i:35}}),o("view",{staticClass:e._$s(36,"sc","gui-list-body gui-border-b"),attrs:{_i:36}},[o("view",{staticClass:e._$s(37,"sc","gui-list-title"),attrs:{_i:37}},[o("text",{staticClass:e._$s(38,"sc","gui-list-title-text gui-list-one-line gui-primary-color"),attrs:{_i:38}})])]),o("text",{staticClass:e._$s(39,"sc","gui-list-arrow-right gui-icons gui-color-gray-light"),attrs:{_i:39}})]),o("view",{staticClass:e._$s(40,"sc","gui-list-items"),attrs:{_i:40},on:{click:e.actionToRecord}},[o("image",{staticClass:e._$s(41,"sc","more-icon"),attrs:{src:e._$s(41,"a-src",n("8eae")),_i:41}}),o("view",{staticClass:e._$s(42,"sc","gui-list-body gui-border-b"),attrs:{_i:42}},[o("view",{staticClass:e._$s(43,"sc","gui-list-title"),attrs:{_i:43}},[o("text",{staticClass:e._$s(44,"sc","gui-list-title-text gui-list-one-line gui-primary-color"),attrs:{_i:44}})])]),o("text",{staticClass:e._$s(45,"sc","gui-list-arrow-right gui-icons gui-color-gray-light"),attrs:{_i:45}})]),o("view",{staticClass:e._$s(46,"sc","gui-list-items"),attrs:{_i:46},on:{click:e.actionToUserInfo}},[o("image",{staticClass:e._$s(47,"sc","more-icon"),attrs:{src:e._$s(47,"a-src",n("d74d")),_i:47}}),o("view",{staticClass:e._$s(48,"sc","gui-list-body gui-border-b"),attrs:{_i:48}},[o("view",{staticClass:e._$s(49,"sc","gui-list-title"),attrs:{_i:49}},[o("text",{staticClass:e._$s(50,"sc","gui-list-title-text gui-list-one-line gui-primary-color"),attrs:{_i:50}})])]),o("text",{staticClass:e._$s(51,"sc","gui-list-arrow-right gui-icons gui-color-gray-light"),attrs:{_i:51}})]),o("view",{staticClass:e._$s(52,"sc","logout"),attrs:{_i:52},on:{click:e.logout}})])])])},i=[]},"576e":function(e,t,n){"use strict";n.r(t);var o=n("3733"),a=n("7e29");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},"599e":function(e,t,n){"use strict";n.r(t);var o=n("06a5"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"5a97":function(e,t,n){"use strict";n.r(t);var o=n("f073"),a=n("033e");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},"5aec":function(e,t,n){"use strict";function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(){return{}}();(function(){function e(e){this.mode=n.MODE_8BIT_BYTE,this.data=e}function t(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=new Array}e.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}},t.prototype={addData:function(t){var n=new e(t);this.dataList.push(n),this.dataCache=null},isDark:function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=d.getRSBlocks(e,this.errorCorrectLevel),n=new f,o=0,a=0;a<t.length;a++)o+=t[a].dataCount;for(a=0;a<this.dataList.length;a++){var i=this.dataList[a];n.put(i.mode,4),n.put(i.getLength(),r.getLengthInBits(i.mode,e)),i.write(n)}if(n.getLengthInBits()<=8*o)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,n){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var o=0;o<this.moduleCount;o++){this.modules[o]=new Array(this.moduleCount);for(var a=0;a<this.moduleCount;a++)this.modules[o][a]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,n),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=t.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,n)},setupPositionProbePattern:function(e,t){for(var n=-1;n<=7;n++)if(!(e+n<=-1||this.moduleCount<=e+n))for(var o=-1;o<=7;o++)t+o<=-1||this.moduleCount<=t+o||(this.modules[e+n][t+o]=0<=n&&n<=6&&(0==o||6==o)||0<=o&&o<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=o&&o<=4)},getBestMaskPattern:function(){for(var e=0,t=0,n=0;n<8;n++){this.makeImpl(!0,n);var o=r.getLostPoint(this);(0==n||e>o)&&(e=o,t=n)}return t},createMovieClip:function(e,t,n){var o=e.createEmptyMovieClip(t,n),a=1;this.make();for(var i=0;i<this.modules.length;i++)for(var s=i*a,r=0;r<this.modules[i].length;r++){var c=r*a,u=this.modules[i][r];u&&(o.beginFill(0,100),o.moveTo(c,s),o.lineTo(c+a,s),o.lineTo(c+a,s+a),o.lineTo(c,s+a),o.endFill())}return o},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},setupPositionAdjustPattern:function(){for(var e=r.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var n=0;n<e.length;n++){var o=e[t],a=e[n];if(null==this.modules[o][a])for(var i=-2;i<=2;i++)for(var s=-2;s<=2;s++)this.modules[o+i][a+s]=-2==i||2==i||-2==s||2==s||0==i&&0==s}},setupTypeNumber:function(e){for(var t=r.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var o=!e&&1==(t>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=o}for(n=0;n<18;n++){o=!e&&1==(t>>n&1);this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=o}},setupTypeInfo:function(e,t){for(var n=this.errorCorrectLevel<<3|t,o=r.getBCHTypeInfo(n),a=0;a<15;a++){var i=!e&&1==(o>>a&1);a<6?this.modules[a][8]=i:a<8?this.modules[a+1][8]=i:this.modules[this.moduleCount-15+a][8]=i}for(a=0;a<15;a++){i=!e&&1==(o>>a&1);a<8?this.modules[8][this.moduleCount-a-1]=i:a<9?this.modules[8][15-a-1+1]=i:this.modules[8][15-a-1]=i}this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var n=-1,o=this.moduleCount-1,a=7,i=0,s=this.moduleCount-1;s>0;s-=2){6==s&&s--;while(1){for(var c=0;c<2;c++)if(null==this.modules[o][s-c]){var u=!1;i<e.length&&(u=1==(e[i]>>>a&1));var l=r.getMask(t,o,s-c);l&&(u=!u),this.modules[o][s-c]=u,a--,-1==a&&(i++,a=7)}if(o+=n,o<0||this.moduleCount<=o){o-=n,n=-n;break}}}}},t.PAD0=236,t.PAD1=17,t.createData=function(e,n,o){for(var a=d.getRSBlocks(e,n),i=new f,s=0;s<o.length;s++){var c=o[s];i.put(c.mode,4),i.put(c.getLength(),r.getLengthInBits(c.mode,e)),c.write(i)}var u=0;for(s=0;s<a.length;s++)u+=a[s].dataCount;if(i.getLengthInBits()>8*u)throw new Error("code length overflow. ("+i.getLengthInBits()+">"+8*u+")");i.getLengthInBits()+4<=8*u&&i.put(0,4);while(i.getLengthInBits()%8!=0)i.putBit(!1);while(1){if(i.getLengthInBits()>=8*u)break;if(i.put(t.PAD0,8),i.getLengthInBits()>=8*u)break;i.put(t.PAD1,8)}return t.createBytes(i,a)},t.createBytes=function(e,t){for(var n=0,o=0,a=0,i=new Array(t.length),s=new Array(t.length),c=0;c<t.length;c++){var u=t[c].dataCount,d=t[c].totalCount-u;o=Math.max(o,u),a=Math.max(a,d),i[c]=new Array(u);for(var f=0;f<i[c].length;f++)i[c][f]=255&e.buffer[f+n];n+=u;var p=r.getErrorCorrectPolynomial(d),g=new l(i[c],p.getLength()-1),h=g.mod(p);s[c]=new Array(p.getLength()-1);for(f=0;f<s[c].length;f++){var m=f+h.getLength()-s[c].length;s[c][f]=m>=0?h.get(m):0}}var _=0;for(f=0;f<t.length;f++)_+=t[f].totalCount;var v=new Array(_),y=0;for(f=0;f<o;f++)for(c=0;c<t.length;c++)f<i[c].length&&(v[y++]=i[c][f]);for(f=0;f<a;f++)for(c=0;c<t.length;c++)f<s[c].length&&(v[y++]=s[c][f]);return v};for(var n={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},o={L:1,M:0,Q:3,H:2},i={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},r={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){var t=e<<10;while(r.getBCHDigit(t)-r.getBCHDigit(r.G15)>=0)t^=r.G15<<r.getBCHDigit(t)-r.getBCHDigit(r.G15);return(e<<10|t)^r.G15_MASK},getBCHTypeNumber:function(e){var t=e<<12;while(r.getBCHDigit(t)-r.getBCHDigit(r.G18)>=0)t^=r.G18<<r.getBCHDigit(t)-r.getBCHDigit(r.G18);return e<<12|t},getBCHDigit:function(e){var t=0;while(0!=e)t++,e>>>=1;return t},getPatternPosition:function(e){return r.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,n){switch(e){case i.PATTERN000:return(t+n)%2==0;case i.PATTERN001:return t%2==0;case i.PATTERN010:return n%3==0;case i.PATTERN011:return(t+n)%3==0;case i.PATTERN100:return(Math.floor(t/2)+Math.floor(n/3))%2==0;case i.PATTERN101:return t*n%2+t*n%3==0;case i.PATTERN110:return(t*n%2+t*n%3)%2==0;case i.PATTERN111:return(t*n%3+(t+n)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new l([1],0),n=0;n<e;n++)t=t.multiply(new l([1,c.gexp(n)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case n.MODE_NUMBER:return 10;case n.MODE_ALPHA_NUM:return 9;case n.MODE_8BIT_BYTE:return 8;case n.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case n.MODE_NUMBER:return 12;case n.MODE_ALPHA_NUM:return 11;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case n.MODE_NUMBER:return 14;case n.MODE_ALPHA_NUM:return 13;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),n=0,o=0;o<t;o++)for(var a=0;a<t;a++){for(var i=0,s=e.isDark(o,a),r=-1;r<=1;r++)if(!(o+r<0||t<=o+r))for(var c=-1;c<=1;c++)a+c<0||t<=a+c||0==r&&0==c||s==e.isDark(o+r,a+c)&&i++;i>5&&(n+=3+i-5)}for(o=0;o<t-1;o++)for(a=0;a<t-1;a++){var u=0;e.isDark(o,a)&&u++,e.isDark(o+1,a)&&u++,e.isDark(o,a+1)&&u++,e.isDark(o+1,a+1)&&u++,0!=u&&4!=u||(n+=3)}for(o=0;o<t;o++)for(a=0;a<t-6;a++)e.isDark(o,a)&&!e.isDark(o,a+1)&&e.isDark(o,a+2)&&e.isDark(o,a+3)&&e.isDark(o,a+4)&&!e.isDark(o,a+5)&&e.isDark(o,a+6)&&(n+=40);for(a=0;a<t;a++)for(o=0;o<t-6;o++)e.isDark(o,a)&&!e.isDark(o+1,a)&&e.isDark(o+2,a)&&e.isDark(o+3,a)&&e.isDark(o+4,a)&&!e.isDark(o+5,a)&&e.isDark(o+6,a)&&(n+=40);var l=0;for(a=0;a<t;a++)for(o=0;o<t;o++)e.isDark(o,a)&&l++;var d=Math.abs(100*l/t/t-50)/5;return n+=10*d,n}},c={glog:function(e){if(e<1)throw new Error("glog("+e+")");return c.LOG_TABLE[e]},gexp:function(e){while(e<0)e+=255;while(e>=256)e-=255;return c.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},u=0;u<8;u++)c.EXP_TABLE[u]=1<<u;for(u=8;u<256;u++)c.EXP_TABLE[u]=c.EXP_TABLE[u-4]^c.EXP_TABLE[u-5]^c.EXP_TABLE[u-6]^c.EXP_TABLE[u-8];for(u=0;u<255;u++)c.LOG_TABLE[c.EXP_TABLE[u]]=u;function l(e,t){if(void 0==e.length)throw new Error(e.length+"/"+t);var n=0;while(n<e.length&&0==e[n])n++;this.num=new Array(e.length-n+t);for(var o=0;o<e.length-n;o++)this.num[o]=e[o+n]}function d(e,t){this.totalCount=e,this.dataCount=t}function f(){this.buffer=new Array,this.length=0}function p(e){for(var t,n="",o=0;o<e.length;o++)t=e.charCodeAt(o),t>=1&&t<=127?n+=e.charAt(o):t>2047?(n+=String.fromCharCode(224|t>>12&15),n+=String.fromCharCode(128|t>>6&63),n+=String.fromCharCode(128|t>>0&63)):(n+=String.fromCharCode(192|t>>6&31),n+=String.fromCharCode(128|t>>0&63));return n}l.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),n=0;n<this.getLength();n++)for(var o=0;o<e.getLength();o++)t[n+o]^=c.gexp(c.glog(this.get(n))+c.glog(e.get(o)));return new l(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=c.glog(this.get(0))-c.glog(e.get(0)),n=new Array(this.getLength()),o=0;o<this.getLength();o++)n[o]=this.get(o);for(o=0;o<e.getLength();o++)n[o]^=c.gexp(c.glog(e.get(o))+t);return new l(n,0).mod(e)}},d.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],d.getRSBlocks=function(e,t){var n=d.getRsBlockTable(e,t);if(void 0==n)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var o=n.length/3,a=new Array,i=0;i<o;i++)for(var s=n[3*i+0],r=n[3*i+1],c=n[3*i+2],u=0;u<s;u++)a.push(new d(r,c));return a},d.getRsBlockTable=function(e,t){switch(t){case o.L:return d.RS_BLOCK_TABLE[4*(e-1)+0];case o.M:return d.RS_BLOCK_TABLE[4*(e-1)+1];case o.Q:return d.RS_BLOCK_TABLE[4*(e-1)+2];case o.H:return d.RS_BLOCK_TABLE[4*(e-1)+3];default:return}},f.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var n=0;n<t;n++)this.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},s={errorCorrectLevel:o,defaults:{size:354,margin:0,backgroundColor:"#FFFFFF",foregroundColor:"#000000",fileType:"png",errorCorrectLevel:o.H,typeNumber:-1},getModules:function(e){e=a(a({},this.defaults),e);var n=new t(e.typeNumber,e.errorCorrectLevel);return n.addData(p(e.text)),n.make(),n.modules}}})();var r=s;t.default=r},"5aff":function(e,t,n){"use strict";n.r(t);var o=n("ce0c"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"5bdd":function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e._$s(0,"i",e.need)?n("view",{style:e._$s(0,"s",{height:e.height}),attrs:{_i:0}}):e._e()},i=[]},"5cc4":function(e,t,n){(function(t){var o=n("a34a");function a(e,t){return u(e)||c(e,t)||s(e,t)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function c(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],o=!0,a=!1,i=void 0;try{for(var s,r=e[Symbol.iterator]();!(o=(s=r.next()).done);o=!0)if(n.push(s.value),t&&n.length===t)break}catch(c){a=!0,i=c}finally{try{o||null==r["return"]||r["return"]()}finally{if(a)throw i}}return n}}function u(e){if(Array.isArray(e))return e}function l(e,t,n,o,a,i,s){try{var r=e[i](s),c=r.value}catch(u){return void n(u)}r.done?t(c):Promise.resolve(c).then(o,a)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function s(e){l(i,o,a,s,r,"next",e)}function r(e){l(i,o,a,s,r,"throw",e)}s(void 0)}))}}var f=n("043f"),p=n("d41f");e.exports={token:"",getTokenFromApi:function(e){var n=this;new Promise((function(t,n){f.getToken(t,n,e)})).then((function(e){t("log","55555555"+e," at Grace/js/request/request.js:19"),n.token=e,uni.setStorageSync(f.localTokenKeyName,n.token);var o=new Date,a=o.getTime();a+="",uni.setStorageSync("GraceRequestTokenTime",a),resolve()})).catch((function(){n.debug("api \u83b7\u53d6 token \u5931\u8d25"),n.token="",reject()}))},getToken:function(e,t){var n=uni.getStorageSync(f.localTokenKeyName);if(n&&""!=n){var o=f.expiredTime;o*=1e3;var a=Number(uni.getStorageSync("GraceRequestTokenTime"));a+=o;var i=new Date,s=i.getTime();a>s?(this.token=n,e()):new Promise(this.getTokenFromApi.bind(this)).then((function(t){e()})).catch((function(){t()}))}else new Promise(this.getTokenFromApi.bind(this)).then((function(t){e()})).catch((function(){t()}))},requestInit:function(e,t){if(e.data||(e.data={}),e.header||(e.header={}),e.timeout||(e.timeout=6e4),e.dataType||(e.dataType="json"),e.header.token=this.token,t){var n=this.checkLogin();n&&(e.header.logintoken=n)}return e},tokenErrorHandle:function(e){t("log",e," at Grace/js/request/request.js:87"),e.data&&"token error"==e.data&&uni.removeStorageSync(f.localTokenKeyName)},get:function(e,n,o,a,i,s){var r=this;n||(n={}),o||(o=function(e){}),a||(a=function(e){}),i||(i=function(e){}),s||(s=!1),new Promise(this.getToken.bind(this)).then((function(){""!=f.apiBaseUrl&&(e=f.apiBaseUrl+e),n=r.requestInit(n,s),uni.request({url:e,data:n.data,timeout:n.timeout,dataType:n.dataType,header:n.header,method:"GET",success:function(e){r.debug(e),o(e.data),r.tokenErrorHandle(e.data)},fail:function(e){a(e.errMsg)},complete:function(e){i(e)}})})).catch((function(e){t("log",e," at Grace/js/request/request.js:119"),r.tokenError()}))},getSync:function(){var e=d(o.mark((function e(n,i,s){var r=this;return o.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s||(s=!1),e.abrupt("return",new Promise(this.getToken.bind(this)).then(d(o.mark((function e(){var t,c,u,l;return o.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return""!=f.apiBaseUrl&&(n=f.apiBaseUrl+n),i=r.requestInit(i,s),e.next=4,uni.request({url:n,data:i.data,timeout:i.timeout,dataType:i.dataType,header:i.header,method:"GET"});case 4:if(t=e.sent,c=a(t,2),u=c[0],l=c[1],null==u){e.next=10;break}return e.abrupt("return",!1);case 10:return r.debug(l),r.tokenErrorHandle(l.data),e.abrupt("return",l.data);case 13:case"end":return e.stop()}}),e)})))).catch((function(e){return t("log",e," at Grace/js/request/request.js:144"),r.tokenError(),["",e]})));case 2:case"end":return e.stop()}}),e,this)})));function n(t,n,o){return e.apply(this,arguments)}return n}(),post:function(e,n,o,a,i,s,r){var c=this;n||(n={}),o||(o=function(e){}),a||(a=function(e){}),i||(i=function(e){}),r||(r=!1),new Promise(this.getToken.bind(this)).then((function(){""!=f.apiBaseUrl&&(e=f.apiBaseUrl+e),n=c.requestInit(n,r),n.header["content-type"]||(n.header["content-type"]=f.postHeaderDefault),1==s?n.data=c.sign(n.data):"value"==s&&(n.data=c.signValue(n.data)),uni.request({url:e,data:n.data,timeout:n.timeout,dataType:n.dataType,header:n.header,method:"POST",success:function(e){c.debug(e),o(e.data),c.tokenErrorHandle(e.data)},fail:function(e){a(e.errMsg)},complete:function(e){i(e)}})})).catch((function(e){t("log",e," at Grace/js/request/request.js:185"),c.tokenError()}))},postSync:function(){var e=d(o.mark((function e(n,i,s,r){var c=this;return o.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r||(r=!1),e.abrupt("return",new Promise(this.getToken.bind(this)).then(d(o.mark((function e(){var t,u,l,d;return o.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return""!=f.apiBaseUrl&&(n=f.apiBaseUrl+n),i=c.requestInit(i,r),i.header["content-type"]||(i.header["content-type"]=f.postHeaderDefault),1==s?i.data=c.sign(i.data):"value"==s&&(i.data=c.signValue(i.data)),e.next=6,uni.request({url:n,data:i.data,timeout:i.timeout,dataType:i.dataType,header:i.header,method:"POST"});case 6:if(t=e.sent,u=a(t,2),l=u[0],d=u[1],null==l){e.next=12;break}return e.abrupt("return",!1);case 12:return c.tokenErrorHandle(d.data),e.abrupt("return",d.data);case 14:case"end":return e.stop()}}),e)})))).catch((function(e){return t("log",e," at Grace/js/request/request.js:217"),c.tokenError(),["",e]})));case 2:case"end":return e.stop()}}),e,this)})));function n(t,n,o,a){return e.apply(this,arguments)}return n}(),upload:function(e,n,o,a,i,s,r,c){var u=this;a||(a={}),i||(i=function(e){}),s||(s=function(e){}),r||(r=function(e){}),c||(c=!1),new Promise(this.getToken.bind(this)).then((function(){if(""!=f.apiBaseUrl&&(e=f.apiBaseUrl+e),a.name||(a.name="file"),a.header||(a.header={}),a.formData||(a.formData={}),a.header.token=u.token,c){var t=u.checkLogin();t&&(a.header.loginToken=t)}uni.uploadFile({url:e,filePath:n,name:a.name,formData:a.formData,header:a.header,success:function(e){i(e.data),u.tokenErrorHandle(e.data)},fail:function(e){s(e)},complete:function(e){r(e)}})})).catch((function(e){t("log",e," at Grace/js/request/request.js:256"),u.tokenError()}))},debug:function(e){f.debug&&t("log",e," at Grace/js/request/request.js:264")},tokenError:function(){uni.showToast({title:"\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u91cd\u542f\u5e94\u7528\u91cd\u8bd5",icon:"none"})},sign:function(e){var t=[];Object.keys(e).sort().map((function(e){t.push(e)})),t.push(this.token);var n=p.md5(t.join("-"));return e.gracesign=n,e},signValue:function(e){var t=[];Object.keys(e).sort().map((function(n){t.push(e[n])})),t.push(this.token);var n=p.md5(t.join("-"));return e.gracesign=n,e},checkLogin:function(e){var t=uni.getStorageSync(f.userTokenKeyName);return t&&""!=t?t:(t="",e&&(uni.showToast({title:"\u8bf7\u767b\u5f55",icon:"none",mask:!0}),setTimeout((function(){e()}),1500)),!1)},gotoLogin:function(e,t){switch(e||(e="../login/login"),t||(t="redirect"),t){case"redirect":uni.redirectTo({url:e});break;case"navigate":uni.navigateTo({url:e});break;case"switchTab":uni.switchTab({url:e});break}},writeLoginToken:function(e,t){var n=e+"-"+t;uni.setStorageSync(f.userTokenKeyName,n)}}}).call(this,n("0de9")["default"])},"5d0e":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("ec10"),a={data:function(){return{emojiList:[]}},components:{},props:{},beforeMount:function(){for(var e=0;e<o.emojiName.length;e++)this.emojiList.push({emojiName:o.emojiName[e],url:o.emojiUrl+o.emojiMap[o.emojiName[e]]});this.setData({emojiList:this.emojiList})},methods:{handleEnterEmoji:function(e){this.$emit("enterEmoji",{detail:{message:e.currentTarget.dataset.name}})}}};t.default=a},"5ed2":function(e,t,n){"use strict";n.r(t);var o=n("6b56"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},6035:function(e,t,n){"use strict";n.r(t);var o=n("50e6"),a=n("f783");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},6095:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",[n("view",{staticClass:e._$s(1,"sc","content-bg-img"),attrs:{_i:1}}),n("view",{staticClass:e._$s(2,"sc","flex-column-center"),attrs:{_i:2}},[n("view",{staticClass:e._$s(3,"sc","order-detail-shadow"),attrs:{_i:3}},[n("view",{staticClass:e._$s(4,"sc","order-detail"),attrs:{_i:4}},[n("view",{staticClass:e._$s(5,"sc","order-detail-1"),attrs:{_i:5}},[e._$s(6,"i","buy"==e.order.side)?n("view",{staticClass:e._$s(6,"sc","buy-color left-s"),attrs:{_i:6}}):n("view",{staticClass:e._$s(7,"sc","sell-color left-s"),attrs:{_i:7}}),n("view",{staticClass:e._$s(8,"sc","flex-column-end"),attrs:{_i:8}},[n("view",{staticClass:e._$s(9,"sc","flex-row-center"),attrs:{_i:9}},[e._$s(10,"i",1==e.order.wechat)?n("view",{staticClass:e._$s(10,"sc","wx"),attrs:{_i:10}}):e._e(),e._$s(11,"i",1==e.order.alipay)?n("view",{staticClass:e._$s(11,"sc","zfb"),attrs:{_i:11}}):e._e(),e._$s(12,"i",1==e.order.bank)?n("view",{staticClass:e._$s(12,"sc","yhk"),attrs:{_i:12}}):e._e()])])]),n("view",{staticClass:e._$s(13,"sc","order-detail-3"),attrs:{_i:13}},[n("view",{staticClass:e._$s(14,"sc","left-s"),attrs:{_i:14}}),n("view",{staticClass:e._$s(15,"sc","order-detail-2-right right-s"),attrs:{_i:15}},[e._v(e._$s(15,"t0-0",e._s(e.order.totalMoney)))])]),n("view",{staticClass:e._$s(16,"sc","order-detail-2"),attrs:{_i:16}},[n("view",{staticClass:e._$s(17,"sc","left-s"),attrs:{_i:17}}),n("view",{staticClass:e._$s(18,"sc","order-detail-2-right"),attrs:{_i:18}},[n("text",{staticClass:e._$s(19,"sc","right-s"),attrs:{_i:19}},[e._v(e._$s(19,"t0-0",e._s(e.order.remainMoney)))])])]),n("view",{staticClass:e._$s(20,"sc","order-detail-2"),attrs:{_i:20}},[n("view",{staticClass:e._$s(21,"sc","left-s"),attrs:{_i:21}}),n("view",{staticClass:e._$s(22,"sc","order-detail-2-right"),attrs:{_i:22}},[n("text",{staticClass:e._$s(23,"sc","right-s"),attrs:{_i:23}},[e._v(e._$s(23,"t0-0",e._s(e.order.createTime)))])])])])]),n("view",{staticClass:e._$s(24,"sc","submitBtn"),attrs:{_i:24},on:{click:function(t){return e.deleteOrder()}}})])])},i=[]},6097:function(e,t,n){"use strict";n.r(t);var o=n("bf46"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"60b7":function(e,t,n){"use strict";n.r(t);var o=n("d16d"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"61a0":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var o={guiPopup:n("f719").default,guiIphoneBottom:n("9c96").default},a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("gui-popup",{ref:"guipopupforacsheet",attrs:{position:"bottom",canCloseByShade:e.canCloseByShade,_i:0}},[n("view",{style:e._$s(1,"s",{"margin-bottom":"25rpx","margin-left":(750-e.width)/2+"rpx"}),attrs:{_i:1},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.stopfun(t)}}},[n("view",{staticClass:e._$s(2,"sc","gui-bg-white"),style:e._$s(2,"s",{width:e.width+"rpx",height:e.height+100+"rpx",borderRadius:e.borderRadius}),attrs:{_i:2}},[n("text",{staticClass:e._$s(3,"sc","gui-action-sheet-title gui-block-text gui-border-b"),style:e._$s(3,"s",{color:e.titleColor}),attrs:{_i:3}},[e._v(e._$s(3,"t0-0",e._s(e.title)))]),n("scroll-view",{staticClass:e._$s(4,"sc","gui-border-box"),style:e._$s(4,"s",{width:e.width+"rpx",height:e.height+"rpx",paddingTop:"20rpx",paddingBottom:"20rpx"}),attrs:{_i:4}},[e._l(e._$s(5,"f",{forItems:e.items}),(function(t,o,a,i){return n("text",{key:e._$s(5,"f",{forIndex:a,key:o}),staticClass:e._$s("5-"+i,"sc","gui-text-center gui-block-text gui-border-b"),style:e._$s("5-"+i,"s",{color:e.listColor,lineHeight:e.listLineHeight,fontSize:e.listFontSize}),attrs:{"data-index":e._$s("5-"+i,"a-data-index",o),_i:"5-"+i},on:{click:function(t){return t.stopPropagation(),e.selected(t)}}},[e._v(e._$s("5-"+i,"t0-0",e._s(t)))])})),e._$s(6,"i",e.isCancelBtn)?n("text",{staticClass:e._$s(6,"sc","gui-text-center gui-block-text"),style:e._$s(6,"s",{color:e.cancelBtnColor,lineHeight:e.listLineHeight,fontSize:e.listFontSize,marginTop:"10rpx"}),attrs:{_i:6},on:{click:function(t){return t.stopPropagation(),e.cancel(t)}}},[e._v(e._$s(6,"t0-0",e._s(e.cancelBtnName)))]):e._e()],2)]),n("gui-iphone-bottom",{attrs:{_i:7}})],1)])},i=[]},"61ac":function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",{staticClass:e._$s(0,"sc","TUI-Emoji"),attrs:{_i:0}},e._l(e._$s(1,"f",{forItems:e.emojiList}),(function(t,o,a,i){return n("view",{key:e._$s(1,"f",{forIndex:a,key:o}),staticClass:e._$s("1-"+i,"sc","TUI-emoji-image"),attrs:{_i:"1-"+i}},[n("image",{staticClass:e._$s("2-"+i,"sc","emoji-image"),attrs:{"data-name":e._$s("2-"+i,"a-data-name",t.emojiName),src:e._$s("2-"+i,"a-src",t.url),_i:"2-"+i},on:{click:e.handleEnterEmoji}})])})),0)},i=[]},"61ba":function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",{staticClass:e._$s(0,"sc","gui-page-refresh gui-flex gui-rows gui-justify-content-center gui-align-items-center"),class:e._$s(0,"c",[3==e.refreshStatus?"gload-hide":""]),style:e._$s(0,"s",{height:e.refreshHeight+"px",backgroundColor:e.refreshBgColor[e.refreshStatus]}),attrs:{_i:0}},[e._$s(1,"i",0==e.refreshStatus||1==e.refreshStatus)?n("text",{staticClass:e._$s(1,"sc","gui-page-refresh-icon gui-icons gui-block-text"),style:e._$s(1,"s",{fontSize:e.refreshFontSize,color:e.refreshColor[e.refreshStatus]}),attrs:{_i:1}}):e._e(),e._$s(2,"i",2==e.refreshStatus)?n("view",{ref:"loadingIcon",staticClass:e._$s(2,"sc","gui-page-refresh-icon"),attrs:{_i:2}},[n("text",{staticClass:e._$s(3,"sc","gui-icons gui-rotate360 gui-block-text"),style:e._$s(3,"s",{fontSize:e.refreshFontSize,color:e.refreshColor[e.refreshStatus]}),attrs:{_i:3}})]):e._e(),e._$s(4,"i",3==e.refreshStatus)?n("text",{staticClass:e._$s(4,"sc","gui-page-refresh-icon gui-icons"),style:e._$s(4,"s",{fontSize:e.refreshFontSize,color:e.refreshColor[e.refreshStatus]}),attrs:{_i:4}}):e._e(),n("text",{staticClass:e._$s(5,"sc","gui-page-refresh-text gui-block-text"),style:e._$s(5,"s",{fontSize:e.refreshFontSize,color:e.refreshColor[e.refreshStatus]}),attrs:{_i:5}},[e._v(e._$s(5,"t0-0",e._s(e.refreshText[e.refreshStatus])))])])},i=[]},6205:function(e,t,n){"use strict";(function(e){function n(t){var n=t.data,o=n.code,a=(n.wgt,n.url);if(0==o){if(-1!=a.toLowerCase().indexOf("wgt"))return e("log",t.data," at uni_modules/uni-upgrade-center-app/utils/check-update.js:9"),new Promise((function(n,o){uni.downloadFile({url:t.data.url,success:function(t){e("log","wgt\u66f4\u65b0\u4e0b\u8f7d\u5b8c\u6bd5"," at uni_modules/uni-upgrade-center-app/utils/check-update.js:14"),200==t.statusCode&&(plus.runtime.install(t.tempFilePath,{force:!0}),uni.showModal({title:"\u66f4\u65b0\u63d0\u793a",content:"\u6700\u65b0\u7248\u672c\u66f4\u65b0\u5b8c\u6bd5,\u8bf7\u91cd\u542fAPP",showCancel:!1,success:function(e){plus.runtime.restart()}}))}})}));var i="OPAY_UPGRADE";e("log","\u51c6\u5907\u66f4\u65b0"," at uni_modules/uni-upgrade-center-app/utils/check-update.js:44"),uni.setStorageSync(i,n),uni.navigateTo({url:"/uni_modules/uni-upgrade-center-app/pages/upgrade-popup?local_storage_key="+i,fail:function(t){e("error","\u66f4\u65b0\u5f39\u6846\u8df3\u8f6c\u5931\u8d25",t," at uni_modules/uni-upgrade-center-app/utils/check-update.js:49"),uni.removeStorageSync(i)}})}}function o(e){var t=getApp().globalData.baseUrl+"register/checkUpdate",o={version:e};uni.request({url:t,data:o,success:n})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o}).call(this,n("0de9")["default"])},6361:function(e,t){e.exports="/static/img/bankCard/bankcard.png"},"63d8":function(e,t,n){"undefined"===typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))}))}),uni.restoreGlobal&&uni.restoreGlobal(weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),__definePage("pages/walletPage/walletPage",(function(){return Vue.extend(n("081e").default)})),__definePage("pages/loginPage/welcomePage",(function(){return Vue.extend(n("4412").default)})),__definePage("pages/loginPage/loginPage",(function(){return Vue.extend(n("6a5f6").default)})),__definePage("pages/loginPage/registPage",(function(){return Vue.extend(n("13e0").default)})),__definePage("pages/loginPage/loginPassword",(function(){return Vue.extend(n("c96f").default)})),__definePage("pages/loginPage/forgetPasswordPage",(function(){return Vue.extend(n("f896").default)})),__definePage("pages/tradPage/tradPage",(function(){return Vue.extend(n("5a97").default)})),__definePage("pages/createOrderPage/createOrderPage",(function(){return Vue.extend(n("acc7").default)})),__definePage("pages/orderPage/orderPage",(function(){return Vue.extend(n("fbe6").default)})),__definePage("pages/usdtPage/usdtPage",(function(){return Vue.extend(n("c90e").default)})),__definePage("pages/messagePage/messagePage",(function(){return Vue.extend(n("88bc").default)})),__definePage("pages/messagePage/messageDetailPage",(function(){return Vue.extend(n("156a").default)})),__definePage("pages/walletPage/userInfoPage/userInfoPage",(function(){return Vue.extend(n("38eb").default)})),__definePage("pages/walletPage/userInfoPage/userHeaderPage",(function(){return Vue.extend(n("3baa").default)})),__definePage("pages/myBankCardPage/myBankCardPage",(function(){return Vue.extend(n("33df").default)})),__definePage("pages/myBankCardPage/addBankCard",(function(){return Vue.extend(n("a3b0").default)})),__definePage("pages/myBankCardPage/addAlipayPage",(function(){return Vue.extend(n("fbcd").default)})),__definePage("pages/buyPage/buyPage",(function(){return Vue.extend(n("90a7").default)})),__definePage("pages/orcodePage/orcodePage",(function(){return Vue.extend(n("a699").default)})),__definePage("pages/orderPage/orderDetailPage2",(function(){return Vue.extend(n("4fbb").default)})),__definePage("pages/orderPage/orderGuaDetailPage",(function(){return Vue.extend(n("1dc2").default)})),__definePage("pages/kefu/kefu",(function(){return Vue.extend(n("13e8").default)})),__definePage("pages/walletPage/securityVerificationPage/securityVerificationPage",(function(){return Vue.extend(n("39e6").default)})),__definePage("uni_modules/uni-upgrade-center-app/pages/upgrade-popup",(function(){return Vue.extend(n("bec3").default)})),__definePage("pages/walletPage/userInfoPage/changeEmail",(function(){return Vue.extend(n("4698").default)})),__definePage("pages/walletPage/userInfoPage/changeMobile",(function(){return Vue.extend(n("c7a3").default)})),__definePage("pages/walletPage/userInfoPage/changePassword",(function(){return Vue.extend(n("7802").default)})),__definePage("pages/walletPage/userInfoPage/changePayPassword",(function(){return Vue.extend(n("e6ac").default)})),__definePage("pages/walletPage/userCert/cert",(function(){return Vue.extend(n("a221").default)})),__definePage("pages/walletPage/userRecord/userRecord",(function(){return Vue.extend(n("0b09").default)})),__definePage("pages/TUI-Chat/chat",(function(){return Vue.extend(n("e0b3").default)}))},"661d":function(e,t,n){"use strict";n.r(t);var o=n("f1ee"),a=n("d096");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,"a2bb603c",null,!1,o["a"],s);t["default"]=c.exports},6672:function(e){e.exports=JSON.parse('{"uni-countdown.day":"day","uni-countdown.h":"h","uni-countdown.m":"m","uni-countdown.s":"s"}')},"688f":function(e,t,n){"use strict";n.r(t);var o=n("373e"),a=n("9efb");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,"75c731b6",null,!1,o["a"],s);t["default"]=c.exports},6946:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",{staticClass:e._$s(0,"sc","flex-column-center"),attrs:{_i:0}},[n("view",{staticClass:e._$s(1,"sc","pwdtext flex-row-between flex-row-center"),attrs:{_i:1}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.oldPassword,expression:"oldPassword"}],attrs:{_i:2},domProps:{value:e._$s(2,"v-model",e.oldPassword)},on:{input:function(t){t.target.composing||(e.oldPassword=t.target.value)}}})]),n("view",{staticClass:e._$s(3,"sc","pwdtext flex-row-between flex-row-center"),attrs:{_i:3}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.newPassword,expression:"newPassword"}],attrs:{_i:4},domProps:{value:e._$s(4,"v-model",e.newPassword)},on:{input:function(t){t.target.composing||(e.newPassword=t.target.value)}}})]),n("view",{staticClass:e._$s(5,"sc","pwdtext flex-row-between flex-row-center"),attrs:{_i:5}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.newPassword2,expression:"newPassword2"}],attrs:{_i:6},domProps:{value:e._$s(6,"v-model",e.newPassword2)},on:{input:function(t){t.target.composing||(e.newPassword2=t.target.value)}}})]),n("view",{staticClass:e._$s(7,"sc","flex-row-center"),attrs:{_i:7}},[n("view",{staticClass:e._$s(8,"sc","submitBtn"),attrs:{_i:8},on:{click:function(t){return e.confirmChange()}}})])])},i=[]},"6a5f":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={name:"goodsDetailSwitchComponents",data:function(){return{}},props:{dataList:Array,size:{type:Number,default:300},currentIndex:{type:Number,default:0}},methods:{navchange:function(e){this.$emit("changeNav",e)}}};t.default=o},"6a5f6":function(e,t,n){"use strict";n.r(t);var o,a,i,s,r=n("f0c5"),c={},u=Object(r["a"])(c,o,a,!1,null,null,null,!1,i,s);t["default"]=u.exports},"6b56":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={name:"orderGuaListComponent",data:function(){return{}},props:{order:Object},methods:{actionToOrderDetail:function(){var e=JSON.stringify(this.order);uni.navigateTo({url:"../../pages/orderPage/orderGuaDetailPage?orderStr="+e})}}};t.default=o},"6c1b":function(e,t,n){"use strict";n.r(t);var o=n("84c3"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"6d2e":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("5aec"));function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c={name:"uqrcode",props:{id:{type:String,default:u()},mode:{type:String,default:"canvas"},text:String,size:{type:Number,default:256},margin:{type:Number,default:0},backgroundColor:{type:String,default:"#FFFFFF"},foregroundColor:{type:String,default:"#000000"},errorCorrectLevel:{type:[String,Number],default:o.default.errorCorrectLevel.H},typeNumber:{type:Number,default:-1},fileType:{type:String,default:"png"}},data:function(){return{canvasContext:null,makeing:!1,delegate:null,delegateParams:null,tempFilePath:"",isH5Save:!1,isReload:!1}},computed:{modules:function(){var e=s({},this.$props);return"string"===typeof e.errorCorrectLevel&&(e.errorCorrectLevel=o.default.errorCorrectLevel[e.errorCorrectLevel]),o.default.getModules(e)},tileSize:function(){return(this.size-2*this.margin)/this.modules.length}},watch:{$props:{handler:function(){this.reload()},deep:!0},makeing:function(e){e||"function"===typeof this.delegate&&this.delegate(this.delegateParams)}},mounted:function(){var e=this;this.$nextTick((function(){e.make()}))},methods:{reload:function(){var e=this;this.isReloadMake=!0,this.isReload=!0,this.$nextTick((function(){e.isReload=!1,e.$nextTick((function(){setTimeout((function(){e.make()}),150)}))}))},make:function(){var e=this;if(!this.makeing)if(this.makeing=!0,"canvas"===this.mode){var t=null;t=uni.createCanvasContext(this.id,this),this.canvasContext=t,t.draw(),t.setFillStyle(this.backgroundColor),t.fillRect(0,0,this.size,this.size);for(var n=0;n<this.modules.length;n++)for(var o=0;o<this.modules.length;o++){var a=o*this.tileSize+this.margin,i=n*this.tileSize+this.margin,s=this.tileSize,r=this.tileSize,c=this.modules[n][o]?this.foregroundColor:this.backgroundColor;t.setFillStyle(c),t.fillRect(a,i,s,r)}t.draw(!1,(function(){e.complete()}))}else"view"===this.mode&&this.complete()},complete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={id:this.id,text:this.text,mode:this.mode},n=s(s({},t),e);this.makeing=!1,this.$emit("complete",n)},toTempFilePath:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("function"!=typeof t.success&&(t.success=function(){}),"function"!=typeof t.fail&&(t.fail=function(){}),"function"!=typeof t.complete&&(t.complete=function(){}),this.makeing)return this.delegate=this.toTempFilePath,void(this.delegateParams=t);this.delegate=null,this.delegateParams=null;uni.canvasToTempFilePath({canvasId:this.id,fileType:this.fileType,width:this.size,height:this.size,success:function(n){e.tempFilePath=n.tempFilePath,t.success(n)},fail:function(e){t.fail(e)},complete:function(e){t.complete(e)}},this)},save:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"function"!=typeof t.success&&(t.success=function(){}),"function"!=typeof t.fail&&(t.fail=function(){}),"function"!=typeof t.complete&&(t.complete=function(){}),this.toTempFilePath({success:function(n){uni.saveImageToPhotosAlbum({filePath:e.tempFilePath,success:function(e){t.success({msg:"\u4fdd\u5b58\u6210\u529f"})},fail:function(e){t.fail(e)},complete:function(e){t.complete(e)}})},fail:function(e){t.fail(e)}})}}};function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),a=[];if(n=n||o.length,e)for(var i=0;i<e;i++)a[i]=o[0|Math.random()*n];else{var s;a[8]=a[13]=a[18]=a[23]="-",a[14]="4";for(var r=0;r<36;r++)a[r]||(s=0|16*Math.random(),a[r]=o[19==r?3&s|8:s])}return t?(a.shift(),"u"+a.join("")):a.join("")}t.default=c},"6d3a":function(e,t,n){"use strict";n.r(t);var o=n("0148"),a=n("f2b2");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},"6e39":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{audio:{}}},components:{},props:{message:{type:Object,default:function(){}},isMine:{type:Boolean,default:!0}},watch:{message:{handler:function(e){this.setData({message:e})},immediate:!0,deep:!0}},beforeMount:function(){this.audio=uni.createInnerAudioContext(),this.audio.onPlay((function(){e("log","\u5f00\u59cb\u64ad\u653e"," at components/tui-chat/message-elements/audio-message/index.vue:42")})),this.audio.onEnded((function(){e("log","\u505c\u6b62\u64ad\u653e"," at components/tui-chat/message-elements/audio-message/index.vue:45")})),this.audio.onError((function(t){e("error",t,"onError"," at components/tui-chat/message-elements/audio-message/index.vue:48"),uni.showToast({icon:"none",title:"\u8be5\u97f3\u9891\u6682\u4e0d\u652f\u6301\u64ad\u653e"})}))},methods:{handlePlayAudioMessage:function(){this.audio.src=this.message.payload.url,this.audio.play()}}};t.default=n}).call(this,n("0de9")["default"])},"6e6d":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("c6f9"),a={data:function(){return{renderDom:[],percent:0}},components:{},props:{message:{type:Object,default:""},isMine:{type:Boolean,default:!0}},watch:{message:{handler:function(e){this.setData({renderDom:(0,o.parseImage)(e),percent:e.percent})},immediate:!0,deep:!0}},methods:{previewImage:function(){uni.previewImage({current:this.renderDom[0].src,urls:[this.renderDom[0].src]})}}};t.default=a},"6e71":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={name:"UniBadge",emits:["click"],props:{type:{type:String,default:"error"},inverted:{type:Boolean,default:!1},isDot:{type:Boolean,default:!1},maxNum:{type:Number,default:99},absolute:{type:String,default:""},offset:{type:Array,default:function(){return[0,0]}},text:{type:[String,Number],default:""},size:{type:String,default:"small"},customStyle:{type:Object,default:function(){return{}}}},data:function(){return{}},computed:{width:function(){return 8*String(this.text).length+12},classNames:function(){var e=this.inverted,t=this.type,n=this.size,o=this.absolute;return[e?"uni-badge--"+t+"-inverted":"","uni-badge--"+t,"uni-badge--"+n,o?"uni-badge--absolute":""].join(" ")},positionStyle:function(){if(!this.absolute)return{};var e=this.width/2,t=10;this.isDot&&(e=5,t=5);var n="".concat(-e+this.offset[0],"px"),o="".concat(-t+this.offset[1],"px"),a={rightTop:{right:n,top:o},rightBottom:{right:n,bottom:o},leftBottom:{left:n,bottom:o},leftTop:{left:n,top:o}},i=a[this.absolute];return i||a["rightTop"]},badgeWidth:function(){return{width:"".concat(this.width,"px")}},dotStyle:function(){return this.isDot?{width:"10px",height:"10px",borderRadius:"10px"}:{}},displayValue:function(){var e=this.isDot,t=this.text,n=this.maxNum;return e?"":Number(t)>n?"".concat(n,"+"):t}},methods:{onClick:function(){this.$emit("click")}}};t.default=o},"6ed5":function(e,t,n){"use strict";n.r(t);var o=n("22c0"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"6fdb":function(e,t){e.exports="/static/img/login/login_bg.png"},7049:function(e,t,n){"use strict";n.r(t);var o=n("f44e"),a=n("b0857");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,"1d6c74a2",null,!1,o["a"],s);t["default"]=c.exports},7052:function(e,t,n){"use strict";n.r(t);var o=n("ca37"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"70ca":function(e,t,n){"use strict";n.r(t);var o=n("1e6b"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},7135:function(e,t,n){"use strict";n.r(t);var o=n("c7d3"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"714f":function(e,t,n){"use strict";n.r(t);var o=n("e716"),a=n("70ca");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},"73c5":function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e._$s(0,"i",e.isLoading)?n("view",{staticClass:e._$s(0,"sc","gui-page-loading gui-flex gui-nowrap gui-align-items-center gui-justify-content-center gui-page-loading-bg"),attrs:{_i:0},on:{touchmove:function(t){return t.stopPropagation(),t.preventDefault(),e.stopfun(t)},click:function(t){return t.stopPropagation(),e.stopfun(t)}}},[n("view",{staticClass:e._$s(1,"sc","gui-page-loading-point gui-flex gui-rows gui-justify-content-center"),attrs:{_i:1}},[n("view",{staticClass:e._$s(2,"sc","gui-page-loading-points animate1 gui-page-loading-color"),attrs:{_i:2}}),n("view",{staticClass:e._$s(3,"sc","gui-page-loading-points animate2 gui-page-loading-color"),attrs:{_i:3}}),n("view",{staticClass:e._$s(4,"sc","gui-page-loading-points animate3 gui-page-loading-color"),attrs:{_i:4}})])]):e._e()},i=[]},"752d":function(e,t,n){"use strict";n.r(t);var o=n("6e71"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"760f":function(e,t,n){"use strict";n.r(t);var o=n("4d92"),a=n("867e");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},7633:function(e,t,n){"use strict";n.r(t);var o=n("ec4d"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"76c0":function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",{class:e._$s(0,"c","text-message "+(e.isMine?"my-text":"")),attrs:{_i:0}},e._l(e._$s(1,"f",{forItems:e.renderDom}),(function(t,o,a,i){return n("view",{key:e._$s(1,"f",{forIndex:a,key:o}),staticClass:e._$s("1-"+i,"sc","message-body-span"),attrs:{_i:"1-"+i}},[e._$s("2-"+i,"i","span"===t.name)?n("span",{staticClass:e._$s("2-"+i,"sc","message-body-span-text"),attrs:{_i:"2-"+i}},[e._v(e._$s("2-"+i,"t0-0",e._s(t.text)))]):e._e(),e._$s("3-"+i,"i","img"===t.name)?n("image",{staticClass:e._$s("3-"+i,"sc","emoji-icon"),attrs:{src:e._$s("3-"+i,"a-src",t.src),_i:"3-"+i}}):e._e()])})),0)},i=[]},7802:function(e,t,n){"use strict";n.r(t);var o=n("6946"),a=n("ddc8");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},"78c4":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={name:"tradListComponent",data:function(){return{}},props:{buttonName:"",order:{}},methods:{actionToBuyPage:function(){if(uni.getStorageSync("level")<1)uni.showToast({title:"\u8bf7\u5148\u5b8c\u6210\u8eab\u4efd\u8ba4\u8bc1",icon:"none",duration:2e3});else{var e="sell";e="\u6211\u8981\u5356"==this.buttonName?"sell":"buy";var t=JSON.stringify(this.order);uni.navigateTo({url:"../../pages/buyPage/buyPage?orderStr="+t+"&type="+e})}}}};t.default=o},"7ccd":function(e,t,n){"use strict";n.r(t);var o=n("c141"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"7de3":function(e,t){e.exports="/static/img/message/right.png"},"7e29":function(e,t,n){"use strict";n.r(t);var o=n("78c4"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"7e33":function(e,t,n){"use strict";n.r(t);var o=n("3c8f"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"83d5":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={name:"gui-modal",props:{width:{type:String,default:"580rpx"},bodyStyle:{type:String,default:"background-color:#FFFFFF; border-radius:6rpx;"},isCloseBtn:{type:Boolean,default:!0},closeBtnStyle:{type:String,default:"color:#2B2E3D; font-size:28rpx;"},isTitle:{type:Boolean,default:!0},title:{type:String,default:"title"},titleStyle:{type:String,default:"line-height:100rpx; font-size:28rpx; font-weight:700; color:#2B2E3D;"},canCloseByShade:{type:Boolean,default:!0},zIndex:{type:Number,default:99}},methods:{open:function(){this.$refs.guipopupformodal.open(),this.$emit("open")},close:function(){this.$refs.guipopupformodal.close(),this.$emit("close")},stopfun:function(e){return e.stopPropagation(),null},eClose:function(){this.$emit("close")}}};t.default=o},"83d9":function(e,t,n){"use strict";n("63d8");var o=c(n("c432e")),a=c(n("8bbf")),i=c(n("356e")),s=c(n("5cc4")),r=c(n("37d6"));function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a.default.config.productionTip=!1,o.default.mpType="app",uni.gRequest=s.default,a.default.mixin(i.default);var f=n("d9d4");uni.graceJS=f,uni.PYRequest=r.default;var p=new a.default(l({},o.default));p.$mount()},"842c":function(e,t){e.exports="/static/img/login/login_icon.png"},8449:function(e,t,n){"use strict";n.r(t);var o=n("2bbf"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"84aa":function(e,t,n){"use strict";n.r(t);var o=n("e8b3"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"84c3":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={name:"coBuyComponent",data:function(){return{sellNum:"",payPassword:"",selectedPayment:[]}},props:{opay:Object,payment:Array},watch:{payment:function(t){var n=t;e("log",n," at components/coBuyComponent/coBuyComponent.vue:94");for(var o=0,a=n.length;o<a;++o){var i=n[o];this.selectedPayment.includes(i.name)?this.$set(i,"checked",!0):this.$set(i,"checked",!1)}}},methods:{open1:function(){this.$refs.guimodal1.open()},close1:function(){this.$refs.guimodal1.close()},checkboxChange:function(t){var n=this.payment,o=t.detail.value;this.selectedPayment=o,e("log",o," at components/coBuyComponent/coBuyComponent.vue:123");for(var a=0,i=n.length;a<i;++a){var s=n[a];o.includes(s.name)?this.$set(s,"checked",!0):this.$set(s,"checked",!1)}},confirm1:function(){var e=this;this.$refs.guimodal1.close();var t=0;this.selectedPayment.includes("\u652f\u4ed8\u5b9d")&&(t=1);var n=0;this.selectedPayment.includes("\u5fae\u4fe1")&&(n=1);var o=0;if(this.selectedPayment.includes("\u94f6\u884c\u5361")&&(o=1),this.sellNum%1==0)if(""!=this.payPassword){var a={minMoney:"100",totalMoney:this.sellNum,alipay:t,wechat:n,bank:o,side:"buy",payPassword:this.payPassword};uni.PYRequest.createPreOrder(a,(function(t){e.sellNum="",e.payPassword="",e.payType="",e.$emit("updatData")}),(function(e){}),(function(e){}))}else uni.showToast({title:"\u8bf7\u8f93\u5165\u652f\u4ed8\u5bc6\u7801",icon:"none"});else uni.showToast({title:"\u8bf7\u8f93\u5165\u6574\u6570\u6570\u91cf",icon:"none"})},payTypeOpen:function(){0!=this.payment.length?this.$refs.guipopup3.open():uni.showModal({title:"\u63d0\u793a",content:"\u60a8\u8fd8\u6ca1\u6709\u6dfb\u52a0\u4ea4\u6613\u65b9\u5f0f\u3002",confirmText:"\u53bb\u6dfb\u52a0",success:function(t){t.confirm?uni.navigateTo({url:"../../pages/myBankCardPage/myBankCardPage"}):t.cancel&&e("log","\u7528\u6237\u70b9\u51fb\u53d6\u6d88"," at components/coBuyComponent/coBuyComponent.vue:205")}})},payTypeClose:function(){this.$refs.guipopup3.close()},selected:function(t){e("log",t," at components/coBuyComponent/coBuyComponent.vue:219"),this.payType=this.payment[t]},createPreOrder:function(){if(uni.getStorageSync("level")<1)uni.showToast({title:"\u8bf7\u5148\u5b8c\u6210\u8eab\u4efd\u8ba4\u8bc1",icon:"none",duration:2e3});else{var e="";""==this.sellNum&&(e="\u8bf7\u8f93\u5165\u6570\u91cf"),this.sellNum<100&&(e="\u6700\u4f4e\u6570\u91cf\u4e0d\u80fd\u4f4e\u4e8e100"),0==this.selectedPayment.length&&(e="\u8bf7\u9009\u62e9\u8d2d\u4e70\u65b9\u5f0f"),""==e?this.open1():uni.showToast({title:e,icon:"none"})}}}};t.default=n}).call(this,n("0de9")["default"])},8675:function(e,t){e.exports="/static/static/images/video-play.png"},"867e":function(e,t,n){"use strict";n.r(t);var o=n("8d78"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"88bc":function(e,t,n){"use strict";n.r(t);var o=n("2263"),a=n("c5e3");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},"8bbf":function(e,t){e.exports=Vue},"8d00":function(e,t,n){"use strict";n.r(t);var o=n("43ad"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"8d51":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{pageLoading:!0,apiLoadingStatus:!1,newsInfoId:"",newsInfo:{}}},onLoad:function(e){this.newsInfoId=e.newsInfoId,this.getNewsDetail()},methods:{getNewsDetail:function(){var t=this,n={newsInfoId:this.newsInfoId};e("log",n," at pages/messagePage/messageDetailPage.vue:38"),uni.yzmRequest.getNewsDetail(n,(function(e){t.newsInfo=e.newsInfo}),(function(e){}),(function(e){t.pageLoading=!1,t.apiLoadingStatus=!1}))}}};t.default=n}).call(this,n("0de9")["default"])},"8d78":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=[{orderNum:1,time:"2021-7-20 20:45",title:"[\u5929\u535a\u68c0\u9a8c]\u65b0\u51a0\u6838\u9178\u68c0\u6d4b/\u9884\u7ea6",description:"\u4e13\u4e1a\u533b\u5b66\u68c0\u6d4b\uff0c\u7535\u5b50\u62a5\u544a",imageUrl:"https://sdk-web-1252463788.cos.ap-hongkong.myqcloud.com/component/TUIKit/assets/miles.jpeg",price:"80\u5143"},{orderNum:2,time:"2021-7-20 22:45",title:"[\u8def\u8fb9]\u65b0\u51a0\u6838\u9178\u68c0\u6d4b/\u9884\u7ea6",description:"\u4e13\u4e1a\u533b\u5b66\u68c0\u6d4b\uff0c\u7535\u5b50\u62a5\u544a",imageUrl:"https://sdk-web-1252463788.cos.ap-hongkong.myqcloud.com/component/TUIKit/assets/miles.jpeg",price:"7000\u5143"}],a={data:function(){return{words:"",orderMatch:o}},components:{},props:{display:{type:Boolean,default:!1},conversation:{type:Object,default:function(){}}},watch:{display:{handler:function(e){},immediate:!0},conversation:{handler:function(e){this.setData({conversation:e})},immediate:!0,deep:!0}},methods:{handleClose:function(){this.$emit("close",{detail:{key:"1"}})},wordsInput:function(e){var t=this;this.orderMatch=[],o.forEach((function(n){(n.title.indexOf(e.detail.value)>-1||n.orderNum===~~e.detail.value)&&t.orderMatch.push(n)})),this.setData({words:e.detail.value,orderMatch:this.orderMatch})},sendMessage:function(e){var t=e.currentTarget.dataset.order;this.$emit("sendCustomMessage",{detail:{payload:{data:"order",description:t.description,extension:JSON.stringify({title:t.title,imageUrl:t.imageUrl,price:t.price})}}})}}};t.default=a},"8e0d":function(e,t,n){"use strict";n.r(t);var o=n("b20a"),a=n("7e33");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},"8e51":function(e,t,n){"use strict";n.r(t);var o=n("ec7c"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"8eae":function(e,t){e.exports="/static/img/wallet/record.png"},"8ec0":function(e,t){e.exports="/static/img/welcome/welcome.png"},"8f42":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var o={uniList:n("7049").default,uniListItem:n("f084").default},a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",[n("uni-list",{attrs:{_i:1}},e._l(e._$s(2,"f",{forItems:e.recordList}),(function(t,o,a,i){return n("uni-list-item",{key:e._$s(2,"f",{forIndex:a,key:t.id}),attrs:{title:t.title,note:t.createTime,rightText:t.rightTxt,_i:"2-"+i}})})),1)],1)},i=[]},"8fce":function(e,t,n){"use strict";n.r(t);var o=n("42c9"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"8fe4":function(e,t,n){"use strict";n.r(t);var o=n("430b"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"90a7":function(e,t,n){"use strict";n.r(t);var o=n("9b98"),a=n("c49c");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},"940d":function(e,t){e.exports="/static/img/bankCard/zfb.png"},"947e":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("37dc"),a=i(n("4961"));function i(e){return e&&e.__esModule?e:{default:e}}var s=(0,o.initVueI18n)(a.default),r=s.t,c={name:"UniCountdown",emits:["timeup"],props:{showDay:{type:Boolean,default:!0},showColon:{type:Boolean,default:!0},start:{type:Boolean,default:!0},backgroundColor:{type:String,default:""},color:{type:String,default:"#333"},fontSize:{type:Number,default:14},splitorColor:{type:String,default:"#333"},day:{type:Number,default:0},hour:{type:Number,default:0},minute:{type:Number,default:0},second:{type:Number,default:0},timestamp:{type:Number,default:0}},data:function(){return{timer:null,syncFlag:!1,d:"00",h:"00",i:"00",s:"00",leftTime:0,seconds:0}},computed:{dayText:function(){return r("uni-countdown.day")},hourText:function(e){return r("uni-countdown.h")},minuteText:function(e){return r("uni-countdown.m")},secondText:function(e){return r("uni-countdown.s")},timeStyle:function(){var e=this.color,t=this.backgroundColor,n=this.fontSize;return{color:e,backgroundColor:t,fontSize:"".concat(n,"px"),width:"".concat(22*n/14,"px"),lineHeight:"".concat(20*n/14,"px"),borderRadius:"".concat(3*n/14,"px")}},splitorStyle:function(){var e=this.splitorColor,t=this.fontSize,n=this.backgroundColor;return{color:e,fontSize:"".concat(12*t/14,"px"),margin:n?"".concat(4*t/14,"px"):""}}},watch:{day:function(e){this.changeFlag()},hour:function(e){this.changeFlag()},minute:function(e){this.changeFlag()},second:function(e){this.changeFlag()},start:{immediate:!0,handler:function(e,t){if(e)this.startData();else{if(!t)return;clearInterval(this.timer)}}}},created:function(e){this.seconds=this.toSeconds(this.timestamp,this.day,this.hour,this.minute,this.second),this.countDown()},destroyed:function(){clearInterval(this.timer)},methods:{toSeconds:function(e,t,n,o,a){return e?e-parseInt((new Date).getTime()/1e3,10):60*t*60*24+60*n*60+60*o+a},timeUp:function(){clearInterval(this.timer),this.$emit("timeup")},countDown:function(){var e=this.seconds,t=0,n=0,o=0,a=0;e>0?(t=Math.floor(e/86400),n=Math.floor(e/3600)-24*t,o=Math.floor(e/60)-24*t*60-60*n,a=Math.floor(e)-24*t*60*60-60*n*60-60*o):this.timeUp(),t<10&&(t="0"+t),n<10&&(n="0"+n),o<10&&(o="0"+o),a<10&&(a="0"+a),this.d=t,this.h=n,this.i=o,this.s=a},startData:function(){var e=this;this.seconds=this.toSeconds(this.timestamp,this.day,this.hour,this.minute,this.second),this.seconds<=0||(clearInterval(this.timer),this.countDown(),this.timer=setInterval((function(){e.seconds--,e.seconds<0?e.timeUp():e.countDown()}),1e3))},changeFlag:function(){this.syncFlag||(this.seconds=this.toSeconds(this.timestamp,this.day,this.hour,this.minute,this.second),this.startData(),this.syncFlag=!0)}}};t.default=c},"94c8":function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("view",{class:e._$s(0,"c","video-box "+(e.isMine?"my-video":"")),attrs:{_i:0},on:{click:e.playerHander}},[o("image",{staticClass:e._$s(1,"sc","video-icon"),attrs:{src:e._$s(1,"a-src",n("8675")),_i:1}})])},i=[]},9556:function(e,t,n){"use strict";n.r(t);var o=n("61a0"),a=n("599e");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,"5325523f",null,!1,o["a"],s);t["default"]=c.exports},"96cf":function(e,t){!function(t){"use strict";var n,o=Object.prototype,a=o.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",r=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag",u="object"===typeof e,l=t.regeneratorRuntime;if(l)u&&(e.exports=l);else{l=t.regeneratorRuntime=u?e.exports:{},l.wrap=M;var d="suspendedStart",f="suspendedYield",p="executing",g="completed",h={},m={};m[s]=function(){return this};var _=Object.getPrototypeOf,v=_&&_(_(O([])));v&&v!==o&&a.call(v,s)&&(m=v);var y=b.prototype=w.prototype=Object.create(m);I.prototype=y.constructor=b,b.constructor=I,b[c]=I.displayName="GeneratorFunction",l.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===I||"GeneratorFunction"===(t.displayName||t.name))},l.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(y),e},l.awrap=function(e){return{__await:e}},T(k.prototype),k.prototype[r]=function(){return this},l.AsyncIterator=k,l.async=function(e,t,n,o){var a=new k(M(e,t,n,o));return l.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(y),y[c]="Generator",y[s]=function(){return this},y.toString=function(){return"[object Generator]"},l.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){while(t.length){var o=t.pop();if(o in e)return n.value=o,n.done=!1,n}return n.done=!0,n}},l.values=O,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(A),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function o(o,a){return r.type="throw",r.arg=e,t.next=o,a&&(t.method="next",t.arg=n),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],r=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=a.call(s,"catchLoc"),u=a.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&a.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var a=o.arg;A(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,o){return this.delegate={iterator:O(e),resultName:t,nextLoc:o},"next"===this.method&&(this.arg=n),h}}}function M(e,t,n,o){var a=t&&t.prototype instanceof w?t:w,i=Object.create(a.prototype),s=new N(o||[]);return i._invoke=S(e,n,s),i}function C(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(o){return{type:"throw",arg:o}}}function w(){}function I(){}function b(){}function T(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function k(e){function t(n,o,i,s){var r=C(e[n],e,o);if("throw"!==r.type){var c=r.arg,u=c.value;return u&&"object"===typeof u&&a.call(u,"__await")?Promise.resolve(u.__await).then((function(e){t("next",e,i,s)}),(function(e){t("throw",e,i,s)})):Promise.resolve(u).then((function(e){c.value=e,i(c)}),(function(e){return t("throw",e,i,s)}))}s(r.arg)}var n;function o(e,o){function a(){return new Promise((function(n,a){t(e,o,n,a)}))}return n=n?n.then(a,a):a()}this._invoke=o}function S(e,t,n){var o=d;return function(a,i){if(o===p)throw new Error("Generator is already running");if(o===g){if("throw"===a)throw i;return P()}n.method=a,n.arg=i;while(1){var s=n.delegate;if(s){var r=D(s,n);if(r){if(r===h)continue;return r}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var c=C(e,t,n);if("normal"===c.type){if(o=n.done?g:f,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=g,n.method="throw",n.arg=c.arg)}}}function D(e,t){var o=e.iterator[t.method];if(o===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,D(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var a=C(o,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,h;var i=a.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function O(e){if(e){var t=e[s];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function t(){while(++o<e.length)if(a.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=n,t.done=!0,t};return i.next=i}}return{next:P}}function P(){return{value:n,done:!0}}}(function(){return this||"object"===typeof self&&self}()||Function("return this")())},9838:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{orderInfo:{},payPassword:""}},onLoad:function(e){this.orderInfo=JSON.parse(e.orderInfo)},methods:{conformPay:function(){var t=this;if(""!=this.payPassword){var n={payPassword:this.payPassword};e("log",n," at pages/walletPage/securityVerificationPage/securityVerificationPage.vue:52"),uni.PYRequest.checkPayPassword(n,(function(n){var o={orderId:t.orderInfo.orderId,payPassword:t.payPassword};e("log",o," at pages/walletPage/securityVerificationPage/securityVerificationPage.vue:60"),uni.PYRequest.confirmPay(o,(function(e){uni.showToast({title:"\u652f\u4ed8\u6210\u529f",icon:"success"})}),(function(e){}),(function(e){}))}),(function(e){}),(function(e){}))}else uni.showToast({title:"\u8bf7\u8f93\u5165\u652f\u4ed8\u5bc6\u7801",icon:"none"})}}};t.default=n}).call(this,n("0de9")["default"])},"98b7":function(e,t,n){"use strict";n.r(t);var o=n("0d4f"),a=n("1a70");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},"98cc":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=["\u4ec0\u4e48\u65f6\u5019\u53d1\u8d27","\u53d1\u4ec0\u4e48\u7269\u6d41","\u4e3a\u4ec0\u4e48\u7269\u6d41\u4e00\u76f4\u6ca1\u66f4\u65b0","\u6700\u65b0\u4f18\u60e0","\u5305\u90ae\u5417","\u4fee\u6539\u5730\u5740\u4fe1\u606f","\u4fee\u6539\u6536\u4ef6\u4eba\u4fe1\u606f","\u7269\u6d41\u4e00\u76f4\u663e\u793a\u6b63\u5728\u63fd\u6536","\u95ee\u9898A","\u95ee\u9898B"],a={data:function(){return{words:"",commonWordsMatch:o}},components:{},props:{display:{type:Boolean,default:!1}},watch:{display:{handler:function(e){},immediate:!0}},methods:{handleClose:function(){this.$emit("close",{detail:{key:"0"}})},wordsInput:function(e){var t=this;this.commonWordsMatch=[],o.forEach((function(n){n.indexOf(e.detail.value)>-1&&t.commonWordsMatch.push(n)})),this.setData({words:e.detail.value,commonWordsMatch:this.commonWordsMatch})},sendMessage:function(e){this.$emit("sendMessage",{detail:{message:e.currentTarget.dataset.words}})}}};t.default=a},"9b98":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var o={guiActionSheet:n("9556").default},a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("view",[o("view",{staticClass:e._$s(1,"sc","flex-column-center"),attrs:{_i:1}},[o("view",{staticClass:e._$s(2,"sc","content-bg-one"),attrs:{_i:2}},[o("view",{staticClass:e._$s(3,"sc","bi-number"),attrs:{_i:3}},[o("text",{staticClass:e._$s(4,"sc","bi-number-s"),attrs:{_i:4}},[e._v(e._$s(4,"t0-0",e._s(e.order.remainMoney)))])]),o("view",{staticClass:e._$s(5,"sc","bi-price"),attrs:{_i:5}},[o("view",{staticClass:e._$s(6,"sc","bi-price-s"),attrs:{_i:6}}),o("view",{staticClass:e._$s(7,"sc","flex-row-end"),attrs:{_i:7}},[e._$s(8,"i",1==e.order.alipay)?o("view",{staticClass:e._$s(8,"sc","zfb"),attrs:{_i:8}}):e._e(),e._$s(9,"i",1==e.order.wechat)?o("view",{staticClass:e._$s(9,"sc","wx"),attrs:{_i:9}}):e._e(),e._$s(10,"i",1==e.order.bank)?o("view",{staticClass:e._$s(10,"sc","yhk"),attrs:{_i:10}}):e._e()])])]),o("view",{staticClass:e._$s(11,"sc","content-bg"),attrs:{_i:11}},[e._$s(12,"i","buy"==e.type)?o("view",{staticClass:e._$s(12,"sc","notice"),attrs:{_i:12}},[e._v(e._$s(12,"t0-0",e._s(e.order.minMoney)))]):o("view",{staticClass:e._$s(13,"sc","notice"),attrs:{_i:13}},[e._v(e._$s(13,"t0-0",e._s(e.order.minMoney)))]),o("view",{staticClass:e._$s(14,"sc","num-input-bg flex-row-between flex-row-center"),attrs:{_i:14}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.sellNum,expression:"sellNum"}],staticClass:e._$s(15,"sc","num-input"),attrs:{_i:15},domProps:{value:e._$s(15,"v-model",e.sellNum)},on:{input:function(t){t.target.composing||(e.sellNum=t.target.value)}}}),e._$s(16,"i","buy"==e.type)?o("view",{staticClass:e._$s(16,"sc","buyall"),attrs:{_i:16},on:{click:function(t){return e.buyall()}}}):o("view",{staticClass:e._$s(17,"sc","buyall"),attrs:{_i:17},on:{click:function(t){return e.buyall()}}})]),o("image",{staticClass:e._$s(18,"sc","link-img"),attrs:{src:e._$s(18,"a-src",n("c4c0")),_i:18}}),o("view",{staticClass:e._$s(19,"sc","money"),attrs:{_i:19}},[e._v(e._$s(19,"t0-0",e._s(""===e.sellNum?"\u91d1\u989d(CNY)":e.sellNum)))])]),o("view",{staticClass:e._$s(20,"sc","content-bg-2 flex-row-center"),attrs:{_i:20}},[o("view",{staticClass:e._$s(21,"sc","buy-type"),attrs:{_i:21}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:e._$s(22,"sc","num-input"),attrs:{_i:22},domProps:{value:e._$s(22,"v-model",e.password)},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})])]),o("view",{staticClass:e._$s(23,"sc","content-bg-2 flex-row-center"),attrs:{_i:23}},[e._$s(24,"i",""==e.selectedPayment)?o("view",{staticClass:e._$s(24,"sc","buy-type "),attrs:{_i:24},on:{click:e.payTypeOpen}},[o("view",{staticClass:e._$s(25,"sc","num-input"),attrs:{_i:25}})]):o("view",{staticClass:e._$s(26,"sc","buy-type"),attrs:{_i:26},on:{click:e.payTypeOpen}},[o("view",{staticClass:e._$s(27,"sc","num-input"),attrs:{_i:27}},[e._v(e._$s(27,"t0-0",e._s(e.selectedPayment)))])])]),o("view",{staticClass:e._$s(28,"sc","buy-bottom"),attrs:{_i:28}},[o("view",{staticClass:e._$s(29,"sc","cancelBtn"),attrs:{_i:29},on:{click:function(t){return e.back()}}}),o("view",{staticClass:e._$s(30,"sc","submitBtn"),attrs:{_i:30},on:{click:function(t){return e.orderTrade()}}})])]),o("gui-action-sheet",{ref:"guiactionsheet",attrs:{title:"\u8bf7\u9009\u62e9\u4ea4\u6613\u65b9\u5f0f",items:e.paymentList,_i:31},on:{selected:e.selected}})],1)},i=[]},"9bbb":function(e,t,n){"use strict";n.r(t);var o=n("4384"),a=n("6097");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},"9bf6":function(e,t,n){"use strict";n.r(t);var o=n("c1df"),a=n("6c1b");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},"9c82":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={data:function(){return{}},methods:{actionToLoginPage:function(){uni.redirectTo({url:"loginPassword"})}}};t.default=o},"9c96":function(e,t,n){"use strict";n.r(t);var o=n("5bdd"),a=n("dbf2");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,"5f19584c",null,!1,o["a"],s);t["default"]=c.exports},"9ce2":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var o={guiModal:n("ee5c").default},a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("view",{staticClass:e._$s(0,"sc","flex-column-center"),attrs:{_i:0}},[e._$s(1,"i",0==this.payment.length)?o("view",{staticClass:e._$s(1,"sc","nodata-page flex-column-center"),attrs:{_i:1}},[o("view",{staticClass:e._$s(2,"sc","notice-bg flex-row-center"),attrs:{_i:2}},[o("image",{staticClass:e._$s(3,"sc","notice-img"),attrs:{src:e._$s(3,"a-src",n("cfa6")),_i:3}}),o("view",{staticClass:e._$s(4,"sc","notice"),attrs:{_i:4}})]),o("image",{staticClass:e._$s(5,"sc","nodata-img"),attrs:{src:e._$s(5,"a-src",n("cb93")),_i:5}}),o("view",{staticClass:e._$s(6,"sc","nodata-title"),attrs:{_i:6}}),o("view",{staticClass:e._$s(7,"sc","addbtn"),attrs:{_i:7},on:{click:e.open}})]):o("view",{staticClass:e._$s(8,"sc","nodata-page flex-column-center"),attrs:{_i:8}},[e._l(e._$s(9,"f",{forItems:this.payment}),(function(t,a,i,s){return o("view",{key:e._$s(9,"f",{forIndex:i,key:"9-"+s}),staticClass:e._$s("9-"+s,"sc","card-bg"),attrs:{_i:"9-"+s},on:{click:function(n){return e.actionTo(t.mode)}}},[e._$s("10-"+s,"i",t.state>0)?o("image",{staticClass:e._$s("10-"+s,"sc","card-bg-img zlast"),attrs:{src:e._$s("10-"+s,"a-src",n("d08c")),_i:"10-"+s}}):e._e(),e._$s("11-"+s,"i",t.state<=0)?o("view",{staticClass:e._$s("11-"+s,"sc","card-bg-img inaudit"),attrs:{_i:"11-"+s}}):e._e(),e._$s("12-"+s,"i",t.state<=0)?o("image",{staticClass:e._$s("12-"+s,"sc","card-bg-img zlast"),attrs:{src:e._$s("12-"+s,"a-src",n("d08c")),_i:"12-"+s}}):e._e(),e._$s("13-"+s,"i",0==t.state)?o("view",{staticClass:e._$s("13-"+s,"sc","autidTip"),attrs:{_i:"13-"+s}}):e._e(),e._$s("14-"+s,"i",-1==t.state)?o("view",{staticClass:e._$s("14-"+s,"sc","autidTip"),attrs:{_i:"14-"+s}}):e._e(),e._$s("15-"+s,"i","bank"==t.mode)?o("view",[o("image",{staticClass:e._$s("16-"+s,"sc","card-img"),attrs:{src:e._$s("16-"+s,"a-src",n("6361")),_i:"16-"+s}}),o("view",{staticClass:e._$s("17-"+s,"sc","card-name"),attrs:{_i:"17-"+s}},[e._v(e._$s("17-"+s,"t0-0",e._s(t.params1)))]),o("view",{staticClass:e._$s("18-"+s,"sc","card-no"),attrs:{_i:"18-"+s}},[e._v(e._$s("18-"+s,"t0-0",e._s(t.params2)))])]):e._$s("19-"+s,"e","wechat"==t.mode)?o("view",[o("image",{staticClass:e._$s("20-"+s,"sc","card-img"),attrs:{src:e._$s("20-"+s,"a-src",n("2594")),_i:"20-"+s}}),o("view",{staticClass:e._$s("21-"+s,"sc","card-name"),attrs:{_i:"21-"+s}})]):e._$s("22-"+s,"e","alipay"==t.mode)?o("view",[o("image",{staticClass:e._$s("23-"+s,"sc","card-img"),attrs:{src:e._$s("23-"+s,"a-src",n("940d")),_i:"23-"+s}}),o("view",{staticClass:e._$s("24-"+s,"sc","card-name"),attrs:{_i:"24-"+s}})]):e._e()])})),o("view",{staticClass:e._$s(25,"sc","card-add-bg"),attrs:{_i:25},on:{click:e.open}})],2),o("gui-modal",{ref:"guimodal1",attrs:{title:"\u6dfb\u52a0\u6536\u4ed8\u6b3e\u65b9\u5f0f",_i:26}},[o("view",{staticClass:e._$s(27,"sc","gui-padding gui-bg-white"),attrs:{_i:27},slot:"content"},[o("view",{staticClass:e._$s(28,"sc","flex-column-center"),attrs:{_i:28}},[o("text",{staticClass:e._$s(29,"sc","type-name"),attrs:{_i:29}})]),o("view",{staticClass:e._$s(30,"sc","flex-row-between type-bg"),attrs:{_i:30}},[o("view",{staticClass:e._$s(31,"sc","flex-column-center"),attrs:{_i:31},on:{click:function(t){return e.actionToAddBankCard()}}},[o("image",{staticClass:e._$s(32,"sc","type-img"),attrs:{src:e._$s(32,"a-src",n("6361")),_i:32}}),o("text",{staticClass:e._$s(33,"sc","type-name"),attrs:{_i:33}})]),o("view",{staticClass:e._$s(34,"sc","flex-column-center"),attrs:{_i:34},on:{click:function(t){return e.actionToAddzfb()}}},[o("image",{staticClass:e._$s(35,"sc","type-img"),attrs:{src:e._$s(35,"a-src",n("940d")),_i:35}}),o("text",{staticClass:e._$s(36,"sc","type-name"),attrs:{_i:36}})]),o("view",{staticClass:e._$s(37,"sc","flex-column-center"),attrs:{_i:37},on:{click:function(t){return e.actionToAddwx()}}},[o("image",{staticClass:e._$s(38,"sc","type-img"),attrs:{src:e._$s(38,"a-src",n("2594")),_i:38}}),o("text",{staticClass:e._$s(39,"sc","type-name"),attrs:{_i:39}})])])])])],1)},i=[]},"9ceb":function(e,t,n){"use strict";n.r(t);var o=n("c3f1"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"9dd8":function(e,t){e.exports="/static/img/order/copy.png"},"9e7b":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{page:1,selectedIndex:0,pageLoading:!1,apiLoadingStatus:!1,collectionSkuId:"",skuDetail:{},recordList:[],hasNomore:!1,navItems:[{id:0,name:"\u6d88\u606f"},{id:1,name:"\u516c\u544a"}],messageList:[{},{},{},{},{},{},{},{},{},{},{},{}]}},onLoad:function(e){},methods:{reload:function(){0==this.selectedIndex?this.getCollectionskuDetail():(this.page=1,this.getCollectionSkuOrderList(!0))},loadmorefun:function(){0==this.selectedIndex?this.$refs.basePage.nomore():this.getCollectionSkuOrderList(!1)},getCollectionskuDetail:function(){var t=this;this.apiLoadingStatus=!0;var n={collectionSkuId:this.collectionSkuId};e("log",n," at pages/messagePage/messagePage.vue:146"),uni.yzmRequest.getCollectionskuDetail(n,(function(e){t.skuDetail=e.skuDetail}),(function(e){}),(function(e){t.pageLoading=!1,t.apiLoadingStatus=!1,t.$refs.basePage.endReload(),t.$refs.basePage.nomore()}))},getCollectionSkuOrderList:function(t){var n=this;this.apiLoadingStatus=!0;var o={collectionSkuId:this.collectionSkuId,page:this.page,limit:"40"};e("log",o," at pages/messagePage/messagePage.vue:165"),uni.yzmRequest.getCollectionSkuOrderList(o,(function(o){t?(n.recordList=o.page.list,n.$refs.basePage.endReload(),e("log","list:"+n.recordList," at pages/messagePage/messagePage.vue:175")):(n.$refs.basePage.stoploadmore(),n.recordList=n.recordList.concat(o.page.list)),n.page>=o.page.totalPage?(n.$refs.basePage.nomore(),n.hasNomore=!0):n.hasNomore=!1,n.page++,n.pageLoading=!1,n.apiLoadingStatus=!1,e("log",n.page," at pages/messagePage/messagePage.vue:191")}),(function(e){}),(function(e){n.$refs.basePage.endReload(),n.pageLoading=!1,n.apiLoadingStatus=!1}))},saveSkuOrder:function(){var t=this;if(0!=this.canBuy){this.canBuy=!1;var n={collectionSkuId:this.collectionSkuId,buyPrice:this.skuDetail.sellPrice};e("log",n," at pages/messagePage/messagePage.vue:215");var o=this;uni.showLoading({title:"\u8bf7\u6c42\u4e2d..."}),uni.yzmRequest.saveSkuOrder(n,(function(n){if("C0"==n.code){var a={orderSkuId:n.order.orderSkuId,ip:"132.232.31.196"};e("log",a," at pages/messagePage/messagePage.vue:229");var i=JSON.stringify(n.order);uni.yzmRequest.postSkuOrderPay(a,(function(t){var n=JSON.parse(t.payInfo);e("log",n," at pages/messagePage/messagePage.vue:236"),uni.requestPayment({provider:"wxpay",timeStamp:n.timeStamp,nonceStr:n.nonceStr,package:n.package,signType:n.signType,paySign:n.paySign,success:function(n){e("log",n," at pages/messagePage/messagePage.vue:247");var a={sellPrice:o.skuDetail.sellPrice,imageUrl:o.skuDetail.imageUrl,skuName:o.skuDetail.skuName,identityNumber:o.skuDetail.identityNumber},s=JSON.stringify(a);e("log",s," at pages/messagePage/messagePage.vue:255"),"requestPayment:ok"==n.errMsg&&(e("log","dsfsdfdsf"," at pages/messagePage/messagePage.vue:257"),uni.navigateTo({url:"collectionGoodsBuySuccess?orderStr="+i+"&skuDetailStr="+s+"&payInfo="+t.payInfo})),this.canBuy=!0},fail:function(e){this.canBuy=!0,uni.showToast({title:"\u60a8\u5df2\u7ecf\u53d6\u6d88\u652f\u4ed8\uff0c\u8bf7\u91cd\u65b0\u8d2d\u4e70\u3002",icon:"error"})}})}),(function(e){}),(function(e){t.canBuy=!0,uni.hideLoading()}))}e("log",n," at pages/messagePage/messagePage.vue:287")}),(function(e){t.canBuy=!0}),(function(e){}))}},changeNav:function(t){e("log",t," at pages/messagePage/messagePage.vue:297"),this.selectedIndex=t,0==t?this.$refs.basePage.nomore():1==this.hasMore?this.$refs.basePage.stoploadmore():this.$refs.basePage.nomore()},openBuyView:function(){e("log","open"," at pages/messagePage/messagePage.vue:313"),this.$refs.buyView.open()},closeBuyView:function(){this.$refs.buyView.close()},openPaySuccessView:function(){e("log","paysuccess1"," at pages/messagePage/messagePage.vue:320")},actionToBuyGoods:function(){this.saveSkuOrder()}}};t.default=n}).call(this,n("0de9")["default"])},"9efb":function(e,t,n){"use strict";n.r(t);var o=n("1250"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"9f0d":function(e,t,n){"use strict";n.r(t);var o=n("f1b1"),a=n("84aa");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},a1b3:function(e,t){e.exports="/static/img/message/message.png"},a221:function(e,t,n){"use strict";n.r(t);var o=n("e739"),a=n("1406");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},a316:function(e,t){e.exports="/static/img/wallet/cert.png"},a34a:function(e,t,n){e.exports=n("bbdd")},a3b0:function(e,t,n){"use strict";n.r(t);var o=n("d7d2"),a=n("5aff");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},a446:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={data:function(){return{oldPassword:"",newPassword:"",newPassword2:""}},methods:{checkParams:function(){var e=/^[a-zA-Z0-9]{8,20}$/;return e.test(this.oldPassword)&&e.test(this.newPassword)?this.newPassword==this.newPassword2||(uni.showToast({title:"2\u6b21\u5bc6\u7801\u8f93\u5165\u4e0d\u4e00\u81f4",icon:"none"}),!1):(uni.showToast({title:"\u8bf7\u586b\u5199\u81f3\u5c118\u4f4d\u767b\u5f55\u5bc6\u7801",icon:"none"}),!1)},confirmChange:function(){if(this.checkParams()){var e={oldPassword:this.oldPassword,newPassword:this.newPassword};uni.PYRequest.changePassword(e,(function(e){setTimeout((function(){uni.navigateBack({})}),2e3)}),(function(e){}),(function(e){}))}}}};t.default=o},a52f:function(e,t,n){(function(t){var n;(function(){function e(e,t){for(var n=1,a=o(e),i=0,s=h.length;i<=s;i++){var c=0;switch(t){case r.L:c=h[i][0];break;case r.M:c=h[i][1];break;case r.Q:c=h[i][2];break;case r.H:c=h[i][3];break}if(a<=c)break;n++}if(n>h.length)throw new Error("Too long data");return n}function o(e){var t=encodeURI(e).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return t.length+(t.length!=e?3:0)}function a(e){this.mode=s.MODE_8BIT_BYTE,this.data=e,this.parsedData=[];for(var t=0,n=this.data.length;t<n;t++){var o=[],a=this.data.charCodeAt(t);a>65536?(o[0]=240|(1835008&a)>>>18,o[1]=128|(258048&a)>>>12,o[2]=128|(4032&a)>>>6,o[3]=128|63&a):a>2048?(o[0]=224|(61440&a)>>>12,o[1]=128|(4032&a)>>>6,o[2]=128|63&a):a>128?(o[0]=192|(1984&a)>>>6,o[1]=128|63&a):o[0]=a,this.parsedData.push(o)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function i(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}a.prototype={getLength:function(e){return this.parsedData.length},write:function(e){for(var t=0,n=this.parsedData.length;t<n;t++)e.put(this.parsedData[t],8)}},i.prototype={addData:function(e){var t=new a(e);this.dataList.push(t),this.dataCache=null},isDark:function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(var o=0;o<this.moduleCount;o++)this.modules[n][o]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=i.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},setupPositionProbePattern:function(e,t){for(var n=-1;n<=7;n++)if(!(e+n<=-1||this.moduleCount<=e+n))for(var o=-1;o<=7;o++)t+o<=-1||this.moduleCount<=t+o||(this.modules[e+n][t+o]=0<=n&&n<=6&&(0==o||6==o)||0<=o&&o<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=o&&o<=4)},getBestMaskPattern:function(){for(var e=0,t=0,n=0;n<8;n++){this.makeImpl(!0,n);var o=u.getLostPoint(this);(0==n||e>o)&&(e=o,t=n)}return t},createMovieClip:function(e,t,n){var o=e.createEmptyMovieClip(t,n),a=1;this.make();for(var i=0;i<this.modules.length;i++)for(var s=i*a,r=0;r<this.modules[i].length;r++){var c=r*a,u=this.modules[i][r];u&&(o.beginFill(0,100),o.moveTo(c,s),o.lineTo(c+a,s),o.lineTo(c+a,s+a),o.lineTo(c,s+a),o.endFill())}return o},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},setupPositionAdjustPattern:function(){for(var e=u.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var n=0;n<e.length;n++){var o=e[t],a=e[n];if(null==this.modules[o][a])for(var i=-2;i<=2;i++)for(var s=-2;s<=2;s++)this.modules[o+i][a+s]=-2==i||2==i||-2==s||2==s||0==i&&0==s}},setupTypeNumber:function(e){for(var t=u.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var o=!e&&1==(t>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=o}for(n=0;n<18;n++){o=!e&&1==(t>>n&1);this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=o}},setupTypeInfo:function(e,t){for(var n=this.errorCorrectLevel<<3|t,o=u.getBCHTypeInfo(n),a=0;a<15;a++){var i=!e&&1==(o>>a&1);a<6?this.modules[a][8]=i:a<8?this.modules[a+1][8]=i:this.modules[this.moduleCount-15+a][8]=i}for(a=0;a<15;a++){i=!e&&1==(o>>a&1);a<8?this.modules[8][this.moduleCount-a-1]=i:a<9?this.modules[8][15-a-1+1]=i:this.modules[8][15-a-1]=i}this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var n=-1,o=this.moduleCount-1,a=7,i=0,s=this.moduleCount-1;s>0;s-=2){6==s&&s--;while(1){for(var r=0;r<2;r++)if(null==this.modules[o][s-r]){var c=!1;i<e.length&&(c=1==(e[i]>>>a&1));var l=u.getMask(t,o,s-r);l&&(c=!c),this.modules[o][s-r]=c,a--,-1==a&&(i++,a=7)}if(o+=n,o<0||this.moduleCount<=o){o-=n,n=-n;break}}}}},i.PAD0=236,i.PAD1=17,i.createData=function(e,t,n){for(var o=p.getRSBlocks(e,t),a=new g,s=0;s<n.length;s++){var r=n[s];a.put(r.mode,4),a.put(r.getLength(),u.getLengthInBits(r.mode,e)),r.write(a)}var c=0;for(s=0;s<o.length;s++)c+=o[s].dataCount;if(a.getLengthInBits()>8*c)throw new Error("code length overflow. ("+a.getLengthInBits()+">"+8*c+")");a.getLengthInBits()+4<=8*c&&a.put(0,4);while(a.getLengthInBits()%8!=0)a.putBit(!1);while(1){if(a.getLengthInBits()>=8*c)break;if(a.put(i.PAD0,8),a.getLengthInBits()>=8*c)break;a.put(i.PAD1,8)}return i.createBytes(a,o)},i.createBytes=function(e,t){for(var n=0,o=0,a=0,i=new Array(t.length),s=new Array(t.length),r=0;r<t.length;r++){var c=t[r].dataCount,l=t[r].totalCount-c;o=Math.max(o,c),a=Math.max(a,l),i[r]=new Array(c);for(var d=0;d<i[r].length;d++)i[r][d]=255&e.buffer[d+n];n+=c;var p=u.getErrorCorrectPolynomial(l),g=new f(i[r],p.getLength()-1),h=g.mod(p);s[r]=new Array(p.getLength()-1);for(d=0;d<s[r].length;d++){var m=d+h.getLength()-s[r].length;s[r][d]=m>=0?h.get(m):0}}var _=0;for(d=0;d<t.length;d++)_+=t[d].totalCount;var v=new Array(_),y=0;for(d=0;d<o;d++)for(r=0;r<t.length;r++)d<i[r].length&&(v[y++]=i[r][d]);for(d=0;d<a;d++)for(r=0;r<t.length;r++)d<s[r].length&&(v[y++]=s[r][d]);return v};for(var s={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},r={L:1,M:0,Q:3,H:2},c={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},u={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){var t=e<<10;while(u.getBCHDigit(t)-u.getBCHDigit(u.G15)>=0)t^=u.G15<<u.getBCHDigit(t)-u.getBCHDigit(u.G15);return(e<<10|t)^u.G15_MASK},getBCHTypeNumber:function(e){var t=e<<12;while(u.getBCHDigit(t)-u.getBCHDigit(u.G18)>=0)t^=u.G18<<u.getBCHDigit(t)-u.getBCHDigit(u.G18);return e<<12|t},getBCHDigit:function(e){var t=0;while(0!=e)t++,e>>>=1;return t},getPatternPosition:function(e){return u.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,n){switch(e){case c.PATTERN000:return(t+n)%2==0;case c.PATTERN001:return t%2==0;case c.PATTERN010:return n%3==0;case c.PATTERN011:return(t+n)%3==0;case c.PATTERN100:return(Math.floor(t/2)+Math.floor(n/3))%2==0;case c.PATTERN101:return t*n%2+t*n%3==0;case c.PATTERN110:return(t*n%2+t*n%3)%2==0;case c.PATTERN111:return(t*n%3+(t+n)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new f([1],0),n=0;n<e;n++)t=t.multiply(new f([1,l.gexp(n)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case s.MODE_NUMBER:return 10;case s.MODE_ALPHA_NUM:return 9;case s.MODE_8BIT_BYTE:return 8;case s.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case s.MODE_NUMBER:return 12;case s.MODE_ALPHA_NUM:return 11;case s.MODE_8BIT_BYTE:return 16;case s.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case s.MODE_NUMBER:return 14;case s.MODE_ALPHA_NUM:return 13;case s.MODE_8BIT_BYTE:return 16;case s.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),n=0,o=0;o<t;o++)for(var a=0;a<t;a++){for(var i=0,s=e.isDark(o,a),r=-1;r<=1;r++)if(!(o+r<0||t<=o+r))for(var c=-1;c<=1;c++)a+c<0||t<=a+c||0==r&&0==c||s==e.isDark(o+r,a+c)&&i++;i>5&&(n+=3+i-5)}for(o=0;o<t-1;o++)for(a=0;a<t-1;a++){var u=0;e.isDark(o,a)&&u++,e.isDark(o+1,a)&&u++,e.isDark(o,a+1)&&u++,e.isDark(o+1,a+1)&&u++,0!=u&&4!=u||(n+=3)}for(o=0;o<t;o++)for(a=0;a<t-6;a++)e.isDark(o,a)&&!e.isDark(o,a+1)&&e.isDark(o,a+2)&&e.isDark(o,a+3)&&e.isDark(o,a+4)&&!e.isDark(o,a+5)&&e.isDark(o,a+6)&&(n+=40);for(a=0;a<t;a++)for(o=0;o<t-6;o++)e.isDark(o,a)&&!e.isDark(o+1,a)&&e.isDark(o+2,a)&&e.isDark(o+3,a)&&e.isDark(o+4,a)&&!e.isDark(o+5,a)&&e.isDark(o+6,a)&&(n+=40);var l=0;for(a=0;a<t;a++)for(o=0;o<t;o++)e.isDark(o,a)&&l++;var d=Math.abs(100*l/t/t-50)/5;return n+=10*d,n}},l={glog:function(e){if(e<1)throw new Error("glog("+e+")");return l.LOG_TABLE[e]},gexp:function(e){while(e<0)e+=255;while(e>=256)e-=255;return l.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},d=0;d<8;d++)l.EXP_TABLE[d]=1<<d;for(d=8;d<256;d++)l.EXP_TABLE[d]=l.EXP_TABLE[d-4]^l.EXP_TABLE[d-5]^l.EXP_TABLE[d-6]^l.EXP_TABLE[d-8];for(d=0;d<255;d++)l.LOG_TABLE[l.EXP_TABLE[d]]=d;function f(e,t){if(void 0==e.length)throw new Error(e.length+"/"+t);var n=0;while(n<e.length&&0==e[n])n++;this.num=new Array(e.length-n+t);for(var o=0;o<e.length-n;o++)this.num[o]=e[o+n]}function p(e,t){this.totalCount=e,this.dataCount=t}function g(){this.buffer=[],this.length=0}f.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),n=0;n<this.getLength();n++)for(var o=0;o<e.getLength();o++)t[n+o]^=l.gexp(l.glog(this.get(n))+l.glog(e.get(o)));return new f(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=l.glog(this.get(0))-l.glog(e.get(0)),n=new Array(this.getLength()),o=0;o<this.getLength();o++)n[o]=this.get(o);for(o=0;o<e.getLength();o++)n[o]^=l.gexp(l.glog(e.get(o))+t);return new f(n,0).mod(e)}},p.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],p.getRSBlocks=function(e,t){var n=p.getRsBlockTable(e,t);if(void 0==n)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var o=n.length/3,a=[],i=0;i<o;i++)for(var s=n[3*i+0],r=n[3*i+1],c=n[3*i+2],u=0;u<s;u++)a.push(new p(r,c));return a},p.getRsBlockTable=function(e,t){switch(t){case r.L:return p.RS_BLOCK_TABLE[4*(e-1)+0];case r.M:return p.RS_BLOCK_TABLE[4*(e-1)+1];case r.Q:return p.RS_BLOCK_TABLE[4*(e-1)+2];case r.H:return p.RS_BLOCK_TABLE[4*(e-1)+3];default:return}},g.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var n=0;n<t;n++)this.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var h=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];n=function(e,t){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:r.H},"string"===typeof t&&(t={text:t}),t)for(var n in t)this._htOption[n]=t[n];this._oQRCode=null,this.canvasId=e,this._htOption.text&&this.canvasId&&this.makeCode(this._htOption.text)},n.prototype.makeCode=function(t){this._oQRCode=new i(e(t,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(t),this._oQRCode.make(),this.makeImage()},n.prototype.makeImage=function(){var e,n=this;e=this._htOption.usingIn?t.createCanvasContext(this.canvasId,this._htOption.usingIn):t.createCanvasContext(this.canvasId);var o=this._htOption,a=this._oQRCode,i=a.getModuleCount(),s=o.padding?(o.width-2*o.padding)/i:o.width/i,r=o.padding?(o.height-2*o.padding)/i:o.height/i,c=Math.round(r),u=Math.round(s);o.image&&""!=o.image&&e.drawImage(o.image,0,0,o.width,o.height),e.setFillStyle("#fff"),e.fillRect(0,0,o.width,o.height),e.save();for(var l=0;l<i;l++)for(var d=0;d<i;d++){var f=a.isDark(l,d),p=o.padding?d*s+o.padding:d*s,g=o.padding?l*r+o.padding:l*r;e.setStrokeStyle(f?o.colorDark:o.colorLight),e.setLineWidth(1),e.setFillStyle(f?o.colorDark:o.colorLight),e.fillRect(p,g,s,r),e.strokeRect(Math.floor(p)+.5,Math.floor(g)+.5,c),e.strokeRect(Math.ceil(p)-.5,Math.ceil(g)-.5,u,c)}e.draw(!1,(function(){setTimeout((function(){n.exportImage()}),800)}))},n.prototype.exportImage=function(e){var t=this;this._htOption.callback&&"function"===typeof this._htOption.callback&&uni.canvasToTempFilePath({x:0,y:0,width:this._htOption.width,height:this._htOption.height,destWidth:this._htOption.width,destHeight:this._htOption.height,canvasId:this.canvasId,success:function(e){t._htOption.callback({path:e.tempFilePath})}})},n.CorrectLevel=r})(),e.exports=n}).call(this,n("fe07")["default"])},a5dd:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={name:"uniList","mp-weixin":{options:{multipleSlots:!1}},props:{enableBackToTop:{type:[Boolean,String],default:!1},scrollY:{type:[Boolean,String],default:!1},border:{type:Boolean,default:!0}},created:function(){this.firstChildAppend=!1},methods:{loadMore:function(e){this.$emit("scrolltolower")}}};t.default=o},a699:function(e,t,n){"use strict";n.r(t);var o=n("013b"),a=n("7052");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},ab46:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var o={guiSwitchNavigation:n("c9c7").default},a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",{staticClass:e._$s(0,"sc","gui-grids gui-flex gui-columns  gui-bg-white"),attrs:{_i:0}},[n("gui-switch-navigation",{staticClass:e._$s(1,"sc","bg"),attrs:{width:750,items:e.dataList,textAlign:"center",isCenter:!0,activeDirection:"center",size:e.size,activeLineBg:"linear-gradient(to right, #FF9601, #FF9601)",activeColor:"#FF9601",margin:10,padding:"20rpx",activeLineHeight:"4rpx",lineHeight:"86rpx",activeLineWidth:"100rpx",currentIndex:e.currentIndex,_i:1},on:{change:e.navchange}})],1)},i=[]},abda:function(e,t,n){(function(t){!function(t,n){e.exports=n()}(0,(function(){"use strict";var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)},n=function(){return(n=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function o(e,t,n,o){return new(n=n||Promise)((function(a,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function r(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(s,r)}c((o=o.apply(e,t||[])).next())}))}function a(e,t){var n,o,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},s={next:r(0),throw:r(1),return:r(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function r(s){return function(r){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(a=2&s[0]?o.return:s[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,s[1])).done)return a;switch(o=0,(s=a?[2&s[0],a.value]:s)[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,o=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=0<(a=i.trys).length&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(r){s=[6,r],o=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,r])}}}function i(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var o=Array(e),a=0;for(t=0;t<n;t++)for(var i=arguments[t],s=0,r=i.length;s<r;s++,a++)o[a]=i[s];return o}Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var t=Object(e),n=1;n<arguments.length;n++)if(null!=(o=arguments[n]))for(var o=Object(o),a=Object.keys(Object(o)),i=0,s=a.length;i<s;i++){var r=a[i],c=Object.getOwnPropertyDescriptor(o,r);null!=c&&c.enumerable&&(t[r]=o[r])}return t}});var s,r=(u.prototype.indexOf=function(e,t){for(var n=0;n<e.length;n++)if(e[n].callback===t)return n;return-1},u.prototype.on=function(e,t,n){if(void 0===n&&(n=0),this){var o=this.eventsList[e];return o||(this.eventsList[e]=[],o=this.eventsList[e]),-1!==this.indexOf(o,t)||o.push({name:e,type:n||0,callback:t}),this}},u.prototype.one=function(e,t){this.on(e,t,1)},u.prototype.remove=function(e,t){if(this){var n=this.eventsList[e];if(!n)return null;if(t)return n.length&&(t=this.indexOf(n,t),n.splice(t,1)),this;try{delete this.eventsList[e]}catch(e){}return null}},u.prototype.clear=function(){this.eventsList={}},u),c=function(e){try{return encodeURIComponent(decodeURIComponent(e))}catch(u){return e}};function u(){var e=this;this.emit=function(t,n){if(e){var o;if(null!=(a=e.eventsList[t])&&a.length)for(var a=a.slice(),i=0;i<a.length;i++){o=a[i];try{var s=o.callback.apply(e,[n]);if(1===o.type&&e.remove(t,o.callback),!1===s)break}catch(t){throw t}}return e}},this.eventsList={}}function l(e){return"string"==typeof e&&e.startsWith("//")?"undefined"!=typeof location&&"https:"===location.protocol:/^https/.test(e)}(V=s=s||{})[V.number=-1]="number",V.string="";var d,f,p,g=["application/octet-stream","application/xhtml+xml","application/xml","application/pdf","application/pkcs12","application/javascript","application/ecmascript","application/vnd.mspowerpoint","application/ogg","text/html","text/css","text/javascript","image","audio","video"],h=["ret","retcode","code","errcode"],m=function(e){if("string"==typeof e)return e;try{return(JSON.stringify(e,(t=[],n=[],function(e,o){if(o instanceof Error)return"Error.message: "+o.message+" \n  Error.stack: "+o.stack;if("object"==typeof o&&null!==o){var a=t.indexOf(o);if(-1!==a)return"[Circular "+n[a]+"]";t.push(o),n.push(e||"root")}return o}),4)||"undefined").replace(/"/gim,"")}catch(e){return"error happen when aegis stringify: \n "+e.message+" \n "+e.stack}var t,n},_=function e(t,n){void 0===n&&(n=3);var o,a,i,s="";return Array.isArray(t)?(s+="[",o=t.length,t.forEach((function(t,a){s+="object"==typeof t&&1<n?e(t,n-1):y(t),s+=a===o-1?"":","})),s+="]"):t instanceof Object?(s="{",a=Object.keys(t),i=a.length,a.forEach((function(o,r){"object"==typeof t[o]&&1<n?s+='"'+o+'":'+e(t[o],n-1):s+=v(o,t[o]),s+=r===i-1||r<i-1&&void 0===t[a[r+1]]?"":","})),s+="}"):s+=t,s},v=function(e,t){var n=typeof t,o="";return"string"==n||"object"==n?o+='"'+e+'":"'+t+'"':"function"==typeof t?o+='"'+e+'":"function '+t.name+'"':"symbol"==typeof t?o+='"'+e+'":"symbol"':"number"!=typeof t&&"boolean"!=n||(o+='"'+e+'": '+t),o},y=function(e){var t=typeof e;return""+("undefined"==t||"symbol"==t||"function"==t?"null":"string"==t||"object"==t?'"'+e+'"':e)},M=(C.prototype.sourceURL=function(){return this.data.url},C.prototype.status=function(){return Number(this.data.status)},C.prototype.headers=function(){var e={};return this.data.headers.forEach((function(t,n){e[n]=t})),e},C);function C(e,t){this.type="fetch",this.data=e||{},this.data.response=t}function w(e){return e.filter((function(t,n){return"static"!==t.type||!e.find((function(e,o){return n!==o&&t.url===e.url&&200===t.status}))}))}function I(e){e.level===d.INFO_ALL&&(e.level=d.INFO)}function b(e){return function(n,o){e.lifeCycle.emit("modifyRequest",n);var a=e.config.modifyRequest;if("function"==typeof a)try{var i=a(n);"object"==typeof i&&"url"in i&&(n=i)}catch(n){t("error",n," at node_modules/aegis-weex-sdk/lib/aegis.min.js:10")}o(n)}}function T(e){return function(t,n){e.lifeCycle.emit("afterRequest",t);var o=e.config.afterRequest;"function"==typeof o&&!1===o(t)||n(t)}}function k(){}function S(e,t){Object.getOwnPropertyNames(e).forEach((function(n){"function"==typeof e[n]&&"constructor"!==n&&(t?t[n]="sendPipeline"===n?function(){return function(){}}:function(){}:e[n]=function(){})}))}function D(e){var t,n=this,i=(r=e.config).uin,s=r.id,r=r.offlineLogLimit;i&&s&&(t=new q({limit:void 0===r?2e4:r}),e.lifeCycle.on("beforeWrite",(function(n){t.save2Offline(n=void 0===n?[]:n,e.config)})),e.getOfflineLog=function(){var e=t.getLogs({uin:i,id:s});return t.clearLogs(),e},e.uploadOfflineLogs=function(t){return o(n,void 0,void 0,(function(){return a(this,(function(n){return t=Array.isArray(t)?t:[t],[2,j(e,t)]}))}))})}(Q=d=d||{}).INFO_ALL="-1",Q.API_RESPONSE="1",Q.INFO="2",Q.ERROR="4",Q.PROMISE_ERROR="8",Q.AJAX_ERROR="16",Q.SCRIPT_ERROR="32",Q.IMAGE_ERROR="64",Q.CSS_ERROR="128",Q.CONSOLE_ERROR="256",Q.MEDIA_ERROR="512",Q.RET_ERROR="1024",Q.REPORT="2048",Q.PV="4096",Q.EVENT="8192",Q.PAGE_NOT_FOUND_ERROR="16384",(F={})[F.android=1]="android",F[F.ios=2]="ios",F[F.windows=3]="windows",F[F.macos=4]="macos",F[F.linux=5]="linux",F[F.devtools=6]="devtools",F[F.other=100]="other",(B={})[B.unknown=100]="unknown",B[B.wifi=1]="wifi",B[B.net2g=2]="net2g",B[B.net3g=3]="net3g",B[B.net4g=4]="net4g",B[B.net5g=5]="net5g",B[B.net6g=6]="net6g",(V=f=f||{}).LOG="log",V.SPEED="speed",V.PERFORMANCE="performance",V.OFFLINE="offline",V.WHITE_LIST="whiteList",V.VITALS="vitals",V.PV="pv",V.CUSTOM_PV="customPV",V.EVENT="event",V.CUSTOM="custom",V.SDK_ERROR="sdkError",V.SET_DATA="setData",(Q=p=p||{}).production="production",Q.gray="gray",Q.pre="pre",Q.daily="daily",Q.local="local",Q.test="test",Q.others="others";var E,A,N=function(e,t){return function(n,o){var a=t.logCreated;return"function"!=typeof a?(e("beforeWrite",n),o(n)):(n=n.filter((function(e){return!1!==a(e)})),e("beforeWrite",n),o(n))}},O=function(e,t){var n,o=[],a=e.config;return e.lifeCycle.on("destroy",(function(){o.length=0})),function(e,i){if(o.push(e),t&&o.length>=t)return o=w(o),i(o.splice(0,o.length)),void(n&&clearTimeout(n));n&&clearTimeout(n),n=setTimeout((function(){n=null,0<(o=w(o)).length&&i(o.splice(0,o.length))}),a.delay)}},P=function(e,t){return Array.isArray(e)?t(e.map((function(e){return n(n({},e),{msg:"string"==typeof e.msg?e.msg:[].concat(e.msg).map(m).join(" ")})}))):t(n(n({},e),{msg:"string"==typeof e.msg?e.msg:m(e.msg)}))},L=function(e){var t,n=!1,o=!1,a=!1,i=[];return e.lifeCycle.on("onConfigChange",(function(){t&&clearTimeout(t),t=setTimeout((function(){var t,s;!a&&e.config&&(a=!0,t=e.config.whiteListUrl,(s=void 0===t?"":t)&&e.sendPipeline([function(t,a){a({url:s,type:f.WHITE_LIST,success:function(t){o=!0;try{var a=t.data||JSON.parse(t),s=a.retcode,r=a.result,c=void 0===r?{}:r;if(0===s){if(n=c.is_in_white_list,e.isWhiteList=n,c.shutdown)return void e.destroy();0<=c.rate&&c.rate<=1&&(e.config.random=c.rate,e.isGetSample=!1)}e.isWhiteList&&i.length?$(e)(i.splice(0),(function(){})):!e.isWhiteList&&i.length&&(i.length=0);var u=e.config.onWhitelist;"function"==typeof u&&u(n)}catch(t){}},fail:function(t){"403 forbidden"===t&&e.destroy(),o=!0}})}],f.WHITE_LIST)(null),a=!1)}),e.config.uin?50:500)})),e.lifeCycle.on("destroy",(function(){i.length=0})),function(t,a){var s;n||null!==(s=null===(s=e.config)||void 0===s?void 0:s.api)&&void 0!==s&&s.reportRequest?a(t.concat(i.splice(0)).map((function(e){return I(e),e}))):(t=t.filter((function(e){return e.level!==d.INFO&&e.level!==d.API_RESPONSE?(I(e),!0):(o||(i.push(e),200<=i.length&&(i.length=200)),!1)}))).length&&a(t)}},R=function(e){return setTimeout((function(){var t=e.config.pvUrl,n=void 0===t?"":t;n&&e.sendPipeline([function(t,o){o({url:n,type:f.PV,fail:function(t){"403 forbidden"===t&&e.destroy()}})}],f.PV)(null)}),100),function(e,t){t(e)}},x=function(e){var t={};return function(n,o){var a,i;e.speedSample?(i="object"==typeof e.repeat?e.repeat:{repeat:e.repeat},a=+i.speed||+i.repeat||5,Array.isArray(n)?(i=n.filter((function(e){var n=!t[e.url]||t[e.url]<a;return t[e.url]=1+~~t[e.url],n}))).length&&o(i):(!t[n.url]||t[n.url]<a)&&(t[n.url]=1+~~t[n.url],o(n))):o(n)}},G=function(e){var t={};return function(n,o){var a="number"==typeof e.repeat?e.repeat:5;if(0===a)return o(n);o(n.filter((function(e){return e.level!==d.ERROR&&e.level!==d.PROMISE_ERROR&&e.level!==d.AJAX_ERROR&&e.level!==d.SCRIPT_ERROR&&e.level!==d.IMAGE_ERROR&&e.level!==d.CSS_ERROR&&e.level!==d.MEDIA_ERROR||(t[e.msg]=t[e.msg]||0,t[e.msg]+=1,!(t[e.msg]>a))})))}},$=function(e){return function(t){return e.sendPipeline([function(t,n){return n({url:e.config.url||"",data:(o=t,(o=Array.isArray(o)?o:[o]).map((function(e,t){return Object.getOwnPropertyNames(e).map((function(n){return c(n)+"["+t+"]="+(void 0===e[n]?"":c(e[n]))})).join("&")})).join("&")+(o.length?"&count="+o.length:"")),method:"post",contentType:"application/x-www-form-urlencoded",type:f.LOG,log:t,requestConfig:{timeout:5e3},success:function(){var o=e.config.onReport;"function"==typeof o&&t.forEach((function(e){o(e)})),"function"==typeof n&&n([])},fail:function(t){"403 forbidden"===t&&e.destroy()}});var o}],f.LOG)(t)}},U=function(e){if(!e||!e.reduce||!e.length)throw new TypeError("createPipeline need at least one function param");return 1===e.length?function(t,n){e[0](t,n||k)}:e.reduce((function(e,t){return function(n,o){return void 0===o&&(o=k),e(n,(function(e){return null==t?void 0:t(e,o)}))}}))},F=(Object.defineProperty(ne.prototype,"__version__",{get:function(){return t("warn","__version__ has discard, please use version"," at node_modules/aegis-weex-sdk/lib/aegis.min.js:10"),"1.24.45"},enumerable:!1,configurable:!0}),Object.defineProperty(ne.prototype,"LogType",{get:function(){return t("warn","LogType has discard, please use logType"," at node_modules/aegis-weex-sdk/lib/aegis.min.js:10"),d},enumerable:!1,configurable:!0}),ne.prototype.init=function(e){this.setConfig(e);for(var t=0;t<ne.installedPlugins.length;t++)try{ne.installedPlugins[t].patch(this)}catch(e){this.sendSDKError(e)}this.lifeCycle.emit("onInited")},ne.prototype.setConfig=function(e){Object.assign(this.config,e);var t=this.config,n=t.id,o=t.uin,a=t.version,i=t.ext1,s=t.ext2,r=t.ext3,c=(e=t.aid,t=t.env,void 0===t?"production":t);t=this.bean.id!==n||this.bean.uin!==o||this.bean.aid!==e;return this.bean.id=n||"",this.bean.uin=o||"",this.bean.version=a||"1.24.45",this.bean.aid=e||"",this.bean.env=function(){switch(c){case p.production:case p.gray:case p.pre:case p.daily:case p.local:case p.others:return 1;default:return}}()?c:p.others,i&&(this.bean.ext1=encodeURIComponent(i)),s&&(this.bean.ext2=encodeURIComponent(s)),r&&(this.bean.ext3=encodeURIComponent(r)),t&&this.lifeCycle.emit("onConfigChange",this.config),this.config},ne.use=function(e){-1===ne.installedPlugins.indexOf(e)&&e.aegisPlugin&&ne.installedPlugins.push(e)},ne.unuse=function(e){e=ne.installedPlugins.indexOf(e),-1!==e&&ne.installedPlugins.splice(e,1)},ne.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o={level:d.INFO,msg:e};1===e.length&&e[0].msg&&Object.assign(o,n({},e[0]),{level:d.INFO}),this.normalLogPipeline(o)},ne.prototype.infoAll=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o={level:d.INFO_ALL,msg:e};1===e.length&&e[0].msg&&Object.assign(o,n({},e[0]),{level:d.INFO_ALL}),this.normalLogPipeline(o)},ne.prototype.report=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o={level:d.REPORT,msg:e};1===e.length&&e[0].msg&&Object.assign(o,n({},e[0])),this.normalLogPipeline(o)},ne.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o={level:d.ERROR,msg:e};1===e.length&&e[0].msg&&Object.assign(o,n({},e[0]),{level:d.ERROR}),this.normalLogPipeline(o)},ne.prototype.speedLogPipeline=function(e){throw new Error('You need to override "speedLogPipeline" method')},ne.prototype.reportPv=function(e){var n,o=this;e&&(t("warn","reportPv is deprecated, please use reportEvent"," at node_modules/aegis-weex-sdk/lib/aegis.min.js:10"),n=""+Object.getOwnPropertyNames(this.bean).filter((function(e){return"id"!==e})).map((function(e){return e+"="+o.bean[e]})).join("&"),this.sendPipeline([function(t,a){a({url:o.config.url+"/"+e+"?"+n,addBean:!1,type:f.CUSTOM_PV,fail:function(e){"403 forbidden"===e&&o.destroy()}})}],f.CUSTOM_PV)(null))},ne.prototype.reportEvent=function(e){e&&((e="string"==typeof e?{name:e,ext1:this.config.ext1||"",ext2:this.config.ext2||"",ext3:this.config.ext3||""}:e).name?this.eventPipeline(e):t("warn","reportEvent params error"," at node_modules/aegis-weex-sdk/lib/aegis.min.js:10"))},ne.prototype.reportTime=function(e,n){if("object"==typeof e)return this.reportT(e);"string"==typeof e?"number"==typeof n?n<0||6e4<n?t("warn","reportTime: duration must between 0 and 60000"," at node_modules/aegis-weex-sdk/lib/aegis.min.js:10"):this.submitCustomTime(e,n):t("warn","reportTime: second param must be number"," at node_modules/aegis-weex-sdk/lib/aegis.min.js:10"):t("warn","reportTime: first param must be a string"," at node_modules/aegis-weex-sdk/lib/aegis.min.js:10")},ne.prototype.reportT=function(e){var n=e.name,o=e.duration,a=e.ext1,i=void 0===a?"":a,s=e.ext2;a=void 0===s?"":s,s=e.ext3,s=void 0===s?"":s,e=e.from;if("string"==typeof n&&"number"==typeof o&&"string"==typeof i&&"string"==typeof a&&"string"==typeof s){if(!(o<0||6e4<o))return this.submitCustomTime(n,o,i,a,s,void 0===e?"":e);t("warn","reportTime: duration must between 0 and 60000"," at node_modules/aegis-weex-sdk/lib/aegis.min.js:10")}else t("warn","reportTime: params error"," at node_modules/aegis-weex-sdk/lib/aegis.min.js:10")},ne.prototype.time=function(e){"string"==typeof e?this.timeMap[e]?t("warn","Timer "+e+" already exists"," at node_modules/aegis-weex-sdk/lib/aegis.min.js:10"):this.timeMap[e]=Date.now():t("warn","time: first param must be a string"," at node_modules/aegis-weex-sdk/lib/aegis.min.js:10")},ne.prototype.timeEnd=function(e){"string"==typeof e?this.timeMap[e]?(this.submitCustomTime(e,Date.now()-this.timeMap[e]),delete this.timeMap[e]):t("warn","Timer "+e+" does not exist"," at node_modules/aegis-weex-sdk/lib/aegis.min.js:10"):t("warn","timeEnd: first param must be a string"," at node_modules/aegis-weex-sdk/lib/aegis.min.js:10")},ne.prototype.submitCustomTime=function(e,t,n,o,a,i){this.customTimePipeline({name:e,duration:t,ext1:n||this.config.ext1,ext2:o||this.config.ext2,ext3:a||this.config.ext3,from:i||void 0})},ne.prototype.extendBean=function(e,t){this.bean[e]=t},ne.prototype.sendPipeline=function(e,o){var a,s,r,c=this;return U(i([function(e,n){if("number"!=typeof a.config.random&&(t("warn","random must in [0, 1], default is 1."," at node_modules/aegis-weex-sdk/lib/aegis.min.js:10"),a.config.random=1),!a.isHidden||!a.isGetSample)if(a.isGetSample)a.isHidden||n(e);else{if(a.isGetSample=!0,Math.random()<a.config.random)return a.isHidden=!1,n(e);a.isHidden=!0}},(r=o,function(e,t){var o=Array.isArray(e),a=o?e:[e];s.lifeCycle.emit("beforeRequest",e);var i=s.config.beforeRequest;(a="function"==typeof i?a.map((function(e){try{var t=i({logs:e,logType:r});return(null==t?void 0:t.logType)===r&&null!=t&&t.logs?t.logs:!1!==t&&e}catch(t){return e}})).filter((function(e){return!1!==e})):a).length&&(a=function(e,t){if(!Array.isArray(e)||e.length<=1)return e;var o=[],a=[];return!(a="string"==typeof t?[t]:t)||a.length<=0||(a.forEach((function(t){e.forEach((function(e){null!=e&&e[t]&&o.push(t)}))})),0<o.length&&(e=e.map((function(e){var t={};return o.forEach((function(e){t[e]=""})),n(n({},t),e)})))),e}(a,["ext1","ext2","ext3"]),t(o?a:a[0]))})],e,[b(s=a=this),function(e,t){c.request(e,(function(){for(var n,o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];t({isErr:!1,result:o,logType:null==e?void 0:e.type,logs:null==e?void 0:e.log}),null===(n=null==e?void 0:e.success)||void 0===n||n.call.apply(n,i([e],o))}),(function(){for(var n,o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];t({isErr:!0,result:o,logType:null==e?void 0:e.type,logs:null==e?void 0:e.log}),null===(n=null==e?void 0:e.fail)||void 0===n||n.call.apply(n,i([e],o))}))},T(this)]))},ne.prototype.send=function(e,t,n){var o=this;return U([b(this),function(e,a){o.request(e,(function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];a({isErr:!1,result:n,logType:e.type,logs:e.log}),null==t||t.apply(void 0,n)}),(function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];a({isErr:!0,result:t,logType:e.type,logs:e.log}),null==n||n.apply(void 0,t)}))},T(this)])(e)},ne.prototype.request=function(e,t,n){throw new Error('You need to override "request" method')},ne.prototype.sendSDKError=function(e){var t=this;this.sendPipeline([function(e,n){n({url:t.config.url+"?id=1085&msg[0]="+encodeURIComponent(m(e))+"&level[0]=2&from="+t.config.id+"&count=1&version="+t.config.id+"(1.24.45)",addBean:!1,method:"get",type:f.SDK_ERROR,log:e})}],f.SDK_ERROR)(e)},ne.prototype.destroy=function(e){void 0===e&&(e=!1);var t,n,o=ne.instances.indexOf(this);-1!==o&&ne.instances.splice(o,1);for(var a=ne.installedPlugins.length-1;0<=a;a--)try{ne.installedPlugins[a].unpatch(this)}catch(e){this.sendSDKError(e)}if(this.lifeCycle.emit("destroy"),this.lifeCycle.clear(),e)t=this,n=Object.getOwnPropertyDescriptors(t),Object.keys(n).forEach((function(e){n[e].writable&&(t[e]=null)})),Object.setPrototypeOf(this,null);else{for(var i=this;i.constructor!==Object&&S(i,this),i=Object.getPrototypeOf(i););0===ne.instances.length&&(e=Object.getPrototypeOf(this).constructor,S(e),S(ne))}},ne.version="1.24.45",ne.instances=[],ne.logType=d,ne.environment=p,ne.installedPlugins=[],ne),B=(te.prototype.patch=function(e){this.canUse(e)&&this.exist(e)&&(this.instances.push(e),this.triggerInit(e),this.triggerOnNewAegis(e))},te.prototype.unpatch=function(e){e=this.instances.indexOf(e),-1!==e&&this.instances.splice(e,1)},te.prototype.countInstance=function(){return this.instances.length},te.prototype.uninstall=function(){var e;null===(e=null===(e=this.option)||void 0===e?void 0:e.destroy)||void 0===e||e.apply(this)},te.prototype.walk=function(e){var t=this;this.instances.forEach((function(n){var o=t.canUse(n);o&&e(n,o)}))},te.prototype.canUse=function(e){return e=this.getConfig(e),!(!e||"object"!=typeof e)||!!e},te.prototype.getConfig=function(e){return null===(e=e.config)||void 0===e?void 0:e[this.name]},te.prototype.exist=function(e){return-1===this.instances.indexOf(e)},te.prototype.triggerInit=function(e){var t;this.inited||(this.inited=!0,null===(t=null===(t=this.option)||void 0===t?void 0:t.init)||void 0===t||t.call(this.option,this.getConfig(e)))},te.prototype.triggerOnNewAegis=function(e){var t;null===(t=null===(t=this.option)||void 0===t?void 0:t.onNewAegis)||void 0===t||t.call(this.option,e,this.getConfig(e))},te),j=function(e,n){return o(this,void 0,void 0,(function(){var o,i,s,r,c,u;return a(this,(function(a){return o=e.config,c=e.bean,i=o.offlineUrl,s=o.id,r=o.uin,c=(c||{}).aid,u=void 0===c?"":c,(r||u)&&s&&e.send({url:i+"/offlineAuto",type:f.OFFLINE,log:f.OFFLINE},(function(o){if(o=(null==o?void 0:o.data).secretKey,o)try{e.send({url:i+"/offlineLog",data:{logs:n,secretKey:o,id:s,uin:r,aid:u},contentType:"application/json",method:"post",type:f.OFFLINE,log:f.OFFLINE})}catch(o){t("error",o," at node_modules/aegis-weex-sdk/lib/aegis.min.js:10")}}),(function(e){t("error",e," at node_modules/aegis-weex-sdk/lib/aegis.min.js:10")})),[2]}))}))},q=function(e){var t=this;e=(void 0===e?{}:e).limit,e=void 0===e?2e4:e;this.offlineBuffer=[],this.clearLogs=function(){t.offlineBuffer=[]},this.save2Offline=function(e,n){e=(e=Array.isArray(e)?e:[e]).map((function(e){return"string"==typeof e&&(e={msg:e}),Object.assign({id:n.id,uin:n.uin,time:+Date.now(),version:n.version},e)})),t.offlineBuffer=t.offlineBuffer.concat(e).slice(0,t.limitSize)},this.getLogs=function(e,n){var o=t.offlineBuffer.filter((function(t){return t.id===e.id&&t.uin===e.uin}));return null==n||n(o),o},this.limitSize=e},H=new B({name:"offlineLog",onNewAegis:function(e){D(e),e.lifeCycle.on("onConfigChange",(function(t){D(e)}))}}),V="undefined"!=typeof weex&&(null===weex||void 0===weex?void 0:weex.requireModule("stream")),K=null==V?void 0:V.fetch,z=function e(t){var n=t.ok,o=t.status,a=t.statusText,i=t.data,s=t.headers;return{ok:n,status:o,statusText:a,body:i,headers:s,clone:function(){return e(t)},text:function(){return new Promise((function(e){return e(i)}))},json:function(){return new Promise((function(e,t){try{e(JSON.parse(i))}catch(e){t(new Error("response body is not JSON"))}}))}}},W=function(e,t){return void 0===t&&(t={}),new Promise((function(o,a){K||a(new Error("no available fetch found!"));try{K(n(n({},t),{url:e,type:"text"}),(function(e){return o(z(e))}))}catch(e){a(e)}}))},Y=[],J={},X=weex,Q=(V=(e(A=Z,Q=E=F),A.prototype=null===Q?Object.create(Q):(ee.prototype=Q.prototype,new ee),Z.prototype.getPlatform=function(){var e=((null===(e=null===(e=null===(e=this.weex)||void 0===e?void 0:e.config)||void 0===e?void 0:e.env)||void 0===e?void 0:e.osName)||"").toLowerCase();return"android"===e?1:"ios"===e?2:100},Z.prototype.initOfflineLog=function(){Z.use(H)},Object.defineProperty(Z.prototype,"getBean",{get:function(){var e=this;return Object.getOwnPropertyNames(this.bean).map((function(t){return t+"="+e.bean[t]})).join("&")},enumerable:!1,configurable:!0}),Z.prototype.reportSpeed=function(e){var t,o,a,i,s;this.send({url:""+this.config.speedUrl,method:"post",data:(t=e,o=this.bean,i={fetch:[],static:[]},s={},Array.isArray(t)?t.forEach((function(e){var t;null===(t=i[e.type])||void 0===t||t.push(e)})):null===(a=i[t.type])||void 0===a||a.push(t),s.payload=JSON.stringify(n({duration:i},o)),s),contentType:"application/json",type:f.SPEED,log:e})},Z.prototype.retcode=function(e){var n=this;"object"==typeof e?e.url?400<=Object.keys(J).length||(J[e.url]||(J[e.url]=0),J[e.url]+=1,3<J[e.url])||(e=Object.assign({},{url:"",isHttps:!0,method:"GET",type:"fetch",duration:0,ret:0,status:200},e),Y.push(e),1===Y.length&&setTimeout((function(){n.reportSpeed(Y),Y=[]}),1e3)):t("error","param url can not be empty!"," at node_modules/aegis-weex-sdk/lib/aegis.min.js:10"):t("error","retcode params should be an objcet"," at node_modules/aegis-weex-sdk/lib/aegis.min.js:10")},Z.prototype.uploadLogs=function(e,t){this.lifeCycle.emit("uploadLogs",e=void 0===e?{}:e,t=void 0===t?{}:t)},Z.prototype.getOfflineLog=function(){},Z.prototype.uploadOfflineLogs=function(e){},Z.sessionID="session-"+Date.now(),Z),F=new B({name:"aid",onNewAegis:function(e){var t,n=this;this.aid&&!0!==this.aid?(e.bean.aid=this.aid,e.config.aid=this.aid):t=setTimeout((function(){n.getAid((function(t){n.aid=t,e.bean.aid=n.aid,e.config.aid=n.aid})),clearTimeout(t)}),0)},getAid:function(e){return o(this,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,localStorage.getItem("AEGIS_ID")];case 1:return(t=n.sent())||(t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),localStorage.setItem("AEGIS_ID",t)),null==e||e(t||""),[3,3];case 2:return n.sent(),null==e||e(""),[3,3];case 3:return[2]}}))}))}}),new B({name:"onError",listening:!1,init:function(){this.startListen()},startListen:function(){var e=this;if(!this.listening){this.listening=!0;try{var t=Vue;if(void 0===t||!t)return;var n=t.config.errorHandler;t.config.errorHandler=function(t){t&&e.publishErrorLog({msg:t,level:d.ERROR}),"function"==typeof n&&n(t)}}catch(e){this.publishErrorLog({msg:e,level:d.ERROR})}}},publishErrorLog:function(e){this.$walk((function(t){t.normalLogPipeline(e)}))}}));B=new B({name:"reportApiSpeed",override:!1,fetch:null,weexFetch:null,onNewAegis:function(e){var t,n;this.override||(this.override=!0,this.fetch=e.fetch,this.weexFetch=e.weexFetch,t=(n=this.overrideFetch(e.config)).fetch,n=n.weexFetch,e.fetch=t,e.weexFetch=n)},publishSpeed:function(e){this.$walk((function(t){t.speedLogPipeline(e)}))},publishNormalLog:function(e){this.$walk((function(t){t.normalLogPipeline(e)}))},overrideFetch:function(e){var t=this;if("function"==typeof this.fetch){var n=this.fetch,o=this.weexFetch,a=function(n,o,a,i){var r,c,u,f,p;e.hostUrl&&-1<a.indexOf(e.hostUrl)||(c={url:a,isHttps:l(a),method:(null==i?void 0:i.method)||"get",duration:o,type:"fetch",status:n.status},"fetch"!==(f="function"==typeof(null===(r=e.api)||void 0===r?void 0:r.resourceTypeHandler)?null===(r=e.api)||void 0===r?void 0:r.resourceTypeHandler(n.url):f)&&"static"!==f&&(u="",n.headers&&(u=n.headers["Content-Type"]||n.headers["content-type"]),f=n.ok&&"string"==typeof u&&(p=u,g.some((function(e){return-1!==p.indexOf(e)})))?"static":"fetch"),"fetch"===f?n.clone().text().then((function(s){var r=null===(l=e.api)||void 0===l?void 0:l.apiDetail,u=function(e,t,n){var o;try{if("function"==typeof(null==t?void 0:t.retCodeHandler)){var a=t.retCodeHandler(e,null==n?void 0:n.url,null==n?void 0:n.ctx)||{};return{code:void 0===(i=a.code)?"unknown":i,isErr:a.isErr}}"string"==typeof e&&(e=JSON.parse(e)),"function"==typeof(null===(o=null==t?void 0:t.ret)||void 0===o?void 0:o.join)&&(h=[].concat(t.ret.map((function(e){return e.toLowerCase()}))));var i,s=Object.getOwnPropertyNames(e).filter((function(e){return-1!==h.indexOf(e.toLowerCase())}));return s.length?{code:""+(i=Number(e[s[0]])),isErr:0!==i}:{code:"unknown",isErr:!1}}catch(e){return{code:"unknown",isErr:!1}}}(s,e.api,{url:n.url,ctx:n})||{},l=u.code;u=u.isErr,r="req url: "+a+" \n                              \nreq method: "+((null==i?void 0:i.method)||"get")+" \n                              \nreq param: "+(r?_(null==i?void 0:i.body):"")+" \n                              \nres duration: "+o+" \n                              \nres status: "+(n.status||0)+"\n                              \nres retcode: "+l+"\n                              \nres data: "+(r?s:"");t.publishNormalLog({msg:r,level:d.API_RESPONSE}),c.payload=new M(n,s),c.ret=l,c.isErr=+u,u&&t.publishNormalLog({msg:r,level:d.RET_ERROR})})):Object.assign(c,{type:"static",urlQuery:(u=n.url,f=!0,"string"==typeof u?u.split("?")[f?1:0]||"":u),domainLookup:s.number,connectTime:s.number}),t.publishSpeed(c))},i=function(n,o,a,i){if(e.hostUrl&&-1<a.indexOf(e.hostUrl))throw n;var s={url:a,isHttps:l(a),method:(null==i?void 0:i.method)||"get",duration:o,type:"fetch",status:0};throw t.publishSpeed(s),s=null===(s=e.api)||void 0===s?void 0:s.apiDetail,i="AJAX_ERROR: "+n+"\n              \nres status: 0\n              \nres duration: "+o+"\n              \nreq url: "+a+"\n              \nreq method: "+((null==i?void 0:i.method)||"get")+"\n              \nreq param: "+(s?_(null==i?void 0:i.body):""),t.publishNormalLog({msg:i,level:d.AJAX_ERROR}),n};return{fetch:function(e,t){var o=Date.now();return n(e,t).then((function(n){var i=Date.now()-o,s=n;try{a(s,i,e,t)}catch(n){}return n})).catch((function(n){var a=Date.now()-o;try{i(n,a,e,t)}catch(n){}throw n}))},weexFetch:function(e,t,n){var s=e.url,r=Date.now();try{o(e,(function(n){var o=Date.now()-r,i=z(n);try{a(i,o,s,e)}catch(n){}"function"==typeof t&&t(n)}),n)}catch(t){n=Date.now()-r;try{i(t,n,s,e)}catch(e){}throw t}}}}}});function Z(e){var o,a,i=E.call(this,e)||this;i.weex=X,i.originRequest=W,i.fetch=W,i.weexFetch=K,i.speedLogPipeline=U([x(i.config),O(i),function(e,t){i.lifeCycle.emit("beforeReportSpeed",e);var n=i.config.beforeReportSpeed;if((e="function"==typeof n?e.filter((function(e){return!1!==n(e)})):e).length)return t(e)},function(e){i.reportSpeed(e)}]),i.request=function(e,t,o){var a;e&&"string"==typeof e.url&&""!==e.url&&i.bean.id&&(a=e.url,!1!==e.addBean&&(a=a+(-1===a.indexOf("?")?"?":"&")+i.getBean),("get"===(e.method||"get").toLocaleLowerCase()?i.originRequest(function(e,t){if("string"!=typeof e)return"";if("object"==typeof t&&t){var n=Object.getOwnPropertyNames(t).map((function(e){var n=t[e];return e+"="+("string"==typeof n?encodeURIComponent(n):encodeURIComponent(JSON.stringify(n)))})).join("&").replace(/eval/gi,"evaI");return e+(-1===e.indexOf("?")?"?":"&")+n}return e}(a,e.data),n({method:"GET",headers:{}},e.requestConfig)):("string"==typeof e.data?e.data=e.data.replace(/eval/gi,"evaI"):e.data=JSON.stringify(e.data),i.originRequest(a,n({method:"POST",body:e.data,headers:e.contentType?{"Content-Type":e.contentType}:{}},e.requestConfig)))).then((function(n){var a,s;String(n.status).match(/^20\d+/g)?null==t||t(n):null==o||o(n),null===(s=(a=i.config).reqCallback)||void 0===s||s.call(a,n,e)})).catch((function(e){null==o||o(e)})))};try{e.offlineLog&&i.initOfflineLog(),i.init(e),i.extendBean("sessionId",Z.sessionID),i.extendBean("platform",i.getPlatform()),i.extendBean("from",encodeURIComponent(e.pageUrl||(null===(a=null===(o=i.weex)||void 0===o?void 0:o.config)||void 0===a?void 0:a.bundleUrl)||"")),i.extendBean("referer",encodeURIComponent(e.referrer||""))}catch(e){t("warn",e," at node_modules/aegis-weex-sdk/lib/aegis.min.js:10"),t("log","%cThe above error occurred in the process of initializing Aegis, which will affect your normal use of Aegis.\nIt is recommended that you contact aegis-helper for feedback and thank you for your support.","color: red"," at node_modules/aegis-weex-sdk/lib/aegis.min.js:10"),i.sendSDKError(e)}return i}function ee(){this.constructor=A}function te(e){this.aegisPlugin=!0,this.name="",this.instances=[],this.inited=!1,e.$walk=this.walk.bind(this),e.$getConfig=this.getConfig.bind(this),this.option=e,this.name=e.name}function ne(e){var t,n,o=this;this.isGetSample=!1,this.isHidden=!1,this.config={version:0,delay:1e3,onError:!0,repeat:5,random:1,aid:!0,device:!0,pagePerformance:!0,webVitals:!0,speedSample:!0,hostUrl:"https://aegis.qq.com",env:"production",url:"",offlineUrl:"",whiteListUrl:"",pvUrl:"",speedUrl:"",customTimeUrl:"",performanceUrl:"",webVitalsUrl:"",eventUrl:""},this.isWhiteList=!1,this.lifeCycle=new r,this.bean={},this.normalLogPipeline=U([O(this,5),P,function(e,n){var o=t.config;n(e=e.map((function(e){var t,n=o.maxLength||204800;try{if(!e.msg||e.msg.length<=n)return e;e.msg=null===(t=e.msg)||void 0===t?void 0:t.substring(0,n)}catch(t){e.msg=m(e.msg).substring(0,o.maxLength)}return e})))},G((t=this).config),N(this.lifeCycle.emit,this.config),R(this),L(this),function(e,t){var n=JSON.parse(JSON.stringify(e));o.lifeCycle.emit("beforeReport",n);var a=o.config.beforeReport;(e="function"==typeof a?e.filter((function(e){return!1!==a(e)})):e).length&&t(e)},$(this)]),this.eventPipeline=U([O(this,5),function(e){o.sendPipeline([function(e,t){var n=e.map((function(e){return{name:e.name,ext1:e.ext1||o.config.ext1||"",ext2:e.ext2||o.config.ext2||"",ext3:e.ext3||o.config.ext3||""}}));t({url:o.config.eventUrl+"?payload="+encodeURIComponent(JSON.stringify(n)),type:f.EVENT,log:e,fail:function(e){"403 forbidden"===e&&o.destroy()}})}],f.EVENT)(e)}]),this.timeMap={},this.customTimePipeline=U([O(this,5),function(e){return o.sendPipeline([function(e,t){t({url:o.config.customTimeUrl+"?payload="+encodeURIComponent(JSON.stringify({custom:e})),type:f.CUSTOM,log:e,fail:function(e){"403 forbidden"===e&&o.destroy()}})}],f.CUSTOM)(e)}]),this.config=(n=this.config,void 0===(e=e.hostUrl)&&(e="https://aegis.qq.com"),n.url=n.url||e+"/collect",n.offlineUrl=n.offlineUrl||e+"/offline",n.whiteListUrl=n.whiteListUrl||e+"/collect/whitelist",n.pvUrl=n.pvUrl||e+"/collect/pv",n.eventUrl=n.eventUrl||e+"/collect/events",n.speedUrl=n.speedUrl||e+"/speed",n.customTimeUrl=n.customTimeUrl||e+"/speed/custom",n.performanceUrl=n.performanceUrl||e+"/speed/performance",n.webVitalsUrl=n.webVitalsUrl||e+"/speed/webvitals",n.setDataReportUrl=n.SetDataReportUrl||e+"/speed/miniProgramData",n),ne.instances.push(this)}return V.use(Q),V.use(B),V.use(F),V}))}).call(this,n("0de9")["default"])},abe2:function(e){e.exports=JSON.parse('{"uni-countdown.day":"\u5929","uni-countdown.h":"\u65f6","uni-countdown.m":"\u5206","uni-countdown.s":"\u79d2"}')},acc7:function(e,t,n){"use strict";n.r(t);var o=n("25d3"),a=n("b88b");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},aeb3:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",{staticClass:e._$s(0,"sc","flex-column-center"),attrs:{_i:0}},[n("view",{staticClass:e._$s(1,"sc","info-bg"),attrs:{_i:1}},[n("view",{staticClass:e._$s(2,"sc","gui-list-items"),attrs:{_i:2},on:{click:e.actionToChangeMobile}},[n("view",{staticClass:e._$s(3,"sc","gui-list-body gui-border-b"),attrs:{_i:3}},[n("view",{staticClass:e._$s(4,"sc","gui-list-title"),attrs:{_i:4}},[n("text",{staticClass:e._$s(5,"sc","gui-list-title-text gui-list-one-line gui-primary-color"),attrs:{_i:5}}),n("text",{staticClass:e._$s(6,"sc","gui-list-title-text gui-list-one-line gui-primary-color"),attrs:{_i:6}},[e._v(e._$s(6,"t0-0",e._s(e.user.mobile)))])])]),n("text",{staticClass:e._$s(7,"sc","gui-list-arrow-right gui-icons gui-color-gray-light"),attrs:{_i:7}})]),n("view",{staticClass:e._$s(8,"sc","gui-list-items"),attrs:{_i:8},on:{click:e.actionToChangeEmail}},[n("view",{staticClass:e._$s(9,"sc","gui-list-body gui-border-b"),attrs:{_i:9}},[n("view",{staticClass:e._$s(10,"sc","gui-list-title"),attrs:{_i:10}},[n("text",{staticClass:e._$s(11,"sc","gui-list-title-text gui-list-one-line gui-primary-color"),attrs:{_i:11}}),n("text",{staticClass:e._$s(12,"sc","gui-list-title-text gui-list-one-line gui-primary-color"),attrs:{_i:12}},[e._v(e._$s(12,"t0-0",e._s(e.user.email)))])])]),n("text",{staticClass:e._$s(13,"sc","gui-list-arrow-right gui-icons gui-color-gray-light"),attrs:{_i:13}})]),n("view",{staticClass:e._$s(14,"sc","gui-list-items"),attrs:{_i:14},on:{click:e.actionToChangePassword}},[n("view",{staticClass:e._$s(15,"sc","gui-list-body gui-border-b"),attrs:{_i:15}},[n("view",{staticClass:e._$s(16,"sc","gui-list-title"),attrs:{_i:16}},[n("text",{staticClass:e._$s(17,"sc","gui-list-title-text gui-list-one-line gui-primary-color"),attrs:{_i:17}})])]),n("text",{staticClass:e._$s(18,"sc","gui-list-arrow-right gui-icons gui-color-gray-light"),attrs:{_i:18}})]),n("view",{staticClass:e._$s(19,"sc","gui-list-items"),attrs:{_i:19},on:{click:e.actionToChangePayPassword}},[n("view",{staticClass:e._$s(20,"sc","gui-list-body gui-border-b"),attrs:{_i:20}},[n("view",{staticClass:e._$s(21,"sc","gui-list-title"),attrs:{_i:21}},[n("text",{staticClass:e._$s(22,"sc","gui-list-title-text gui-list-one-line gui-primary-color"),attrs:{_i:22}})])]),n("text",{staticClass:e._$s(23,"sc","gui-list-arrow-right gui-icons gui-color-gray-light"),attrs:{_i:23}})])])])},i=[]},af38:function(e,t,n){"use strict";n.r(t);var o=n("e40b"),a=n("60b7");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,"219aab3b",null,!1,o["a"],s);t["default"]=c.exports},afa9:function(e,t,n){"use strict";n.r(t);var o=n("db00"),a=n("e626");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},b085:function(e,t,n){"use strict";n.r(t);var o=n("21f0"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},b0857:function(e,t,n){"use strict";n.r(t);var o=n("a5dd"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},b20a:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",{staticClass:e._$s(0,"sc","conent-bg"),attrs:{_i:0},on:{click:e.actionToOrderDetail}},[e._$s(1,"i","buy"==e.order.side)?n("view",[n("view",{staticClass:e._$s(2,"sc","tag"),attrs:{_i:2}},[e._v(e._$s(2,"t0-0",e._s(e.order.sellerNickname[0])))]),n("view",{staticClass:e._$s(3,"sc","name"),attrs:{_i:3}},[e._v(e._$s(3,"t0-0",e._s(e.order.sellerNickname)))])]):n("view",[n("view",{staticClass:e._$s(5,"sc","tag"),attrs:{_i:5}},[e._v(e._$s(5,"t0-0",e._s(e.order.buyerNickname[0])))]),n("view",{staticClass:e._$s(6,"sc","name"),attrs:{_i:6}},[e._v(e._$s(6,"t0-0",e._s(e.order.buyerNickname)))])]),n("view",{staticClass:e._$s(7,"sc","time"),attrs:{_i:7}},[e._v(e._$s(7,"t0-0",e._s(e.order.updateTime)))]),n("view",{staticClass:e._$s(8,"sc","line"),attrs:{_i:8}}),e._$s(9,"i","buy"==e.order.side)?n("view",{staticClass:e._$s(9,"sc","gb"),attrs:{_i:9}}):n("view",{staticClass:e._$s(10,"sc","gb"),attrs:{_i:10}}),n("view",{staticClass:e._$s(11,"sc","gb-number"),attrs:{_i:11}},[e._v(e._$s(11,"t0-0",e._s(e.order.amount)))]),n("view",{staticClass:e._$s(12,"sc","status"),attrs:{_i:12}},[e._v(e._$s(12,"t0-0",e._s(e.order.orderStateDesc)))])])},i=[]},b56a:function(e,t,n){"use strict";n.r(t);var o=n("17c9"),a=n("eb10");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},b62c:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("115d"));function a(e){return e&&e.__esModule?e:{default:e}}var i=function(e){var t=/^[0-9]*$/g;return"number"===typeof e||t.test(e)?e+"px":e},s={name:"UniIcons",emits:["click"],props:{type:{type:String,default:""},color:{type:String,default:"#333333"},size:{type:[Number,String],default:16},customPrefix:{type:String,default:""}},data:function(){return{icons:o.default.glyphs}},computed:{unicode:function(){var e=this,t=this.icons.find((function(t){return t.font_class===e.type}));return t?unescape("%u".concat(t.unicode)):""},iconSize:function(){return i(this.size)}},methods:{_onClick:function(){this.$emit("click")}}};t.default=s},b88b:function(e,t,n){"use strict";n.r(t);var o=n("f9bd"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},ba26:function(e,t,n){"use strict";n.r(t);var o=n("1c2f"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},bbdd:function(e,t,n){var o=function(){return this||"object"===typeof self&&self}()||Function("return this")(),a=o.regeneratorRuntime&&Object.getOwnPropertyNames(o).indexOf("regeneratorRuntime")>=0,i=a&&o.regeneratorRuntime;if(o.regeneratorRuntime=void 0,e.exports=n("96cf"),a)o.regeneratorRuntime=i;else try{delete o.regeneratorRuntime}catch(s){o.regeneratorRuntime=void 0}},bc0e:function(e,t){e.exports="/static/img/wallet/wallet_bg.png"},bec3:function(e,t,n){"use strict";n.r(t);var o=n("d754"),a=n("0398");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},bf46:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("c6f9"),a={data:function(){return{}},components:{},props:{message:{type:Object}},watch:{message:{handler:function(e){this.setData({renderDom:(0,o.parseGroupTip)(e)})},immediate:!0,deep:!0}},beforeMount:function(){},destroyed:function(){},methods:{}};t.default=a},c141:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("3b0a"));function a(e){return e&&e.__esModule?e:{default:e}}var i={data:function(){return{WeCropper:null,width:300,height:500,cropperSets:{height:500,width:300,id:"bgCropper",targetId:"prevCropper",scale:2.5,zoom:8,cut:{x:0,y:0,width:200,height:200}},tmpFace:null}},onLoad:function(){var e=uni.getSystemInfoSync();this.width=e.windowWidth,this.height=e.windowHeight-50,this.cropperSets.width=this.width,this.cropperSets.height=this.height,this.cropperSets.pixelRatio=e.pixelRatio,this.cropperSets.cut.x=(this.width-this.cropperSets.cut.width)/2,this.cropperSets.cut.y=(this.height-this.cropperSets.cut.height)/2,this.WeCropper=new o.default(this.cropperSets)},methods:{selectImg:function(){var e=this;uni.chooseImage({count:1,sizeType:["compressed"],sourceType:["album","camera"],success:function(t){e.WeCropper.pushOrign(t.tempFilePaths[0]),e.tmpFace=t.tempFilePaths[0]}})},touchStart:function(e){this.WeCropper.touchStart(e)},touchMove:function(e){this.WeCropper.touchMove(e)},touchEnd:function(e){this.WeCropper.touchEnd(e)},saveImg:function(){null!=this.tmpFace?(uni.showLoading({mask:!0,title:""}),this.WeCropper.getCropperImage((function(t){t?(e("log",t," at pages/walletPage/userInfoPage/userHeaderPage.vue:91"),uni.previewImage({urls:[t]})):e("log","\u83b7\u53d6\u56fe\u7247\u5730\u5740\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5"," at pages/walletPage/userInfoPage/userHeaderPage.vue:98"),uni.hideLoading()}))):uni.showToast({title:"\u8bf7\u9009\u62e9\u56fe\u7247",icon:"none"})}}};t.default=i}).call(this,n("0de9")["default"])},c1df:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var o={guiPopup:n("f719").default,guiIphoneBottom:n("9c96").default,guiModal:n("ee5c").default},a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("view",{staticClass:e._$s(0,"sc","flex-column-center"),attrs:{_i:0}},[o("view",{staticClass:e._$s(1,"sc","content-bg"),attrs:{_i:1}},[o("view",{staticClass:e._$s(2,"sc","notice"),attrs:{_i:2}}),o("view",{staticClass:e._$s(3,"sc","num-input-bg flex-row-center"),attrs:{_i:3}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.sellNum,expression:"sellNum"}],attrs:{_i:4},domProps:{value:e._$s(4,"v-model",e.sellNum)},on:{input:function(t){t.target.composing||(e.sellNum=t.target.value)}}})]),o("image",{staticClass:e._$s(5,"sc","link-img"),attrs:{src:e._$s(5,"a-src",n("c4c0")),_i:5}}),o("view",{staticClass:e._$s(6,"sc","money"),attrs:{_i:6}},[e._v(e._$s(6,"t0-0",e._s(""===e.sellNum?"\u91d1\u989d(CNY)":e.sellNum)))])]),o("view",{staticClass:e._$s(7,"sc","content-bg-2 flex-row-between"),attrs:{_i:7}},[e._$s(8,"i",0==e.selectedPayment.length)?o("view",{staticClass:e._$s(8,"sc","buy-type normal"),attrs:{_i:8},on:{click:e.payTypeOpen}}):e._l(e._$s(9,"f",{forItems:e.selectedPayment}),(function(t,n,a,i){return o("view",{key:e._$s(9,"f",{forIndex:a,key:"9-"+i}),staticClass:e._$s("9-"+i,"sc","buy-type"),attrs:{_i:"9-"+i},on:{click:e.payTypeOpen}},[e._$s("10-"+i,"i","\u94f6\u884c\u5361"==t)?o("view",{staticClass:e._$s("10-"+i,"sc"," yhk"),attrs:{_i:"10-"+i}},[e._v(e._$s("10-"+i,"t0-0",e._s(t)))]):e._e(),e._$s("11-"+i,"i","\u652f\u4ed8\u5b9d"==t)?o("view",{staticClass:e._$s("11-"+i,"sc"," zfb"),attrs:{_i:"11-"+i}},[e._v(e._$s("11-"+i,"t0-0",e._s(t)))]):e._e(),e._$s("12-"+i,"i","\u5fae\u4fe1"==t)?o("view",{staticClass:e._$s("12-"+i,"sc"," wx"),attrs:{_i:"12-"+i}},[e._v(e._$s("12-"+i,"t0-0",e._s(t)))]):e._e()])}))],2),o("view",{staticClass:e._$s(13,"sc","submitBtn"),attrs:{_i:13},on:{click:e.createPreOrder}}),o("gui-popup",{ref:"guipopup3",attrs:{position:"bottom",_i:14}},[o("view",{staticClass:e._$s(15,"sc","gui-relative gui-box-shadow gui-img-in gui-bg-white gui-bg"),attrs:{_i:15}},[o("checkbox-group",{staticClass:e._$s(16,"sc","gui-flex gui-columns"),attrs:{_i:16},on:{change:e.checkboxChange}},[e._l(e._$s(17,"f",{forItems:e.payment}),(function(t,n,a,i){return o("label",{key:e._$s(17,"f",{forIndex:a,key:t.name}),staticClass:e._$s("17-"+i,"sc","gui-check-item flex-row-between"),attrs:{_i:"17-"+i}},[o("text",{staticClass:e._$s("18-"+i,"sc","gui-text gui-primary-color"),attrs:{_i:"18-"+i}},[e._v(e._$s("18-"+i,"t0-0",e._s(t.name)))]),o("checkbox",{attrs:{value:e._$s("19-"+i,"a-value",t.name),checked:e._$s("19-"+i,"a-checked",t.checked),_i:"19-"+i}})])})),o("view",{staticClass:e._$s(20,"sc","choose-pay-type-btn"),attrs:{_i:20},on:{click:function(t){return e.payTypeClose()}}})],2),o("gui-iphone-bottom",{attrs:{_i:21}})],1)]),o("gui-modal",{ref:"guimodal1",attrs:{title:"\u8bf7\u8f93\u5165\u652f\u4ed8\u5bc6\u7801",_i:22}},[o("view",{staticClass:e._$s(23,"sc","gui-padding gui-bg-gray"),attrs:{_i:23},slot:"content"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.payPassword,expression:"payPassword"}],staticClass:e._$s(24,"sc","gui-form-input paypassword"),attrs:{_i:24},domProps:{value:e._$s(24,"v-model",e.payPassword)},on:{input:function(t){t.target.composing||(e.payPassword=t.target.value)}}})]),o("view",{staticClass:e._$s(25,"sc","gui-flex gui-rows gui-space-between"),attrs:{_i:25},slot:"btns"},[o("view",{staticClass:e._$s(26,"sc","modal-btns gui-flex1"),attrs:{_i:26}},[o("text",{staticClass:e._$s(27,"sc","modal-btns gui-color-gray"),attrs:{_i:27},on:{click:e.close1}})]),o("view",{staticClass:e._$s(28,"sc","modal-btns gui-flex1"),attrs:{_i:28}},[o("text",{staticClass:e._$s(29,"sc","modal-btns gui-color-blue"),attrs:{_i:29},on:{click:e.confirm1}})])])])],1)},i=[]},c361:function(e,t){e.exports="/static/img/wallet/kefu.png"},c3f1:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{Show:!1,filePayload:{}}},components:{},props:{message:{type:Object,default:function(){}},isMine:{type:Boolean,default:!0}},watch:{message:{handler:function(e){this.setData({filePayload:e.payload})},immediate:!0,deep:!0}},methods:{download:function(){this.setData({Show:!0})},downloadConfirm:function(){uni.downloadFile({url:this.filePayload.fileUrl,success:function(t){var n=t.tempFilePath;uni.openDocument({filePath:n,success:function(){e("log","\u6253\u5f00\u6587\u6863\u6210\u529f"," at components/tui-chat/message-elements/file-message/index.vue:66")}})}})},cancel:function(){this.setData({Show:!1})}}};t.default=n}).call(this,n("0de9")["default"])},c432:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{name:"",nickname:"",mobile:"",email:"",password:"",payPassword:"",code:"",vcodeBtnName:"\u53d1\u9001\u9a8c\u8bc1\u7801",countNum:120,countDownTimer:null}},methods:{back:function(){uni.navigateBack({})},actionToForgetPasswordPage:function(){uni.navigateTo({url:"forgetPasswordPage"})},obtainvalue:function(){if(""==this.nickname)return uni.showToast({title:"\u8bf7\u586b\u5199\u60a8\u7684\u6635\u79f0",icon:"none"}),!1;var e=/^[1][0-9]{10}$/;if(!e.test(this.mobile))return uni.showToast({title:"\u8bf7\u6b63\u786e\u586b\u5199\u624b\u673a\u53f7\u7801",icon:"none"}),!1;e=/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;if(!e.test(this.email))return uni.showToast({title:"\u8bf7\u6b63\u786e\u586b\u5199\u90ae\u7bb1",icon:"none"}),!1;e=/^[a-zA-Z0-9]{8,20}$/;if(!e.test(this.password))return uni.showToast({title:"\u8bf7\u586b\u5199\u81f3\u5c118\u4f4d\u767b\u5f55\u5bc6\u7801",icon:"none"}),!1;e=/^[0-9]{6}$/;return!!e.test(this.payPassword)||(uni.showToast({title:"\u8bf7\u586b\u51996\u4f4d\u6570\u5b57\u652f\u4ed8\u5bc6\u7801",icon:"none"}),!1)},getVCode:function(){var t=this,n=this.obtainvalue();if(0!=n&&("\u53d1\u9001\u9a8c\u8bc1\u7801"==this.vcodeBtnName||"\u91cd\u65b0\u53d1\u9001"==this.vcodeBtnName)){this.vcodeBtnName="\u53d1\u9001\u4e2d...";var o={mobile:this.mobile,email:this.email,nickname:this.nickname,name:this.name,payPassword:this.payPassword,password:this.password};e("log",o," at pages/loginPage/registPage.vue:158"),uni.PYRequest.sendCreateCode(o,(function(e){uni.showToast({title:"\u77ed\u4fe1\u5df2\u53d1\u9001\uff0c\u8bf7\u6ce8\u610f\u67e5\u6536",icon:"none"}),t.countNum=60,t.countDownTimer=setInterval((function(){t.countDown()}),1e3)}),(function(e){clearInterval(t.countDownTimer),t.vcodeBtnName="\u91cd\u65b0\u53d1\u9001"}),(function(e){}))}},countDown:function(){if(this.countNum<1)return clearInterval(this.countDownTimer),void(this.vcodeBtnName="\u91cd\u65b0\u53d1\u9001");this.countNum--,this.vcodeBtnName=this.countNum+"\u79d2\u91cd\u53d1"},submit:function(t){var n=this.obtainvalue();if(0!=n)if(""!=this.code){var o={mobile:this.mobile,email:this.email,nickname:this.nickname,name:this.name,payPassword:this.payPassword,password:this.password,code:this.code};e("log",o," at pages/loginPage/registPage.vue:224"),uni.PYRequest.register(o,(function(e){uni.navigateBack({})}),(function(e){}),(function(e){}))}else uni.showToast({title:"\u8bf7\u586b\u5199\u9a8c\u8bc1\u7801",icon:"none"})}}};t.default=n}).call(this,n("0de9")["default"])},c432e:function(e,t,n){"use strict";n.r(t);var o=n("13de");for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);var i,s,r,c,u=n("f0c5"),l=Object(u["a"])(o["default"],i,s,!1,null,null,null,!1,r,c);t["default"]=l.exports},c49c:function(e,t,n){"use strict";n.r(t);var o=n("fc38"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},c4c0:function(e,t){e.exports="/static/img/order/link.png"},c55f:function(e,t,n){"use strict";n.r(t);var o=n("f971"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},c56c:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("view",{staticClass:e._$s(0,"sc","flex-column-center"),attrs:{_i:0}},[o("image",{staticClass:e._$s(1,"sc","bg"),attrs:{src:e._$s(1,"a-src",n("6fdb")),_i:1}}),o("image",{staticClass:e._$s(2,"sc","logo"),attrs:{src:e._$s(2,"a-src",n("842c")),_i:2}}),o("view",{staticClass:e._$s(3,"sc","kefu"),attrs:{_i:3},on:{click:e.navigateToKefu}}),o("view",{staticClass:e._$s(4,"sc","info-bg"),attrs:{_i:4}},[o("form",{attrs:{_i:5},on:{submit:e.submit}},[o("view",{staticClass:e._$s(6,"sc","gui-border-b"),attrs:{_i:6}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.phoneno,expression:"phoneno"}],staticClass:e._$s(7,"sc","gui-form-input "),attrs:{_i:7},domProps:{value:e._$s(7,"v-model",e.phoneno)},on:{input:function(t){t.target.composing||(e.phoneno=t.target.value)}}})]),o("view",{staticClass:e._$s(8,"sc","gui-border-b"),attrs:{_i:8}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:e._$s(9,"sc","gui-form-input"),attrs:{_i:9},domProps:{value:e._$s(9,"v-model",e.password)},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),o("view",{staticClass:e._$s(10,"sc","gui-margin-top-large gui-flex gui-rows gui-space-between"),attrs:{_i:10}},[o("text",{staticClass:e._$s(11,"sc","forget-password"),attrs:{_i:11},on:{click:e.actionToForgetPasswordPage}})]),o("button",{staticClass:e._$s(12,"sc","loginbtn"),attrs:{_i:12}},[o("text",{staticClass:e._$s(13,"sc","gui-color-white gui-button-text"),attrs:{_i:13}})])])]),o("text",{staticClass:e._$s(14,"sc","regist"),attrs:{_i:14},on:{click:e.navigateToRegistPage}},[o("text",{staticClass:e._$s(15,"sc","regist-b"),attrs:{_i:15}})])])},i=[]},c5e3:function(e,t,n){"use strict";n.r(t);var o=n("9e7b"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},c6f9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseText=c,t.parseGroupSystemNotice=u,t.parseGroupTip=l,t.parseImage=d,t.parseVideo=f,t.parseAudio=p;var o=n("ec10");function a(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,r=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return r=e.done,e},e:function(e){c=!0,s=e},f:function(){try{r||null==n.return||n.return()}finally{if(c)throw s}}}}function i(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var r={MEMBER_JOIN:1,MEMBER_QUIT:2,MEMBER_KICKED_OUT:3,MEMBER_SET_ADMIN:4,MEMBER_CANCELED_ADMIN:5,GROUP_INFO_MODIFIED:6,MEMBER_INFO_MODIFIED:7};function c(e){var t=[],n=e.payload.text,a=-1,i=-1;while(""!==n)switch(a=n.indexOf("["),i=n.indexOf("]"),a){case 0:if(-1===i)t.push({name:"span",text:n}),n="";else{var s=n.slice(0,i+1);o.emojiMap[s]?(t.push({name:"img",src:o.emojiUrl+o.emojiMap[s]}),n=n.substring(i+1)):(t.push({name:"span",text:"["}),n=n.slice(1))}break;case-1:t.push({name:"span",text:n}),n="";break;default:t.push({name:"span",text:n.slice(0,a)}),n=n.substring(a);break}return t}function u(e){var t,n=e.payload,o=n.groupProfile.name||n.groupProfile.groupID,a=n.groupProfile.groupID;switch(n.operationType){case 1:t="".concat(n.operatorID," \u7533\u8bf7\u52a0\u5165\u7fa4\u7ec4\uff1a").concat(o,"\uff08\u7fa4ID:").concat(a,")");break;case 2:t="\u6210\u529f\u52a0\u5165\u7fa4\u7ec4\uff1a".concat(o," \uff08\u7fa4ID:").concat(a,")");break;case 3:t="\u7533\u8bf7\u52a0\u5165\u7fa4\u7ec4\uff1a".concat(o," \uff08\u7fa4ID:").concat(a,")\u88ab\u62d2\u7edd");break;case 4:t="\u88ab\u7ba1\u7406\u5458".concat(n.operatorID,"\u8e22\u51fa\u7fa4\u7ec4\uff1a").concat(o,"\uff08\u7fa4ID:").concat(a,")");break;case 5:t="\u7fa4\uff1a".concat(o," \uff08\u7fa4ID:").concat(a,")\u5df2\u88ab").concat(n.operatorID,"\u89e3\u6563");break;case 6:t="\u6211\uff08\u7528\u6237ID:".concat(n.operatorID,"\uff09\u6210\u529f\u521b\u5efa\u7fa4\u804a:").concat(o,"\uff08\u7fa4ID:").concat(a,")");break;case 7:t="\u7528\u6237ID\uff1a".concat(n.operatorID,"\u9080\u8bf7\u4f60\u52a0\u7fa4\uff1a").concat(o,"\uff08\u7fa4ID:").concat(a,")");break;case 8:t="\u4f60\u9000\u51fa\u7fa4\u7ec4\uff1a".concat(o,"\uff08\u7fa4ID:").concat(a,")");break;case 9:t="\u4f60\u88ab".concat(n.operatorID,"\u8bbe\u7f6e\u4e3a\u7fa4\uff1a").concat(o,"\uff08\u7fa4ID:").concat(a,")\u7684\u7ba1\u7406\u5458");break;case 10:t="\u4f60\u88ab".concat(n.operatorID,"\u64a4\u9500\u7fa4\uff1a").concat(o," \uff08\u7fa4ID:").concat(a,")\u7684\u7ba1\u7406\u5458\u8eab\u4efd");break;case 255:t="\u81ea\u5b9a\u4e49\u7fa4\u7cfb\u7edf\u901a\u77e5: ".concat(n.userDefinedField);break}return t}function l(e){var t,n,o=e.payload,i=e.nick||o.userIDList.join(",");switch(o.operationType){case r.MEMBER_JOIN:t="".concat(i," \u52a0\u5165\u7fa4\u804a");break;case r.MEMBER_QUIT:t="\u7fa4\u6210\u5458\u9000\u7fa4\uff1a".concat(i);break;case r.MEMBER_KICKED_OUT:t="\u7fa4\u6210\u5458\u88ab\u8e22\uff1a".concat(i);break;case r.MEMBER_SET_ADMIN:t="".concat(o.operatorID,"\u5c06 ").concat(i,"\u8bbe\u7f6e\u4e3a\u7ba1\u7406\u5458");break;case r.MEMBER_CANCELED_ADMIN:t="".concat(o.operatorID,"\u5c06 ").concat(i,"\u53d6\u6d88\u4f5c\u4e3a\u7ba1\u7406\u5458");break;case r.GROUP_INFO_MODIFIED:t="\u7fa4\u8d44\u6599\u4fee\u6539";break;case r.MEMBER_INFO_MODIFIED:var s,c=a(o.memberList);try{for(c.s();!(s=c.n()).done;){var u=s.value;t=u.muteTime>0?"\u7fa4\u6210\u5458\uff1a".concat(u.userID,"\u88ab\u7981\u8a00").concat(u.muteTime,"\u79d2"):"\u7fa4\u6210\u5458\uff1a".concat(u.userID,"\u88ab\u53d6\u6d88\u7981\u8a00")}}catch(l){c.e(l)}finally{c.f()}break;case 256:n=e.nick||e.from,"\u65e0\u5e94\u7b54"===o.text&&(n=o.userIDList.join(",")),t="\u7ed3\u675f\u7fa4\u804a"===o.text?"\u7ed3\u675f\u7fa4\u804a":'"'.concat(n,'" ').concat(o.text);break}return[{name:"groupTip",text:t}]}function d(e){var t=[{name:"image",src:e.payload.imageInfoArray[0].url}];return t}function f(e){var t={name:"video",src:e.payload.videoUrl};return t}function p(e){var t={name:"audio",src:e.payload.url,second:0===e.payload.second?1:e.payload.second};return t}},c7a3:function(e,t,n){"use strict";n.r(t);var o=n("dbd2"),a=n("c55f");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},c7d3:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("dabd"),a=(n("d9d4"),{data:function(){return{orderDetail:{},orderState:0,imgBase64:"",overTime:"",payImagePath:"",bankName:"",bankNumber:""}},onLoad:function(e){this.orderId=e.orderId,this.queryOrderById()},methods:{viewPayCode:function(){var e="";e="buy"==this.orderDetail.side?this.orderDetail.sellerParams:this.orderDetail.buyerParams,uni.navigateTo({url:"../orcodePage/orcodePage?code="+e})},copyOrderNumber:function(t){e("log","ddd"," at pages/orderPage/orderDetailPage2.vue:203"),uni.setClipboardData({data:t.toString(),success:function(){e("log","success"," at pages/orderPage/orderDetailPage2.vue:207"),uni.showToast({title:"\u590d\u5236\u6210\u529f"})},fail:function(t){e("log",t," at pages/orderPage/orderDetailPage2.vue:213")}})},queryOrderById:function(){var t=this,n={orderId:this.orderId};e("log",n," at pages/orderPage/orderDetailPage2.vue:225"),uni.PYRequest.queryOrderById(n,(function(n){if(t.orderDetail=n.data,e("log",t.orderDetail," at pages/orderPage/orderDetailPage2.vue:230"),"bank"==t.orderDetail.payMode)if("buy"==t.orderDetail.side){var o=t.orderDetail.sellerParams,a=o.split(",");t.bankName=a[0],t.bankNumber=a[1]}else{var i=t.orderDetail.buyerParams,s=i.split(",");t.bankName=s[0],t.bankNumber=s[1],e("log",i," at pages/orderPage/orderDetailPage2.vue:245")}0==t.orderDetail.orderState&&(t.overTime=t.orderDetail.remainSecs)}),(function(e){}),(function(e){}))},changeOrderStatePay:function(){if(""!=this.imgBase64){var t=this;uni.showModal({title:"\u63d0\u793a",content:"\u786e\u8ba4\u5df2\u652f\u4ed8\u5e76\u901a\u77e5\u5356\u5bb6\uff1f",success:function(n){n.confirm?(t.orderState=1,t.changeOrderState()):n.cancel&&e("log","\u7528\u6237\u70b9\u51fb\u53d6\u6d88"," at pages/orderPage/orderDetailPage2.vue:285")}})}else uni.showToast({title:"\u8bf7\u5148\u4e0a\u4f20\u652f\u4ed8\u622a\u56fe",icon:"none"})},changeOrderStateCancel:function(){var t=this;uni.showModal({title:"\u63d0\u793a",content:"\u60a8\u786e\u5b9a\u8981\u53d6\u6d88\u8ba2\u5355\u5417\uff1f",success:function(n){n.confirm?(t.orderState=3,t.changeOrderState()):n.cancel&&e("log","\u7528\u6237\u70b9\u51fb\u53d6\u6d88"," at pages/orderPage/orderDetailPage2.vue:308")}})},changeOrderStateFinish:function(){var t=this;uni.showModal({title:"\u63d0\u793a",content:"\u786e\u8ba4\u5230\u8d26\u5c06\u6253\u5e01\u7ed9\u5bf9\u65b9,\u4e0d\u53ef\u8ffd\u56de,\u8bf7\u52a1\u5fc5\u786e\u8ba4\u4e70\u5bb6\u5df2\u6253\u6b3e\u540e\u518d\u653e\u5e01\u3002",success:function(n){n.confirm?(t.orderState=2,t.changeOrderState()):n.cancel&&e("log","\u7528\u6237\u70b9\u51fb\u53d6\u6d88"," at pages/orderPage/orderDetailPage2.vue:326")}})},chooseImage:function(){var t=this;uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(n){e("log",n.tempFilePaths[0]," at pages/orderPage/orderDetailPage2.vue:340");var a=n.tempFilePaths[0];t.payImagePath=a,(0,o.pathToBase64)(a).then((function(e){t.imgBase64=e})).catch((function(t){e("error",t," at pages/orderPage/orderDetailPage2.vue:349")}))}})},changeOrderState:function(){var t={orderId:this.orderDetail.id,orderState:this.orderState,base64Img:""};e("log",t," at pages/orderPage/orderDetailPage2.vue:368"),1==this.orderState&&(t={orderId:this.orderDetail.id,orderState:this.orderState,base64Img:this.imgBase64},e("log",this.imgBase64," at pages/orderPage/orderDetailPage2.vue:375")),e("log",t," at pages/orderPage/orderDetailPage2.vue:378");var n=this;uni.PYRequest.changeOrderState(t,(function(e){n.queryOrderById()}),(function(e){}),(function(e){}))}}});t.default=a}).call(this,n("0de9")["default"])},c8ba:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(o){"object"===typeof window&&(n=window)}e.exports=n},c90e:function(e,t,n){"use strict";n.r(t);var o=n("4694"),a=n("8449");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},c96f:function(e,t,n){"use strict";n.r(t);var o=n("c56c"),a=n("2773");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},c9c7:function(e,t,n){"use strict";n.r(t);var o=n("d19f"),a=n("fb63");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,"63ef5e6a",null,!1,o["a"],s);t["default"]=c.exports},c9d0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={name:"gui-loadmore",props:{loadMoreText:{type:Array,default:function(){return["","\u66f4\u591a\u6570\u636e\u52a0\u8f7d\u4e2d","\u5df2\u52a0\u8f7d\u5168\u90e8\u6570\u636e","\u6682\u65e0\u6570\u636e"]}},loadMoreColor:{type:Array,default:function(){return["rgba(69, 90, 100, 0.6)","rgba(69, 90, 100, 0.6)","rgba(69, 90, 100, 0.8)","rgba(69, 90, 100, 0.6)"]}},loadMoreFontSize:{type:String,default:"26rpx"},status:{type:Number,default:0}},data:function(){return{loadMoreStatus:0,hidden:!1}},created:function(){this.loadMoreStatus=this.status},methods:{loading:function(){this.loadMoreStatus=1},stoploadmore:function(){this.loadMoreStatus=0},nomore:function(){this.loadMoreStatus=2},empty:function(){this.loadMoreStatus=3},hide:function(){this.hidden=!0},rotate360:function(){var e=this.$refs.loadingiconforloadmore;animation.transition(e,{styles:{transform:"rotate(7200deg)"},duration:2e4,timingFunction:"linear",needLayout:!1,delay:0})},tapme:function(){0==this.loadMoreStatus&&this.$emit("tapme")}}};t.default=o},ca30:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={data:function(){return{certNo:"",name:"",code:"",countNum:60,countDownTimer:null,vcodeBtnName:"\u53d1\u9001\u9a8c\u8bc1\u7801"}},methods:{countDown:function(){if(this.countNum<1)return clearInterval(this.countDownTimer),void(this.vcodeBtnName="\u91cd\u65b0\u53d1\u9001");this.countNum--,this.vcodeBtnName=this.countNum+"\u79d2\u91cd\u53d1"},checkParams:function(){return this.name?!(!this.certNo||15!=this.certNo.length&&18!=this.certNo.length)||(uni.showToast({title:"\u8bf7\u6b63\u786e\u586b\u5199\u8eab\u4efd\u8bc1\u53f7\u7801",icon:"none"}),!1):(uni.showToast({title:"\u59d3\u540d\u4e0d\u80fd\u4e3a\u7a7a",icon:"none"}),!1)},sendcode:function(){var e=this;if(this.checkParams()&&("\u53d1\u9001\u9a8c\u8bc1\u7801"==this.vcodeBtnName||"\u91cd\u65b0\u53d1\u9001"==this.vcodeBtnName)){this.vcodeBtnName="\u53d1\u9001\u4e2d...";var t={name:this.name,certNo:this.certNo};uni.PYRequest.sendCertSmsCode(t,(function(t){uni.showToast({title:"\u77ed\u4fe1\u9a8c\u8bc1\u7801\u5df2\u53d1\u9001\uff0c\u8bf7\u6ce8\u610f\u67e5\u6536",icon:"none"}),e.countNum=60,e.countDownTimer=setInterval((function(){e.countDown()}),1e3)}),(function(t){clearInterval(e.countDownTimer),e.vcodeBtnName="\u91cd\u65b0\u53d1\u9001"}),(function(e){}))}},confirmChange:function(){if(this.checkParams()){var e={name:this.name,certNo:this.certNo,code:this.code};uni.PYRequest.confirmCert(e,(function(e){setTimeout((function(){uni.navigateBack({})}),2e3)}),(function(e){}),(function(e){}))}}}};t.default=o},ca37:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;n("dabd");var o=n("a52f"),a={data:function(){return{qrcode:null,qrcodeSize:360,qrcodeContent:"",qrcodeBgColor:"#FFFFFF",qrcodeColor:"#000000",qrcodeId:"canvas"}},onLoad:function(t){var n=this;e("log",t.code," at pages/orcodePage/orcodePage.vue:36"),this.qrcodeContent=t.code,uni.showLoading({mask:!0,title:"loading ..."}),setTimeout((function(){n.qrcode=new o(n.qrcodeId,{text:n.qrcodeContent,width:uni.upx2px(n.qrcodeSize),height:uni.upx2px(n.qrcodeSize),colorDark:n.qrcodeColor,colorLight:n.qrcodeBgColor,correctLevel:o.CorrectLevel.H}),uni.hideLoading()}),1e3)},methods:{saveQrcode:function(){uni.canvasToTempFilePath({x:0,y:0,width:uni.upx2px(this.qrcodeSize),height:uni.upx2px(this.qrcodeSize),destWidth:uni.upx2px(this.qrcodeSize),destHeight:uni.upx2px(this.qrcodeSize),canvasId:this.qrcodeId,success:function(t){uni.saveImageToPhotosAlbum({filePath:t.tempFilePath,fail:function(t){e("log",t," at pages/orcodePage/orcodePage.vue:75")},success:function(){uni.showToast({title:"\u56fe\u7247\u5df2\u7ecf\u4fdd\u5b58\u5230\u60a8\u7684\u76f8\u518c~"})}})}})}}};t.default=a}).call(this,n("0de9")["default"])},cb8b:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("view",{class:e._$s(0,"c","audio-message "+(e.isMine?"my-audio":"")),attrs:{_i:0}},[o("image",{staticClass:e._$s(1,"sc","audio-icon"),attrs:{src:e._$s(1,"a-src",n("27d8")),_i:1}}),o("view",{staticClass:e._$s(2,"sc","audio "),style:e._$s(2,"s","width: 120rpx"),attrs:{_i:2},on:{click:e.handlePlayAudioMessage}},[e._v(e._$s(2,"t0-0",e._s('" '+e.message.payload.second)))])])},i=[]},cb93:function(e,t){e.exports="/static/img/wallet/card-nodata-bg.png"},cbaa:function(e,t,n){"use strict";n.r(t);var o=n("6a5f"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},ce0c:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{cardName:"\u8bf7\u9009\u62e9\u94f6\u884c\u540d\u79f0",cardNo:"",name:"",gender:[],genderIndex:0}},onLoad:function(t){e("log",t," at pages/myBankCardPage/addBankCard.vue:54"),this.name=t.name,this.bankList()},methods:{pickerChange:function(t){e("log",t," at pages/myBankCardPage/addBankCard.vue:61"),this.genderIndex=t.detail.value,this.cardName=this.gender[this.genderIndex]},submit:function(e){"\u8bf7\u9009\u62e9\u94f6\u884c\u540d\u79f0"!=this.cardName?""!=this.cardNo?this.uploadPayment():uni.showToast({title:"\u8bf7\u8f93\u5165\u94f6\u884c\u5361\u53f7",icon:"none"}):uni.showToast({title:"\u8bf7\u9009\u62e9\u94f6\u884c\u540d\u79f0",icon:"none"})},bankList:function(){var t=this,n={};e("log",n," at pages/myBankCardPage/addBankCard.vue:93"),uni.PYRequest.bankList(n,(function(e){t.gender=e.data}),(function(e){}),(function(e){}))},uploadPayment:function(){var t={payMode:"bank",params1:this.cardName,params2:this.cardNo};e("log",t," at pages/myBankCardPage/addBankCard.vue:114"),uni.PYRequest.uploadPayment(t,(function(e){setTimeout((function(){uni.navigateBack({})}),2e3)}),(function(e){}),(function(e){}))}}};t.default=n}).call(this,n("0de9")["default"])},cfa6:function(e,t){e.exports="/static/img/wallet/notice.png"},d08c:function(e,t){e.exports="/static/img/bankCard/bankcard-bg.png"},d096:function(e,t,n){"use strict";n.r(t);var o=n("947e"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},d16d:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={name:"gui-page",props:{fullPage:{type:Boolean,default:!1},customHeader:{type:Boolean,default:!1},headerSets:{type:Object,default:function(){return{height:44,zIndex:100}}},headerStyle:{type:String,default:"background-color:#FFFFFF;"},isHeaderSized:{type:Boolean,default:!0},statusBarStyle:{type:String,default:"background-color:#FFFFFF;"},customFooter:{type:Boolean,default:!1},footerSets:{type:Object,default:function(){return{height:100,zIndex:100,bg:"linear-gradient(to bottom, #FFFFFF,#FFFFFF)"}}},pendantSets:{type:Object,default:function(){return{width:"100rpx",right:"25rpx",bottom:"100rpx",zIndex:100}}},isLoading:{type:Boolean,default:!1},isSwitchPage:{type:Boolean,default:!1},iphoneXButtomStyle:{type:String,default:""},headerSizedStyle:{type:String,default:""},fixedTopZIndex:{type:Number,default:2},refresh:{type:Boolean,default:!1},refreshText:{type:Array,default:function(){return["\u7ee7\u7eed\u4e0b\u62c9\u5237\u65b0","\u677e\u5f00\u624b\u6307\u5f00\u59cb\u5237\u65b0","\u6570\u636e\u5237\u65b0\u4e2d","\u6570\u636e\u5df2\u5237\u65b0"]}},refreshBgColor:{type:Array,default:function(){return["#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF"]}},refreshColor:{type:Array,default:function(){return["#B31A51","#B31A51","#A31C58","#A31C58"]}},refreshFontSize:{type:String,default:"26rpx"},loadmore:{type:Boolean,default:!1},loadMoreText:{type:Array,default:function(){return["","\u66f4\u591a\u6570\u636e\u52a0\u8f7d\u4e2d","\u5df2\u52a0\u8f7d\u5168\u90e8\u6570\u636e"]}},loadMoreColor:{type:Array,default:function(){return["rgba(69, 90, 100, 0.6)","rgba(69, 90, 100, 0.6)","rgba(69, 90, 100, 0.8)"]}},loadMoreFontSize:{type:String,default:"26rpx"},apiLoadingStatus:{type:Boolean,default:!1}},data:function(){return{footerHeight:"100rpx",iphoneXButtomHeight:"0rpx",statusBarHeight:0,headerTapNumber:0,fixedTop:0,refreshBodyHeight:0,loadMoreTimer:null,fixedTopMargin:0,scrollTop:0,srcollTimer:null}},mounted:function(){var e=this;this.isLoading&&this.$refs.guipageloading.open(),(this.refresh||this.loadmore)&&this.getDomSize("guiPageBody",(function(t){e.refreshBodyHeight=t.height,e.getDomSize("guiPageFixedTop",(function(t){t.height&&(e.refreshBodyHeight-=t.height,e.fixedTopMargin=t.height)}))}))},watch:{isLoading:function(e){e?this.$refs.guipageloading.open():this.$refs.guipageloading.close()}},created:function(){this.footerHeight=this.footerSets.height+"rpx";try{var e=uni.getSystemInfoSync();if(e.model){e.model=e.model.replace(" ",""),e.model=e.model.toLowerCase(),this.statusBarHeight=e.statusBarHeight;var t=e.model.indexOf("iphonex");t>5&&(t=-1);var n=e.model.indexOf("iphone1");n>5&&(n=-1),-1==t&&-1==n||(this.iphoneXButtomHeight="50rpx",this.footerHeight=this.footerSets.height+50+"rpx")}this.iphoneXButtomHeight="0rpx",this.footerHeight=this.footerSets.height+"rpx",plus.navigator.isFullscreen()&&(this.statusBarHeight=0),this.isSwitchPage&&(this.iphoneXButtomHeight="0rpx",this.footerHeight=this.footerSets.height+"rpx"),this.customHeader?this.fixedTop=this.headerSets.height+this.statusBarHeight:this.fixedTop=0}catch(o){return null}},methods:{touchstart:function(e){return!!this.refresh&&(!this.apiLoadingStatus&&void this.$refs.guiPageRefresh.touchstart(e))},touchmove:function(e){return!!this.refresh&&(!this.apiLoadingStatus&&void this.$refs.guiPageRefresh.touchmove(e))},touchend:function(e){return!!this.refresh&&(!this.apiLoadingStatus&&void this.$refs.guiPageRefresh.touchend(e))},scroll:function(e){var t=this;null!=this.srcollTimer&&clearTimeout(this.srcollTimer),this.srcollTimer=setTimeout((function(){t.$refs.guiPageRefresh.scroll(e),t.$emit("scroll",e),t.scrollTop=e.detail.scrollTop}),100)},setScrollTop:function(e){this.scrollTop=e},endReload:function(){this.$refs.guiPageRefresh.endReload()},reload:function(){if(this.apiLoadingStatus)return!1;this.$emit("reload"),this.loadmore&&this.$refs.guipageloadmore.stoploadmore()},getDomSize:function(e,t){var n=this;setTimeout((function(){uni.createSelectorQuery().in(n).select("#"+e).boundingClientRect().exec((function(e){t(e[0])}))}),800)},stopfun:function(e){return e.stopPropagation(),null},headerTap:function(){var e=this;this.headerTapNumber++,this.headerTapNumber>=2?(this.$emit("gotoTop"),this.headerTapNumber=0):setTimeout((function(){e.headerTapNumber=0}),1e3)},loadmorefun:function(){var e=this;return!!this.loadmore&&(!this.apiLoadingStatus&&(null!=this.loadMoreTimer&&clearTimeout(this.loadMoreTimer),void(this.loadMoreTimer=setTimeout((function(){var t=e.$refs.guipageloadmore.loadMoreStatus;if(0!=t)return null;e.$refs.guipageloadmore.loading(),e.$emit("loadmorefun")}),80))))},stoploadmore:function(){this.$refs.guipageloadmore.stoploadmore()},nomore:function(){this.$refs.guipageloadmore.nomore()}}};t.default=o},d19f:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("scroll-view",{class:e._$s(0,"c",["gui-scroll-x",e.isCenter?"gui-nav-center":""]),style:e._$s(0,"s",{width:e.width+"rpx"}),attrs:{"scroll-with-animation":e._$s(0,"a-scroll-with-animation",e.scorllAnimation),"scroll-left":e._$s(0,"a-scroll-left",e.scrollLeft),_i:0}},e._l(e._$s(1,"f",{forItems:e.itemsIn}),(function(t,o,a,i){return n("view",{key:e._$s(1,"f",{forIndex:a,key:o}),staticClass:e._$s("1-"+i,"sc","gui-scroll-x-items gui-columns"),style:e._$s("1-"+i,"s",{width:0==e.size?"auto":e.size+"rpx",marginRight:e.margin+"rpx",paddingLeft:e.padding,paddingRight:e.padding}),attrs:{id:e._$s("1-"+i,"a-id","tab-"+o+e.random),"data-index":e._$s("1-"+i,"a-data-index",o),_i:"1-"+i},on:{click:e.change}},[n("text",{class:e._$s("2-"+i,"c",["gui-block-text","gui-border-box",e.currentIndexIn==o?"nav-active":""]),style:e._$s("2-"+i,"s",{color:e.currentIndexIn==o?e.activeColor:e.color,textAlign:e.textAlign,lineHeight:e.lineHeight,fontSize:e.currentIndexIn==o?e.activeFontSize:e.fontSize,fontWeight:e.currentIndexIn==o?e.activeFontWeight:""}),attrs:{_i:"2-"+i}},[e._v(e._$s("2-"+i,"t0-0",e._s(t.name)))]),n("view",{staticClass:e._$s("3-"+i,"sc","gui-flex gui-rows"),style:e._$s("3-"+i,"s",{justifyContent:e.activeDirection}),attrs:{_i:"3-"+i}},[e._$s("4-"+i,"i",e.currentIndexIn==o)?n("view",{staticClass:e._$s("4-"+i,"sc","nav-active-line"),class:e._$s("4-"+i,"c",[e.currentIndexIn==o&&e.animatie?"gui-nav-scale":""]),style:e._$s("4-"+i,"s",{backgroundImage:e.activeLineBg,width:e.activeLineWidth,height:e.activeLineHeight,borderRadius:e.activeLineRadius}),attrs:{_i:"4-"+i}}):e._e()])])})),0)},i=[]},d1c0:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("view",{staticClass:e._$s(0,"sc","flex-column-center"),attrs:{_i:0}},[o("image",{staticClass:e._$s(1,"sc","back"),attrs:{_i:1},on:{click:e.actiontoBack}}),o("image",{staticClass:e._$s(2,"sc","bg"),attrs:{src:e._$s(2,"a-src",n("6fdb")),_i:2}}),o("image",{staticClass:e._$s(3,"sc","logo"),attrs:{src:e._$s(3,"a-src",n("842c")),_i:3}}),o("view",{staticClass:e._$s(4,"sc","info-bg"),attrs:{_i:4}},[o("form",{attrs:{_i:5},on:{submit:e.submit}},[o("view",{staticClass:e._$s(6,"sc","gui-border-b"),attrs:{_i:6}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.phoneno,expression:"phoneno"}],staticClass:e._$s(7,"sc","gui-form-input "),attrs:{_i:7},domProps:{value:e._$s(7,"v-model",e.phoneno)},on:{input:function(t){t.target.composing||(e.phoneno=t.target.value)}}})]),o("view",{staticClass:e._$s(8,"sc","gui-border-b"),attrs:{_i:8}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:e._$s(9,"sc","gui-form-input"),attrs:{_i:9},domProps:{value:e._$s(9,"v-model",e.password)},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),o("view",{staticClass:e._$s(10,"sc","gui-border-b"),attrs:{_i:10}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.password2,expression:"password2"}],staticClass:e._$s(11,"sc","gui-form-input"),attrs:{_i:11},domProps:{value:e._$s(11,"v-model",e.password2)},on:{input:function(t){t.target.composing||(e.password2=t.target.value)}}})]),o("view",{staticClass:e._$s(12,"sc","gui-border-b gui-flex gui-rows gui-nowrap gui-align-items-center"),attrs:{_i:12}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],staticClass:e._$s(13,"sc","gui-form-input"),attrs:{_i:13},domProps:{value:e._$s(13,"v-model",e.code)},on:{input:function(t){t.target.composing||(e.code=t.target.value)}}}),o("text",{staticClass:e._$s(14,"sc","sendmsg gui-block-text gui-border-l gui-text-right"),attrs:{_i:14},on:{click:e.getVCode}},[e._v(e._$s(14,"t0-0",e._s(e.vcodeBtnName)))])]),o("button",{staticClass:e._$s(15,"sc","loginbtn"),attrs:{_i:15}},[o("text",{staticClass:e._$s(16,"sc","gui-color-white gui-button-text"),attrs:{_i:16}})])])])])},i=[]},d1cb:function(e,t){e.exports="/static/img/order/paycode.png"},d269:function(e,t,n){"use strict";n.r(t);var o=n("8d51"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},d2d7:function(e,t,n){"use strict";n.r(t);var o=n("9838"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},d378:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={data:function(){return{mailcode:"",newEmail:"",password:"",countNum:60,countDownTimer:null,vcodeBtnName:"\u53d1\u9001\u9a8c\u8bc1\u7801"}},methods:{countDown:function(){if(this.countNum<1)return clearInterval(this.countDownTimer),void(this.vcodeBtnName="\u91cd\u65b0\u53d1\u9001");this.countNum--,this.vcodeBtnName=this.countNum+"\u79d2\u91cd\u53d1"},checkParams:function(){var e=/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;return e.test(this.newEmail)?!(!this.password||this.password.length<8)||(uni.showToast({title:"\u8bf7\u6b63\u786e\u586b\u5199\u767b\u5f55\u5bc6\u7801",icon:"none"}),!1):(uni.showToast({title:"\u8bf7\u6b63\u786e\u586b\u5199\u90ae\u7bb1",icon:"none"}),!1)},sendcode:function(){var e=this;if(this.checkParams()&&("\u53d1\u9001\u9a8c\u8bc1\u7801"==this.vcodeBtnName||"\u91cd\u65b0\u53d1\u9001"==this.vcodeBtnName)){this.vcodeBtnName="\u53d1\u9001\u4e2d...";var t={email:this.newEmail,password:this.password};uni.PYRequest.sendEmailCode(t,(function(t){uni.showToast({title:"\u90ae\u7bb1\u9a8c\u8bc1\u7801\u5df2\u53d1\u9001\uff0c\u8bf7\u6ce8\u610f\u67e5\u6536",icon:"none"}),e.countNum=60,e.countDownTimer=setInterval((function(){e.countDown()}),1e3)}),(function(t){clearInterval(e.countDownTimer),e.vcodeBtnName="\u91cd\u65b0\u53d1\u9001"}),(function(e){}))}},confirmChange:function(){if(this.checkParams()&&this.mailcode){var e={email:this.newEmail,password:this.password,code:this.mailcode};uni.PYRequest.confirmChangeEmail(e,(function(e){setTimeout((function(){uni.navigateBack({})}),2e3)}),(function(e){}),(function(e){}))}}}};t.default=o},d41f:function(e,t){var n=0;function o(e){return i(a(s(e)))}function a(e){return c(u(r(e),8*e.length))}function i(e){for(var t,o=n?"0123456789ABCDEF":"0123456789abcdef",a="",i=0;i<e.length;i++)t=e.charCodeAt(i),a+=o.charAt(t>>>4&15)+o.charAt(15&t);return a}function s(e){var t,n,o="",a=-1;while(++a<e.length)t=e.charCodeAt(a),n=a+1<e.length?e.charCodeAt(a+1):0,55296<=t&&t<=56319&&56320<=n&&n<=57343&&(t=65536+((1023&t)<<10)+(1023&n),a++),t<=127?o+=String.fromCharCode(t):t<=2047?o+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?o+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(o+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return o}function r(e){for(var t=Array(e.length>>2),n=0;n<t.length;n++)t[n]=0;for(n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<n%32;return t}function c(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>n%32&255);return t}function u(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n=1732584193,o=-271733879,a=-1732584194,i=271733878,s=0;s<e.length;s+=16){var r=n,c=o,u=a,l=i;n=d(n,o,a,i,e[s+0],7,-680876936),i=d(i,n,o,a,e[s+1],12,-389564586),a=d(a,i,n,o,e[s+2],17,606105819),o=d(o,a,i,n,e[s+3],22,-1044525330),n=d(n,o,a,i,e[s+4],7,-176418897),i=d(i,n,o,a,e[s+5],12,1200080426),a=d(a,i,n,o,e[s+6],17,-1473231341),o=d(o,a,i,n,e[s+7],22,-45705983),n=d(n,o,a,i,e[s+8],7,1770035416),i=d(i,n,o,a,e[s+9],12,-1958414417),a=d(a,i,n,o,e[s+10],17,-42063),o=d(o,a,i,n,e[s+11],22,-1990404162),n=d(n,o,a,i,e[s+12],7,1804603682),i=d(i,n,o,a,e[s+13],12,-40341101),a=d(a,i,n,o,e[s+14],17,-1502002290),o=d(o,a,i,n,e[s+15],22,1236535329),n=f(n,o,a,i,e[s+1],5,-165796510),i=f(i,n,o,a,e[s+6],9,-1069501632),a=f(a,i,n,o,e[s+11],14,643717713),o=f(o,a,i,n,e[s+0],20,-373897302),n=f(n,o,a,i,e[s+5],5,-701558691),i=f(i,n,o,a,e[s+10],9,38016083),a=f(a,i,n,o,e[s+15],14,-660478335),o=f(o,a,i,n,e[s+4],20,-405537848),n=f(n,o,a,i,e[s+9],5,568446438),i=f(i,n,o,a,e[s+14],9,-1019803690),a=f(a,i,n,o,e[s+3],14,-187363961),o=f(o,a,i,n,e[s+8],20,1163531501),n=f(n,o,a,i,e[s+13],5,-1444681467),i=f(i,n,o,a,e[s+2],9,-51403784),a=f(a,i,n,o,e[s+7],14,1735328473),o=f(o,a,i,n,e[s+12],20,-1926607734),n=p(n,o,a,i,e[s+5],4,-378558),i=p(i,n,o,a,e[s+8],11,-2022574463),a=p(a,i,n,o,e[s+11],16,1839030562),o=p(o,a,i,n,e[s+14],23,-35309556),n=p(n,o,a,i,e[s+1],4,-1530992060),i=p(i,n,o,a,e[s+4],11,1272893353),a=p(a,i,n,o,e[s+7],16,-155497632),o=p(o,a,i,n,e[s+10],23,-1094730640),n=p(n,o,a,i,e[s+13],4,681279174),i=p(i,n,o,a,e[s+0],11,-358537222),a=p(a,i,n,o,e[s+3],16,-722521979),o=p(o,a,i,n,e[s+6],23,76029189),n=p(n,o,a,i,e[s+9],4,-640364487),i=p(i,n,o,a,e[s+12],11,-421815835),a=p(a,i,n,o,e[s+15],16,530742520),o=p(o,a,i,n,e[s+2],23,-995338651),n=g(n,o,a,i,e[s+0],6,-198630844),i=g(i,n,o,a,e[s+7],10,1126891415),a=g(a,i,n,o,e[s+14],15,-1416354905),o=g(o,a,i,n,e[s+5],21,-57434055),n=g(n,o,a,i,e[s+12],6,1700485571),i=g(i,n,o,a,e[s+3],10,-1894986606),a=g(a,i,n,o,e[s+10],15,-1051523),o=g(o,a,i,n,e[s+1],21,-2054922799),n=g(n,o,a,i,e[s+8],6,1873313359),i=g(i,n,o,a,e[s+15],10,-30611744),a=g(a,i,n,o,e[s+6],15,-1560198380),o=g(o,a,i,n,e[s+13],21,1309151649),n=g(n,o,a,i,e[s+4],6,-145523070),i=g(i,n,o,a,e[s+11],10,-1120210379),a=g(a,i,n,o,e[s+2],15,718787259),o=g(o,a,i,n,e[s+9],21,-343485551),n=h(n,r),o=h(o,c),a=h(a,u),i=h(i,l)}return Array(n,o,a,i)}function l(e,t,n,o,a,i){return h(m(h(h(t,e),h(o,i)),a),n)}function d(e,t,n,o,a,i,s){return l(t&n|~t&o,e,t,a,i,s)}function f(e,t,n,o,a,i,s){return l(t&o|n&~o,e,t,a,i,s)}function p(e,t,n,o,a,i,s){return l(t^n^o,e,t,a,i,s)}function g(e,t,n,o,a,i,s){return l(n^(t|~o),e,t,a,i,s)}function h(e,t){var n=(65535&e)+(65535&t),o=(e>>16)+(t>>16)+(n>>16);return o<<16|65535&n}function m(e,t){return e<<t|e>>>32-t}e.exports={md5:function(e){return o(e)}}},d52a:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n("0582")),a=r(n("30c3")),i=r(n("abda")),s=r(n("6205"));function r(e){return e&&e.__esModule?e:{default:e}}var c=new i.default({id:"iHWefAYqKznuxWjLnr",reportApiSpeed:!0});uni.$aegis=c;var u={globalData:{baseUrl:"https://api.opaynice.com/opay/appapi/"},onLaunch:function(){(0,s.default)(205),this.startMessageReceiver();var e=this;plus.push.addEventListener("click",(function(t){e.messageClicker(t)}),!1),this.initTim()},onShow:function(){},onHide:function(){e("log","App Hide"," at App.vue:47")},methods:{startMessageReceiver:function(){e("log","\u542f\u52a8\u6d88\u606f\u76d1\u542c\u5668"," at App.vue:52"),setInterval((function(){var e=uni.graceJS.getStorage("token");e&&uni.request({url:getApp().globalData.baseUrl+"register/getMessages",data:{},header:{Authorization:e},method:"GET",success:function(e){var t=e.data;if(0==t.code)for(var n=t.data,o=0;o<n.length;o++){var a=n[o],i={cover:!1,when:new Date,title:a.title};plus.push.createMessage(a.msg,a,i)}}})}),1e4)},messageClicker:function(t){e("log",t," at App.vue:86"),0==t.payload.type&&uni.switchTab({url:"/pages/orderPage/orderPage",fail:function(t){e("log",t," at App.vue:91")}})},initTim:function(){var e=getApp().globalData.baseUrl+"register/timConfig";uni.request({url:e,data:{},success:function(e){var t=parseInt(e.data.sdkid);uni.$aegis.reportEvent({name:"onLaunch",ext1:"onLaunch-success",ext2:"uniTuikitExternal",ext3:t}),uni.setStorageSync("TIM_".concat(t,"_isTUIKit"),!0),uni.$TUIKit=o.default.create({SDKAppID:t}),uni.$TUIKit.registerPlugin({"cos-wx-sdk":a.default}),uni.$TUIKitTIM=o.default,uni.$TUIKitEvent=o.default.EVENT,uni.$TUIKitVersion=o.default.VERSION,uni.$TUIKitTypes=o.default.TYPES}})}}};t.default=u}).call(this,n("0de9")["default"])},d659:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={name:"gui-switch-navigation",props:{width:{type:Number,default:690},isCenter:{type:Boolean,default:!1},currentIndex:{type:Number,default:0},size:{type:Number,default:120},fontSize:{type:String,default:"28rpx"},activeFontSize:{type:String,default:"28rpx"},items:{type:Array,default:function(){return[]}},activeLineBg:{type:String,default:"linear-gradient(to right, #66BFFF,#3388FF)"},color:{type:String,default:"#333333"},activeColor:{type:String,default:"#333333"},activeLineHeight:{type:String,default:"6rpx"},activeLineWidth:{type:String,default:"36rpx"},activeLineRadius:{type:String,default:"0rpx"},activeDirection:{type:String,default:""},activeFontWeight:{type:Number,default:700},margin:{type:Number,default:0},textAlign:{type:String,default:""},lineHeight:{type:String,default:"50rpx"},padding:{type:String,default:"0rpx"},animatie:{type:Boolean,default:!0},autoLeft:{type:String,default:""},scorllAnimation:{type:Boolean,default:!0}},data:function(){return{currentIndexIn:0,itemsIn:[],random:1,scrollLeft:0,scrllTimer:null}},created:function(){this.currentIndexIn=this.currentIndex,this.itemsIn=this.items,this.random=this.randomNum()},watch:{currentIndex:function(e){this.currentIndexIn=e},currentIndexIn:function(e){var t=this;this.isCenter||(null!=this.scrllTimer&&clearTimeout(this.scrllTimer),this.scrllTimer=setTimeout((function(){t.setLeft()}),200))},items:function(e){this.itemsIn=e}},methods:{change:function(e){this.currentIndexIn=e.currentTarget.dataset.index,this.$emit("change",Number(e.currentTarget.dataset.index))},randomNum:function(){return parseInt(1e3*Math.random())},setLeft:function(){if(!this.isCenter){var e=Number(this.margin)+Number(this.size),t=(Number(this.currentIndexIn)+1)*e-Number(this.width)/2-e/2,n=Number(this.itemsIn.length)*e-this.width;n=uni.upx2px(n-30),t=uni.upx2px(t),t>n&&(t=n),t<0&&(t=0),this.scrollLeft=t}}}};t.default=o},d74d:function(e,t){e.exports="/static/img/wallet/wallet_edit.png"},d754:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("view",{staticClass:e._$s(0,"sc","mask flex-center"),attrs:{_i:0}},[o("view",{staticClass:e._$s(1,"sc","content botton-radius"),attrs:{_i:1}},[o("view",{staticClass:e._$s(2,"sc","content-top"),attrs:{_i:2}},[o("text",{staticClass:e._$s(3,"sc","content-top-text"),attrs:{_i:3}},[e._v(e._$s(3,"t0-0",e._s(e.title)))]),o("image",{staticClass:e._$s(4,"sc","content-top"),attrs:{src:e._$s(4,"a-src",n("09fb")),_i:4}})]),o("view",{staticClass:e._$s(5,"sc","content-header"),attrs:{_i:5}}),o("view",{staticClass:e._$s(6,"sc","content-body"),attrs:{_i:6}},[o("view",{staticClass:e._$s(7,"sc","title"),attrs:{_i:7}},[o("text",[e._v(e._$s(8,"t0-0",e._s(e.subTitle)))])]),o("view",{staticClass:e._$s(9,"sc","body"),attrs:{_i:9}},[o("scroll-view",{staticClass:e._$s(10,"sc","box-des-scroll"),attrs:{_i:10}},[o("text",{staticClass:e._$s(11,"sc","box-des"),attrs:{_i:11}},[e._v(e._$s(11,"t0-0",e._s(e.contents)))])])]),o("view",{staticClass:e._$s(12,"sc","footer flex-center"),attrs:{_i:12}},[e._$s(13,"i",e.isiOS)?[o("button",{staticClass:e._$s(14,"sc","content-button"),attrs:{_i:14},on:{click:e.jumpToAppStore}},[e._v(e._$s(14,"t0-0",e._s(e.downLoadBtnTextiOS)))])]:[e._$s(16,"i",!e.downloadSuccess)?[e._$s(17,"i",e.downloading)?o("view",{staticClass:e._$s(17,"sc","progress-box flex-column"),attrs:{_i:17}},[o("progress",{staticClass:e._$s(18,"sc","progress"),attrs:{percent:e._$s(18,"a-percent",e.downLoadPercent),_i:18}}),o("view",[o("text",[e._v(e._$s(20,"t0-0",e._s(e.downLoadingText)))]),o("text",[e._v(e._$s(21,"t0-0",e._s(e.downloadedSize))+e._$s(21,"t0-1",e._s(e.packageFileSize)))])])]):o("button",{staticClass:e._$s(22,"sc","content-button"),attrs:{_i:22},on:{click:e.downloadPackage}},[e._v(e._$s(22,"t0-0",e._s(e.downLoadBtnText)))])]:e._$s(23,"e",e.downloadSuccess&&!e.installed)?o("button",{staticClass:e._$s(23,"sc","content-button"),attrs:{loading:e._$s(23,"a-loading",e.installing),disabled:e._$s(23,"a-disabled",e.installing),_i:23},on:{click:e.installPackage}},[e._v(e._$s(23,"t0-0",e._s(e.installing?"\u6b63\u5728\u5b89\u88c5\u2026\u2026":"\u4e0b\u8f7d\u5b8c\u6210\uff0c\u7acb\u5373\u5b89\u88c5")))]):e._e(),e._$s(24,"i",e.installed&&e.isWGT)?o("button",{staticClass:e._$s(24,"sc","content-button"),attrs:{_i:24},on:{click:e.restart}}):e._e()]],2)]),e._$s(25,"i",!e.is_mandatory)?o("image",{staticClass:e._$s(25,"sc","close-img"),attrs:{src:e._$s(25,"a-src",n("5293")),_i:25},on:{click:function(t){return t.stopPropagation(),e.closeUpdate(t)}}}):e._e()])])},i=[]},d7d2:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",{staticClass:e._$s(0,"sc","gui-padding"),attrs:{_i:0}},[n("view",{staticClass:e._$s(1,"sc","gui-margin-top-large"),attrs:{_i:1}}),n("form",{attrs:{_i:2},on:{submit:e.submit}},[n("view",{staticClass:e._$s(3,"sc","gui-form-item gui-border-b"),attrs:{_i:3}},[n("text",{staticClass:e._$s(4,"sc","gui-form-label"),attrs:{_i:4}}),n("view",{staticClass:e._$s(5,"sc","gui-form-body"),attrs:{_i:5}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:e._$s(6,"sc","gui-form-input"),attrs:{_i:6},domProps:{value:e._$s(6,"v-model",e.name)},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})])]),n("view",{staticClass:e._$s(7,"sc","gui-form-item gui-border-b"),attrs:{_i:7}},[n("text",{staticClass:e._$s(8,"sc","gui-form-label"),attrs:{_i:8}}),n("view",{staticClass:e._$s(9,"sc","gui-form-body"),attrs:{_i:9}},[n("picker",{attrs:{range:e._$s(10,"a-range",e.gender),_i:10},on:{change:e.pickerChange}},[n("view",{staticClass:e._$s(11,"sc","gui-flex gui-rows gui-nowrap gui-space-between gui-align-items-center"),attrs:{_i:11}},[n("text",{staticClass:e._$s(12,"sc","gui-text"),attrs:{_i:12}},[e._v(e._$s(12,"t0-0",e._s(e.cardName)))]),n("text",{staticClass:e._$s(13,"sc","gui-form-icon gui-icons gui-text-center gui-color-gray"),attrs:{_i:13}})])])])]),n("view",{staticClass:e._$s(14,"sc","gui-form-item gui-border-b"),attrs:{_i:14}},[n("text",{staticClass:e._$s(15,"sc","gui-form-label"),attrs:{_i:15}}),n("view",{staticClass:e._$s(16,"sc","gui-form-body"),attrs:{_i:16}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.cardNo,expression:"cardNo"}],staticClass:e._$s(17,"sc","gui-form-input"),attrs:{_i:17},domProps:{value:e._$s(17,"v-model",e.cardNo)},on:{input:function(t){t.target.composing||(e.cardNo=t.target.value)}}})])]),n("view",{staticClass:e._$s(18,"sc","gui-margin-top-large gui-flex gui-rows gui-nowrap gui-justify-content-end"),attrs:{_i:18}},[n("button",{staticClass:e._$s(19,"sc","gui-button submit-bg"),attrs:{_i:19}},[n("text",{staticClass:e._$s(20,"sc"," gui-icons gui-color-white gui-button-text"),attrs:{_i:20}})])]),n("view")])])},i=[]},d7dd:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={name:"UniListItem",emits:["click","switchChange"],props:{direction:{type:String,default:"row"},title:{type:String,default:""},note:{type:String,default:""},ellipsis:{type:[Number,String],default:0},disabled:{type:[Boolean,String],default:!1},clickable:{type:Boolean,default:!1},showArrow:{type:[Boolean,String],default:!1},link:{type:[Boolean,String],default:!1},to:{type:String,default:""},showBadge:{type:[Boolean,String],default:!1},showSwitch:{type:[Boolean,String],default:!1},switchChecked:{type:[Boolean,String],default:!1},badgeText:{type:String,default:""},badgeType:{type:String,default:"success"},rightText:{type:String,default:""},thumb:{type:String,default:""},thumbSize:{type:String,default:"base"},showExtraIcon:{type:[Boolean,String],default:!1},extraIcon:{type:Object,default:function(){return{type:"contact",color:"#000000",size:20}}},border:{type:Boolean,default:!0}},data:function(){return{isFirstChild:!1}},mounted:function(){this.list=this.getForm(),this.list&&(this.list.firstChildAppend||(this.list.firstChildAppend=!0,this.isFirstChild=!0))},methods:{getForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uniList",t=this.$parent,n=t.$options.name;while(n!==e){if(t=t.$parent,!t)return!1;n=t.$options.name}return t},onClick:function(){""===this.to?(this.clickable||this.link)&&this.$emit("click",{data:{}}):this.openPage()},onSwitchChange:function(e){this.$emit("switchChange",e.detail)},openPage:function(){-1!==["navigateTo","redirectTo","reLaunch","switchTab"].indexOf(this.link)?this.pageApi(this.link):this.pageApi("navigateTo")},pageApi:function(e){var t=this,n={url:this.to,success:function(e){t.$emit("click",{data:e})},fail:function(e){t.$emit("click",{data:e})}};switch(e){case"navigateTo":uni.navigateTo(n);break;case"redirectTo":uni.redirectTo(n);break;case"reLaunch":uni.reLaunch(n);break;case"switchTab":uni.switchTab(n);break;default:uni.navigateTo(n)}}}};t.default=o},d9d4:function(e,t,n){(function(t){n("d41f");e.exports={verson:function(){var e="5.0";t("log",e," at Grace/js/grace.js:7")},navigate:function(e,t,n,o,a){switch(t||(t="navigateTo"),n||(n=function(){}),o||(o=function(){}),a||(a=function(){}),t){case"navigateTo":uni.navigateTo({url:e,success:n,fail:o,complete:a});break;case"redirectTo":uni.redirectTo({url:e,success:n,fail:o,complete:a});break;case"switchTab":uni.switchTab({url:e,success:n,fail:o,complete:a});break;case"reLaunch":uni.reLaunch({url:e,success:n,fail:o,complete:a});break}},back:function(e){e||(e=1),uni.navigateBack({delta:e})},get:function(e,t,n,o,a){var i=this;a||(a=function(){i.msg("\u7f51\u7edc\u8bf7\u6c42\u5931\u8d25")}),n||(n={}),null!=this.__before&&(this.__before(),this.__before=null),uni.request({url:e,data:t,method:"GET",dataType:"json",header:n,success:function(e){o(e.data)},fail:a,complete:function(){null!=i.__after&&(i.__after(),i.__after=null)}})},post:function(e,t,n,o,a,i){var s=this;switch(i||(i=function(){s.msg("\u7f51\u7edc\u8bf7\u6c42\u5931\u8d25")}),o||(o={}),n||(n="form"),null!=this.__before&&(this.__before(),this.__before=null),n){case"form":o["content-type"]="application/x-www-form-urlencoded";break;case"json":o["content-type"]="application/json";break;default:o["content-type"]="application/x-www-form-urlencoded"}uni.request({url:e,data:t,method:"POST",dataType:"json",header:o,success:function(e){a(e.data)},fail:i,complete:function(){null!=s.__after&&(s.__after(),s.__after=null)}})},__before:null,setBefore:function(e){this.__before=e},__after:null,setAfter:function(e){this.__after=e},setStorage:function(e){try{for(var t in e)uni.setStorageSync(t,e[t]+"");return!0}catch(n){return!1}},getStorage:function(e){try{var t=uni.getStorageSync(e);return""!=t&&t}catch(n){return!1}},removeStorage:function(e){try{return uni.removeStorageSync(e),!0}catch(t){return!1}},clearStorage:function(){try{uni.clearStorageSync()}catch(e){}},chooseImgs:function(e,t,n,o){e.count||(e.count=1),e.sizeType||(e.sizeType=["original","compressed"]),e.sourceType||(e.sourceType=["album","camera"]),uni.chooseImage({count:e.count,sizeType:e.sizeType,sourceType:e.sourceType,success:function(e){t(e.tempFilePaths)},fail:function(e){n&&n(e)},complete:function(e){o&&o(e)}})},getImageInfo:function(e,t,n,o){uni.getImageInfo({src:e,success:function(e){t(e)},fail:function(e){n&&n(e)},complete:function(e){o&&o(e)}})},previewImage:function(e,t){uni.previewImage({urls:e,current:t})},system:function(){try{var e=uni.getSystemInfoSync();e.model||(e.model="no"),e.model=e.model.replace(" ",""),e.model=e.model.toLowerCase();var t=e.model.indexOf("iphonex");t>5&&(t=-1);var n=e.model.indexOf("iphone1");return n>5&&(n=-1),-1!=t||-1!=n?(e.iPhoneXBottomHeightRpx=50,e.iPhoneXBottomHeightPx=uni.upx2px(50)):(e.iPhoneXBottomHeightRpx=0,e.iPhoneXBottomHeightPx=0),e}catch(o){return null}},msg:function(e){uni.showToast({title:e,icon:"none"})},showLoading:function(e){uni.showLoading({title:e,mask:!0})},setNavBar:function(e){e.title&&uni.setNavigationBarTitle({title:e.title}),e.color&&uni.setNavigationBarColor({frontColor:e.color.frontColor,backgroundColor:e.color.backgroundColor,animation:{duration:400,timingFunc:"easeIn"}}),e.loading?uni.showNavigationBarLoading():uni.hideNavigationBarLoading()},select:function(e,t){uni.createSelectorQuery().select(e).boundingClientRect().exec((function(e){t(e[0])}))},selectAll:function(e,t){uni.createSelectorQuery().selectAll(e).boundingClientRect().exec((function(e){t(e[0])}))},arrayConcat:function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(arguments[t]);return e},arrayDrop:function(e,t,n){return t||(t=0),n||(n=1),e.splice(t,n),e},arrayIndexOf:function(e,t){for(var n=-1,o=0;o<e.length;o++)if(e[o]==t)return n=o,o;return n},arrayDifference:function(e,t){var n=new Set(t);return e.filter((function(e){return!n.has(e)}))},arrayShuffle:function(e){var t=e.length;while(t){var n=Math.floor(Math.random()*t--),o=[e[n],e[t]];e[t]=o[0],e[n]=o[1]}return e},arraySum:function(e){return e.reduce((function(e,t){return e+t}),0)},arrayAvg:function(e){return e.reduce((function(e,t){return e+t}),0)/e.length},arrayEach:function(e,t){for(var n=0;n<e.length;n++)t(e[n],n)},random:function(e,t){switch(arguments.length){case 1:return parseInt(Math.random()*e+1,10);case 2:return parseInt(Math.random()*(t-e+1)+e,10);default:return 0}},uuid:function(e){var t,n,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),a=[];if(e)for(t=0;t<e;t++)a[t]=o[0|Math.random()*o.length];else for(a[8]=a[13]=a[18]=a[23]="-",a[14]="4",t=0;t<36;t++)a[t]||(n=0|16*Math.random(),a[t]=o[19==t?3&n|8:n]);return a.join("")},now:function(e,t){var n=new Date,o=n.getTime();return t&&(o+=t),e||(e="number"),"number"==e?o:"str"==e?this.toDate(o/1e3,"str"):"array"==e?this.toDate(o/1e3,"array"):void 0},toDate:function(e,t){e=parseInt(e);var n=new Date;e<9e10?n.setTime(1e3*e):n.setTime(e);var o=n.getFullYear(),a=n.getMonth()+1;a=a<10?"0"+a:a;var i=n.getDate();i=i<10?"0"+i:i;var s=n.getHours();s=s<10?"0"+s:s;var r=n.getMinutes(),c=n.getSeconds();return r=r<10?"0"+r:r,c=c<10?"0"+c:c,"str"==t?o+"-"+a+"-"+i+" "+s+":"+r+":"+c:[o,a,i,s,r,c]},toTimeStamp:function(e){var n=/^([0-9]{4})-([0-9]{2})-([0-9]{2}) ([0-9]{2}):([0-9]{2}):([0-9]{2})$/,o=e.match(n);if(null==o){var a=/^([0-9]{2})\/([0-9]{2})\/([0-9]{4}) ([0-9]{2}):([0-9]{2}):([0-9]{2})$/,i=e.match(a);if(null==i)return t("log","\u65f6\u95f4\u683c\u5f0f\u9519\u8bef E001"," at Grace/js/grace.js:321"),!1;var s=parseInt(i[3]),r=parseInt(i[1]),c=parseInt(i[2]),u=parseInt(i[4]),l=parseInt(i[5]),d=parseInt(i[6])}else s=parseInt(o[1]),r=parseInt(o[2]),c=parseInt(o[3]),u=parseInt(o[4]),l=parseInt(o[5]),d=parseInt(o[6]);return s<1e3?(t("log","\u65f6\u95f4\u683c\u5f0f\u9519\u8bef"," at Grace/js/grace.js:336"),!1):u<0||u>24?(t("log","\u65f6\u95f4\u683c\u5f0f\u9519\u8bef"," at Grace/js/grace.js:337"),!1):l<0||l>60?(t("log","\u65f6\u95f4\u683c\u5f0f\u9519\u8bef"," at Grace/js/grace.js:338"),!1):d<0||d>60?(t("log","\u65f6\u95f4\u683c\u5f0f\u9519\u8bef"," at Grace/js/grace.js:339"),!1):Date.parse(new Date(s,r-1,c,u,l,d))},fromTime:function(e){e<9e10&&(e*=1e3);var t=(new Date).getTime()-e;return t=parseInt(t/1e3),t<180?"\u521a\u521a":t>=180&&t<3600?parseInt(t/60)+"\u5206\u949f\u524d":t>=3600&&t<86400?parseInt(t/3600)+"\u5c0f\u65f6\u524d":t>=86400&&t<2592e3?parseInt(t/86400)+"\u5929\u524d":this.toDate(e,"str")},delay:function(e,t){return setTimeout(t,e)},interval:function(e,t){return setInterval(t,e)},assign:function(e,t,n){e[t]=n},removeByKey:function(e,t){delete e[t]},each:function(e,t){for(var n in e)t(n,e[n])},isEmptyObj:function(e){return"{}"===JSON.stringify(e)},getRefs:function(e,t,n,o){var a=this;if(n>=40)return null;var i=t.$refs[e];i?o(i):(n++,setTimeout((function(){a.getRefs(e,t,n,o)}),100))}}}).call(this,n("0de9")["default"])},dab5:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={name:"basePageComponents",data:function(){return{}},props:{apiLoadingStatus:{type:Boolean},isLoading:{type:Boolean},loadmore:{type:Boolean,default:!0},canRefresh:{type:Boolean,default:!0}},methods:{getdata:function(e){this.$emit("loadmorefun")},reload:function(){this.$emit("reload")},endReload:function(){this.$refs.guipage.endReload()},stoploadmore:function(){e("log","stoploadmore"," at components/basePageComponents/basePageComponents.vue:59"),this.$refs.guipage.stoploadmore()},nomore:function(){this.$refs.guipage.nomore()},hide:function(){this.$refs.guipage.hide()}}};t.default=n}).call(this,n("0de9")["default"])},dabd:function(e,t,n){"use strict";(function(e){function n(e){if(0===e.indexOf("_www")||0===e.indexOf("_doc")||0===e.indexOf("_documents")||0===e.indexOf("_downloads"))return e;if(0===e.indexOf("file://"))return e;if(0===e.indexOf("/storage/emulated/0/"))return e;if(0===e.indexOf("/")){var t=plus.io.convertAbsoluteFileSystem(e);if(t!==e)return t;e=e.substr(1)}return"_www/"+e}function o(e){var t=e.split(",");return t[t.length-1]}Object.defineProperty(t,"__esModule",{value:!0}),t.pathToBase64=r,t.base64ToPath=c;var a=0;function i(){return Date.now()+String(a++)}function s(e,t){for(var n=e.split("."),o=t.split("."),a=!1,i=0;i<o.length;i++){var s=n[i]-o[i];if(0!==s){a=s>0;break}}return a}function r(t){return new Promise((function(o,a){if("object"===typeof window&&"document"in window){if("function"===typeof FileReader){var i=new XMLHttpRequest;return i.open("GET",t,!0),i.responseType="blob",i.onload=function(){if(200===this.status){var e=new FileReader;e.onload=function(e){o(e.target.result)},e.onerror=a,e.readAsDataURL(this.response)}},i.onerror=a,void i.send()}var s=document.createElement("canvas"),r=s.getContext("2d"),c=new Image;return c.onload=function(){s.width=c.width,s.height=c.height,r.drawImage(c,0,0),o(s.toDataURL()),s.height=s.width=0},c.onerror=a,void(c.src=t)}"object"!==typeof plus?"object"===typeof e&&e.canIUse("getFileSystemManager")?e.getFileSystemManager().readFile({filePath:t,encoding:"base64",success:function(e){o("data:image/png;base64,"+e.data)},fail:function(e){a(e)}}):a(new Error("not support")):plus.io.resolveLocalFileSystemURL(n(t),(function(e){e.file((function(e){var t=new plus.io.FileReader;t.onload=function(e){o(e.target.result)},t.onerror=function(e){a(e)},t.readAsDataURL(e)}),(function(e){a(e)}))}),(function(e){a(e)}))}))}function c(t){return new Promise((function(n,a){if("object"===typeof window&&"document"in window){t=t.split(",");var r=t[0].match(/:(.*?);/)[1],c=atob(t[1]),u=c.length,l=new Uint8Array(u);while(u--)l[u]=c.charCodeAt(u);return n((window.URL||window.webkitURL).createObjectURL(new Blob([l],{type:r})))}var d=t.split(",")[0].match(/data\:\S+\/(\S+);/);d?d=d[1]:a(new Error("base64 error"));var f=i()+"."+d;if("object"!==typeof plus)if("object"===typeof e&&e.canIUse("getFileSystemManager")){h=e.env.USER_DATA_PATH+"/"+f;e.getFileSystemManager().writeFile({filePath:h,data:o(t),encoding:"base64",success:function(){n(h)},fail:function(e){a(e)}})}else a(new Error("not support"));else{var p="_doc",g="uniapp_temp",h=p+"/"+g+"/"+f;if(!s("Android"===plus.os.name?"1.9.9.80627":"1.9.9.80472",plus.runtime.innerVersion))return void plus.io.resolveLocalFileSystemURL(p,(function(e){e.getDirectory(g,{create:!0,exclusive:!1},(function(e){e.getFile(f,{create:!0,exclusive:!1},(function(e){e.createWriter((function(e){e.onwrite=function(){n(h)},e.onerror=a,e.seek(0),e.writeAsBinary(o(t))}),a)}),a)}),a)}),a);var m=new plus.nativeObj.Bitmap(f);m.loadBase64Data(t,(function(){m.save(h,{},(function(){m.clear(),n(h)}),(function(e){m.clear(),a(e)}))}),(function(e){m.clear(),a(e)}))}}))}}).call(this,n("fe07")["default"])},db00:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",{staticClass:e._$s(0,"sc","TUI-faceMessage"),attrs:{_i:0},on:{click:e.previewImage}},[n("image",{staticClass:e._$s(1,"sc","face-message"),attrs:{src:e._$s(1,"a-src",e.renderDom.src),_i:1}})])},i=[]},dbd2:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",{staticClass:e._$s(0,"sc","flex-column-center"),attrs:{_i:0}},[n("view",{staticClass:e._$s(1,"sc","mobile-text flex-row-between flex-row-center"),attrs:{_i:1}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.mobile,expression:"mobile"}],attrs:{_i:2},domProps:{value:e._$s(2,"v-model",e.mobile)},on:{input:function(t){t.target.composing||(e.mobile=t.target.value)}}})]),n("view",{staticClass:e._$s(3,"sc","mobile-text flex-row-between flex-row-center"),attrs:{_i:3}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{_i:4},domProps:{value:e._$s(4,"v-model",e.password)},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),n("view",{staticClass:e._$s(5,"sc","mobile-text flex-row-between flex-row-center"),attrs:{_i:5}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],attrs:{_i:6},domProps:{value:e._$s(6,"v-model",e.code)},on:{input:function(t){t.target.composing||(e.code=t.target.value)}}}),n("view",{staticClass:e._$s(7,"sc","sendcode"),attrs:{_i:7},on:{click:function(t){return e.sendcode()}}},[e._v(e._$s(7,"t0-0",e._s(e.vcodeBtnName)))])]),n("view",{staticClass:e._$s(8,"sc","flex-row-center"),attrs:{_i:8}},[n("view",{staticClass:e._$s(9,"sc","submitBtn"),attrs:{_i:9},on:{click:function(t){return e.confirmChange()}}})])])},i=[]},dbf2:function(e,t,n){"use strict";n.r(t);var o=n("4826"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},ddc8:function(e,t,n){"use strict";n.r(t);var o=n("a446"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},df2b:function(e,t,n){"use strict";n.r(t);var o=n("3280"),a=n("ba26");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},e0b3:function(e,t,n){"use strict";n.r(t);var o=n("1b8d"),a=n("4b25");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},e1ae:function(e,t,n){"use strict";n.r(t);var o=n("4904"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},e30e:function(e,t){e.exports="/static/img/welcome/welcome-bg.png"},e3db:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("a34a"));a(n("6d3a"));function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n,o,a,i,s){try{var r=e[i](s),c=r.value}catch(u){return void n(u)}r.done?t(c):Promise.resolve(c).then(o,a)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var s=e.apply(t,n);function r(e){i(s,o,a,r,c,"next",e)}function c(e){i(s,o,a,r,c,"throw",e)}r(void 0)}))}}var r={data:function(){return{imgSrc:"../../static/img/bankCard/add.png",type:"",imageCode:"",path:"",isApp:!0,c:void 0}},onLoad:function(e){this.type=e.type},mounted:function(){},methods:{chooseImage:function(){var t=this;uni.scanCode({scanType:["qrCode"],success:function(n){e("log","\u6761\u7801\u7c7b\u578b\uff1a"+n.scanType," at pages/myBankCardPage/addAlipayPage.vue:74"),e("log","\u6761\u7801\u5185\u5bb9\uff1a"+n.result," at pages/myBankCardPage/addAlipayPage.vue:75"),t.imageCode=n.result,e("log",t.imageCode," at pages/myBankCardPage/addAlipayPage.vue:77")}})},analysisQrcode:function(e){var t=this;return new Promise((function(n){var o=new Image,a=t.c.getContext("2d");o.src=e,o.onload=function(){a.drawImage(o,0,0,600,600);var e=a.getImageData(0,0,600,600),t={qrcode:"",isqrcode:!0};t.qrcode=jsqr(e.data,e.width,e.height,{inversionAttempts:"dontInvert"}),null==t.qrcode&&(t.isqrcode=!1),n(t)}}))},beforeAvatarUpload:function(t){var n=this;return s(o.default.mark((function a(){var i;return o.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,n.analysisQrcode(t);case 2:i=o.sent,i.isqrcode?(i=i.qrcode.data,n.imageCode=i,n.imgSrc=t,e("log",i," at pages/myBankCardPage/addAlipayPage.vue:122")):(uni.showToast({title:"\u6ca1\u6709\u8bc6\u522b\u5230\u4e8c\u7ef4\u7801",icon:"none"}),e("log",""," at pages/myBankCardPage/addAlipayPage.vue:128"));case 4:case"end":return o.stop()}}),a)})))()},uploadPayment:function(){if(""!=this.imageCode){var t="alipay";"\u5fae\u4fe1"==this.type&&(t="wechat");var n={payMode:t,params1:this.imageCode,params2:""};e("log",n," at pages/myBankCardPage/addAlipayPage.vue:152"),uni.PYRequest.uploadPayment(n,(function(e){uni.showModal({title:"\u63d0\u793a",content:"\u60a8\u7684\u4e8c\u7ef4\u7801\u5df2\u7ecf\u63d0\u4ea4,\u8bf7\u7b49\u5f85\u7ba1\u7406\u5ba1\u6838\u901a\u8fc7\u540e\u65b9\u53ef\u4f7f\u7528",showCancel:!1,success:function(e){uni.navigateBack({})}})}),(function(e){}),(function(e){}))}else uni.showToast({title:"\u8bf7\u83b7\u53d6\u652f\u4ed8\u4e8c\u7ef4\u7801\u4fe1\u606f",icon:"none"})}}};t.default=r}).call(this,n("0de9")["default"])},e40b:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var o={guiRefresh:n("1819").default,guiLoadmore:n("29dc").default,guiPageLoading:n("2dcd").default},a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",{class:e._$s(0,"c",["gui-flex","gui-columns","gui-sbody",e.fullPage?"gui-flex1":"",e.refresh||e.loadmore?"gui-flex1":""]),attrs:{_i:0}},[e._$s(1,"i",e.customHeader)?n("view",{ref:"guiPageHeader",staticClass:e._$s(1,"sc","gui-header gui-transition-all"),style:e._$s(1,"s","height:"+(e.headerSets.height+e.statusBarHeight)+"px; z-index:"+e.headerSets.zIndex+";"+e.headerStyle),attrs:{id:"guiPageHeader",_i:1}},[n("view",{staticClass:e._$s(2,"sc","gui-page-status-bar"),style:e._$s(2,"s","height:"+e.statusBarHeight+"px;"+e.statusBarStyle),attrs:{_i:2}}),n("view",{staticClass:e._$s(3,"sc","gui-flex gui-columns gui-justify-content-center"),style:e._$s(3,"s",{height:e.headerSets.height+"px"}),attrs:{_i:3},on:{click:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"prevnet",void 0,t.key,void 0)?null:(t.stopPropagation(),e.headerTap(t))}}},[e._t("gHeader",null,{_i:4})],2)]):e._e(),e._$s(5,"i",e.customHeader&&e.isHeaderSized)?n("view",{style:e._$s(5,"s","height:"+(e.headerSets.height+e.statusBarHeight)+"px; "+e.headerSizedStyle+";"),attrs:{_i:5}}):e._e(),e._$s(6,"i",!e.refresh&&!e.loadmore)?n("view",{ref:"guiPageBody",staticClass:e._$s(6,"sc","gui-flex gui-columns"),class:e._$s(6,"c",[e.fullPage?"gui-flex1":""]),attrs:{id:"guiPageBody",_i:6}},[e._t("gBody",null,{_i:7})],2):e._e(),e._$s(8,"i",e.refresh||e.loadmore)?n("view",{ref:"guiPageBody",staticClass:e._$s(8,"sc","gui-flex gui-columns gui-flex1"),style:e._$s(8,"s",{marginTop:e.fixedTopMargin+"px",height:e.refreshBodyHeight+"px"}),attrs:{id:"guiPageBody",_i:8}},[n("scroll-view",{staticClass:e._$s(9,"sc","gui-relative"),style:e._$s(9,"s",{height:e.refreshBodyHeight+"px",opacity:e.refreshBodyHeight<1?0:1}),attrs:{"scroll-top":e._$s(9,"a-scroll-top",e.scrollTop),_i:9},on:{touchstart:e.touchstart,touchmove:e.touchmove,touchend:e.touchend,scroll:e.scroll,scrolltolower:e.loadmorefun}},[n("view",[n("gui-refresh",{ref:"guiPageRefresh",attrs:{refreshText:e.refreshText,refreshBgColor:e.refreshBgColor,refreshColor:e.refreshColor,refreshFontSize:e.refreshFontSize,_i:11},on:{reload:e.reload}})],1),e._t("gBody",null,{_i:12}),e._$s(13,"i",e.loadmore)?n("view",{staticClass:e._$s(13,"sc","gui-page-loadmore"),attrs:{_i:13}},[n("gui-loadmore",{ref:"guipageloadmore",attrs:{loadMoreText:e.loadMoreText,loadMoreColor:e.loadMoreColor,loadMoreFontSize:e.loadMoreFontSize,_i:14}})],1):e._e()],2)]):e._e(),e._$s(15,"i",e.customFooter)?n("view",{style:e._$s(15,"s",{height:e.footerHeight}),attrs:{_i:15}}):e._e(),e._$s(16,"i",e.customFooter)?n("view",{ref:"guiPageFooter",staticClass:e._$s(16,"sc","gui-page-footer gui-border-box"),class:e._$s(16,"c",[e.isSwitchPage?"gui-switch-page-footer":""]),style:e._$s(16,"s",{height:e.footerHeight,"background-image":e.footerSets.bg,"z-index":e.footerSets.zIndex}),attrs:{id:"guiPageFooter",_i:16}},[n("view",[e._t("gFooter",null,{_i:18})],2),n("view",{style:e._$s(19,"s","height:"+e.iphoneXButtomHeight+"; "+e.iphoneXButtomStyle),attrs:{_i:19}})]):e._e(),n("view",{staticClass:e._$s(20,"sc","gui-page-pendant"),style:e._$s(20,"s",{right:e.pendantSets.right,bottom:e.pendantSets.bottom,width:e.pendantSets.width,zIndex:e.pendantSets.zIndex}),attrs:{_i:20}},[e._t("gPendant",null,{_i:21})],2),n("view",{ref:"guiPageFixedTop",staticClass:e._$s(22,"sc","gui-page-fixed-top"),style:e._$s(22,"s",{top:e.fixedTop+"px",zIndex:e.fixedTopZIndex}),attrs:{id:"guiPageFixedTop",_i:22}},[e._t("gFixedTop",null,{_i:23})],2),n("gui-page-loading",{ref:"guipageloading",attrs:{_i:24}})],1)},i=[]},e626:function(e,t,n){"use strict";n.r(t);var o=n("2390"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},e6ac:function(e,t,n){"use strict";n.r(t);var o=n("fe65"),a=n("8d00");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},e716:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",[n("view",{staticClass:e._$s(1,"sc","group-information-box"),attrs:{_i:1},on:{show:e.getgroupProfile}},[n("view",{staticClass:e._$s(2,"sc","group-box"),attrs:{_i:2}},[n("text",{staticClass:e._$s(3,"sc","group-ID"),attrs:{_i:3}},[e._v(e._$s(3,"t0-0",e._s(e.conversation.groupProfile.groupID)))]),n("view",{attrs:{_i:4},on:{click:e.showMoreHandler}},[n("text",{staticClass:e._$s(5,"sc","group-member"),attrs:{_i:5}},[e._v(e._$s(5,"t0-0",e._s(e.conversation.groupProfile.memberCount)))]),e._$s(6,"i",e.notShow)?n("image",{staticClass:e._$s(6,"sc"," icon-right"),attrs:{_i:6}}):e._e(),e._$s(7,"i",e.isShow)?n("image",{staticClass:e._$s(7,"sc"," icon-right"),attrs:{_i:7}}):e._e()])]),n("view",{directives:[{name:"show",rawName:"v-show",value:e._$s(8,"v-show",!e.hidden),expression:"_$s(8,'v-show',!hidden)"}],staticClass:e._$s(8,"sc","showdetail"),attrs:{_i:8}},[e._l(e._$s(9,"f",{forItems:e.groupmemberprofile}),(function(t,o,a,i){return e._$s("9-"+i,"i",o<3)?n("view",{key:e._$s(9,"f",{forIndex:a,key:o}),staticClass:e._$s("9-"+i,"sc","box"),attrs:{"data-value":e._$s("9-"+i,"a-data-value",t),_i:"9-"+i}},[n("image",{staticClass:e._$s("10-"+i,"sc","profile-box"),attrs:{src:e._$s("10-"+i,"a-src",t.avatar||"https://sdk-web-1252463788.cos.ap-hongkong.myqcloud.com/component/TUIKit/assets/avatar_21.png"),_i:"10-"+i}}),n("text",{staticClass:e._$s("11-"+i,"sc","nick-box"),attrs:{_i:"11-"+i}},[e._v(e._$s("11-"+i,"t0-0",e._s(t.nick||t.userID)))])]):e._e()})),e._$s(12,"i",e.showMore)?n("view",{staticClass:e._$s(12,"sc","box"),attrs:{_i:12}},[n("image",{staticClass:e._$s(13,"sc","profile-box"),attrs:{_i:13},on:{click:e.showMoreMember}}),n("text",{staticClass:e._$s(14,"sc","nick-box"),attrs:{_i:14}})]):e._e(),n("view",{staticClass:e._$s(15,"sc","left-box"),attrs:{_i:15}},[e._$s(16,"i",e.addShow)?n("view",{staticClass:e._$s(16,"sc","box-group"),attrs:{_i:16}},[n("image",{staticClass:e._$s(17,"sc","addmember"),attrs:{_i:17},on:{click:e.addMember}}),n("text",{staticClass:e._$s(18,"sc","addmember-text"),attrs:{_i:18}})]):e._e(),n("view",{staticClass:e._$s(19,"sc","box-group-quit"),attrs:{_i:19}},[n("image",{staticClass:e._$s(20,"sc","quitgroup"),attrs:{_i:20},on:{click:function(t){return t.stopPropagation(),e.quitGroup(t)}}}),n("text",{staticClass:e._$s(21,"sc","quitgroup-text"),attrs:{_i:21}})])])],2)]),n("view",{staticClass:e._$s(22,"sc","pop-container"),attrs:{_i:22}},[e._$s(23,"i",e.popupToggle)?n("view",{staticClass:e._$s(23,"sc","popup-mask"),attrs:{_i:23},on:{click:function(t){return t.stopPropagation(),e.handleEditToggle(t)}}},[n("view",{staticClass:e._$s(24,"sc","pop-main"),attrs:{_i:24}},[n("view",{staticClass:e._$s(25,"sc","pop-main-header"),attrs:{_i:25}},[n("text",{staticClass:e._$s(26,"sc","group-member-text"),attrs:{_i:26}}),n("text",{staticClass:e._$s(27,"sc","close"),attrs:{_i:27},on:{click:function(t){return t.stopPropagation(),e.close(t)}}})]),n("view",{staticClass:e._$s(28,"sc","image-list"),attrs:{_i:28}},e._l(e._$s(29,"f",{forItems:e.groupmemberprofile}),(function(t,o,a,i){return n("view",{key:e._$s(29,"f",{forIndex:a,key:o}),staticClass:e._$s("29-"+i,"sc","image-nick-box"),attrs:{"data-value":e._$s("29-"+i,"a-data-value",t),_i:"29-"+i}},[n("image",{staticClass:e._$s("30-"+i,"sc","image-box"),attrs:{src:e._$s("30-"+i,"a-src",t.avatar||"https://sdk-web-1252463788.cos.ap-hongkong.myqcloud.com/component/TUIKit/assets/avatar_21.png"),_i:"30-"+i}}),n("text",{staticClass:e._$s("31-"+i,"sc","groupmembername"),attrs:{_i:"31-"+i}},[e._v(e._$s("31-"+i,"t0-0",e._s(t.nick||t.userID)))])])})),0)])]):e._e()]),n("view",{staticClass:e._$s(32,"sc","pop-container"),attrs:{_i:32}},[e._$s(33,"i",e.quitpopupToggle)?n("view",{staticClass:e._$s(33,"sc","quitpop-mask"),attrs:{_i:33}},[n("view",{staticClass:e._$s(34,"sc","quitpop"),attrs:{_i:34}},[n("view",{staticClass:e._$s(35,"sc"," quit-box"),attrs:{_i:35}},[n("view",{staticClass:e._$s(36,"sc","text-box"),attrs:{_i:36}},[n("text",{staticClass:e._$s(37,"sc","confirmQuitgroup-text"),attrs:{_i:37}})]),n("view",{staticClass:e._$s(38,"sc","text-box-qiut"),attrs:{_i:38},on:{click:function(t){return t.stopPropagation(),e.quitgroupConfirm(t)}}},[n("text",{staticClass:e._$s(39,"sc","quitgroup-confirm"),attrs:{_i:39}})]),n("view",{staticClass:e._$s(40,"sc","text-box-cancle"),attrs:{_i:40},on:{click:e.quitgroupAbandon}},[n("text",{staticClass:e._$s(41,"sc","quitgroup-abandon"),attrs:{_i:41}})])])])]):e._e()]),e._$s(42,"i",e.addpopupToggle)?n("view",{staticClass:e._$s(42,"sc","mask"),attrs:{_i:42}},[n("view",{staticClass:e._$s(43,"sc","popup"),attrs:{_i:43}},[n("view",{staticClass:e._$s(44,"sc","popup-main"),attrs:{_i:44}},[n("text"),n("input",{staticClass:e._$s(46,"sc","input-box"),attrs:{_i:46},on:{input:e.binduserIDInput}})]),n("view",{staticClass:e._$s(47,"sc","popup-footer"),attrs:{_i:47}},[n("button",{staticClass:e._$s(48,"sc"," popup-footer-button submit"),attrs:{_i:48},on:{click:function(t){return t.stopPropagation(),e.submit(t)}}}),n("button",{staticClass:e._$s(49,"sc","popup-footer-button cancel"),attrs:{_i:49},on:{click:function(t){return t.stopPropagation(),e.close(t)}}})])])]):e._e()])},i=[]},e739:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",{staticClass:e._$s(0,"sc","flex-column-center"),attrs:{_i:0}},[n("view",{staticClass:e._$s(1,"sc","cert-title flex-row-between flex-row-center"),attrs:{_i:1}}),n("view",{staticClass:e._$s(2,"sc","cert-text flex-row-between flex-row-center"),attrs:{_i:2}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{_i:3},domProps:{value:e._$s(3,"v-model",e.name)},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),n("view",{staticClass:e._$s(4,"sc","cert-text flex-row-between flex-row-center"),attrs:{_i:4}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.certNo,expression:"certNo"}],attrs:{_i:5},domProps:{value:e._$s(5,"v-model",e.certNo)},on:{input:function(t){t.target.composing||(e.certNo=t.target.value)}}})]),n("view",{staticClass:e._$s(6,"sc","flex-row-center"),attrs:{_i:6}},[n("view",{staticClass:e._$s(7,"sc","submitBtn"),attrs:{_i:7},on:{click:function(t){return e.confirmChange()}}})])])},i=[]},e8b3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={data:function(){return{scoreList:[1,2,3,4,5],score:5,comment:""}},components:{},props:{display:{type:Boolean,default:""}},watch:{display:{handler:function(e){},immediate:!0}},onPageShow:function(){this.setData({score:0,comment:""})},methods:{handleClose:function(){this.$emit("close",{detail:{key:"2"}})},handleScore:function(e){var t=e.currentTarget.dataset.score;t===this.score&&(t=0),this.setData({score:t})},bindTextAreaInput:function(e){this.setData({comment:e.detail.value})},sendMessage:function(){this.$emit("sendCustomMessage",{detail:{payload:{data:"evaluation",description:"\u5bf9\u672c\u6b21\u670d\u52a1\u7684\u8bc4\u4ef7",extension:JSON.stringify({score:this.score,comment:this.comment})}}}),this.setData({score:0,comment:""}),this.handleClose()}}};t.default=o},ea04:function(e,t,n){"use strict";n.r(t);var o=n("3842"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},eb08:function(e,t,n){"use strict";function o(e){var t=6e4,n=60*t,o=24*n,a=7*o,i=(new Date).getTime(),s=i-e,r="";if(!(s<0)){var c=s/t,u=s/n,l=s/o,d=s/a;if(d>=1&&d<=4)r=" ".concat(parseInt(d,10),"\u5468\u524d");else if(l>=1&&l<=6)r=" ".concat(parseInt(l,10),"\u5929\u524d");else if(u>=1&&u<=23)r=" ".concat(parseInt(u,10),"\u5c0f\u65f6\u524d");else if(c>=1&&c<=59)r=" ".concat(parseInt(c,10),"\u5206\u949f\u524d");else if(s>=0&&s<=t)r="\u521a\u521a";else{var f=new Date;f.setTime(e);var p=f.getFullYear(),g=f.getMonth()+1<10?"0".concat(f.getMonth()+1):f.getMonth()+1,h=f.getDate()<10?"0".concat(f.getDate()):f.getDate();r="".concat(p,"-").concat(g,"-").concat(h)}return r}}function a(e){var t,n,o,a,i=e;return i>=3600?(n=parseInt(i/3600)<10?"0".concat(parseInt(i/3600)):parseInt(i/3600),o=parseInt(i%60/60)<10?"0".concat(parseInt(i%60/60)):parseInt(i%60/60),a=i%3600<10?"0".concat(i%3600):i%3600,a>60&&(o=parseInt(a/60)<10?"0".concat(parseInt(a/60)):parseInt(a/60),a=a%60<10?"0".concat(a%60):a%60),t="".concat(n,":").concat(o,":").concat(a)):i>=60&&i<3600?(o=parseInt(i/60)<10?"0".concat(parseInt(i/60)):parseInt(i/60),a=i%60<10?"0".concat(i%60):i%60,t="00:".concat(o,":").concat(a)):i<60&&(a=i<10?"0".concat(i):i,t="00:00:".concat(a)),t}Object.defineProperty(t,"__esModule",{value:!0}),t.caculateTimeago=o,t.formateTime=a},eb10:function(e,t,n){"use strict";n.r(t);var o=n("f829"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},ec10:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.emojiName=t.emojiMap=t.emojiUrl=void 0;var o="https://web.sdk.qcloud.com/im/assets/emoji/";t.emojiUrl=o;var a={"[NO]":"emoji_0@2x.png","[OK]":"emoji_1@2x.png","[\u4e0b\u96e8]":"emoji_2@2x.png","[\u4e48\u4e48\u54d2]":"emoji_3@2x.png","[\u4e52\u4e53]":"emoji_4@2x.png","[\u4fbf\u4fbf]":"emoji_5@2x.png","[\u4fe1\u5c01]":"emoji_6@2x.png","[\u5077\u7b11]":"emoji_7@2x.png","[\u50b2\u6162]":"emoji_8@2x.png","[\u518d\u89c1]":"emoji_9@2x.png","[\u51b7\u6c57]":"emoji_10@2x.png","[\u51cb\u8c22]":"emoji_11@2x.png","[\u5200]":"emoji_12@2x.png","[\u5220\u9664]":"emoji_13@2x.png","[\u52fe\u5f15]":"emoji_14@2x.png","[\u53d1\u5446]":"emoji_15@2x.png","[\u53d1\u6296]":"emoji_16@2x.png","[\u53ef\u601c]":"emoji_17@2x.png","[\u53ef\u7231]":"emoji_18@2x.png","[\u53f3\u54fc\u54fc]":"emoji_19@2x.png","[\u53f3\u592a\u6781]":"emoji_20@2x.png","[\u53f3\u8f66\u5934]":"emoji_21@2x.png","[\u5410]":"emoji_22@2x.png","[\u5413]":"emoji_23@2x.png","[\u5492\u9a82]":"emoji_24@2x.png","[\u5496\u5561]":"emoji_25@2x.png","[\u5564\u9152]":"emoji_26@2x.png","[\u5618]":"emoji_27@2x.png","[\u56de\u5934]":"emoji_28@2x.png","[\u56f0]":"emoji_29@2x.png","[\u574f\u7b11]":"emoji_30@2x.png","[\u591a\u4e91]":"emoji_31@2x.png","[\u5927\u5175]":"emoji_32@2x.png","[\u5927\u54ed]":"emoji_33@2x.png","[\u592a\u9633]":"emoji_34@2x.png","[\u594b\u6597]":"emoji_35@2x.png","[\u5976\u74f6]":"emoji_36@2x.png","[\u59d4\u5c48]":"emoji_37@2x.png","[\u5bb3\u7f9e]":"emoji_38@2x.png","[\u5c34\u5c2c]":"emoji_39@2x.png","[\u5de6\u54fc\u54fc]":"emoji_40@2x.png","[\u5de6\u592a\u6781]":"emoji_41@2x.png","[\u5de6\u8f66\u5934]":"emoji_42@2x.png","[\u5dee\u52b2]":"emoji_43@2x.png","[\u5f31]":"emoji_44@2x.png","[\u5f3a]":"emoji_45@2x.png","[\u5f69\u5e26]":"emoji_46@2x.png","[\u5f69\u7403]":"emoji_47@2x.png","[\u5f97\u610f]":"emoji_48@2x.png","[\u5fae\u7b11]":"emoji_49@2x.png","[\u5fc3\u788e\u4e86]":"emoji_50@2x.png","[\u5feb\u54ed\u4e86]":"emoji_51@2x.png","[\u6004\u706b]":"emoji_52@2x.png","[\u6012]":"emoji_53@2x.png","[\u60ca\u6050]":"emoji_54@2x.png","[\u60ca\u8bb6]":"emoji_55@2x.png","[\u61a8\u7b11]":"emoji_56@2x.png","[\u624b\u67aa]":"emoji_57@2x.png","[\u6253\u54c8\u6b20]":"emoji_58@2x.png","[\u6293\u72c2]":"emoji_59@2x.png","[\u6298\u78e8]":"emoji_60@2x.png","[\u62a0\u9f3b]":"emoji_61@2x.png","[\u62b1\u62b1]":"emoji_62@2x.png","[\u62b1\u62f3]":"emoji_63@2x.png","[\u62f3\u5934]":"emoji_64@2x.png","[\u6325\u624b]":"emoji_65@2x.png","[\u63e1\u624b]":"emoji_66@2x.png","[\u6487\u5634]":"emoji_67@2x.png","[\u64e6\u6c57]":"emoji_68@2x.png","[\u6572\u6253]":"emoji_69@2x.png","[\u6655]":"emoji_70@2x.png","[\u6708\u4eae]":"emoji_71@2x.png","[\u68d2\u68d2\u7cd6]":"emoji_72@2x.png","[\u6c7d\u8f66]":"emoji_73@2x.png","[\u6c99\u53d1]":"emoji_74@2x.png","[\u6d41\u6c57]":"emoji_75@2x.png","[\u6d41\u6cea]":"emoji_76@2x.png","[\u6fc0\u52a8]":"emoji_77@2x.png","[\u706f\u6ce1]":"emoji_78@2x.png","[\u70b8\u5f39]":"emoji_79@2x.png","[\u718a\u732b]":"emoji_80@2x.png","[\u7206\u7b4b]":"emoji_81@2x.png","[\u7231\u4f60]":"emoji_82@2x.png","[\u7231\u5fc3]":"emoji_83@2x.png","[\u7231\u60c5]":"emoji_84@2x.png","[\u732a\u5934]":"emoji_85@2x.png","[\u732b\u54aa]":"emoji_86@2x.png","[\u732e\u543b]":"emoji_87@2x.png","[\u73ab\u7470]":"emoji_88@2x.png","[\u74e2\u866b]":"emoji_89@2x.png","[\u7591\u95ee]":"emoji_90@2x.png","[\u767d\u773c]":"emoji_91@2x.png","[\u76ae\u7403]":"emoji_92@2x.png","[\u7761\u89c9]":"emoji_93@2x.png","[\u78d5\u5934]":"emoji_94@2x.png","[\u793a\u7231]":"emoji_95@2x.png","[\u793c\u54c1\u888b]":"emoji_96@2x.png","[\u793c\u7269]":"emoji_97@2x.png","[\u7bee\u7403]":"emoji_98@2x.png","[\u7c73\u996d]":"emoji_99@2x.png","[\u7cd7\u5927\u4e86]":"emoji_100@2x.png","[\u7ea2\u53cc\u559c]":"emoji_101@2x.png","[\u7ea2\u706f\u7b3c]":"emoji_102@2x.png","[\u7eb8\u5dfe]":"emoji_103@2x.png","[\u80dc\u5229]":"emoji_104@2x.png","[\u8272]":"emoji_105@2x.png","[\u836f]":"emoji_106@2x.png","[\u83dc\u5200]":"emoji_107@2x.png","[\u86cb\u7cd5]":"emoji_108@2x.png","[\u8721\u70db]":"emoji_109@2x.png","[\u8857\u821e]":"emoji_110@2x.png","[\u8870]":"emoji_111@2x.png","[\u897f\u74dc]":"emoji_112@2x.png","[\u8c03\u76ae]":"emoji_113@2x.png","[\u8c61\u68cb]":"emoji_114@2x.png","[\u8df3\u7ef3]":"emoji_115@2x.png","[\u8df3\u8df3]":"emoji_116@2x.png","[\u8f66\u53a2]":"emoji_117@2x.png","[\u8f6c\u5708]":"emoji_118@2x.png","[\u9119\u89c6]":"emoji_119@2x.png","[\u9177]":"emoji_120@2x.png","[\u949e\u7968]":"emoji_121@2x.png","[\u94bb\u6212]":"emoji_122@2x.png","[\u95ea\u7535]":"emoji_123@2x.png","[\u95ed\u5634]":"emoji_124@2x.png","[\u95f9\u949f]":"emoji_125@2x.png","[\u9634\u9669]":"emoji_126@2x.png","[\u96be\u8fc7]":"emoji_127@2x.png","[\u96e8\u4f1e]":"emoji_128@2x.png","[\u9752\u86d9]":"emoji_129@2x.png","[\u9762\u6761]":"emoji_130@2x.png","[\u97ad\u70ae]":"emoji_131@2x.png","[\u98ce\u8f66]":"emoji_132@2x.png","[\u98de\u543b]":"emoji_133@2x.png","[\u98de\u673a]":"emoji_134@2x.png","[\u9965\u997f]":"emoji_135@2x.png","[\u9999\u8549]":"emoji_136@2x.png","[\u9ab7\u9ac5]":"emoji_137@2x.png","[\u9ea6\u514b\u98ce]":"emoji_138@2x.png","[\u9ebb\u5c06]":"emoji_139@2x.png","[\u9f13\u638c]":"emoji_140@2x.png","[\u9f87\u7259]":"emoji_141@2x.png"};t.emojiMap=a;var i=["[\u9f87\u7259]","[\u8c03\u76ae]","[\u6d41\u6c57]","[\u5077\u7b11]","[\u518d\u89c1]","[\u6572\u6253]","[\u64e6\u6c57]","[\u732a\u5934]","[\u73ab\u7470]","[\u6d41\u6cea]","[\u5927\u54ed]","[\u5618]","[\u9177]","[\u6293\u72c2]","[\u59d4\u5c48]","[\u4fbf\u4fbf]","[\u70b8\u5f39]","[\u83dc\u5200]","[\u53ef\u7231]","[\u8272]","[\u5bb3\u7f9e]","[\u5f97\u610f]","[\u5410]","[\u5fae\u7b11]","[\u6012]","[\u5c34\u5c2c]","[\u60ca\u6050]","[\u51b7\u6c57]","[\u7231\u5fc3]","[\u793a\u7231]","[\u767d\u773c]","[\u50b2\u6162]","[\u96be\u8fc7]","[\u60ca\u8bb6]","[\u7591\u95ee]","[\u56f0]","[\u4e48\u4e48\u54d2]","[\u61a8\u7b11]","[\u7231\u60c5]","[\u8870]","[\u6487\u5634]","[\u9634\u9669]","[\u594b\u6597]","[\u53d1\u5446]","[\u53f3\u54fc\u54fc]","[\u62b1\u62b1]","[\u574f\u7b11]","[\u98de\u543b]","[\u9119\u89c6]","[\u6655]","[\u5927\u5175]","[\u53ef\u601c]","[\u5f3a]","[\u5f31]","[\u63e1\u624b]","[\u80dc\u5229]","[\u62b1\u62f3]","[\u51cb\u8c22]","[\u7c73\u996d]","[\u86cb\u7cd5]","[\u897f\u74dc]","[\u5564\u9152]","[\u74e2\u866b]","[\u52fe\u5f15]","[OK]","[\u7231\u4f60]","[\u5496\u5561]","[\u6708\u4eae]","[\u5200]","[\u53d1\u6296]","[\u5dee\u52b2]","[\u62f3\u5934]","[\u5fc3\u788e\u4e86]","[\u592a\u9633]","[\u793c\u7269]","[\u76ae\u7403]","[\u9ab7\u9ac5]","[\u6325\u624b]","[\u95ea\u7535]","[\u9965\u997f]","[\u56f0]","[\u5492\u9a82]","[\u6298\u78e8]","[\u62a0\u9f3b]","[\u9f13\u638c]","[\u7cd7\u5927\u4e86]","[\u5de6\u54fc\u54fc]","[\u6253\u54c8\u6b20]","[\u5feb\u54ed\u4e86]","[\u5413]","[\u7bee\u7403]","[\u4e52\u4e53]","[NO]","[\u8df3\u8df3]","[\u6004\u706b]","[\u8f6c\u5708]","[\u78d5\u5934]","[\u56de\u5934]","[\u8df3\u7ef3]","[\u6fc0\u52a8]","[\u8857\u821e]","[\u732e\u543b]","[\u5de6\u592a\u6781]","[\u53f3\u592a\u6781]","[\u95ed\u5634]","[\u732b\u54aa]","[\u7ea2\u53cc\u559c]","[\u97ad\u70ae]","[\u7ea2\u706f\u7b3c]","[\u9ebb\u5c06]","[\u9ea6\u514b\u98ce]","[\u793c\u54c1\u888b]","[\u4fe1\u5c01]","[\u8c61\u68cb]","[\u5f69\u5e26]","[\u8721\u70db]","[\u7206\u7b4b]","[\u68d2\u68d2\u7cd6]","[\u5976\u74f6]","[\u9762\u6761]","[\u9999\u8549]","[\u98de\u673a]","[\u5de6\u8f66\u5934]","[\u8f66\u53a2]","[\u53f3\u8f66\u5934]","[\u591a\u4e91]","[\u4e0b\u96e8]","[\u949e\u7968]","[\u718a\u732b]","[\u706f\u6ce1]","[\u98ce\u8f66]","[\u95f9\u949f]","[\u96e8\u4f1e]","[\u5f69\u7403]","[\u94bb\u6212]","[\u6c99\u53d1]","[\u7eb8\u5dfe]","[\u624b\u67aa]","[\u9752\u86d9]"];t.emojiName=i},ec4d:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={data:function(){return{page:0,recordList:[]}},onLoad:function(){this.page=0,this.recordList=[],this.query()},methods:{onPullDownRefresh:function(){this.page=0,this.recordList=[],this.query()},onReachBottom:function(){this.query()},query:function(){var e=this;uni.PYRequest.queryUserRecord({page:this.page},(function(t){for(var n=0;n<t.data.length;n++){var o=t.data[n];t.data[n].amount>0?t.data[n].title="+"+t.data[n].amount:t.data[n].title=t.data[n].amount+"";var a=o.recordType;0==a?t.data[n].rightTxt="\u51fa\u552e\u7ed9"+o.targetUser:1==a?t.data[n].rightTxt="\u4ece"+o.targetUser+"\u8d2d\u4e70":2==a&&(t.data[n].rightTxt=o.targetUser),e.recordList.push(t.data[n])}}),(function(e){}),(function(e){})),uni.stopPullDownRefresh(),this.page++}}};t.default=o},ec7c:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("8675"));function a(e){return e&&e.__esModule?e:{default:e}}var i={data:function(){return{isPlay:!1,videoIcon:o.default}},components:{},props:{message:{type:Object,default:function(){}},isMine:{type:Boolean,default:!0}},watch:{message:{handler:function(e){this.setData({message:e})},immediate:!0,deep:!0}},methods:{playerHander:function(){uni.$emit("videoPlayerHandler",{isPlay:!0,message:this.message})},stopHander:function(){this.isPlay=!1}}};t.default=i},ee5c:function(e,t,n){"use strict";n.r(t);var o=n("0e90"),a=n("004c");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,"0145b45d",null,!1,o["a"],s);t["default"]=c.exports},ee8e:function(e,t,n){"use strict";n.r(t);var o=n("53ed"),a=n("2043");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},eed5:function(e,t,n){"use strict";n.r(t);var o=n("76c0"),a=n("ea04");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},efb8:function(e,t,n){"use strict";n.r(t);var o=n("0912"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},f073:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var o={basePageComponents:n("0860").default,goodsDetailSwitchComponents:n("346b").default,tradListComponent:n("576e").default},a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basePageComponents",{ref:"basePage",attrs:{loadmore:!1,apiLoadingStatus:e.apiLoadingStatus,isLoading:e.pageLoading,_i:0},on:{reload:e.reload}},[n("goodsDetailSwitchComponents",{attrs:{slot:"fixedTop",dataList:e.navItems,_i:1},on:{changeNav:e.changeNav},slot:"fixedTop"}),n("view",{slot:"body"},[n("view",{staticClass:e._$s(3,"sc","content-bg"),attrs:{_i:3}},e._l(e._$s(4,"f",{forItems:e.dataList}),(function(t,o,a,i){return n("view",{key:e._$s(4,"f",{forIndex:a,key:"4-"+i})},[n("tradListComponent",{attrs:{buttonName:e.buttonName,order:t,_i:"5-"+i}})],1)})),0)])],1)},i=[]},f084:function(e,t,n){"use strict";n.r(t);var o=n("3cee"),a=n("3366");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},f0c5:function(e,t,n){"use strict";function o(e,t,n,o,a,i,s,r,c,u){var l,d="function"===typeof e?e.options:e;if(c){d.components||(d.components={});var f=Object.prototype.hasOwnProperty;for(var p in c)f.call(c,p)&&!f.call(d.components,p)&&(d.components[p]=c[p])}if(u&&((u.beforeCreate||(u.beforeCreate=[])).unshift((function(){this[u.__module]=this})),(d.mixins||(d.mixins=[])).push(u)),t&&(d.render=t,d.staticRenderFns=n,d._compiled=!0),o&&(d.functional=!0),i&&(d._scopeId="data-v-"+i),s?(l=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},d._ssrRegister=l):a&&(l=r?function(){a.call(this,this.$root.$options.shadowRoot)}:a),l)if(d.functional){d._injectStyles=l;var g=d.render;d.render=function(e,t){return l.call(t),g(e,t)}}else{var h=d.beforeCreate;d.beforeCreate=h?[].concat(h,l):[l]}return{exports:e,options:d}}n.d(t,"a",(function(){return o}))},f1b1:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e._$s(0,"i",e.display)?n("view",{staticClass:e._$s(0,"sc","tui-cards-container"),attrs:{_i:0}},[n("view",{staticClass:e._$s(1,"sc","service-evaluation"),attrs:{_i:1}},[n("view",{staticClass:e._$s(2,"sc","header"),attrs:{_i:2}},[n("label",{staticClass:e._$s(3,"sc","header-label"),attrs:{_i:3}}),n("view",{staticClass:e._$s(4,"sc","btn-close"),attrs:{_i:4},on:{click:e.handleClose}})]),n("view",{staticClass:e._$s(5,"sc","main"),attrs:{_i:5}},[n("view",{staticClass:e._$s(6,"sc","main-evaluation-score"),attrs:{_i:6}},e._l(e._$s(7,"f",{forItems:e.scoreList}),(function(t,o,a,i){return n("image",{key:e._$s(7,"f",{forIndex:a,key:o}),staticClass:e._$s("7-"+i,"sc","score-star"),attrs:{"data-score":e._$s("7-"+i,"a-data-score",t),src:e._$s("7-"+i,"a-src","/static/static/images/star"+(t>e.score?"-grey":"")+".png"),_i:"7-"+i},on:{click:e.handleScore}})})),0),n("textarea",{staticClass:e._$s(8,"sc","main-textarea"),attrs:{_i:8},on:{input:e.bindTextAreaInput}})]),n("view",{staticClass:e._$s(9,"sc","footer"),attrs:{_i:9}},[n("view",{staticClass:e._$s(10,"sc","btn"),attrs:{disabled:e._$s(10,"a-disabled",0===e.score&&!e.comment),_i:10},on:{click:e.sendMessage}})])])]):e._e()},i=[]},f1ee:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",{staticClass:e._$s(0,"sc","uni-countdown"),attrs:{_i:0}},[e._$s(1,"i",e.showDay)?n("text",{staticClass:e._$s(1,"sc","uni-countdown__number"),style:e._$s(1,"s",e.timeStyle),attrs:{_i:1}},[e._v(e._$s(1,"t0-0",e._s(e.d)))]):e._e(),e._$s(2,"i",e.showDay)?n("text",{staticClass:e._$s(2,"sc","uni-countdown__splitor"),style:e._$s(2,"s",e.splitorStyle),attrs:{_i:2}},[e._v(e._$s(2,"t0-0",e._s(e.dayText)))]):e._e(),n("text",{staticClass:e._$s(3,"sc","uni-countdown__number"),style:e._$s(3,"s",e.timeStyle),attrs:{_i:3}},[e._v(e._$s(3,"t0-0",e._s(e.h)))]),n("text",{staticClass:e._$s(4,"sc","uni-countdown__splitor"),style:e._$s(4,"s",e.splitorStyle),attrs:{_i:4}},[e._v(e._$s(4,"t0-0",e._s(e.showColon?":":e.hourText)))]),n("text",{staticClass:e._$s(5,"sc","uni-countdown__number"),style:e._$s(5,"s",e.timeStyle),attrs:{_i:5}},[e._v(e._$s(5,"t0-0",e._s(e.i)))]),n("text",{staticClass:e._$s(6,"sc","uni-countdown__splitor"),style:e._$s(6,"s",e.splitorStyle),attrs:{_i:6}},[e._v(e._$s(6,"t0-0",e._s(e.showColon?":":e.minuteText)))]),n("text",{staticClass:e._$s(7,"sc","uni-countdown__number"),style:e._$s(7,"s",e.timeStyle),attrs:{_i:7}},[e._v(e._$s(7,"t0-0",e._s(e.s)))]),e._$s(8,"i",!e.showColon)?n("text",{staticClass:e._$s(8,"sc","uni-countdown__splitor"),style:e._$s(8,"s",e.splitorStyle),attrs:{_i:8}},[e._v(e._$s(8,"t0-0",e._s(e.secondText)))]):e._e()])},i=[]},f245:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("view",{staticClass:e._$s(0,"sc","flex-column-center"),attrs:{_i:0}},[o("image",{staticClass:e._$s(1,"sc","bg"),attrs:{src:e._$s(1,"a-src",n("6fdb")),_i:1}}),o("image",{staticClass:e._$s(2,"sc","logo"),attrs:{src:e._$s(2,"a-src",n("842c")),_i:2}}),o("view",{staticClass:e._$s(3,"sc","info-bg"),attrs:{_i:3}},[o("form",{attrs:{_i:4},on:{submit:e.submit}},[o("view",{staticClass:e._$s(5,"sc","gui-border-b"),attrs:{_i:5}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.nickname,expression:"nickname"}],staticClass:e._$s(6,"sc","gui-form-input "),attrs:{_i:6},domProps:{value:e._$s(6,"v-model",e.nickname)},on:{input:function(t){t.target.composing||(e.nickname=t.target.value)}}})]),o("view",{staticClass:e._$s(7,"sc","gui-border-b"),attrs:{_i:7}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.mobile,expression:"mobile"}],staticClass:e._$s(8,"sc","gui-form-input "),attrs:{_i:8},domProps:{value:e._$s(8,"v-model",e.mobile)},on:{input:function(t){t.target.composing||(e.mobile=t.target.value)}}})]),o("view",{staticClass:e._$s(9,"sc","gui-border-b"),attrs:{_i:9}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:e._$s(10,"sc","gui-form-input "),attrs:{_i:10},domProps:{value:e._$s(10,"v-model",e.email)},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),o("view",{staticClass:e._$s(11,"sc","gui-border-b"),attrs:{_i:11}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:e._$s(12,"sc","gui-form-input"),attrs:{_i:12},domProps:{value:e._$s(12,"v-model",e.password)},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),o("view",{staticClass:e._$s(13,"sc","gui-border-b"),attrs:{_i:13}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.payPassword,expression:"payPassword"}],staticClass:e._$s(14,"sc","gui-form-input"),attrs:{_i:14},domProps:{value:e._$s(14,"v-model",e.payPassword)},on:{input:function(t){t.target.composing||(e.payPassword=t.target.value)}}})]),o("view",{staticClass:e._$s(15,"sc","gui-border-b gui-flex gui-rows gui-nowrap gui-align-items-center"),attrs:{_i:15}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],staticClass:e._$s(16,"sc","gui-form-input"),attrs:{_i:16},domProps:{value:e._$s(16,"v-model",e.code)},on:{input:function(t){t.target.composing||(e.code=t.target.value)}}}),o("text",{staticClass:e._$s(17,"sc","sendmsg gui-block-text gui-border-l gui-text-right"),attrs:{_i:17},on:{click:e.getVCode}},[e._v(e._$s(17,"t0-0",e._s(e.vcodeBtnName)))])]),o("button",{staticClass:e._$s(18,"sc","loginbtn"),attrs:{_i:18}},[o("text",{staticClass:e._$s(19,"sc","gui-color-white gui-button-text"),attrs:{_i:19}})])])]),o("text",{staticClass:e._$s(20,"sc","regist"),attrs:{_i:20},on:{click:e.back}},[o("text",{staticClass:e._$s(21,"sc","regist-b"),attrs:{_i:21}})])])},i=[]},f2b2:function(e,t,n){"use strict";n.r(t);var o=n("6d2e"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},f44e:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",{staticClass:e._$s(0,"sc","uni-list uni-border-top-bottom"),attrs:{_i:0}},[e._$s(1,"i",e.border)?n("view",{staticClass:e._$s(1,"sc","uni-list--border-top"),attrs:{_i:1}}):e._e(),e._t("default",null,{_i:2}),e._$s(3,"i",e.border)?n("view",{staticClass:e._$s(3,"sc","uni-list--border-bottom"),attrs:{_i:3}}):e._e()],2)},i=[]},f681:function(e,t,n){"use strict";n.r(t);var o=n("47ca"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},f681c:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var o={basePageComponents:n("0860").default,goodsDetailSwitchComponents:n("346b").default,orderListComponent:n("8e0d").default,orderGuaListComponent:n("3b7f").default},a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basePageComponents",{ref:"basePage",attrs:{loadmore:!0,apiLoadingStatus:!1,isLoading:!1,_i:0},on:{reload:e.reload,loadmorefun:function(t){return e.loadmorefun()}}},[n("goodsDetailSwitchComponents",{attrs:{slot:"fixedTop",dataList:e.navItems,_i:1},on:{changeNav:e.changeNav},slot:"fixedTop"}),n("view",{slot:"body"},[e._l(e._$s(3,"f",{forItems:e.dataList}),(function(t,o,a,i){return n("orderListComponent",{key:e._$s(3,"f",{forIndex:a,key:"3-"+i}),attrs:{order:t,_i:"3-"+i}})})),e._l(e._$s(4,"f",{forItems:e.guaDataList}),(function(t,o,a,i){return e._$s("4-"+i,"i",0==e.selectedIndex)?n("orderGuaListComponent",{key:e._$s(4,"f",{forIndex:a,key:"4-"+i}),attrs:{order:t,_i:"4-"+i}}):e._e()}))],2)],1)},i=[]},f719:function(e,t,n){"use strict";n.r(t);var o=n("4c5b"),a=n("e1ae");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},f783:function(e,t,n){"use strict";n.r(t);var o=n("0b6a"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},f829:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{sellNumStr:"",sellNum:"",minMoney:"",payPassword:"",selectedPayment:[]}},props:{opay:Object,payment:Array},watch:{minMoney:function(e){this.updateSellStr()},sellNum:function(e){this.updateSellStr()},payment:function(t){var n=t;e("log",n," at components/coSellComponent/coSellComponent.vue:104");for(var o=0,a=n.length;o<a;++o){var i=n[o];this.selectedPayment.includes(i.name)?this.$set(i,"checked",!0):this.$set(i,"checked",!1)}}},methods:{updateSellStr:function(){""!=this.minMoney&&""!=this.sellNum&&(this.sellNumStr="\u51fa\u552e"+this.minMoney+"-"+this.sellNum)},open1:function(){this.$refs.guimodal1.open()},close1:function(){this.$refs.guimodal1.close()},checkboxChange:function(t){var n=this.payment,o=t.detail.value;this.selectedPayment=o,e("log",o," at components/coSellComponent/coSellComponent.vue:135");for(var a=0,i=n.length;a<i;++a){var s=n[a];o.includes(s.name)?this.$set(s,"checked",!0):this.$set(s,"checked",!1)}},confirm1:function(){var e=this;if(""!=this.payPassword){this.$refs.guimodal1.close();var t=0;this.selectedPayment.includes("\u652f\u4ed8\u5b9d")&&(t=1);var n=0;this.selectedPayment.includes("\u5fae\u4fe1")&&(n=1);var o=0;if(this.selectedPayment.includes("\u94f6\u884c\u5361")&&(o=1),this.sellNum%1==0&&this.minMoney%1==0){var a={minMoney:this.minMoney,totalMoney:this.sellNum,alipay:t,wechat:n,bank:o,side:"sell",payPassword:this.payPassword};uni.PYRequest.createPreOrder(a,(function(t){e.sellNum="",e.payPassword="",e.payType="",e.$emit("updatData")}),(function(e){}),(function(e){}))}else uni.showToast({title:"\u8bf7\u8f93\u5165\u6574\u6570\u6570\u91cf",icon:"none"})}else uni.showToast({title:"\u8bf7\u8f93\u5165\u652f\u4ed8\u5bc6\u7801",icon:"none"})},payTypeOpen:function(){0!=this.payment.length?this.$refs.guipopup3.open():uni.showModal({title:"\u63d0\u793a",content:"\u60a8\u8fd8\u6ca1\u6709\u6dfb\u52a0\u4ea4\u6613\u65b9\u5f0f\u3002",confirmText:"\u53bb\u6dfb\u52a0",success:function(t){t.confirm?uni.navigateTo({url:"../../pages/myBankCardPage/myBankCardPage"}):t.cancel&&e("log","\u7528\u6237\u70b9\u51fb\u53d6\u6d88"," at components/coSellComponent/coSellComponent.vue:221")}})},payTypeClose:function(){this.$refs.guipopup3.close()},selected:function(t){e("log",t," at components/coSellComponent/coSellComponent.vue:235"),this.payType=this.payment[t]},createPreOrder:function(){if(uni.getStorageSync("level")<1)uni.showToast({title:"\u8bf7\u5148\u5b8c\u6210\u8eab\u4efd\u8ba4\u8bc1",icon:"none",duration:2e3});else{var e="";""==this.minMoney&&(e="\u8bf7\u8f93\u5165\u6700\u5c0f\u6570\u91cf"),""==this.sellNum&&(e="\u8bf7\u8f93\u5165\u6570\u91cf"),parseInt(this.minMoney)<100&&(e="\u6700\u5c0f\u6570\u91cf\u4e0d\u80fd\u4f4e\u4e8e100"),parseInt(this.sellNum)<parseInt(this.minMoney)&&(e="\u6570\u91cf\u4e0d\u80fd\u4f4e\u4e8e\u6700\u5c0f\u6570\u91cf"),parseInt(this.sellNum)>this.opay.freeUsable&&(e="\u6570\u91cf\u4e0d\u80fd\u9ad8\u4e8e"+this.opay.freeUsable),0==this.selectedPayment.length&&(e="\u8bf7\u9009\u62e9\u8d2d\u4e70\u65b9\u5f0f"),""==e?this.open1():uni.showToast({title:e,icon:"none"})}}}};t.default=n}).call(this,n("0de9")["default"])},f896:function(e,t,n){"use strict";n.r(t);var o=n("d1c0"),a=n("efb8");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},f971:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={data:function(){return{code:"",mobile:"",password:"",countNum:60,countDownTimer:null,vcodeBtnName:"\u53d1\u9001\u9a8c\u8bc1\u7801"}},methods:{countDown:function(){if(this.countNum<1)return clearInterval(this.countDownTimer),void(this.vcodeBtnName="\u91cd\u65b0\u53d1\u9001");this.countNum--,this.vcodeBtnName=this.countNum+"\u79d2\u91cd\u53d1"},checkParams:function(){var e=/^[1][0-9]{10}$/;return e.test(this.mobile)?!(!this.password||this.password.length<8)||(uni.showToast({title:"\u8bf7\u6b63\u786e\u586b\u5199\u767b\u5f55\u5bc6\u7801",icon:"none"}),!1):(uni.showToast({title:"\u8bf7\u6b63\u786e\u586b\u5199\u624b\u673a\u53f7\u7801",icon:"none"}),!1)},sendcode:function(){var e=this;if(this.checkParams()&&("\u53d1\u9001\u9a8c\u8bc1\u7801"==this.vcodeBtnName||"\u91cd\u65b0\u53d1\u9001"==this.vcodeBtnName)){this.vcodeBtnName="\u53d1\u9001\u4e2d...";var t={mobile:this.mobile,password:this.password};uni.PYRequest.sendSmsCode(t,(function(t){uni.showToast({title:"\u77ed\u4fe1\u9a8c\u8bc1\u7801\u5df2\u53d1\u9001\uff0c\u8bf7\u6ce8\u610f\u67e5\u6536",icon:"none"}),e.countNum=60,e.countDownTimer=setInterval((function(){e.countDown()}),1e3)}),(function(t){clearInterval(e.countDownTimer),e.vcodeBtnName="\u91cd\u65b0\u53d1\u9001"}),(function(e){}))}},confirmChange:function(){if(this.checkParams()&&this.code){var e={mobile:this.mobile,password:this.password,code:this.code};uni.PYRequest.confirmChangeMobile(e,(function(e){setTimeout((function(){uni.navigateBack({})}),2e3)}),(function(e){}),(function(e){}))}}}};t.default=o},f9bd:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{opay:{},payment1:[],payment2:[],selectedIndex:0,navItems:[{id:0,name:"\u6211\u8981\u4e70"},{id:1,name:"\u6211\u8981\u5356"}]}},onShow:function(){var t=uni.graceJS.getStorage("tabIndex");0!=t&&(e("log",t," at pages/createOrderPage/createOrderPage.vue:41"),this.selectedIndex=t-1,uni.graceJS.removeStorage("tabIndex")),this.requestData(),this.getpayment()},methods:{changeNav:function(t){e("log",t," at pages/createOrderPage/createOrderPage.vue:50"),this.selectedIndex=t},requestData:function(){var e=this,t={};uni.PYRequest.allAssets(t,(function(t){t.data.length>0&&(e.opay=t.data[0])}),(function(e){}),(function(e){}))},getpayment:function(){var t=this,n={};e("log",n," at pages/createOrderPage/createOrderPage.vue:72"),uni.PYRequest.getpayment(n,(function(e){t.payment1=[],t.payment2=[];for(var n=0;n<e.data.length;n++)"alipay"==e.data[n].mode?(t.payment1.push({name:"\u652f\u4ed8\u5b9d",checked:!1}),t.payment2.push({name:"\u652f\u4ed8\u5b9d",checked:!1})):"wechat"==e.data[n].mode?(t.payment1.push({name:"\u5fae\u4fe1",checked:!1}),t.payment2.push({name:"\u5fae\u4fe1",checked:!1})):"bank"==e.data[n].mode&&(t.payment1.push({name:"\u94f6\u884c\u5361",checked:!1}),t.payment2.push({name:"\u94f6\u884c\u5361",checked:!1}))}),(function(e){}),(function(e){}))}}};t.default=n}).call(this,n("0de9")["default"])},faab:function(e,t,n){"use strict";n.r(t);var o=n("94c8"),a=n("8e51");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},fb03:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var o={guiPage:n("af38").default},a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",[n("gui-page",{ref:"guipage",attrs:{apiLoadingStatus:e.apiLoadingStatus,refresh:e.canRefresh,isLoading:e.isLoading,loadmore:e.loadmore,fullPage:!0,footerSets:{height:100,zIndex:100,bg:"linear-gradient(to bottom, #F8F8F8, #F8F8F8)"},_i:1},on:{reload:e.reload,loadmorefun:e.getdata}},[n("view",{slot:"gFixedTop"},[e._t("fixedTop",null,{_i:3})],2),n("view",{staticClass:e._$s(4,"sc","baseContent"),class:e._$s(4,"c",{gui_content:0==e.canRefresh}),attrs:{_i:4},slot:"gBody"},[e._t("body",null,{_i:5})],2)])],1)},i=[]},fb63:function(e,t,n){"use strict";n.r(t);var o=n("d659"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},fbcd:function(e,t,n){"use strict";n.r(t);var o=n("573e"),a=n("1759");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},fbe6:function(e,t,n){"use strict";n.r(t);var o=n("f681c"),a=n("09ee");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s,r=n("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},fc38:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{order:{},sellNum:"",password:"",paymentList:[],selectedPayment:"",type:""}},onLoad:function(e){this.order=JSON.parse(e.orderStr),this.type=e.type,"sell"==this.type?uni.setNavigationBarTitle({title:"\u51fa\u552e"}):uni.setNavigationBarTitle({title:"\u8d2d\u4e70"})},onShow:function(){this.getpayment()},methods:{buyall:function(){this.sellNum=this.order.remainMoney},back:function(){uni.navigateBack({})},payTypeOpen:function(){if(0!=this.paymentList.length)this.$refs.guiactionsheet.open();else{var t=[];1==this.order.alipay&&t.push("\u652f\u4ed8\u5b9d"),1==this.order.wechat&&t.push("\u5fae\u4fe1"),1==this.order.bank&&t.push("\u94f6\u884c\u5361");var n=t.toString();uni.showModal({title:"\u63d0\u793a",content:"\u8be5\u8ba2\u5355\u7684\u4ea4\u6613\u65b9\u5f0f\u4e3a\uff1a"+n+"\u3002\u60a8\u8fd8\u6ca1\u6709\u6dfb\u52a0\u8be5\u4ea4\u6613\u65b9\u5f0f\u3002",confirmText:"\u53bb\u6dfb\u52a0",success:function(t){t.confirm?uni.navigateTo({url:"../myBankCardPage/myBankCardPage"}):t.cancel&&e("log","\u7528\u6237\u70b9\u51fb\u53d6\u6d88"," at pages/buyPage/buyPage.vue:144")}})}},selected:function(t){e("log",t," at pages/buyPage/buyPage.vue:156"),this.selectedPayment=this.paymentList[t]},getpayment:function(){var t=this,n={};e("log",n," at pages/buyPage/buyPage.vue:164"),uni.PYRequest.getpayment(n,(function(e){t.paymentList=[];for(var n=0;n<e.data.length;n++)"alipay"==e.data[n].mode&&1==t.order.alipay?t.paymentList.push("\u652f\u4ed8\u5b9d"):"wechat"==e.data[n].mode&&1==t.order.wechat?t.paymentList.push("\u5fae\u4fe1"):"bank"==e.data[n].mode&&1==t.order.bank&&t.paymentList.push("\u94f6\u884c\u5361")}),(function(e){}),(function(e){}))},orderTrade:function(){if(""!=this.sellNum)if(""!=this.selectedPayment){var t="";if("\u652f\u4ed8\u5b9d"==this.selectedPayment?t="alipay":"\u5fae\u4fe1"==this.selectedPayment?t="wechat":"\u94f6\u884c\u5361"==this.selectedPayment&&(t="bank"),this.sellNum%1==0){var n={amount:this.sellNum,side:this.type,preorderId:this.order.id,payMode:t};e("log",n," at pages/buyPage/buyPage.vue:226"),uni.PYRequest.orderTrade(n,(function(t){uni.showToast({icon:"success",title:"\u4e0b\u5355\u6210\u529f"}),e("log","\u8ba2\u5355ID"+t.data.id," at pages/buyPage/buyPage.vue:232"),setTimeout((function(){uni.redirectTo({url:"/pages/orderPage/orderDetailPage2?orderId="+t.data.id})}),2e3)}),(function(e){}),(function(e){}))}else uni.showToast({title:"\u8bf7\u8f93\u5165\u6574\u6570\u6570\u91cf",icon:"none"})}else uni.showToast({title:"\u8bf7\u9009\u62e9\u652f\u4ed8\u65b9\u5f0f",icon:"none"});else uni.showToast({title:"\u8bf7\u8f93\u5165\u8d2d\u4e70\u6570\u91cf",icon:"none"})}}};t.default=n}).call(this,n("0de9")["default"])},fe07:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.Behavior=Ee,t.Component=De,t.Page=ke,t.nextTick=t.default=void 0;var o,a=i(n("8bbf"));function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){return f(e)||d(e,t)||u(e,t)||c()}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){if(e){if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function d(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],o=!0,a=!1,i=void 0;try{for(var s,r=e[Symbol.iterator]();!(o=(s=r.next()).done);o=!0)if(n.push(s.value),t&&n.length===t)break}catch(c){a=!0,i=c}finally{try{o||null==r["return"]||r["return"]()}finally{if(a)throw i}}return n}}function f(e){if(Array.isArray(e))return e}function p(e,t){e&&(t.mpOptions.data=e)}function g(t){t.components=e.__wxVueOptions.components}var h=Object.prototype.toString,m=Object.prototype.hasOwnProperty;function _(e){return"function"===typeof e}function v(e){return"[object Object]"===h.call(e)}function y(e,t){return m.call(e,t)}function M(){}function C(e){var t=Object.create(null);return function(n){var o=t[n];return o||(t[n]=e(n))}}var w=/-(\w)/g,I=C((function(e){return e.replace(w,(function(e,t){return t?t.toUpperCase():""}))})),b="__data__",T={created:"onServiceCreated",attached:"onServiceAttached",ready:"mounted",moved:"moved",detached:"destroyed"},k=Object.keys(T),S={show:"onPageShow",hide:"onPageHide",resize:"onPageResize"},D=Object.keys(S),E=["onLoad","onShow","onReady","onHide","onUnload","onPullDownRefresh","onReachBottom","onShareAppMessage","onPageScroll","onResize","onTabItemTap"];function A(e,t){var n=Object.create(null);Object.keys(e).forEach((function(t){var o=e[t];_(o)&&-1===E.indexOf(t)&&(n[t]=o)})),t.methods=n}function N(e,t){Object.keys(e).forEach((function(n){-1!==E.indexOf(n)&&(t[n]=e[n])}))}function O(e){var t={mixins:[],mpOptions:{}};return g(t),p(e.data,t),A(e,t),N(e,t),t}function P(e,t){e&&(t.mpOptions.properties=e)}function L(e,t){e&&(t.mpOptions.options=e)}function R(e,t){e&&(e.$emit&&(console.warn('Method "$emit" conflicts with an existing Vue instance method'),delete e.$emit),t.methods=e)}function x(e,t){k.forEach((function(n){y(e,n)&&(t[T[n]]||(t[T[n]]=[])).push(e[n])}))}var G={"wx://form-field":{},"wx://component-export":{}};function $(e){var t=e.behaviors,n=e.definitionFilter,o=[];if(Array.isArray(t)&&t.forEach((function(t){t="string"===typeof t?G[t]:t,t.definitionFilter&&(o.push(t.definitionFilter),t.definitionFilter.call(null,e,[]))})),_(n))return function(e){n(e,o)}}function U(e,t){$(e)}function F(e){var t=e.data,n=e.methods,o=e.behaviors,a=e.properties,i={watch:{},mpOptions:{mpObservers:[]}};return p(t,i),R(n,i),j(o,i),P(a,i),x(e,i),U(e),i}var B={"wx://form-field":{beforeCreate:function(){var e=this.$options.mpOptions;e.properties||(e.properties=Object.create(null));var t=e.properties;y(t,"name")||(t.name={type:String}),y(t,"value")||(t.value={type:String})}}};function j(e,t){e&&e.forEach((function(e){"string"===typeof e?B[e]&&t.mixins.push(B[e]):t.mixins.push(F(e))}))}function q(e){return e.split(".")}function H(e){return e.split(",").map((function(e){return q(e)}))}function V(e,t){if(e){var n=t.mpOptions.mpObservers;Object.keys(e).forEach((function(t){n.push({paths:H(t),observer:e[t]})}))}}function K(e,t){0===t.indexOf("/")&&(e="");var n=e.split("/"),o=t.split("/");n.pop();while(o.length){var a=o.shift();""!==a&&"."!==a&&(".."!==a?n.push(a):n.pop())}return n.join("/")}function z(t,n){t&&(Object.keys(t).forEach((function(n){var o=t[n];o.name=n,o.target=o.target?String(o.target):K(e.__wxRoute,n)})),n.mpOptions.relations=t)}function W(e,t){e&&(Array.isArray(e)||(e=[e]),t.mpOptions.externalClasses=e,t.mpOptions.properties||(t.mpOptions.properties=Object.create(null)),e.forEach((function(e){t.mpOptions.properties[I(e)]={type:String,value:""}})))}function Y(e,t){e&&x(e,t)}function J(e,t){e&&D.forEach((function(n){var o=e[n];_(o)&&(t[S[n]]=o)}))}function X(e){var t=e.data,n=e.options,o=e.methods,a=e.behaviors,i=e.lifetimes,s=e.observers,r=e.relations,c=e.properties,u=e.pageLifetimes,l=e.externalClasses,d={mixins:[],props:{},watch:{},mpOptions:{mpObservers:[]}};return g(d),p(t,d),L(n,d),R(o,d),j(a,d),Y(i,d),V(s,d),z(r,d),P(c,d),J(u,d),W(l,d),x(e,d),U(e),d}function Q(e,t,n,o){if(t){var a="_$".concat(e,"Handlers");(o[a]||(o[a]=[])).push((function(){t.call(o,n)}))}}function Z(e,t,n){var o="linked",a=e.name,i=n._$relationNodes||(n._$relationNodes=Object.create(null));(i[a]||(i[a]=[])).push(t),Q(o,e[o],t,n)}function ee(e,t,n){var o="unlinked";Q(o,e[o],t,n)}function te(e,t,n){var o=e&&e.$options.mpOptions&&e.$options.mpOptions.relations;if(!o)return[];var a=Object.keys(o).find((function(e){var a=o[e];return a.target===t&&a.type===n}));return a?[o[a],e]:[]}function ne(e,t,n){var o=n(e,e.$options.mpOptions.path),a=r(o,2),i=a[0],s=a[1];i&&(Z(i,e,s),Z(t,s,e),ee(i,e,s),ee(t,s,e))}function oe(e,t){var n=e.type;"parent"===n?ne(t,e,(function(e,t){return te(e.$parent,t,"child")})):"ancestor"===n&&ne(t,e,(function(e,t){var n=e.$parent;while(n){var o=te(n,t,"descendant");if(o.length)return o;n=n.$parent}return[]}))}function ae(e){var t=e.$options.mpOptions||{},n=t.relations;n&&Object.keys(n).forEach((function(t){oe(n[t],e)}))}function ie(e,t){var n=e["_$".concat(t,"Handlers")];n&&n.forEach((function(e){return e()}))}var se={enumerable:!0,configurable:!0,get:M,set:M};function re(e,t,n){se.get=function(){return this[t][n]},se.set=function(e){this[t][n]=e},Object.defineProperty(e,n,se)}function ce(e,t,n){var o=e.replace(/\[(\d+?)\]/g,".$1").split(".");return o.reduce((function(e,n,a){if(a!==o.length-1)return"undefined"===typeof e[n]&&(e[n]={}),e[n];e[n]=t}),n),1===o.length}function ue(e,t){var n=this;v(e)&&(Object.keys(e).forEach((function(t){ce(t,e[t],n.data)&&!y(n,t)&&re(n,b,t)})),this.$forceUpdate(),_(t)&&this.$nextTick(t))}var le=Object.prototype.toString,de=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,o=le.call(n);if("[object Array]"===o)return t=n.slice(0),t;if("[object Object]"===o){for(var a in n)t[a]=e(t[a],n[a]);return t}if("[object Date]"===o)return new Date(n.getTime());if("[object RegExp]"===o){var i=String(n),s=i.lastIndexOf("/");return new RegExp(i.slice(1,s),i.slice(s+1))}return n},fe=function(e){return de("[object Array]"===le.call(e)?[]:{},e)},pe=(o={},s(o,String,""),s(o,Number,0),s(o,Boolean,!1),s(o,Object,null),s(o,Array,[]),s(o,null,null),o);function ge(e){return pe[e]}function he(e){return v(e)?y(e,"value")?e.value:ge(e.type):ge(e)}function me(e){return v(e)?e.type:e}function _e(e,t,n,o){var a=n[e];if(void 0!==a){var i=t[e],s=me(i);a=ve(a,s);var r=i&&i.observer;return r&&setTimeout((function(){ye(r,o,a)}),4),a}return he(t[e])}function ve(e,t){return t===Boolean?!!e:t===String?String(e):e}function ye(e,t,n,o){try{"function"===typeof e?e.call(t,n,o):"string"===typeof e&&"function"===typeof t[e]&&t[e](n,o)}catch(a){console.error("execute observer ".concat(e," callback fail! err: ").concat(a))}}function Me(e,t){var n=e.$options.mpOptions.properties;if(n){var o=fe(e.$options.propsData)||{},a=function(a){var i=!!v(n[a])&&n[a].observer,s=_e(a,n,o,e);Object.defineProperty(t,a,{enumerable:!0,configurable:!0,get:function(){return s},set:function(t){var n=s;t===s||t!==t&&s!==s||(s=Array.isArray(t)?t.slice(0):t,i&&ye(i,e,t,n),e.$forceUpdate())}})};for(var i in n)a(i)}}function Ce(e){var t=e.$options.mpOptions&&e.$options.mpOptions.properties,n=e.$options.propsData;n&&t&&Object.keys(t).forEach((function(o){y(n,o)&&(e[o]=ve(n[o],me(t[o])))}))}function we(e){var t=JSON.parse(JSON.stringify(e.$options.mpOptions.data||{}));e[b]=t;var n={get:function(){return e[b]},set:function(t){e[b]=t}};Object.defineProperties(e,{data:n,properties:n}),e.setData=ue,Me(e,t),Object.keys(t).forEach((function(t){re(e,b,t)}))}function Ie(e){var t=e.$emit;e.triggerEvent=function(n,o,a){var i={dataset:e.$el.dataset},s={target:i,currentTarget:i,detail:o,preventDefault:M,stopPropagation:M};t.call(e,n,s)},e.$emit=function(){e.triggerEvent.apply(e,arguments)},e.getRelationNodes=function(t){return(e._$relationNodes&&e._$relationNodes[t]||[]).filter((function(e){return!e._isDestroyed}))},e._$updateProperties=Ce}function be(e){var t=e.$options.watch;t&&Object.keys(t).forEach((function(n){var o=t[n];if(o.mounted){var a=e[n],i=o.handler;"string"===typeof i&&(i=e[i]),i&&i.call(e,a,a)}}))}var Te={beforeCreate:function(){this._renderProxy=this,this._$self=this,this._$noop=M},created:function(){we(this),Ie(this),ae(this)},mounted:function(){be(this)},destroyed:function(){ie(this,"unlinked")}};function ke(t){var n=O(t);n.mixins.unshift(Te),n.mpOptions.path=e.__wxRoute,e.__wxComponents[e.__wxRoute]=n}function Se(e){e.onServiceAttached||(e.onServiceAttached=[]),e.onServiceAttached.push((function(){ie(this,"linked")}))}function De(t){var n=X(t);n.mixins.unshift(Te),n.mpOptions.path=e.__wxRoute,Se(n),e.__wxComponents[e.__wxRoute]=n}function Ee(e){return e}e.__wxRoute="",e.__wxComponents=Object.create(null),e.__wxVueOptions=Object.create(null);var Ae=a.default.nextTick;t.nextTick=Ae;var Ne=uni.__$wx__,Oe=Ne;t.default=Oe}).call(this,n("c8ba"))},fe65:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",{staticClass:e._$s(0,"sc","flex-column-center"),attrs:{_i:0}},[n("view",{staticClass:e._$s(1,"sc","pwdtext flex-row-between flex-row-center"),attrs:{_i:1}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.oldPassword,expression:"oldPassword"}],attrs:{_i:2},domProps:{value:e._$s(2,"v-model",e.oldPassword)},on:{input:function(t){t.target.composing||(e.oldPassword=t.target.value)}}})]),n("view",{staticClass:e._$s(3,"sc","pwdtext flex-row-between flex-row-center"),attrs:{_i:3}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.newPassword,expression:"newPassword"}],attrs:{_i:4},domProps:{value:e._$s(4,"v-model",e.newPassword)},on:{input:function(t){t.target.composing||(e.newPassword=t.target.value)}}})]),n("view",{staticClass:e._$s(5,"sc","pwdtext flex-row-between flex-row-center"),attrs:{_i:5}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.newPassword2,expression:"newPassword2"}],attrs:{_i:6},domProps:{value:e._$s(6,"v-model",e.newPassword2)},on:{input:function(t){t.target.composing||(e.newPassword2=t.target.value)}}})]),n("view",{staticClass:e._$s(7,"sc","flex-row-center"),attrs:{_i:7}},[n("view",{staticClass:e._$s(8,"sc","submitBtn"),attrs:{_i:8},on:{click:function(t){return e.confirmChange()}}})])])},i=[]}},[["83d9","app-config"]]]);